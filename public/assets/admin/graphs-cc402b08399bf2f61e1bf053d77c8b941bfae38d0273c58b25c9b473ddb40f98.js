/* Javascript plotting library for jQuery, version 0.8.3.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

*/
!function(t){t.color={},t.color.make=function(e,i,n,r){var s={};return s.r=e||0,s.g=i||0,s.b=n||0,s.a=null!=r?r:1,s.add=function(t,e){for(var i=0;i<t.length;++i)s[t.charAt(i)]+=e;return s.normalize()},s.scale=function(t,e){for(var i=0;i<t.length;++i)s[t.charAt(i)]*=e;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function t(t,e,i){return t>e?t:e>i?i:e}return s.r=t(0,parseInt(s.r),255),s.g=t(0,parseInt(s.g),255),s.b=t(0,parseInt(s.b),255),s.a=t(0,s.a,1),s},s.clone=function(){return t.color.make(s.r,s.b,s.g,s.a)},s.normalize()},t.color.extract=function(e,i){var n;do{if(n=e.css(i).toLowerCase(),""!=n&&"transparent"!=n)break;e=e.parent()}while(e.length&&!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),t.color.parse(n)},t.color.parse=function(i){var n,r=t.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return r(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return r(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return r(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return r(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return r(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return r(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var s=t.trim(i).toLowerCase();return"transparent"==s?r(255,255,255,0):(n=e[s]||[0,0,0],r(n[0],n[1],n[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,i){var n=i.children("."+e)[0];if(null==n&&(n=document.createElement("canvas"),n.className=e,t(n).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!n.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");n=window.G_vmlCanvasManager.initElement(n)}this.element=n;var r=this.context=n.getContext("2d"),s=window.devicePixelRatio||1,a=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;this.pixelRatio=s/a,this.resize(i.width(),i.height()),this.textContainer=null,this.text={},this._textCache={}}function i(i,r,s,a){function o(t,e){e=[mt].concat(e);for(var i=0;i<t.length;++i)t[i].apply(this,e)}function l(){for(var i={Canvas:e},n=0;n<a.length;++n){var r=a[n];r.init(mt,i),r.options&&t.extend(!0,rt,r.options)}}function h(e){t.extend(!0,rt,e),e&&e.colors&&(rt.colors=e.colors),null==rt.xaxis.color&&(rt.xaxis.color=t.color.parse(rt.grid.color).scale("a",.22).toString()),null==rt.yaxis.color&&(rt.yaxis.color=t.color.parse(rt.grid.color).scale("a",.22).toString()),null==rt.xaxis.tickColor&&(rt.xaxis.tickColor=rt.grid.tickColor||rt.xaxis.color),null==rt.yaxis.tickColor&&(rt.yaxis.tickColor=rt.grid.tickColor||rt.yaxis.color),null==rt.grid.borderColor&&(rt.grid.borderColor=rt.grid.color),null==rt.grid.tickColor&&(rt.grid.tickColor=t.color.parse(rt.grid.color).scale("a",.22).toString());var n,r,s,a=i.css("font-size"),l=a?+a.replace("px",""):13,h={style:i.css("font-style"),size:Math.round(.8*l),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")};for(s=rt.xaxes.length||1,n=0;s>n;++n)r=rt.xaxes[n],r&&!r.tickColor&&(r.tickColor=r.color),r=t.extend(!0,{},rt.xaxis,r),rt.xaxes[n]=r,r.font&&(r.font=t.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));for(s=rt.yaxes.length||1,n=0;s>n;++n)r=rt.yaxes[n],r&&!r.tickColor&&(r.tickColor=r.color),r=t.extend(!0,{},rt.yaxis,r),rt.yaxes[n]=r,r.font&&(r.font=t.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));for(rt.xaxis.noTicks&&null==rt.xaxis.ticks&&(rt.xaxis.ticks=rt.xaxis.noTicks),rt.yaxis.noTicks&&null==rt.yaxis.ticks&&(rt.yaxis.ticks=rt.yaxis.noTicks),rt.x2axis&&(rt.xaxes[1]=t.extend(!0,{},rt.xaxis,rt.x2axis),rt.xaxes[1].position="top",null==rt.x2axis.min&&(rt.xaxes[1].min=null),null==rt.x2axis.max&&(rt.xaxes[1].max=null)),rt.y2axis&&(rt.yaxes[1]=t.extend(!0,{},rt.yaxis,rt.y2axis),rt.yaxes[1].position="right",null==rt.y2axis.min&&(rt.yaxes[1].min=null),null==rt.y2axis.max&&(rt.yaxes[1].max=null)),rt.grid.coloredAreas&&(rt.grid.markings=rt.grid.coloredAreas),rt.grid.coloredAreasColor&&(rt.grid.markingsColor=rt.grid.coloredAreasColor),rt.lines&&t.extend(!0,rt.series.lines,rt.lines),rt.points&&t.extend(!0,rt.series.points,rt.points),rt.bars&&t.extend(!0,rt.series.bars,rt.bars),null!=rt.shadowSize&&(rt.series.shadowSize=rt.shadowSize),null!=rt.highlightColor&&(rt.series.highlightColor=rt.highlightColor),n=0;n<rt.xaxes.length;++n)m(ct,n+1).options=rt.xaxes[n];for(n=0;n<rt.yaxes.length;++n)m(ut,n+1).options=rt.yaxes[n];for(var c in gt)rt.hooks[c]&&rt.hooks[c].length&&(gt[c]=gt[c].concat(rt.hooks[c]));o(gt.processOptions,[rt])}function c(t){nt=u(t),v(),y()}function u(e){for(var i=[],n=0;n<e.length;++n){var r=t.extend(!0,{},rt.series);null!=e[n].data?(r.data=e[n].data,delete e[n].data,t.extend(!0,r,e[n]),e[n].data=r.data):r.data=e[n],i.push(r)}return i}function d(t,e){var i=t[e+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function f(){return t.grep(ct.concat(ut),function(t){return t})}function p(t){var e,i,n={};for(e=0;e<ct.length;++e)i=ct[e],i&&i.used&&(n["x"+i.n]=i.c2p(t.left));for(e=0;e<ut.length;++e)i=ut[e],i&&i.used&&(n["y"+i.n]=i.c2p(t.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function g(t){var e,i,n,r={};for(e=0;e<ct.length;++e)if(i=ct[e],i&&i.used&&(n="x"+i.n,null==t[n]&&1==i.n&&(n="x"),null!=t[n])){r.left=i.p2c(t[n]);break}for(e=0;e<ut.length;++e)if(i=ut[e],i&&i.used&&(n="y"+i.n,null==t[n]&&1==i.n&&(n="y"),null!=t[n])){r.top=i.p2c(t[n]);break}return r}function m(e,i){return e[i-1]||(e[i-1]={n:i,direction:e==ct?"x":"y",options:t.extend(!0,{},e==ct?rt.xaxis:rt.yaxis)}),e[i-1]}function v(){var e,i=nt.length,n=-1;for(e=0;e<nt.length;++e){var r=nt[e].color;null!=r&&(i--,"number"==typeof r&&r>n&&(n=r))}n>=i&&(i=n+1);var s,a=[],o=rt.colors,l=o.length,h=0;for(e=0;i>e;e++)s=t.color.parse(o[e%l]||"#666"),e%l==0&&e&&(h=h>=0?.5>h?-h-.2:0:-h),a[e]=s.scale("rgb",1+h);var c,u=0;for(e=0;e<nt.length;++e){if(c=nt[e],null==c.color?(c.color=a[u].toString(),++u):"number"==typeof c.color&&(c.color=a[c.color].toString()),null==c.lines.show){var f,p=!0;for(f in c)if(c[f]&&c[f].show){p=!1;break}p&&(c.lines.show=!0)}null==c.lines.zero&&(c.lines.zero=!!c.lines.fill),c.xaxis=m(ct,d(c,"x")),c.yaxis=m(ut,d(c,"y"))}}function y(){function e(t,e,i){e<t.datamin&&e!=-y&&(t.datamin=e),i>t.datamax&&i!=y&&(t.datamax=i)}var i,n,r,s,a,l,h,c,u,d,p,g,m=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=Number.MAX_VALUE;for(t.each(f(),function(t,e){e.datamin=m,e.datamax=v,e.used=!1}),i=0;i<nt.length;++i)a=nt[i],a.datapoints={points:[]},o(gt.processRawData,[a,a.data,a.datapoints]);for(i=0;i<nt.length;++i){if(a=nt[i],p=a.data,g=a.datapoints.format,!g){if(g=[],g.push({x:!0,number:!0,required:!0}),g.push({y:!0,number:!0,required:!0}),a.bars.show||a.lines.show&&a.lines.fill){var x=!!(a.bars.show&&a.bars.zero||a.lines.show&&a.lines.zero);g.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:x}),a.bars.horizontal&&(delete g[g.length-1].y,g[g.length-1].x=!0)}a.datapoints.format=g}if(null==a.datapoints.pointsize){a.datapoints.pointsize=g.length,h=a.datapoints.pointsize,l=a.datapoints.points;var b=a.lines.show&&a.lines.steps;for(a.xaxis.used=a.yaxis.used=!0,n=r=0;n<p.length;++n,r+=h){d=p[n];var w=null==d;if(!w)for(s=0;h>s;++s)c=d[s],u=g[s],u&&(u.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=y:c==-(1/0)&&(c=-y)),null==c&&(u.required&&(w=!0),null!=u.defaultValue&&(c=u.defaultValue))),l[r+s]=c;if(w)for(s=0;h>s;++s)c=l[r+s],null!=c&&(u=g[s],u.autoscale!==!1&&(u.x&&e(a.xaxis,c,c),u.y&&e(a.yaxis,c,c))),l[r+s]=null;else if(b&&r>0&&null!=l[r-h]&&l[r-h]!=l[r]&&l[r-h+1]!=l[r+1]){for(s=0;h>s;++s)l[r+h+s]=l[r+s];l[r+1]=l[r-h+1],r+=h}}}}for(i=0;i<nt.length;++i)a=nt[i],o(gt.processDatapoints,[a,a.datapoints]);for(i=0;i<nt.length;++i){a=nt[i],l=a.datapoints.points,h=a.datapoints.pointsize,g=a.datapoints.format;var _=m,k=m,C=v,M=v;for(n=0;n<l.length;n+=h)if(null!=l[n])for(s=0;h>s;++s)c=l[n+s],u=g[s],u&&u.autoscale!==!1&&c!=y&&c!=-y&&(u.x&&(_>c&&(_=c),c>C&&(C=c)),u.y&&(k>c&&(k=c),c>M&&(M=c)));if(a.bars.show){var S;switch(a.bars.align){case"left":S=0;break;case"right":S=-a.bars.barWidth;break;default:S=-a.bars.barWidth/2}a.bars.horizontal?(k+=S,M+=S+a.bars.barWidth):(_+=S,C+=S+a.bars.barWidth)}e(a.xaxis,_,C),e(a.yaxis,k,M)}t.each(f(),function(t,e){e.datamin==m&&(e.datamin=null),e.datamax==v&&(e.datamax=null)})}function x(){i.css("padding",0).children().filter(function(){return!t(this).hasClass("flot-overlay")&&!t(this).hasClass("flot-base")}).remove(),"static"==i.css("position")&&i.css("position","relative"),st=new e("flot-base",i),at=new e("flot-overlay",i),lt=st.context,ht=at.context,ot=t(at.element).unbind();var n=i.data("plot");n&&(n.shutdown(),at.clear()),i.data("plot",mt)}function b(){rt.grid.hoverable&&(ot.mousemove(q),ot.bind("mouseleave",U)),rt.grid.clickable&&ot.click(V),o(gt.bindEvents,[ot])}function w(){yt&&clearTimeout(yt),ot.unbind("mousemove",q),ot.unbind("mouseleave",U),ot.unbind("click",V),o(gt.shutdown,[ot])}function _(t){function e(t){return t}var i,n,r=t.options.transform||e,s=t.options.inverseTransform;"x"==t.direction?(i=t.scale=ft/Math.abs(r(t.max)-r(t.min)),n=Math.min(r(t.max),r(t.min))):(i=t.scale=pt/Math.abs(r(t.max)-r(t.min)),i=-i,n=Math.max(r(t.max),r(t.min))),r==e?t.p2c=function(t){return(t-n)*i}:t.p2c=function(t){return(r(t)-n)*i},s?t.c2p=function(t){return s(n+t/i)}:t.c2p=function(t){return n+t/i}}function k(t){for(var e=t.options,i=t.ticks||[],n=e.labelWidth||0,r=e.labelHeight||0,s=n||("x"==t.direction?Math.floor(st.width/(i.length||1)):null),a=t.direction+"Axis "+t.direction+t.n+"Axis",o="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+a,l=e.font||"flot-tick-label tickLabel",h=0;h<i.length;++h){var c=i[h];if(c.label){var u=st.getTextInfo(o,c.label,l,null,s);n=Math.max(n,u.width),r=Math.max(r,u.height)}}t.labelWidth=e.labelWidth||n,t.labelHeight=e.labelHeight||r}function C(e){var i=e.labelWidth,n=e.labelHeight,r=e.options.position,s="x"===e.direction,a=e.options.tickLength,o=rt.grid.axisMargin,l=rt.grid.labelMargin,h=!0,c=!0,u=!0,d=!1;t.each(s?ct:ut,function(t,i){i&&(i.show||i.reserveSpace)&&(i===e?d=!0:i.options.position===r&&(d?c=!1:h=!1),d||(u=!1))}),c&&(o=0),null==a&&(a=u?"full":5),isNaN(+a)||(l+=+a),s?(n+=l,"bottom"==r?(dt.bottom+=n+o,e.box={top:st.height-dt.bottom,height:n}):(e.box={top:dt.top+o,height:n},dt.top+=n+o)):(i+=l,"left"==r?(e.box={left:dt.left+o,width:i},dt.left+=i+o):(dt.right+=i+o,e.box={left:st.width-dt.right,width:i})),e.position=r,e.tickLength=a,e.box.padding=l,e.innermost=h}function M(t){"x"==t.direction?(t.box.left=dt.left-t.labelWidth/2,t.box.width=st.width-dt.left-dt.right+t.labelWidth):(t.box.top=dt.top-t.labelHeight/2,t.box.height=st.height-dt.bottom-dt.top+t.labelHeight)}function S(){var e,i=rt.grid.minBorderMargin;if(null==i)for(i=0,e=0;e<nt.length;++e)i=Math.max(i,2*(nt[e].points.radius+nt[e].points.lineWidth/2));var n={left:i,right:i,top:i,bottom:i};t.each(f(),function(t,e){e.reserveSpace&&e.ticks&&e.ticks.length&&("x"===e.direction?(n.left=Math.max(n.left,e.labelWidth/2),n.right=Math.max(n.right,e.labelWidth/2)):(n.bottom=Math.max(n.bottom,e.labelHeight/2),n.top=Math.max(n.top,e.labelHeight/2)))}),dt.left=Math.ceil(Math.max(n.left,dt.left)),dt.right=Math.ceil(Math.max(n.right,dt.right)),dt.top=Math.ceil(Math.max(n.top,dt.top)),dt.bottom=Math.ceil(Math.max(n.bottom,dt.bottom))}function T(){var e,i=f(),n=rt.grid.show;for(var r in dt){var s=rt.grid.margin||0;dt[r]="number"==typeof s?s:s[r]||0}o(gt.processOffset,[dt]);for(var r in dt)"object"==typeof rt.grid.borderWidth?dt[r]+=n?rt.grid.borderWidth[r]:0:dt[r]+=n?rt.grid.borderWidth:0;if(t.each(i,function(t,e){var i=e.options;e.show=null==i.show?e.used:i.show,e.reserveSpace=null==i.reserveSpace?e.show:i.reserveSpace,D(e)}),n){var a=t.grep(i,function(t){return t.show||t.reserveSpace});for(t.each(a,function(t,e){A(e),E(e),P(e,e.ticks),k(e)}),e=a.length-1;e>=0;--e)C(a[e]);S(),t.each(a,function(t,e){M(e)})}ft=st.width-dt.left-dt.right,pt=st.height-dt.bottom-dt.top,t.each(i,function(t,e){_(e)}),n&&R(),$()}function D(t){var e=t.options,i=+(null!=e.min?e.min:t.datamin),n=+(null!=e.max?e.max:t.datamax),r=n-i;if(0==r){var s=0==n?1:.01;null==e.min&&(i-=s),null!=e.max&&null==e.min||(n+=s)}else{var a=e.autoscaleMargin;null!=a&&(null==e.min&&(i-=r*a,0>i&&null!=t.datamin&&t.datamin>=0&&(i=0)),null==e.max&&(n+=r*a,n>0&&null!=t.datamax&&t.datamax<=0&&(n=0)))}t.min=i,t.max=n}function A(e){var i,r=e.options;i="number"==typeof r.ticks&&r.ticks>0?r.ticks:.3*Math.sqrt("x"==e.direction?st.width:st.height);var s=(e.max-e.min)/i,a=-Math.floor(Math.log(s)/Math.LN10),o=r.tickDecimals;null!=o&&a>o&&(a=o);var l,h=Math.pow(10,-a),c=s/h;if(1.5>c?l=1:3>c?(l=2,c>2.25&&(null==o||o>=a+1)&&(l=2.5,++a)):l=7.5>c?5:10,l*=h,null!=r.minTickSize&&l<r.minTickSize&&(l=r.minTickSize),e.delta=s,e.tickDecimals=Math.max(0,null!=o?o:a),e.tickSize=r.tickSize||l,"time"==r.mode&&!e.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(e.tickGenerator||(e.tickGenerator=function(t){var e,i=[],r=n(t.min,t.tickSize),s=0,a=Number.NaN;do e=a,a=r+s*t.tickSize,i.push(a),++s;while(a<t.max&&a!=e);return i},e.tickFormatter=function(t,e){var i=e.tickDecimals?Math.pow(10,e.tickDecimals):1,n=""+Math.round(t*i)/i;if(null!=e.tickDecimals){var r=n.indexOf("."),s=-1==r?0:n.length-r-1;if(s<e.tickDecimals)return(s?n:n+".")+(""+i).substr(1,e.tickDecimals-s)}return n}),t.isFunction(r.tickFormatter)&&(e.tickFormatter=function(t,e){return""+r.tickFormatter(t,e)}),null!=r.alignTicksWithAxis){var u=("x"==e.direction?ct:ut)[r.alignTicksWithAxis-1];if(u&&u.used&&u!=e){var d=e.tickGenerator(e);if(d.length>0&&(null==r.min&&(e.min=Math.min(e.min,d[0])),null==r.max&&d.length>1&&(e.max=Math.max(e.max,d[d.length-1]))),e.tickGenerator=function(t){var e,i,n=[];for(i=0;i<u.ticks.length;++i)e=(u.ticks[i].v-u.min)/(u.max-u.min),e=t.min+e*(t.max-t.min),n.push(e);return n},!e.mode&&null==r.tickDecimals){var f=Math.max(0,-Math.floor(Math.log(e.delta)/Math.LN10)+1),p=e.tickGenerator(e);p.length>1&&/\..*0$/.test((p[1]-p[0]).toFixed(f))||(e.tickDecimals=f)}}}}function E(e){var i=e.options.ticks,n=[];null==i||"number"==typeof i&&i>0?n=e.tickGenerator(e):i&&(n=t.isFunction(i)?i(e):i);var r,s;for(e.ticks=[],r=0;r<n.length;++r){var a=null,o=n[r];"object"==typeof o?(s=+o[0],o.length>1&&(a=o[1])):s=+o,null==a&&(a=e.tickFormatter(s,e)),isNaN(s)||e.ticks.push({v:s,label:a})}}function P(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function L(){st.clear(),o(gt.drawBackground,[lt]);var t=rt.grid;t.show&&t.backgroundColor&&I(),t.show&&!t.aboveData&&z();for(var e=0;e<nt.length;++e)o(gt.drawSeries,[lt,nt[e]]),O(nt[e]);o(gt.draw,[lt]),t.show&&t.aboveData&&z(),st.render(),G()}function F(t,e){for(var i,n,r,s,a=f(),o=0;o<a.length;++o)if(i=a[o],i.direction==e&&(s=e+i.n+"axis",t[s]||1!=i.n||(s=e+"axis"),t[s])){n=t[s].from,r=t[s].to;break}if(t[s]||(i="x"==e?ct[0]:ut[0],n=t[e+"1"],r=t[e+"2"]),null!=n&&null!=r&&n>r){var l=n;n=r,r=l}return{from:n,to:r,axis:i}}function I(){lt.save(),lt.translate(dt.left,dt.top),lt.fillStyle=it(rt.grid.backgroundColor,pt,0,"rgba(255, 255, 255, 0)"),lt.fillRect(0,0,ft,pt),lt.restore()}function z(){var e,i,n,r;lt.save(),lt.translate(dt.left,dt.top);var s=rt.grid.markings;if(s)for(t.isFunction(s)&&(i=mt.getAxes(),i.xmin=i.xaxis.min,i.xmax=i.xaxis.max,i.ymin=i.yaxis.min,i.ymax=i.yaxis.max,s=s(i)),e=0;e<s.length;++e){var a=s[e],o=F(a,"x"),l=F(a,"y");if(null==o.from&&(o.from=o.axis.min),null==o.to&&(o.to=o.axis.max),null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),!(o.to<o.axis.min||o.from>o.axis.max||l.to<l.axis.min||l.from>l.axis.max)){o.from=Math.max(o.from,o.axis.min),o.to=Math.min(o.to,o.axis.max),l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max);var h=o.from===o.to,c=l.from===l.to;if(!h||!c)if(o.from=Math.floor(o.axis.p2c(o.from)),o.to=Math.floor(o.axis.p2c(o.to)),l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),h||c){var u=a.lineWidth||rt.grid.markingsLineWidth,d=u%2?.5:0;lt.beginPath(),lt.strokeStyle=a.color||rt.grid.markingsColor,lt.lineWidth=u,h?(lt.moveTo(o.to+d,l.from),lt.lineTo(o.to+d,l.to)):(lt.moveTo(o.from,l.to+d),lt.lineTo(o.to,l.to+d)),lt.stroke()}else lt.fillStyle=a.color||rt.grid.markingsColor,lt.fillRect(o.from,l.to,o.to-o.from,l.from-l.to)}}i=f(),n=rt.grid.borderWidth;for(var p=0;p<i.length;++p){var g,m,v,y,x=i[p],b=x.box,w=x.tickLength;if(x.show&&0!=x.ticks.length){for(lt.lineWidth=1,"x"==x.direction?(g=0,m="full"==w?"top"==x.position?0:pt:b.top-dt.top+("top"==x.position?b.height:0)):(m=0,g="full"==w?"left"==x.position?0:ft:b.left-dt.left+("left"==x.position?b.width:0)),x.innermost||(lt.strokeStyle=x.options.color,lt.beginPath(),v=y=0,"x"==x.direction?v=ft+1:y=pt+1,1==lt.lineWidth&&("x"==x.direction?m=Math.floor(m)+.5:g=Math.floor(g)+.5),lt.moveTo(g,m),lt.lineTo(g+v,m+y),lt.stroke()),lt.strokeStyle=x.options.tickColor,lt.beginPath(),e=0;e<x.ticks.length;++e){var _=x.ticks[e].v;v=y=0,isNaN(_)||_<x.min||_>x.max||"full"==w&&("object"==typeof n&&n[x.position]>0||n>0)&&(_==x.min||_==x.max)||("x"==x.direction?(g=x.p2c(_),y="full"==w?-pt:w,"top"==x.position&&(y=-y)):(m=x.p2c(_),v="full"==w?-ft:w,"left"==x.position&&(v=-v)),1==lt.lineWidth&&("x"==x.direction?g=Math.floor(g)+.5:m=Math.floor(m)+.5),lt.moveTo(g,m),lt.lineTo(g+v,m+y))}lt.stroke()}}n&&(r=rt.grid.borderColor,"object"==typeof n||"object"==typeof r?("object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),"object"!=typeof r&&(r={top:r,right:r,bottom:r,left:r}),n.top>0&&(lt.strokeStyle=r.top,lt.lineWidth=n.top,lt.beginPath(),lt.moveTo(0-n.left,0-n.top/2),lt.lineTo(ft,0-n.top/2),lt.stroke()),n.right>0&&(lt.strokeStyle=r.right,lt.lineWidth=n.right,lt.beginPath(),lt.moveTo(ft+n.right/2,0-n.top),lt.lineTo(ft+n.right/2,pt),lt.stroke()),n.bottom>0&&(lt.strokeStyle=r.bottom,lt.lineWidth=n.bottom,lt.beginPath(),lt.moveTo(ft+n.right,pt+n.bottom/2),lt.lineTo(0,pt+n.bottom/2),lt.stroke()),n.left>0&&(lt.strokeStyle=r.left,lt.lineWidth=n.left,lt.beginPath(),lt.moveTo(0-n.left/2,pt+n.bottom),lt.lineTo(0-n.left/2,0),lt.stroke())):(lt.lineWidth=n,lt.strokeStyle=rt.grid.borderColor,lt.strokeRect(-n/2,-n/2,ft+n,pt+n))),lt.restore()}function R(){t.each(f(),function(t,e){var i,n,r,s,a,o=e.box,l=e.direction+"Axis "+e.direction+e.n+"Axis",h="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+l,c=e.options.font||"flot-tick-label tickLabel";if(st.removeText(h),e.show&&0!=e.ticks.length)for(var u=0;u<e.ticks.length;++u)i=e.ticks[u],!i.label||i.v<e.min||i.v>e.max||("x"==e.direction?(s="center",n=dt.left+e.p2c(i.v),"bottom"==e.position?r=o.top+o.padding:(r=o.top+o.height-o.padding,a="bottom")):(a="middle",r=dt.top+e.p2c(i.v),"left"==e.position?(n=o.left+o.width-o.padding,s="right"):n=o.left+o.padding),st.addText(h,n,r,i.label,c,null,null,s,a))})}function O(t){t.lines.show&&N(t),t.bars.show&&W(t),t.points.show&&H(t)}function N(t){function e(t,e,i,n,r){var s=t.points,a=t.pointsize,o=null,l=null;lt.beginPath();for(var h=a;h<s.length;h+=a){var c=s[h-a],u=s[h-a+1],d=s[h],f=s[h+1];if(null!=c&&null!=d){if(f>=u&&u<r.min){if(f<r.min)continue;c=(r.min-u)/(f-u)*(d-c)+c,u=r.min}else if(u>=f&&f<r.min){if(u<r.min)continue;d=(r.min-u)/(f-u)*(d-c)+c,f=r.min}if(u>=f&&u>r.max){if(f>r.max)continue;c=(r.max-u)/(f-u)*(d-c)+c,u=r.max}else if(f>=u&&f>r.max){if(u>r.max)continue;d=(r.max-u)/(f-u)*(d-c)+c,f=r.max}if(d>=c&&c<n.min){if(d<n.min)continue;u=(n.min-c)/(d-c)*(f-u)+u,c=n.min}else if(c>=d&&d<n.min){if(c<n.min)continue;f=(n.min-c)/(d-c)*(f-u)+u,d=n.min}if(c>=d&&c>n.max){if(d>n.max)continue;u=(n.max-c)/(d-c)*(f-u)+u,c=n.max}else if(d>=c&&d>n.max){if(c>n.max)continue;f=(n.max-c)/(d-c)*(f-u)+u,d=n.max}c==o&&u==l||lt.moveTo(n.p2c(c)+e,r.p2c(u)+i),o=d,l=f,lt.lineTo(n.p2c(d)+e,r.p2c(f)+i)}}lt.stroke()}function i(t,e,i){for(var n=t.points,r=t.pointsize,s=Math.min(Math.max(0,i.min),i.max),a=0,o=!1,l=1,h=0,c=0;;){if(r>0&&a>n.length+r)break;a+=r;var u=n[a-r],d=n[a-r+l],f=n[a],p=n[a+l];if(o){if(r>0&&null!=u&&null==f){c=a,r=-r,l=2;continue}if(0>r&&a==h+r){lt.fill(),o=!1,r=-r,l=1,a=h=c+r;continue}}if(null!=u&&null!=f){if(f>=u&&u<e.min){if(f<e.min)continue;d=(e.min-u)/(f-u)*(p-d)+d,u=e.min}else if(u>=f&&f<e.min){if(u<e.min)continue;p=(e.min-u)/(f-u)*(p-d)+d,f=e.min}if(u>=f&&u>e.max){if(f>e.max)continue;d=(e.max-u)/(f-u)*(p-d)+d,u=e.max}else if(f>=u&&f>e.max){if(u>e.max)continue;p=(e.max-u)/(f-u)*(p-d)+d,f=e.max}if(o||(lt.beginPath(),lt.moveTo(e.p2c(u),i.p2c(s)),o=!0),d>=i.max&&p>=i.max)lt.lineTo(e.p2c(u),i.p2c(i.max)),lt.lineTo(e.p2c(f),i.p2c(i.max));else if(d<=i.min&&p<=i.min)lt.lineTo(e.p2c(u),i.p2c(i.min)),lt.lineTo(e.p2c(f),i.p2c(i.min));else{var g=u,m=f;p>=d&&d<i.min&&p>=i.min?(u=(i.min-d)/(p-d)*(f-u)+u,d=i.min):d>=p&&p<i.min&&d>=i.min&&(f=(i.min-d)/(p-d)*(f-u)+u,p=i.min),d>=p&&d>i.max&&p<=i.max?(u=(i.max-d)/(p-d)*(f-u)+u,d=i.max):p>=d&&p>i.max&&d<=i.max&&(f=(i.max-d)/(p-d)*(f-u)+u,p=i.max),u!=g&&lt.lineTo(e.p2c(g),i.p2c(d)),lt.lineTo(e.p2c(u),i.p2c(d)),lt.lineTo(e.p2c(f),i.p2c(p)),f!=m&&(lt.lineTo(e.p2c(f),i.p2c(p)),lt.lineTo(e.p2c(m),i.p2c(p)))}}}}lt.save(),lt.translate(dt.left,dt.top),lt.lineJoin="round";var n=t.lines.lineWidth,r=t.shadowSize;if(n>0&&r>0){lt.lineWidth=r,lt.strokeStyle="rgba(0,0,0,0.1)";var s=Math.PI/18;e(t.datapoints,Math.sin(s)*(n/2+r/2),Math.cos(s)*(n/2+r/2),t.xaxis,t.yaxis),lt.lineWidth=r/2,e(t.datapoints,Math.sin(s)*(n/2+r/4),Math.cos(s)*(n/2+r/4),t.xaxis,t.yaxis)}lt.lineWidth=n,lt.strokeStyle=t.color;var a=Y(t.lines,t.color,0,pt);a&&(lt.fillStyle=a,i(t.datapoints,t.xaxis,t.yaxis)),n>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),lt.restore()}function H(t){function e(t,e,i,n,r,s,a,o){for(var l=t.points,h=t.pointsize,c=0;c<l.length;c+=h){var u=l[c],d=l[c+1];null==u||u<s.min||u>s.max||d<a.min||d>a.max||(lt.beginPath(),u=s.p2c(u),d=a.p2c(d)+n,"circle"==o?lt.arc(u,d,e,0,r?Math.PI:2*Math.PI,!1):o(lt,u,d,e,r),lt.closePath(),i&&(lt.fillStyle=i,lt.fill()),lt.stroke())}}lt.save(),lt.translate(dt.left,dt.top);var i=t.points.lineWidth,n=t.shadowSize,r=t.points.radius,s=t.points.symbol;if(0==i&&(i=1e-4),i>0&&n>0){var a=n/2;lt.lineWidth=a,lt.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,r,null,a+a/2,!0,t.xaxis,t.yaxis,s),lt.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,r,null,a/2,!0,t.xaxis,t.yaxis,s)}lt.lineWidth=i,lt.strokeStyle=t.color,e(t.datapoints,r,Y(t.points,t.color),0,!1,t.xaxis,t.yaxis,s),lt.restore()}function j(t,e,i,n,r,s,a,o,l,h,c){var u,d,f,p,g,m,v,y,x;h?(y=m=v=!0,g=!1,u=i,d=t,p=e+n,f=e+r,u>d&&(x=d,d=u,u=x,g=!0,m=!1)):(g=m=v=!0,y=!1,u=t+n,d=t+r,f=i,p=e,f>p&&(x=p,p=f,f=x,y=!0,v=!1)),d<a.min||u>a.max||p<o.min||f>o.max||(u<a.min&&(u=a.min,g=!1),d>a.max&&(d=a.max,m=!1),f<o.min&&(f=o.min,y=!1),p>o.max&&(p=o.max,v=!1),u=a.p2c(u),f=o.p2c(f),d=a.p2c(d),p=o.p2c(p),s&&(l.fillStyle=s(f,p),l.fillRect(u,p,d-u,f-p)),c>0&&(g||m||v||y)&&(l.beginPath(),l.moveTo(u,f),g?l.lineTo(u,p):l.moveTo(u,p),v?l.lineTo(d,p):l.moveTo(d,p),m?l.lineTo(d,f):l.moveTo(d,f),y?l.lineTo(u,f):l.moveTo(u,f),l.stroke()))}function W(t){function e(e,i,n,r,s,a){for(var o=e.points,l=e.pointsize,h=0;h<o.length;h+=l)null!=o[h]&&j(o[h],o[h+1],o[h+2],i,n,r,s,a,lt,t.bars.horizontal,t.bars.lineWidth)}lt.save(),lt.translate(dt.left,dt.top),lt.lineWidth=t.bars.lineWidth,lt.strokeStyle=t.color;var i;switch(t.bars.align){case"left":i=0;break;case"right":i=-t.bars.barWidth;break;default:i=-t.bars.barWidth/2}var n=t.bars.fill?function(e,i){return Y(t.bars,t.color,e,i)}:null;e(t.datapoints,i,i+t.bars.barWidth,n,t.xaxis,t.yaxis),lt.restore()}function Y(e,i,n,r){var s=e.fill;if(!s)return null;if(e.fillColor)return it(e.fillColor,n,r,i);var a=t.color.parse(i);return a.a="number"==typeof s?s:.4,a.normalize(),a.toString()}function $(){if(null!=rt.legend.container?t(rt.legend.container).html(""):i.find(".legend").remove(),rt.legend.show){for(var e,n,r=[],s=[],a=!1,o=rt.legend.labelFormatter,l=0;l<nt.length;++l)e=nt[l],e.label&&(n=o?o(e.label,e):e.label,n&&s.push({label:n,color:e.color}));if(rt.legend.sorted)if(t.isFunction(rt.legend.sorted))s.sort(rt.legend.sorted);else if("reverse"==rt.legend.sorted)s.reverse();else{var h="descending"!=rt.legend.sorted;s.sort(function(t,e){return t.label==e.label?0:t.label<e.label!=h?1:-1})}for(var l=0;l<s.length;++l){var c=s[l];l%rt.legend.noColumns==0&&(a&&r.push("</tr>"),r.push("<tr>"),a=!0),r.push('<td class="legendColorBox"><div style="border:1px solid '+rt.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+c.label+"</td>")}if(a&&r.push("</tr>"),0!=r.length){var u='<table style="font-size:smaller;color:'+rt.grid.color+'">'+r.join("")+"</table>";if(null!=rt.legend.container)t(rt.legend.container).html(u);else{var d="",f=rt.legend.position,p=rt.legend.margin;null==p[0]&&(p=[p,p]),"n"==f.charAt(0)?d+="top:"+(p[1]+dt.top)+"px;":"s"==f.charAt(0)&&(d+="bottom:"+(p[1]+dt.bottom)+"px;"),"e"==f.charAt(1)?d+="right:"+(p[0]+dt.right)+"px;":"w"==f.charAt(1)&&(d+="left:"+(p[0]+dt.left)+"px;");var g=t('<div class="legend">'+u.replace('style="','style="position:absolute;'+d+";")+"</div>").appendTo(i);if(0!=rt.legend.backgroundOpacity){var m=rt.legend.backgroundColor;null==m&&(m=rt.grid.backgroundColor,m=m&&"string"==typeof m?t.color.parse(m):t.color.extract(g,"background-color"),m.a=1,m=m.toString());var v=g.children();t('<div style="position:absolute;width:'+v.width()+"px;height:"+v.height()+"px;"+d+"background-color:"+m+';"> </div>').prependTo(g).css("opacity",rt.legend.backgroundOpacity)}}}}}function B(t,e,i){var n,r,s,a=rt.grid.mouseActiveRadius,o=a*a+1,l=null;for(n=nt.length-1;n>=0;--n)if(i(nt[n])){var h=nt[n],c=h.xaxis,u=h.yaxis,d=h.datapoints.points,f=c.c2p(t),p=u.c2p(e),g=a/c.scale,m=a/u.scale;if(s=h.datapoints.pointsize,c.options.inverseTransform&&(g=Number.MAX_VALUE),u.options.inverseTransform&&(m=Number.MAX_VALUE),h.lines.show||h.points.show)for(r=0;r<d.length;r+=s){var v=d[r],y=d[r+1];if(null!=v&&!(v-f>g||-g>v-f||y-p>m||-m>y-p)){var x=Math.abs(c.p2c(v)-t),b=Math.abs(u.p2c(y)-e),w=x*x+b*b;o>w&&(o=w,l=[n,r/s])}}if(h.bars.show&&!l){var _,k;switch(h.bars.align){case"left":_=0;break;case"right":_=-h.bars.barWidth;break;default:_=-h.bars.barWidth/2}for(k=_+h.bars.barWidth,r=0;r<d.length;r+=s){var v=d[r],y=d[r+1],C=d[r+2];null!=v&&(nt[n].bars.horizontal?f<=Math.max(C,v)&&f>=Math.min(C,v)&&p>=y+_&&y+k>=p:f>=v+_&&v+k>=f&&p>=Math.min(C,y)&&p<=Math.max(C,y))&&(l=[n,r/s])}}}return l?(n=l[0],r=l[1],s=nt[n].datapoints.pointsize,{datapoint:nt[n].datapoints.points.slice(r*s,(r+1)*s),dataIndex:r,series:nt[n],seriesIndex:n}):null}function q(t){rt.grid.hoverable&&X("plothover",t,function(t){return 0!=t.hoverable})}function U(t){rt.grid.hoverable&&X("plothover",t,function(){return!1})}function V(t){X("plotclick",t,function(t){return 0!=t.clickable})}function X(t,e,n){var r=ot.offset(),s=e.pageX-r.left-dt.left,a=e.pageY-r.top-dt.top,o=p({left:s,top:a});o.pageX=e.pageX,o.pageY=e.pageY;var l=B(s,a,n);if(l&&(l.pageX=parseInt(l.series.xaxis.p2c(l.datapoint[0])+r.left+dt.left,10),l.pageY=parseInt(l.series.yaxis.p2c(l.datapoint[1])+r.top+dt.top,10)),rt.grid.autoHighlight){for(var h=0;h<vt.length;++h){var c=vt[h];c.auto!=t||l&&c.series==l.series&&c.point[0]==l.datapoint[0]&&c.point[1]==l.datapoint[1]||K(c.series,c.point)}l&&Q(l.series,l.datapoint,t)}i.trigger(t,[o,l])}function G(){var t=rt.interaction.redrawOverlayInterval;return-1==t?void Z():void(yt||(yt=setTimeout(Z,t)))}function Z(){yt=null,ht.save(),at.clear(),ht.translate(dt.left,dt.top);var t,e;for(t=0;t<vt.length;++t)e=vt[t],e.series.bars.show?et(e.series,e.point):tt(e.series,e.point);ht.restore(),o(gt.drawOverlay,[ht])}function Q(t,e,i){if("number"==typeof t&&(t=nt[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var r=J(t,e);-1==r?(vt.push({series:t,point:e,auto:i}),G()):i||(vt[r].auto=!1)}function K(t,e){if(null==t&&null==e)return vt=[],void G();if("number"==typeof t&&(t=nt[t]),"number"==typeof e){var i=t.datapoints.pointsize;e=t.datapoints.points.slice(i*e,i*(e+1))}var n=J(t,e);-1!=n&&(vt.splice(n,1),G())}function J(t,e){for(var i=0;i<vt.length;++i){var n=vt[i];if(n.series==t&&n.point[0]==e[0]&&n.point[1]==e[1])return i}return-1}function tt(e,i){var n=i[0],r=i[1],s=e.xaxis,a=e.yaxis,o="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString();if(!(n<s.min||n>s.max||r<a.min||r>a.max)){var l=e.points.radius+e.points.lineWidth/2;ht.lineWidth=l,ht.strokeStyle=o;var h=1.5*l;n=s.p2c(n),r=a.p2c(r),ht.beginPath(),"circle"==e.points.symbol?ht.arc(n,r,h,0,2*Math.PI,!1):e.points.symbol(ht,n,r,h,!1),ht.closePath(),ht.stroke()}}function et(e,i){var n,r="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString(),s=r;switch(e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;default:n=-e.bars.barWidth/2}ht.lineWidth=e.bars.lineWidth,ht.strokeStyle=r,j(i[0],i[1],i[2]||0,n,n+e.bars.barWidth,function(){return s},e.xaxis,e.yaxis,ht,e.bars.horizontal,e.bars.lineWidth)}function it(e,i,n,r){if("string"==typeof e)return e;for(var s=lt.createLinearGradient(0,n,0,i),a=0,o=e.colors.length;o>a;++a){var l=e.colors[a];if("string"!=typeof l){var h=t.color.parse(r);null!=l.brightness&&(h=h.scale("rgb",l.brightness)),null!=l.opacity&&(h.a*=l.opacity),l=h.toString()}s.addColorStop(a/(o-1),l)}return s}var nt=[],rt={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},st=null,at=null,ot=null,lt=null,ht=null,ct=[],ut=[],dt={left:0,right:0,top:0,bottom:0},ft=0,pt=0,gt={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},mt=this;mt.setData=c,mt.setupGrid=T,mt.draw=L,mt.getPlaceholder=function(){return i;
},mt.getCanvas=function(){return st.element},mt.getPlotOffset=function(){return dt},mt.width=function(){return ft},mt.height=function(){return pt},mt.offset=function(){var t=ot.offset();return t.left+=dt.left,t.top+=dt.top,t},mt.getData=function(){return nt},mt.getAxes=function(){var e={};return t.each(ct.concat(ut),function(t,i){i&&(e[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),e},mt.getXAxes=function(){return ct},mt.getYAxes=function(){return ut},mt.c2p=p,mt.p2c=g,mt.getOptions=function(){return rt},mt.highlight=Q,mt.unhighlight=K,mt.triggerRedrawOverlay=G,mt.pointOffset=function(t){return{left:parseInt(ct[d(t,"x")-1].p2c(+t.x)+dt.left,10),top:parseInt(ut[d(t,"y")-1].p2c(+t.y)+dt.top,10)}},mt.shutdown=w,mt.destroy=function(){w(),i.removeData("plot").empty(),nt=[],rt=null,st=null,at=null,ot=null,lt=null,ht=null,ct=[],ut=[],gt=null,vt=[],mt=null},mt.resize=function(){var t=i.width(),e=i.height();st.resize(t,e),at.resize(t,e)},mt.hooks=gt,l(mt),h(s),x(),c(r),T(),L(),b();var vt=[],yt=null}function n(t,e){return e*Math.floor(t/e)}var r=Object.prototype.hasOwnProperty;t.fn.detach||(t.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),e.prototype.resize=function(t,e){if(0>=t||0>=e)throw new Error("Invalid dimensions for plot, width = "+t+", height = "+e);var i=this.element,n=this.context,r=this.pixelRatio;this.width!=t&&(i.width=t*r,i.style.width=t+"px",this.width=t),this.height!=e&&(i.height=e*r,i.style.height=e+"px",this.height=e),n.restore(),n.save(),n.scale(r,r)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var t=this._textCache;for(var e in t)if(r.call(t,e)){var i=this.getTextLayer(e),n=t[e];i.hide();for(var s in n)if(r.call(n,s)){var a=n[s];for(var o in a)if(r.call(a,o)){for(var l,h=a[o].positions,c=0;l=h[c];c++)l.active?l.rendered||(i.append(l.element),l.rendered=!0):(h.splice(c--,1),l.rendered&&l.element.detach());0==h.length&&delete a[o]}}i.show()}},e.prototype.getTextLayer=function(e){var i=this.text[e];return null==i&&(null==this.textContainer&&(this.textContainer=t("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[e]=t("<div></div>").addClass(e).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i},e.prototype.getTextInfo=function(e,i,n,r,s){var a,o,l,h;if(i=""+i,a="object"==typeof n?n.style+" "+n.variant+" "+n.weight+" "+n.size+"px/"+n.lineHeight+"px "+n.family:n,o=this._textCache[e],null==o&&(o=this._textCache[e]={}),l=o[a],null==l&&(l=o[a]={}),h=l[i],null==h){var c=t("<div></div>").html(i).css({position:"absolute","max-width":s,top:-9999}).appendTo(this.getTextLayer(e));"object"==typeof n?c.css({font:a,color:n.color}):"string"==typeof n&&c.addClass(n),h=l[i]={width:c.outerWidth(!0),height:c.outerHeight(!0),element:c,positions:[]},c.detach()}return h},e.prototype.addText=function(t,e,i,n,r,s,a,o,l){var h=this.getTextInfo(t,n,r,s,a),c=h.positions;"center"==o?e-=h.width/2:"right"==o&&(e-=h.width),"middle"==l?i-=h.height/2:"bottom"==l&&(i-=h.height);for(var u,d=0;u=c[d];d++)if(u.x==e&&u.y==i)return void(u.active=!0);u={active:!0,rendered:!1,element:c.length?h.element.clone():h.element,x:e,y:i},c.push(u),u.element.css({top:Math.round(i),left:Math.round(e),"text-align":o})},e.prototype.removeText=function(t,e,i,n,s,a){if(null==n){var o=this._textCache[t];if(null!=o)for(var l in o)if(r.call(o,l)){var h=o[l];for(var c in h)if(r.call(h,c))for(var u,d=h[c].positions,f=0;u=d[f];f++)u.active=!1}}else for(var u,d=this.getTextInfo(t,n,s,a).positions,f=0;u=d[f];f++)u.x==e&&u.y==i&&(u.active=!1)},t.plot=function(e,n,r){var s=new i(t(e),n,r,t.plot.plugins);return s},t.plot.version="0.8.3",t.plot.plugins=[],t.fn.plot=function(e,i){return this.each(function(){t.plot(this,e,i)})}}(jQuery),function(t){var e={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},i=function(t){this.tipPosition={x:0,y:0},this.init(t)};i.prototype.init=function(e){function i(t){var e={};e.x=t.pageX,e.y=t.pageY,r.updateTooltipPosition(e)}function n(t,e,i){var n=r.getDomElement();if(i){var s;s=r.stringFormat(r.tooltipOptions.content,i),n.html(s),r.updateTooltipPosition({x:e.pageX,y:e.pageY}),n.css({left:r.tipPosition.x+r.tooltipOptions.shifts.x,top:r.tipPosition.y+r.tooltipOptions.shifts.y}).show(),"function"==typeof r.tooltipOptions.onHover&&r.tooltipOptions.onHover(i,n)}else n.hide().html("")}var r=this;e.hooks.bindEvents.push(function(e,s){r.plotOptions=e.getOptions(),r.plotOptions.tooltip!==!1&&void 0!==r.plotOptions.tooltip&&(r.tooltipOptions=r.plotOptions.tooltipOpts,r.getDomElement(),t(e.getPlaceholder()).bind("plothover",n),t(s).bind("mousemove",i))}),e.hooks.shutdown.push(function(e,r){t(e.getPlaceholder()).unbind("plothover",n),t(r).unbind("mousemove",i)})},i.prototype.getDomElement=function(){var e;return t("#flotTip").length>0?e=t("#flotTip"):(e=t("<div />").attr("id","flotTip"),e.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&e.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),e},i.prototype.updateTooltipPosition=function(e){var i=t("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,n=t("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;e.x-t(window).scrollLeft()>t(window).innerWidth()-i&&(e.x-=i),e.y-t(window).scrollTop()>t(window).innerHeight()-n&&(e.y-=n),this.tipPosition.x=e.x,this.tipPosition.y=e.y},i.prototype.stringFormat=function(t,e){var i=/%p\.{0,1}(\d{0,})/,n=/%s/,r=/%x\.{0,1}(?:\d{0,})/,s=/%y\.{0,1}(?:\d{0,})/;return"function"==typeof t&&(t=t(e.series.label,e.series.data[e.dataIndex][0],e.series.data[e.dataIndex][1],e)),void 0!==e.series.percent&&(t=this.adjustValPrecision(i,t,e.series.percent)),void 0!==e.series.label&&(t=t.replace(n,e.series.label)),this.isTimeMode("xaxis",e)&&this.isXDateFormat(e)&&(t=t.replace(r,this.timestampToDate(e.series.data[e.dataIndex][0],this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",e)&&this.isYDateFormat(e)&&(t=t.replace(s,this.timestampToDate(e.series.data[e.dataIndex][1],this.tooltipOptions.yDateFormat))),"number"==typeof e.series.data[e.dataIndex][0]&&(t=this.adjustValPrecision(r,t,e.series.data[e.dataIndex][0])),"number"==typeof e.series.data[e.dataIndex][1]&&(t=this.adjustValPrecision(s,t,e.series.data[e.dataIndex][1])),void 0!==e.series.xaxis.tickFormatter&&(t=t.replace(r,e.series.xaxis.tickFormatter(e.series.data[e.dataIndex][0],e.series.xaxis))),void 0!==e.series.yaxis.tickFormatter&&(t=t.replace(s,e.series.yaxis.tickFormatter(e.series.data[e.dataIndex][1],e.series.yaxis))),t},i.prototype.isTimeMode=function(t,e){return void 0!==e.series[t].options.mode&&"time"===e.series[t].options.mode},i.prototype.isXDateFormat=function(){return void 0!==this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},i.prototype.isYDateFormat=function(){return void 0!==this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},i.prototype.timestampToDate=function(e,i){var n=new Date(e);return t.plot.formatDate(n,i)},i.prototype.adjustValPrecision=function(t,e,i){var n,r=e.match(t);return null!==r&&""!==RegExp.$1&&(n=RegExp.$1,i=i.toFixed(n),e=e.replace(t,i)),e};var n=function(t){new i(t)};t.plot.plugins.push({init:n,options:e,name:"tooltip",version:"0.6.1"})}(jQuery),/* Flot plugin for automatically redrawing plots as the placeholder resizes.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

It works by listening for changes on the placeholder div (through the jQuery
resize event plugin) - if the size changes, it will redraw the plot.

There are no options. If you need to disable the plugin for some plots, you
can just fix the size of their placeholders.

*/
/* Inline dependency:
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
function(t,e,i){"$:nomunge";function n(i){o===!0&&(o=i||1);for(var l=s.length-1;l>=0;l--){var d=t(s[l]);if(d[0]==e||d.is(":visible")){var f=d.width(),p=d.height(),g=d.data(c);!g||f===g.w&&p===g.h||(d.trigger(h,[g.w=f,g.h=p]),o=i||!0)}else g=d.data(c),g.w=0,g.h=0}null!==r&&(o&&(null==i||1e3>i-o)?r=e.requestAnimationFrame(n):(r=setTimeout(n,a[u]),o=!1))}var r,s=[],a=t.resize=t.extend(t.resize,{}),o=!1,l="setTimeout",h="resize",c=h+"-special-event",u="pendingDelay",d="activeDelay",f="throttleWindow";a[u]=200,a[d]=20,a[f]=!0,t.event.special[h]={setup:function(){if(!a[f]&&this[l])return!1;var e=t(this);s.push(this),e.data(c,{w:e.width(),h:e.height()}),1===s.length&&(r=i,n())},teardown:function(){if(!a[f]&&this[l])return!1;for(var e=t(this),i=s.length-1;i>=0;i--)if(s[i]==this){s.splice(i,1);break}e.removeData(c),s.length||(o?cancelAnimationFrame(r):clearTimeout(r),r=null)},add:function(e){function n(e,n,s){var a=t(this),o=a.data(c)||{};o.w=n!==i?n:a.width(),o.h=s!==i?s:a.height(),r.apply(this,arguments)}if(!a[f]&&this[l])return!1;var r;return t.isFunction(e)?(r=e,n):(r=e.handler,void(e.handler=n))}},e.requestAnimationFrame||(e.requestAnimationFrame=function(){return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){return e.setTimeout(function(){t((new Date).getTime())},a[d])}}()),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(){return e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function(t){function e(t){function e(){var e=t.getPlaceholder();0!=e.width()&&0!=e.height()&&(t.resize(),t.setupGrid(),t.draw())}function i(t){t.getPlaceholder().resize(e)}function n(t){t.getPlaceholder().unbind("resize",e)}t.hooks.bindEvents.push(i),t.hooks.shutdown.push(n)}var i={};t.plot.plugins.push({init:e,options:i,name:"resize",version:"1.0"})}(jQuery),/* Flot plugin for rendering pie charts.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

The plugin assumes that each series has a single data value, and that each
value is a positive integer or zero.  Negative numbers don't make sense for a
pie chart, and have unpredictable results.  The values do NOT need to be
passed in as percentages; the plugin will calculate the total and per-slice
percentages internally.

* Created by Brian Medendorp

* Updated with contributions from btburnett3, Anthony Aragues and Xavi Ivars

The plugin supports these options:

	series: {
		pie: {
			show: true/false
			radius: 0-1 for percentage of fullsize, or a specified pixel length, or 'auto'
			innerRadius: 0-1 for percentage of fullsize or a specified pixel length, for creating a donut effect
			startAngle: 0-2 factor of PI used for starting angle (in radians) i.e 3/2 starts at the top, 0 and 2 have the same result
			tilt: 0-1 for percentage to tilt the pie, where 1 is no tilt, and 0 is completely flat (nothing will show)
			offset: {
				top: integer value to move the pie up or down
				left: integer value to move the pie left or right, or 'auto'
			},
			stroke: {
				color: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#FFF')
				width: integer pixel width of the stroke
			},
			label: {
				show: true/false, or 'auto'
				formatter:  a user-defined function that modifies the text/style of the label text
				radius: 0-1 for percentage of fullsize, or a specified pixel length
				background: {
					color: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#000')
					opacity: 0-1
				},
				threshold: 0-1 for the percentage value at which to hide labels (if they're too small)
			},
			combine: {
				threshold: 0-1 for the percentage value at which to combine slices (if they're too small)
				color: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#CCC'), if null, the plugin will automatically use the color of the first slice to be combined
				label: any text value of what the combined slice should be labeled
			}
			highlight: {
				opacity: 0-1
			}
		}
	}

More detail and specific examples can be found in the included HTML file.

*/
function(t){function e(e){function r(e){k||(k=!0,v=e.getCanvas(),y=t(v).parent(),x=e.getOptions(),e.setData(s(e.getData())))}function s(e){for(var i=0,n=0,r=0,s=x.series.pie.combine.color,a=[],o=0;o<e.length;++o){var l=e[o].data;t.isArray(l)&&1==l.length&&(l=l[0]),t.isArray(l)?!isNaN(parseFloat(l[1]))&&isFinite(l[1])?l[1]=+l[1]:l[1]=0:l=!isNaN(parseFloat(l))&&isFinite(l)?[1,+l]:[1,0],e[o].data=[l]}for(var o=0;o<e.length;++o)i+=e[o].data[0][1];for(var o=0;o<e.length;++o){var l=e[o].data[0][1];l/i<=x.series.pie.combine.threshold&&(n+=l,r++,s||(s=e[o].color))}for(var o=0;o<e.length;++o){var l=e[o].data[0][1];(2>r||l/i>x.series.pie.combine.threshold)&&a.push(t.extend(e[o],{data:[[1,l]],color:e[o].color,label:e[o].label,angle:l*Math.PI*2/i,percent:l/(i/100)}))}return r>1&&a.push({data:[[1,n]],color:s,label:x.series.pie.combine.label,angle:n*Math.PI*2/i,percent:n/(i/100)}),a}function a(e,r){function s(){C.clearRect(0,0,h,c),y.children().filter(".pieLabel, .pieLabelBackground").remove()}function a(){var t=x.series.pie.shadow.left,e=x.series.pie.shadow.top,i=10,n=x.series.pie.shadow.alpha,r=x.series.pie.radius>1?x.series.pie.radius:b*x.series.pie.radius;if(!(r>=h/2-t||r*x.series.pie.tilt>=c/2-e||i>=r)){C.save(),C.translate(t,e),C.globalAlpha=n,C.fillStyle="#000",C.translate(w,_),C.scale(1,x.series.pie.tilt);for(var s=1;i>=s;s++)C.beginPath(),C.arc(0,0,r,0,2*Math.PI,!1),C.fill(),r-=s;C.restore()}}function l(){function e(t,e,i){0>=t||isNaN(t)||(i?C.fillStyle=e:(C.strokeStyle=e,C.lineJoin="round"),C.beginPath(),Math.abs(t-2*Math.PI)>1e-9&&C.moveTo(0,0),C.arc(0,0,r,s,s+t/2,!1),C.arc(0,0,r,s+t/2,s+t,!1),C.closePath(),s+=t,i?C.fill():C.stroke())}function i(){function e(e,i,n){if(0==e.data[0][1])return!0;var s,a=x.legend.labelFormatter,o=x.series.pie.label.formatter;s=a?a(e.label,e):e.label,o&&(s=o(s,e));var l=(i+e.angle+i)/2,u=w+Math.round(Math.cos(l)*r),d=_+Math.round(Math.sin(l)*r)*x.series.pie.tilt,f="<span class='pieLabel' id='pieLabel"+n+"' style='position:absolute;top:"+d+"px;left:"+u+"px;'>"+s+"</span>";y.append(f);var p=y.children("#pieLabel"+n),g=d-p.height()/2,m=u-p.width()/2;if(p.css("top",g),p.css("left",m),0-g>0||0-m>0||c-(g+p.height())<0||h-(m+p.width())<0)return!1;if(0!=x.series.pie.label.background.opacity){var v=x.series.pie.label.background.color;null==v&&(v=e.color);var b="top:"+g+"px;left:"+m+"px;";t("<div class='pieLabelBackground' style='position:absolute;width:"+p.width()+"px;height:"+p.height()+"px;"+b+"background-color:"+v+";'></div>").css("opacity",x.series.pie.label.background.opacity).insertBefore(p)}return!0}for(var i=n,r=x.series.pie.label.radius>1?x.series.pie.label.radius:b*x.series.pie.label.radius,s=0;s<d.length;++s){if(d[s].percent>=100*x.series.pie.label.threshold&&!e(d[s],i,s))return!1;i+=d[s].angle}return!0}var n=Math.PI*x.series.pie.startAngle,r=x.series.pie.radius>1?x.series.pie.radius:b*x.series.pie.radius;C.save(),C.translate(w,_),C.scale(1,x.series.pie.tilt),C.save();for(var s=n,a=0;a<d.length;++a)d[a].startAngle=s,e(d[a].angle,d[a].color,!0);if(C.restore(),x.series.pie.stroke.width>0){C.save(),C.lineWidth=x.series.pie.stroke.width,s=n;for(var a=0;a<d.length;++a)e(d[a].angle,x.series.pie.stroke.color,!1);C.restore()}return o(C),C.restore(),x.series.pie.label.show?i():!0}if(y){var h=e.getPlaceholder().width(),c=e.getPlaceholder().height(),u=y.children().filter(".legend").children().width()||0;C=r,k=!1,b=Math.min(h,c/x.series.pie.tilt)/2,_=c/2+x.series.pie.offset.top,w=h/2,"auto"==x.series.pie.offset.left?(x.legend.position.match("w")?w+=u/2:w-=u/2,b>w?w=b:w>h-b&&(w=h-b)):w+=x.series.pie.offset.left;var d=e.getData(),f=0;do f>0&&(b*=n),f+=1,s(),x.series.pie.tilt<=.8&&a();while(!l()&&i>f);f>=i&&(s(),y.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),e.setSeries&&e.insertLegend&&(e.setSeries(d),e.insertLegend())}}function o(t){if(x.series.pie.innerRadius>0){t.save();var e=x.series.pie.innerRadius>1?x.series.pie.innerRadius:b*x.series.pie.innerRadius;t.globalCompositeOperation="destination-out",t.beginPath(),t.fillStyle=x.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),t.strokeStyle=x.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.stroke(),t.closePath(),t.restore()}}function l(t,e){for(var i=!1,n=-1,r=t.length,s=r-1;++n<r;s=n)(t[n][1]<=e[1]&&e[1]<t[s][1]||t[s][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[s][0]-t[n][0])*(e[1]-t[n][1])/(t[s][1]-t[n][1])+t[n][0]&&(i=!i);return i}function h(t,i){for(var n,r,s=e.getData(),a=e.getOptions(),o=a.series.pie.radius>1?a.series.pie.radius:b*a.series.pie.radius,h=0;h<s.length;++h){var c=s[h];if(c.pie.show){if(C.save(),C.beginPath(),C.moveTo(0,0),C.arc(0,0,o,c.startAngle,c.startAngle+c.angle/2,!1),C.arc(0,0,o,c.startAngle+c.angle/2,c.startAngle+c.angle,!1),C.closePath(),n=t-w,r=i-_,C.isPointInPath){if(C.isPointInPath(t-w,i-_))return C.restore(),{datapoint:[c.percent,c.data],dataIndex:0,series:c,seriesIndex:h}}else{var u=o*Math.cos(c.startAngle),d=o*Math.sin(c.startAngle),f=o*Math.cos(c.startAngle+c.angle/4),p=o*Math.sin(c.startAngle+c.angle/4),g=o*Math.cos(c.startAngle+c.angle/2),m=o*Math.sin(c.startAngle+c.angle/2),v=o*Math.cos(c.startAngle+c.angle/1.5),y=o*Math.sin(c.startAngle+c.angle/1.5),x=o*Math.cos(c.startAngle+c.angle),k=o*Math.sin(c.startAngle+c.angle),M=[[0,0],[u,d],[f,p],[g,m],[v,y],[x,k]],S=[n,r];if(l(M,S))return C.restore(),{datapoint:[c.percent,c.data],dataIndex:0,series:c,seriesIndex:h}}C.restore()}}return null}function c(t){d("plothover",t)}function u(t){d("plotclick",t)}function d(t,i){var n=e.offset(),r=parseInt(i.pageX-n.left),s=parseInt(i.pageY-n.top),a=h(r,s);if(x.grid.autoHighlight)for(var o=0;o<M.length;++o){var l=M[o];l.auto!=t||a&&l.series==a.series||p(l.series)}a&&f(a.series,t);var c={pageX:i.pageX,pageY:i.pageY};y.trigger(t,[c,a])}function f(t,i){var n=g(t);-1==n?(M.push({series:t,auto:i}),e.triggerRedrawOverlay()):i||(M[n].auto=!1)}function p(t){null==t&&(M=[],e.triggerRedrawOverlay());var i=g(t);-1!=i&&(M.splice(i,1),e.triggerRedrawOverlay())}function g(t){for(var e=0;e<M.length;++e){var i=M[e];if(i.series==t)return e}return-1}function m(t,e){function i(t){t.angle<=0||isNaN(t.angle)||(e.fillStyle="rgba(255, 255, 255, "+n.series.pie.highlight.opacity+")",e.beginPath(),Math.abs(t.angle-2*Math.PI)>1e-9&&e.moveTo(0,0),e.arc(0,0,r,t.startAngle,t.startAngle+t.angle/2,!1),e.arc(0,0,r,t.startAngle+t.angle/2,t.startAngle+t.angle,!1),e.closePath(),e.fill())}var n=t.getOptions(),r=n.series.pie.radius>1?n.series.pie.radius:b*n.series.pie.radius;e.save(),e.translate(w,_),e.scale(1,n.series.pie.tilt);for(var s=0;s<M.length;++s)i(M[s].series);o(e),e.restore()}var v=null,y=null,x=null,b=null,w=null,_=null,k=!1,C=null,M=[];e.hooks.processOptions.push(function(t,e){e.series.pie.show&&(e.grid.show=!1,"auto"==e.series.pie.label.show&&(e.legend.show?e.series.pie.label.show=!1:e.series.pie.label.show=!0),"auto"==e.series.pie.radius&&(e.series.pie.label.show?e.series.pie.radius=.75:e.series.pie.radius=1),e.series.pie.tilt>1?e.series.pie.tilt=1:e.series.pie.tilt<0&&(e.series.pie.tilt=0))}),e.hooks.bindEvents.push(function(t,e){var i=t.getOptions();i.series.pie.show&&(i.grid.hoverable&&e.unbind("mousemove").mousemove(c),i.grid.clickable&&e.unbind("click").click(u))}),e.hooks.processDatapoints.push(function(t,e,i,n){var s=t.getOptions();s.series.pie.show&&r(t,e,i,n)}),e.hooks.drawOverlay.push(function(t,e){var i=t.getOptions();i.series.pie.show&&m(t,e)}),e.hooks.draw.push(function(t,e){var i=t.getOptions();i.series.pie.show&&a(t,e)})}var i=10,n=.95,r={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(t,e){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+e.color+";'>"+t+"<br/>"+Math.round(e.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};t.plot.plugins.push({init:e,options:r,name:"pie",version:"1.1"})}(jQuery),/* Pretty handling of time axes.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

Set axis.mode to "time" to enable. See the section "Time series data" in
API.txt for details.

*/
function(t){function e(t,e){return e*Math.floor(t/e)}function i(t,e,i,n){if("function"==typeof t.strftime)return t.strftime(e);var r=function(t,e){return t=""+t,e=""+(null==e?"0":e),1==t.length?e+t:t},s=[],a=!1,o=t.getHours(),l=12>o;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==n&&(n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var h;h=o>12?o-12:0==o?12:o;for(var c=0;c<e.length;++c){var u=e.charAt(c);if(a){switch(u){case"a":u=""+n[t.getDay()];break;case"b":u=""+i[t.getMonth()];break;case"d":u=r(t.getDate());break;case"e":u=r(t.getDate()," ");break;case"h":case"H":u=r(o);break;case"I":u=r(h);break;case"l":u=r(h," ");break;case"m":u=r(t.getMonth()+1);break;case"M":u=r(t.getMinutes());break;case"q":u=""+(Math.floor(t.getMonth()/3)+1);break;case"S":u=r(t.getSeconds());break;case"y":u=r(t.getFullYear()%100);break;case"Y":u=""+t.getFullYear();break;case"p":u=l?"am":"pm";break;case"P":u=l?"AM":"PM";break;case"w":u=""+t.getDay()}s.push(u),a=!1}else"%"==u?a=!0:s.push(u)}return s.join("")}function n(t){function e(t,e,i,n){t[e]=function(){return i[n].apply(i,arguments)}}var i={date:t};void 0!=t.strftime&&e(i,"strftime",t,"strftime"),e(i,"getTime",t,"getTime"),e(i,"setTime",t,"setTime");for(var n=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],r=0;r<n.length;r++)e(i,"get"+n[r],t,"getUTC"+n[r]),e(i,"set"+n[r],t,"setUTC"+n[r]);return i}function r(t,e){if("browser"==e.timezone)return new Date(t);if(e.timezone&&"utc"!=e.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var i=new timezoneJS.Date;return i.setTimezone(e.timezone),i.setTime(t),i}return n(new Date(t))}return n(new Date(t))}function s(n){n.hooks.processOptions.push(function(n){t.each(n.getAxes(),function(t,n){var s=n.options;"time"==s.mode&&(n.tickGenerator=function(t){var i=[],n=r(t.min,s),a=0,l=s.tickSize&&"quarter"===s.tickSize[1]||s.minTickSize&&"quarter"===s.minTickSize[1]?c:h;null!=s.minTickSize&&(a="number"==typeof s.tickSize?s.tickSize:s.minTickSize[0]*o[s.minTickSize[1]]);for(var u=0;u<l.length-1&&!(t.delta<(l[u][0]*o[l[u][1]]+l[u+1][0]*o[l[u+1][1]])/2&&l[u][0]*o[l[u][1]]>=a);++u);var d=l[u][0],f=l[u][1];if("year"==f){if(null!=s.minTickSize&&"year"==s.minTickSize[1])d=Math.floor(s.minTickSize[0]);else{var p=Math.pow(10,Math.floor(Math.log(t.delta/o.year)/Math.LN10)),g=t.delta/o.year/p;d=1.5>g?1:3>g?2:7.5>g?5:10,d*=p}1>d&&(d=1)}t.tickSize=s.tickSize||[d,f];var m=t.tickSize[0];f=t.tickSize[1];var v=m*o[f];"second"==f?n.setSeconds(e(n.getSeconds(),m)):"minute"==f?n.setMinutes(e(n.getMinutes(),m)):"hour"==f?n.setHours(e(n.getHours(),m)):"month"==f?n.setMonth(e(n.getMonth(),m)):"quarter"==f?n.setMonth(3*e(n.getMonth()/3,m)):"year"==f&&n.setFullYear(e(n.getFullYear(),m)),n.setMilliseconds(0),v>=o.minute&&n.setSeconds(0),v>=o.hour&&n.setMinutes(0),v>=o.day&&n.setHours(0),v>=4*o.day&&n.setDate(1),v>=2*o.month&&n.setMonth(e(n.getMonth(),3)),v>=2*o.quarter&&n.setMonth(e(n.getMonth(),6)),v>=o.year&&n.setMonth(0);var y,x=0,b=Number.NaN;do if(y=b,b=n.getTime(),i.push(b),"month"==f||"quarter"==f)if(1>m){n.setDate(1);var w=n.getTime();n.setMonth(n.getMonth()+("quarter"==f?3:1));var _=n.getTime();n.setTime(b+x*o.hour+(_-w)*m),x=n.getHours(),n.setHours(0)}else n.setMonth(n.getMonth()+m*("quarter"==f?3:1));else"year"==f?n.setFullYear(n.getFullYear()+m):n.setTime(b+v);while(b<t.max&&b!=y);return i},n.tickFormatter=function(t,e){var n=r(t,e.options);if(null!=s.timeformat)return i(n,s.timeformat,s.monthNames,s.dayNames);var a,l=e.options.tickSize&&"quarter"==e.options.tickSize[1]||e.options.minTickSize&&"quarter"==e.options.minTickSize[1],h=e.tickSize[0]*o[e.tickSize[1]],c=e.max-e.min,u=s.twelveHourClock?" %p":"",d=s.twelveHourClock?"%I":"%H";a=h<o.minute?d+":%M:%S"+u:h<o.day?c<2*o.day?d+":%M"+u:"%b %d "+d+":%M"+u:h<o.month?"%b %d":l&&h<o.quarter||!l&&h<o.year?c<o.year?"%b":"%b %Y":l&&h<o.year?c<o.year?"Q%q":"Q%q %Y":"%Y";var f=i(n,a,s.monthNames,s.dayNames);return f})})})}var a={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},o={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},l=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],h=l.concat([[3,"month"],[6,"month"],[1,"year"]]),c=l.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);t.plot.plugins.push({init:s,options:a,name:"time",version:"1.0"}),t.plot.formatDate=i,t.plot.dateGenerator=r}(jQuery),function(t){"use strict";function e(t,e,i,n,r,s,a){var o,l,h,c,u,d,f,p,g=Math.pow,m=Math.sqrt;return o=m(g(i-t,2)+g(n-e,2)),l=m(g(r-i,2)+g(s-n,2)),h=a*o/(o+l),c=a-h,u=i+h*(t-r),d=n+h*(e-s),f=i-c*(t-r),p=n-c*(e-s),[u,d,f,p]}function i(e,i,n,r,s){var a=t.color.parse(s);a.a="number"==typeof r?r:.3,a.normalize(),a=a.toString(),i.beginPath(),i.moveTo(e[0][0],e[0][1]);for(var o=e.length,l=0;o>l;l++)i[e[l][3]].apply(i,e[l][2]);i.stroke(),i.lineWidth=0,i.lineTo(e[o-1][0],n),i.lineTo(e[0][0],n),i.closePath(),r!==!1&&(i.fillStyle=a,i.fill())}function n(t,e,i,n){(void 0===e||"bezier"!==e&&"quadratic"!==e)&&(e="quadratic"),e+="CurveTo",0==s.length?s.push([i[0],i[1],n.concat(i.slice(2)),e]):"quadraticCurveTo"==e&&2==i.length?(n=n.slice(0,2).concat(i),s.push([i[0],i[1],n,e])):s.push([i[2],i[3],n.concat(i.slice(2)),e])}function r(r,a,o){if(o.splines.show===!0){var l,h,c,u=[],d=o.splines.tension||.5,f=o.datapoints.points,p=o.datapoints.pointsize,g=r.getPlotOffset(),m=f.length,v=[];if(s=[],4>m/p)return void t.extend(o.lines,o.splines);for(l=0;m>l;l+=p)h=f[l],c=f[l+1],null==h||h<o.xaxis.min||h>o.xaxis.max||c<o.yaxis.min||c>o.yaxis.max||v.push(o.xaxis.p2c(h)+g.left,o.yaxis.p2c(c)+g.top);for(m=v.length,l=0;m-2>l;l+=2)u=u.concat(e.apply(this,v.slice(l,l+6).concat([d])));for(a.save(),a.strokeStyle=o.color,a.lineWidth=o.splines.lineWidth,n(a,"quadratic",v.slice(0,4),u.slice(0,2)),l=2;m-3>l;l+=2)n(a,"bezier",v.slice(l,l+4),u.slice(2*l-2,2*l+2));n(a,"quadratic",v.slice(m-2,m),[u[2*m-10],u[2*m-9],v[m-4],v[m-3]]),i(s,a,r.height()+10,o.splines.fill,o.color),a.restore()}}var s=[];t.plot.plugins.push({init:function(t){t.hooks.drawSeries.push(r)},options:{series:{splines:{show:!1,lineWidth:2,tension:.5,fill:!1}}},name:"spline",version:"0.8.2"})}(jQuery),function(t,e,i){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.sparkline&&t(jQuery)}(function(n){"use strict";var r,s,a,o,l,h,c,u,d,f,p,g,m,v,y,x,b,w,_,k,C,M,S,T,D,A,E,P,L,F,I,z,R={},O=0;r=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:i,normalRangeMax:i,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:i,chartRangeMax:i,chartRangeMinX:i,chartRangeMaxX:i,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:i,nullColor:i,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,colorMap:i,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:i,thresholdValue:0,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,tooltipFormat:new a("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:i,tooltipFormat:new a("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:i,targetColor:"#4a2",chartRangeMax:i,chartRangeMin:i,tooltipFormat:new a("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},A='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',s=function(){var t,e;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=n.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(e=Array.prototype.slice.call(arguments,1,-1),e.unshift(t.prototype),n.extend.apply(n,e))):t.prototype=arguments[0],t.prototype.cls=t,t},n.SPFormatClass=a=s({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,n){var r,s,a,o,l,h=this,c=t;return this.format.replace(this.fre,function(){var t;return s=arguments[1],a=arguments[3],r=h.precre.exec(s),r?(l=r[2],s=r[1]):l=!1,o=c[s],o===i?"":a&&e&&e[a]?(t=e[a],t.get?e[a].get(o)||o:e[a][o]||o):(d(o)&&(o=n.get("numberFormatter")?n.get("numberFormatter")(o):v(o,l,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),o)})}}),n.spformat=function(t,e){return new a(t,e)},o=function(t,e,i){return e>t?e:t>i?i:t},l=function(t,i){var n;return 2===i?(n=e.floor(t.length/2),t.length%2?t[n]:(t[n-1]+t[n])/2):t.length%2?(n=(t.length*i+i)/4,n%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1]):(n=(t.length*i+2)/4,n%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1])},h=function(t){var e;switch(t){case"undefined":t=i;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:e=parseFloat(t),t==e&&(t=e)}return t},c=function(t){var e,i=[];for(e=t.length;e--;)i[e]=h(t[e]);return i},u=function(t,e){var i,n,r=[];for(i=0,n=t.length;n>i;i++)t[i]!==e&&r.push(t[i]);return r},d=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},v=function(t,e,i,r,s){var a,o;for(t=(e===!1?parseFloat(t).toString():t.toFixed(e)).split(""),a=(a=n.inArray(".",t))<0?t.length:a,a<t.length&&(t[a]=s),o=a-i;o>0;o-=i)t.splice(o,0,r);return t.join("")},f=function(t,e,i){var n;for(n=e.length;n--;)if((!i||null!==e[n])&&e[n]!==t)return!1;return!0},p=function(t){var e,i=0;for(e=t.length;e--;)i+="number"==typeof t[e]?t[e]:0;return i},m=function(t){return n.isArray(t)?t:[t]},g=function(e){var i;t.createStyleSheet?t.createStyleSheet().cssText=e:(i=t.createElement("style"),i.type="text/css",t.getElementsByTagName("head")[0].appendChild(i),i["string"==typeof t.body.style.WebkitAppearance?"innerText":"innerHTML"]=e)},n.fn.simpledraw=function(e,r,s,a){var o,l;if(s&&(o=this.data("_jqs_vcanvas")))return o;if(n.fn.sparkline.canvas===!1)return!1;if(n.fn.sparkline.canvas===i){var h=t.createElement("canvas");if(h.getContext&&h.getContext("2d"))n.fn.sparkline.canvas=function(t,e,i,n){return new F(t,e,i,n)};else{if(!t.namespaces||t.namespaces.v)return n.fn.sparkline.canvas=!1,!1;t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),n.fn.sparkline.canvas=function(t,e,i){return new I(t,e,i)}}}return e===i&&(e=n(this).innerWidth()),r===i&&(r=n(this).innerHeight()),o=n.fn.sparkline.canvas(e,r,this,a),l=n(this).data("_jqs_mhandler"),l&&l.registerCanvas(o),o},n.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},n.RangeMapClass=y=s({init:function(t){var e,i,n=[];for(e in t)t.hasOwnProperty(e)&&"string"==typeof e&&e.indexOf(":")>-1&&(i=e.split(":"),i[0]=0===i[0].length?-(1/0):parseFloat(i[0]),i[1]=0===i[1].length?1/0:parseFloat(i[1]),i[2]=t[e],n.push(i));this.map=t,this.rangelist=n||!1},get:function(t){var e,n,r,s=this.rangelist;if((r=this.map[t])!==i)return r;if(s)for(e=s.length;e--;)if(n=s[e],n[0]<=t&&n[1]>=t)return n[2];return i}}),n.range_map=function(t){return new y(t)},x=s({init:function(t,e){var i=n(t);this.$el=i,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=n(t.canvas);this.canvas=t,this.$canvas=e,e.mouseenter(n.proxy(this.mouseenter,this)),e.mouseleave(n.proxy(this.mouseleave,this)),e.click(n.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=i)},mouseclick:function(t){var e=n.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(e){n(t.body).unbind("mousemove.jqs"),n(t.body).bind("mousemove.jqs",n.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new b(this.options),this.tooltip.updatePosition(e.pageX,e.pageY)),this.updateDisplay()},mouseleave:function(){n(t.body).unbind("mousemove.jqs");var e,i,r=this.splist,s=r.length,a=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),i=0;s>i;i++)e=r[i],e.clearRegionHighlight()&&(a=!0);a&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t,e,i,r,s,a=this.splist,o=a.length,l=!1,h=this.$canvas.offset(),c=this.currentPageX-h.left,u=this.currentPageY-h.top;if(this.over){for(i=0;o>i;i++)e=a[i],r=e.setRegionHighlight(this.currentEl,c,u),r&&(l=!0);if(l){if(s=n.Event("sparklineRegionChange"),s.sparklines=this.splist,this.$el.trigger(s),this.tooltip){for(t="",i=0;o>i;i++)e=a[i],t+=e.getCurrentRegionTooltip();this.tooltip.setContent(t)}this.disableHighlight||this.canvas.render()}null===r&&this.mouseleave()}}}),b=s({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(e){var i,r=e.get("tooltipClassname","jqstooltip"),s=this.sizeStyle;this.container=e.get("tooltipContainer")||t.body,this.tooltipOffsetX=e.get("tooltipOffsetX",10),this.tooltipOffsetY=e.get("tooltipOffsetY",12),n("#jqssizetip").remove(),n("#jqstooltip").remove(),this.sizetip=n("<div/>",{id:"jqssizetip",style:s,"class":r}),this.tooltip=n("<div/>",{id:"jqstooltip","class":r}).appendTo(this.container),i=this.tooltip.offset(),this.offsetLeft=i.left,this.offsetTop=i.top,this.hidden=!0,n(window).unbind("resize.jqs scroll.jqs"),n(window).bind("resize.jqs scroll.jqs",n.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=n(window).scrollTop(),this.scrollLeft=n(window).scrollLeft(),this.scrollRight=this.scrollLeft+n(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){return t?(this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition()),void 0):(this.tooltip.css("visibility","hidden"),void(this.hidden=!0))},updatePosition:function(t,e){if(t===i){if(this.mousex===i)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;this.height&&this.width&&!this.hidden&&(e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=i,n(window).unbind("resize.jqs scroll.jqs")}}),E=function(){g(A)},n(E),z=[],n.fn.sparkline=function(e,r){return this.each(function(){var s,a,o=new n.fn.sparkline.options(this,r),l=n(this);if(s=function(){var r,s,a,h,c,u,d;return"html"===e||e===i?(d=this.getAttribute(o.get("tagValuesAttribute")),d!==i&&null!==d||(d=l.html()),r=d.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):r=e,s="auto"===o.get("width")?r.length*o.get("defaultPixelsPerValue"):o.get("width"),"auto"===o.get("height")?o.get("composite")&&n.data(this,"_jqs_vcanvas")||(h=t.createElement("span"),h.innerHTML="a",l.html(h),a=n(h).innerHeight()||n(h).height(),n(h).remove(),h=null):a=o.get("height"),o.get("disableInteraction")?c=!1:(c=n.data(this,"_jqs_mhandler"),c?o.get("composite")||c.reset():(c=new x(this,o),n.data(this,"_jqs_mhandler",c))),o.get("composite")&&!n.data(this,"_jqs_vcanvas")?void(n.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),n.data(this,"_jqs_errnotify",!0))):(u=new(n.fn.sparkline[o.get("type")])(this,r,o,s,a),u.render(),c&&c.registerSparkline(u),void 0)},n(this).html()&&!o.get("disableHiddenCheck")&&n(this).is(":hidden")||!n(this).parents("body").length){if(!o.get("composite")&&n.data(this,"_jqs_pending"))for(a=z.length;a;a--)z[a-1][0]==this&&z.splice(a-1,1);z.push([this,s]),n.data(this,"_jqs_pending",!0)}else s.call(this)})},n.fn.sparkline.defaults=r(),n.sparkline_display_visible=function(){var t,e,i,r=[];for(e=0,i=z.length;i>e;e++)t=z[e][0],n(t).is(":visible")&&!n(t).parents().is(":hidden")?(z[e][1].call(t),n.data(z[e][0],"_jqs_pending",!1),r.push(e)):!n(t).closest("html").length&&!n.data(t,"_jqs_pending")&&(n.data(z[e][0],"_jqs_pending",!1),r.push(e));for(e=r.length;e;e--)z.splice(r[e-1],1)},n.fn.sparkline.options=s({init:function(t,e){var i,r,s,a;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},r=n.fn.sparkline.defaults,s=r.common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||s.tagOptionsPrefix),a=this.getTagSetting("type"),i=a===R?r[e.type||s.type]:r[a],this.mergedOptions=n.extend({},s,i,e)},getTagSetting:function(t){var e,n,r,s,a=this.tagOptionsPrefix;if(a===!1||a===i)return R;if(this.tagValCache.hasOwnProperty(t))e=this.tagValCache.key;else{if(e=this.tag.getAttribute(a+t),e===i||null===e)e=R;else if("["===e.substr(0,1))for(e=e.substr(1,e.length-2).split(","),n=e.length;n--;)e[n]=h(e[n].replace(/(^\s*)|(\s*$)/g,""));else if("{"===e.substr(0,1))for(r=e.substr(1,e.length-2).split(","),e={},n=r.length;n--;)s=r[n].split(":",2),e[s[0].replace(/(^\s*)|(\s*$)/g,"")]=h(s[1].replace(/(^\s*)|(\s*$)/g,""));else e=h(e);this.tagValCache.key=e}return e},get:function(t,e){var n,r=this.getTagSetting(t);return r!==R?r:(n=this.mergedOptions[t])===i?e:n}}),n.fn.sparkline._base=s({disabled:!1,init:function(t,e,r,s,a){this.el=t,this.$el=n(t),this.values=e,this.options=r,this.width=s,this.height=a,this.currentRegion=i},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(){},setRegionHighlight:function(t,e,n){var r,s=this.currentRegion,a=!this.options.get("disableHighlight");return e>this.canvasWidth||n>this.canvasHeight||0>e||0>n?null:(r=this.getRegion(t,e,n),s!==r?(s!==i&&a&&this.removeHighlight(),this.currentRegion=r,r!==i&&a&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==i?(this.removeHighlight(),this.currentRegion=i,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(){},getCurrentRegionTooltip:function(){var t,e,r,s,o,l,h,c,u,d,f,p,g,m,v=this.options,y="",x=[];if(this.currentRegion===i)return"";if(t=this.getCurrentRegionFields(),f=v.get("tooltipFormatter"))return f(this,v,t);if(v.get("tooltipChartTitle")&&(y+='<div class="jqs jqstitle">'+v.get("tooltipChartTitle")+"</div>\n"),e=this.options.get("tooltipFormat"),!e)return"";if(n.isArray(e)||(e=[e]),n.isArray(t)||(t=[t]),h=this.options.get("tooltipFormatFieldlist"),c=this.options.get("tooltipFormatFieldlistKey"),h&&c){for(u=[],l=t.length;l--;)d=t[l][c],-1!=(m=n.inArray(d,h))&&(u[m]=t[l]);t=u}for(r=e.length,g=t.length,l=0;r>l;l++)for(p=e[l],"string"==typeof p&&(p=new a(p)),s=p.fclass||"jqsfield",m=0;g>m;m++)t[m].isNull&&v.get("tooltipSkipNull")||(n.extend(t[m],{prefix:v.get("tooltipPrefix"),suffix:v.get("tooltipSuffix")}),o=p.render(t[m],v.get("tooltipValueLookups"),v),x.push('<div class="'+s+'">'+o+"</div>"));return x.length?y+x.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,i){var n,r,s,a,l=i.get("highlightColor"),h=i.get("highlightLighten");if(l)return l;if(h&&(n=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t))){for(s=[],r=4===t.length?16:1,a=0;3>a;a++)s[a]=o(e.round(parseInt(n[a+1],16)*r*h),0,255);return"rgb("+s.join(",")+")"}return t}}),w={changeHighlight:function(t){var e,i=this.currentRegion,r=this.target,s=this.regionShapes[i];s&&(e=this.renderRegion(i,t),n.isArray(e)||n.isArray(s)?(r.replaceWithShapes(s,e),this.regionShapes[i]=n.map(e,function(t){return t.id})):(r.replaceWithShape(s,e),this.regionShapes[i]=e.id))},render:function(){var t,e,i,r,s=this.values,a=this.target,o=this.regionShapes;if(this.cls._super.render.call(this)){for(i=s.length;i--;)if(t=this.renderRegion(i))if(n.isArray(t)){for(e=[],r=t.length;r--;)t[r].append(),e.push(t[r].id);o[i]=e}else t.append(),o[i]=t.id;else o[i]=null;a.render()}}},n.fn.sparkline.line=_=s(n.fn.sparkline._base,{type:"line",init:function(t,e,i,n,r){_._super.init.call(this,t,e,i,n,r),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e){var n,r=this.regionMap;for(n=r.length;n--;)if(null!==r[n]&&e>=r[n][0]&&e<=r[n][1])return r[n][2];return i},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:null===this.yvalues[t],x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t,e,n=this.currentRegion,r=this.target,s=this.vertices[n],a=this.options,o=a.get("spotRadius"),l=a.get("highlightSpotColor"),h=a.get("highlightLineColor");s&&(o&&l&&(t=r.drawCircle(s[0],s[1],o,i,l),this.highlightSpotId=t.id,r.insertAfterShape(this.lastShapeId,t)),h&&(e=r.drawLine(s[0],this.canvasTop,s[0],this.canvasTop+this.canvasHeight,h),this.highlightLineId=e.id,r.insertAfterShape(this.lastShapeId,e)))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t,i,n,r,s,a=this.values,o=a.length,l=this.xvalues,h=this.yvalues,c=this.yminmax;for(t=0;o>t;t++)i=a[t],n="string"==typeof a[t],r="object"==typeof a[t]&&a[t]instanceof Array,s=n&&a[t].split(":"),n&&2===s.length?(l.push(Number(s[0])),h.push(Number(s[1])),c.push(Number(s[1]))):r?(l.push(i[0]),h.push(i[1]),c.push(i[1])):(l.push(t),null===a[t]||"null"===a[t]?h.push(null):(h.push(Number(i)),c.push(Number(i))));this.options.get("xvalues")&&(l=this.options.get("xvalues")),this.maxy=this.maxyorg=e.max.apply(e,c),this.miny=this.minyorg=e.min.apply(e,c),this.maxx=e.max.apply(e,l),this.minx=e.min.apply(e,l),this.xvalues=l,this.yvalues=h,this.yminmax=c},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),n=t.get("normalRangeMax");e!==i&&(e<this.miny&&(this.miny=e),n>this.maxy&&(this.maxy=n)),t.get("chartRangeMin")!==i&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==i&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==i&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==i&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,n,r,s,a){var o=this.options.get("normalRangeMin"),l=this.options.get("normalRangeMax"),h=n+e.round(r-r*((l-this.miny)/a)),c=e.round(r*(l-o)/a);this.target.drawRect(t,h,s,c,i,this.options.get("normalRangeColor")).append()},render:function(){var t,r,s,a,o,l,h,c,u,d,f,p,g,m,v,x,b,w,k,C,M,S,T,D,A,E=this.options,P=this.target,L=this.canvasWidth,F=this.canvasHeight,I=this.vertices,z=E.get("spotRadius"),R=this.regionMap;if(_._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),T=this.xvalues,D=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(a=o=0,t=this.maxx-this.minx===0?1:this.maxx-this.minx,r=this.maxy-this.miny===0?1:this.maxy-this.miny,s=this.yvalues.length-1,z&&(4*z>L||4*z>F)&&(z=0),z&&(M=E.get("highlightSpotColor")&&!E.get("disableInteraction"),(M||E.get("minSpotColor")||E.get("spotColor")&&D[s]===this.miny)&&(F-=e.ceil(z)),(M||E.get("maxSpotColor")||E.get("spotColor")&&D[s]===this.maxy)&&(F-=e.ceil(z),a+=e.ceil(z)),(M||(E.get("minSpotColor")||E.get("maxSpotColor"))&&(D[0]===this.miny||D[0]===this.maxy))&&(o+=e.ceil(z),L-=e.ceil(z)),(M||E.get("spotColor")||E.get("minSpotColor")||E.get("maxSpotColor")&&(D[s]===this.miny||D[s]===this.maxy))&&(L-=e.ceil(z))),F--,E.get("normalRangeMin")!==i&&!E.get("drawNormalOnTop")&&this.drawNormalRange(o,a,F,L,r),h=[],c=[h],m=v=null,x=D.length,A=0;x>A;A++)u=T[A],f=T[A+1],d=D[A],p=o+e.round((u-this.minx)*(L/t)),g=x-1>A?o+e.round((f-this.minx)*(L/t)):L,v=p+(g-p)/2,R[A]=[m||0,v,A],m=v,null===d?A&&(null!==D[A-1]&&(h=[],c.push(h)),I.push(null)):(d<this.miny&&(d=this.miny),d>this.maxy&&(d=this.maxy),h.length||h.push([p,a+F]),l=[p,a+e.round(F-F*((d-this.miny)/r))],h.push(l),I.push(l));for(b=[],w=[],k=c.length,A=0;k>A;A++)h=c[A],h.length&&(E.get("fillColor")&&(h.push([h[h.length-1][0],a+F]),w.push(h.slice(0)),h.pop()),h.length>2&&(h[0]=[h[0][0],h[1][1]]),b.push(h));for(k=w.length,A=0;k>A;A++)P.drawShape(w[A],E.get("fillColor"),E.get("fillColor")).append();for(E.get("normalRangeMin")!==i&&E.get("drawNormalOnTop")&&this.drawNormalRange(o,a,F,L,r),k=b.length,A=0;k>A;A++)P.drawShape(b[A],E.get("lineColor"),i,E.get("lineWidth")).append();if(z&&E.get("valueSpots"))for(C=E.get("valueSpots"),C.get===i&&(C=new y(C)),A=0;x>A;A++)S=C.get(D[A]),S&&P.drawCircle(o+e.round((T[A]-this.minx)*(L/t)),a+e.round(F-F*((D[A]-this.miny)/r)),z,i,S).append();z&&E.get("spotColor")&&null!==D[s]&&P.drawCircle(o+e.round((T[T.length-1]-this.minx)*(L/t)),a+e.round(F-F*((D[s]-this.miny)/r)),z,i,E.get("spotColor")).append(),this.maxy!==this.minyorg&&(z&&E.get("minSpotColor")&&(u=T[n.inArray(this.minyorg,D)],P.drawCircle(o+e.round((u-this.minx)*(L/t)),a+e.round(F-F*((this.minyorg-this.miny)/r)),z,i,E.get("minSpotColor")).append()),z&&E.get("maxSpotColor")&&(u=T[n.inArray(this.maxyorg,D)],P.drawCircle(o+e.round((u-this.minx)*(L/t)),a+e.round(F-F*((this.maxyorg-this.miny)/r)),z,i,E.get("maxSpotColor")).append())),this.lastShapeId=P.getLastShapeId(),this.canvasTop=a,P.render()}}}),n.fn.sparkline.bar=k=s(n.fn.sparkline._base,w,{type:"bar",init:function(t,r,s,a,l){var d,f,p,g,m,v,x,b,w,_,C,M,S,T,D,A,E,P,L,F,I,z,R=parseInt(s.get("barWidth"),10),O=parseInt(s.get("barSpacing"),10),N=s.get("chartRangeMin"),H=s.get("chartRangeMax"),j=s.get("chartRangeClip"),W=1/0,Y=-(1/0);for(k._super.init.call(this,t,r,s,a,l),v=0,x=r.length;x>v;v++)F=r[v],d="string"==typeof F&&F.indexOf(":")>-1,(d||n.isArray(F))&&(D=!0,d&&(F=r[v]=c(F.split(":"))),F=u(F,null),f=e.min.apply(e,F),p=e.max.apply(e,F),W>f&&(W=f),p>Y&&(Y=p));this.stacked=D,this.regionShapes={},this.barWidth=R,this.barSpacing=O,this.totalBarWidth=R+O,this.width=a=r.length*R+(r.length-1)*O,this.initTarget(),j&&(S=N===i?-(1/0):N,T=H===i?1/0:H),m=[],g=D?[]:m;var $=[],B=[];for(v=0,x=r.length;x>v;v++)if(D)for(A=r[v],r[v]=L=[],$[v]=0,g[v]=B[v]=0,E=0,P=A.length;P>E;E++)F=L[E]=j?o(A[E],S,T):A[E],null!==F&&(F>0&&($[v]+=F),0>W&&Y>0?0>F?B[v]+=e.abs(F):g[v]+=F:g[v]+=e.abs(F-(0>F?Y:W)),m.push(F));else F=j?o(r[v],S,T):r[v],F=r[v]=h(F),null!==F&&m.push(F);this.max=M=e.max.apply(e,m),this.min=C=e.min.apply(e,m),this.stackMax=Y=D?e.max.apply(e,$):M,this.stackMin=W=D?e.min.apply(e,m):C,s.get("chartRangeMin")!==i&&(s.get("chartRangeClip")||s.get("chartRangeMin")<C)&&(C=s.get("chartRangeMin")),s.get("chartRangeMax")!==i&&(s.get("chartRangeClip")||s.get("chartRangeMax")>M)&&(M=s.get("chartRangeMax")),this.zeroAxis=w=s.get("zeroAxis",!0),_=0>=C&&M>=0&&w?0:0==w?C:C>0?C:M,this.xaxisOffset=_,b=D?e.max.apply(e,g)+e.max.apply(e,B):M-C,this.canvasHeightEf=w&&0>C?this.canvasHeight-2:this.canvasHeight-1,_>C?(z=D&&M>=0?Y:M,I=(z-_)/b*this.canvasHeight,I!==e.ceil(I)&&(this.canvasHeightEf-=2,I=e.ceil(I))):I=this.canvasHeight,this.yoffset=I,n.isArray(s.get("colorMap"))?(this.colorMapByIndex=s.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=s.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new y(this.colorMapByValue))),this.range=b},getRegion:function(t,n){var r=e.floor(n/this.totalBarWidth);return 0>r||r>=this.values.length?i:r},getCurrentRegionFields:function(){var t,e,i=this.currentRegion,n=m(this.values[i]),r=[];for(e=n.length;e--;)t=n[e],r.push({isNull:null===t,value:t,color:this.calcColor(e,t,i),offset:i});return r},calcColor:function(t,e,r){var s,a,o=this.colorMapByIndex,l=this.colorMapByValue,h=this.options;return s=this.stacked?h.get("stackedBarColor"):0>e?h.get("negBarColor"):h.get("barColor"),0===e&&h.get("zeroColor")!==i&&(s=h.get("zeroColor")),l&&(a=l.get(e))?s=a:o&&o.length>r&&(s=o[r]),n.isArray(s)?s[t%s.length]:s},renderRegion:function(t,r){var s,a,o,l,h,c,u,d,p,g,m=this.values[t],v=this.options,y=this.xaxisOffset,x=[],b=this.range,w=this.stacked,_=this.target,k=t*this.totalBarWidth,C=this.canvasHeightEf,M=this.yoffset;if(m=n.isArray(m)?m:[m],u=m.length,d=m[0],l=f(null,m),g=f(y,m,!0),l)return v.get("nullColor")?(o=r?v.get("nullColor"):this.calcHighlightColor(v.get("nullColor"),v),s=M>0?M-1:M,_.drawRect(k,s,this.barWidth-1,0,o,o)):i;for(h=M,c=0;u>c;c++){if(d=m[c],w&&d===y){if(!g||p)continue;p=!0}a=b>0?e.floor(C*(e.abs(d-y)/b))+1:1,y>d||d===y&&0===M?(s=h,h+=a):(s=M-a,M-=a),o=this.calcColor(c,d,t),r&&(o=this.calcHighlightColor(o,v)),x.push(_.drawRect(k,s,this.barWidth-1,a-1,o,o))}return 1===x.length?x[0]:x}}),n.fn.sparkline.tristate=C=s(n.fn.sparkline._base,w,{type:"tristate",init:function(t,e,r,s,a){var o=parseInt(r.get("barWidth"),10),l=parseInt(r.get("barSpacing"),10);C._super.init.call(this,t,e,r,s,a),this.regionShapes={},this.barWidth=o,this.barSpacing=l,this.totalBarWidth=o+l,this.values=n.map(e,Number),this.width=s=e.length*o+(e.length-1)*l,n.isArray(r.get("colorMap"))?(this.colorMapByIndex=r.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=r.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new y(this.colorMapByValue))),this.initTarget()},getRegion:function(t,i){return e.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var i,n,r=this.values,s=this.options,a=this.colorMapByIndex,o=this.colorMapByValue;
return i=o&&(n=o.get(t))?n:a&&a.length>e?a[e]:r[e]<0?s.get("negBarColor"):r[e]>0?s.get("posBarColor"):s.get("zeroBarColor")},renderRegion:function(t,i){var n,r,s,a,o,l,h=this.values,c=this.options,u=this.target;return n=u.pixelHeight,s=e.round(n/2),a=t*this.totalBarWidth,h[t]<0?(o=s,r=s-1):h[t]>0?(o=0,r=s-1):(o=s-1,r=2),l=this.calcColor(h[t],t),null!==l?(i&&(l=this.calcHighlightColor(l,c)),u.drawRect(a,o,this.barWidth-1,r-1,l,l)):void 0}}),n.fn.sparkline.discrete=M=s(n.fn.sparkline._base,w,{type:"discrete",init:function(t,r,s,a,o){M._super.init.call(this,t,r,s,a,o),this.regionShapes={},this.values=r=n.map(r,Number),this.min=e.min.apply(e,r),this.max=e.max.apply(e,r),this.range=this.max-this.min,this.width=a="auto"===s.get("width")?2*r.length:this.width,this.interval=e.floor(a/r.length),this.itemWidth=a/r.length,s.get("chartRangeMin")!==i&&(s.get("chartRangeClip")||s.get("chartRangeMin")<this.min)&&(this.min=s.get("chartRangeMin")),s.get("chartRangeMax")!==i&&(s.get("chartRangeClip")||s.get("chartRangeMax")>this.max)&&(this.max=s.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===s.get("lineHeight")?e.round(.3*this.canvasHeight):s.get("lineHeight"))},getRegion:function(t,i){return e.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],offset:t}},renderRegion:function(t,i){var n,r,s,a,l=this.values,h=this.options,c=this.min,u=this.max,d=this.range,f=this.interval,p=this.target,g=this.canvasHeight,m=this.lineHeight,v=g-m;return r=o(l[t],c,u),a=t*f,n=e.round(v-v*((r-c)/d)),s=h.get("thresholdColor")&&r<h.get("thresholdValue")?h.get("thresholdColor"):h.get("lineColor"),i&&(s=this.calcHighlightColor(s,h)),p.drawLine(a,n,a,n+m,s)}}),n.fn.sparkline.bullet=S=s(n.fn.sparkline._base,{type:"bullet",init:function(t,n,r,s,a){var o,l,h;S._super.init.call(this,t,n,r,s,a),this.values=n=c(n),h=n.slice(),h[0]=null===h[0]?h[2]:h[0],h[1]=null===n[1]?h[2]:h[1],o=e.min.apply(e,n),l=e.max.apply(e,n),o=r.get("base")===i?0>o?o:0:r.get("base"),this.min=o,this.max=l,this.range=l-o,this.shapes={},this.valueShapes={},this.regiondata={},this.width=s="auto"===r.get("width")?"4.0em":s,this.target=this.$el.simpledraw(s,a,r.get("composite")),n.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,n){var r=this.target.getShapeAt(t,e,n);return r!==i&&this.shapes[r]!==i?this.shapes[r]:i},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e,i=this.currentRegion,n=this.valueShapes[i];switch(delete this.shapes[n],i.substr(0,1)){case"r":e=this.renderRange(i.substr(1),t);break;case"p":e=this.renderPerformance(t);break;case"t":e=this.renderTarget(t)}this.valueShapes[i]=e.id,this.shapes[e.id]=i,this.target.replaceWithShape(n,e)},renderRange:function(t,i){var n=this.values[t],r=e.round(this.canvasWidth*((n-this.min)/this.range)),s=this.options.get("rangeColors")[t-2];return i&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(0,0,r-1,this.canvasHeight-1,s,s)},renderPerformance:function(t){var i=this.values[1],n=e.round(this.canvasWidth*((i-this.min)/this.range)),r=this.options.get("performanceColor");return t&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,e.round(.3*this.canvasHeight),n-1,e.round(.4*this.canvasHeight)-1,r,r)},renderTarget:function(t){var i=this.values[0],n=e.round(this.canvasWidth*((i-this.min)/this.range)-this.options.get("targetWidth")/2),r=e.round(.1*this.canvasHeight),s=this.canvasHeight-2*r,a=this.options.get("targetColor");return t&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(n,r,this.options.get("targetWidth")-1,s-1,a,a)},render:function(){var t,e,i=this.values.length,n=this.target;if(S._super.render.call(this)){for(t=2;i>t;t++)e=this.renderRange(t).append(),this.shapes[e.id]="r"+t,this.valueShapes["r"+t]=e.id;null!==this.values[1]&&(e=this.renderPerformance().append(),this.shapes[e.id]="p1",this.valueShapes.p1=e.id),null!==this.values[0]&&(e=this.renderTarget().append(),this.shapes[e.id]="t0",this.valueShapes.t0=e.id),n.render()}}}),n.fn.sparkline.pie=T=s(n.fn.sparkline._base,{type:"pie",init:function(t,i,r,s,a){var o,l=0;if(T._super.init.call(this,t,i,r,s,a),this.shapes={},this.valueShapes={},this.values=i=n.map(i,Number),"auto"===r.get("width")&&(this.width=this.height),i.length>0)for(o=i.length;o--;)l+=i[o];this.total=l,this.initTarget(),this.radius=e.floor(e.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,n){var r=this.target.getShapeAt(t,e,n);return r!==i&&this.shapes[r]!==i?this.shapes[r]:i},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.renderSlice(e,t),n=this.valueShapes[e];delete this.shapes[n],this.target.replaceWithShape(n,i),this.valueShapes[e]=i.id,this.shapes[i.id]=e},renderSlice:function(t,n){var r,s,a,o,l,h=this.target,c=this.options,u=this.radius,d=c.get("borderWidth"),f=c.get("offset"),p=2*e.PI,g=this.values,m=this.total,v=f?2*e.PI*(f/360):0;for(o=g.length,a=0;o>a;a++){if(r=v,s=v,m>0&&(s=v+p*(g[a]/m)),t===a)return l=c.get("sliceColors")[a%c.get("sliceColors").length],n&&(l=this.calcHighlightColor(l,c)),h.drawPieSlice(u,u,u-d,r,s,i,l);v=s}},render:function(){var t,n,r=this.target,s=this.values,a=this.options,o=this.radius,l=a.get("borderWidth");if(T._super.render.call(this)){for(l&&r.drawCircle(o,o,e.floor(o-l/2),a.get("borderColor"),i,l).append(),n=s.length;n--;)s[n]&&(t=this.renderSlice(n).append(),this.valueShapes[n]=t.id,this.shapes[t.id]=n);r.render()}}}),n.fn.sparkline.box=D=s(n.fn.sparkline._base,{type:"box",init:function(t,e,i,r,s){D._super.init.call(this,t,e,i,r,s),this.values=n.map(e,Number),this.width="auto"===i.get("width")?"4.0em":r,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==i&&t.push({field:"lo",value:this.loutlier}),this.routlier!==i&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==i&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==i&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t,n,r,s,a,o,h,c,u,d,f,p=this.target,g=this.values,m=g.length,v=this.options,y=this.canvasWidth,x=this.canvasHeight,b=v.get("chartRangeMin")===i?e.min.apply(e,g):v.get("chartRangeMin"),w=v.get("chartRangeMax")===i?e.max.apply(e,g):v.get("chartRangeMax"),_=0;if(D._super.render.call(this)){if(v.get("raw"))v.get("showOutliers")&&g.length>5?(n=g[0],t=g[1],s=g[2],a=g[3],o=g[4],h=g[5],c=g[6]):(t=g[0],s=g[1],a=g[2],o=g[3],h=g[4]);else if(g.sort(function(t,e){return t-e}),s=l(g,1),a=l(g,2),o=l(g,3),r=o-s,v.get("showOutliers")){for(t=h=i,u=0;m>u;u++)t===i&&g[u]>s-r*v.get("outlierIQR")&&(t=g[u]),g[u]<o+r*v.get("outlierIQR")&&(h=g[u]);n=g[0],c=g[m-1]}else t=g[0],h=g[m-1];this.quartiles=[s,a,o],this.lwhisker=t,this.rwhisker=h,this.loutlier=n,this.routlier=c,f=y/(w-b+1),v.get("showOutliers")&&(_=e.ceil(v.get("spotRadius")),y-=2*e.ceil(v.get("spotRadius")),f=y/(w-b+1),t>n&&p.drawCircle((n-b)*f+_,x/2,v.get("spotRadius"),v.get("outlierLineColor"),v.get("outlierFillColor")).append(),c>h&&p.drawCircle((c-b)*f+_,x/2,v.get("spotRadius"),v.get("outlierLineColor"),v.get("outlierFillColor")).append()),p.drawRect(e.round((s-b)*f+_),e.round(.1*x),e.round((o-s)*f),e.round(.8*x),v.get("boxLineColor"),v.get("boxFillColor")).append(),p.drawLine(e.round((t-b)*f+_),e.round(x/2),e.round((s-b)*f+_),e.round(x/2),v.get("lineColor")).append(),p.drawLine(e.round((t-b)*f+_),e.round(x/4),e.round((t-b)*f+_),e.round(x-x/4),v.get("whiskerColor")).append(),p.drawLine(e.round((h-b)*f+_),e.round(x/2),e.round((o-b)*f+_),e.round(x/2),v.get("lineColor")).append(),p.drawLine(e.round((h-b)*f+_),e.round(x/4),e.round((h-b)*f+_),e.round(x-x/4),v.get("whiskerColor")).append(),p.drawLine(e.round((a-b)*f+_),e.round(.1*x),e.round((a-b)*f+_),e.round(.9*x),v.get("medianColor")).append(),v.get("target")&&(d=e.ceil(v.get("spotRadius")),p.drawLine(e.round((v.get("target")-b)*f+_),e.round(x/2-d),e.round((v.get("target")-b)*f+_),e.round(x/2+d),v.get("targetColor")).append(),p.drawLine(e.round((v.get("target")-b)*f+_-d),e.round(x/2),e.round((v.get("target")-b)*f+_+d),e.round(x/2),v.get("targetColor")).append()),p.render()}}}),P=s({init:function(t,e,i,n){this.target=t,this.id=e,this.type=i,this.args=n},append:function(){return this.target.appendShape(this),this}}),L=s({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,i){t&&(this.width=t,this.height=e,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),n.data(i,"_jqs_vcanvas",this))},drawLine:function(t,e,i,n,r,s){return this.drawShape([[t,e],[i,n]],r,s)},drawShape:function(t,e,i,n){return this._genShape("Shape",[t,e,i,n])},drawCircle:function(t,e,i,n,r,s){return this._genShape("Circle",[t,e,i,n,r,s])},drawPieSlice:function(t,e,i,n,r,s,a){return this._genShape("PieSlice",[t,e,i,n,r,s,a])},drawRect:function(t,e,i,n,r,s){return this._genShape("Rect",[t,e,i,n,r,s])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){n(e).html(t)},_calculatePixelDims:function(t,e,i){var r;r=this._pxregex.exec(e),r?this.pixelHeight=r[1]:this.pixelHeight=n(i).height(),r=this._pxregex.exec(t),r?this.pixelWidth=r[1]:this.pixelWidth=n(i).width()},_genShape:function(t,e){var i=O++;return e.unshift(i),new P(this,i,t,e)},appendShape:function(){alert("appendShape not implemented")},replaceWithShape:function(){alert("replaceWithShape not implemented")},insertAfterShape:function(){alert("insertAfterShape not implemented")},removeShapeId:function(){alert("removeShapeId not implemented")},getShapeAt:function(){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),F=s(L,{init:function(e,r,s,a){F._super.init.call(this,e,r,s),this.canvas=t.createElement("canvas"),s[0]&&(s=s[0]),n.data(s,"_jqs_vcanvas",this),n(this.canvas).css({display:"inline-block",width:e,height:r,verticalAlign:"top"}),this._insert(this.canvas,s),this._calculatePixelDims(e,r,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=a,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i,n(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,n){var r=this.canvas.getContext("2d");return t!==i&&(r.strokeStyle=t),r.lineWidth=n===i?1:n,e!==i&&(r.fillStyle=e),r},reset:function(){var t=this._getContext();t.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i},_drawShape:function(t,e,n,r,s){var a,o,l=this._getContext(n,r,s);for(l.beginPath(),l.moveTo(e[0][0]+.5,e[0][1]+.5),a=1,o=e.length;o>a;a++)l.lineTo(e[a][0]+.5,e[a][1]+.5);n!==i&&l.stroke(),r!==i&&l.fill(),this.targetX!==i&&this.targetY!==i&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,n,r,s,a,o,l){var h=this._getContext(a,o,l);h.beginPath(),h.arc(n,r,s,0,2*e.PI,!1),this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),a!==i&&h.stroke(),o!==i&&h.fill()},_drawPieSlice:function(t,e,n,r,s,a,o,l){var h=this._getContext(o,l);h.beginPath(),h.moveTo(e,n),h.arc(e,n,r,s,a,!1),h.lineTo(e,n),h.closePath(),o!==i&&h.stroke(),l&&h.fill(),this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,i,n,r,s,a){return this._drawShape(t,[[e,i],[e+n,i],[e+n,i+r],[e,i+r],[e,i]],s,a)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i,n=this.shapeseq;for(this.shapes[e.id]=e,i=n.length;i--;)n[i]==t&&(n[i]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var i,n,r,s=this.shapeseq,a={};for(n=t.length;n--;)a[t[n]]=!0;for(n=s.length;n--;)i=s[n],a[i]&&(s.splice(n,1),delete this.shapes[i],r=n);for(n=e.length;n--;)s.splice(r,0,e[n].id),this.shapes[e[n].id]=e[n]},insertAfterShape:function(t,e){var i,n=this.shapeseq;for(i=n.length;i--;)if(n[i]===t)return n.splice(i+1,0,e.id),void(this.shapes[e.id]=e)},removeShapeId:function(t){var e,i=this.shapeseq;for(e=i.length;e--;)if(i[e]===t){i.splice(e,1);break}delete this.shapes[t]},getShapeAt:function(t,e,i){return this.targetX=e,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var t,e,i,n=this.shapeseq,r=this.shapes,s=n.length,a=this._getContext();for(a.clearRect(0,0,this.pixelWidth,this.pixelHeight),i=0;s>i;i++)t=n[i],e=r[t],this["_draw"+e.type].apply(this,e.args);this.interact||(this.shapes={},this.shapeseq=[])}}),I=s(L,{init:function(e,i,r){var s;I._super.init.call(this,e,i,r),r[0]&&(r=r[0]),n.data(r,"_jqs_vcanvas",this),this.canvas=t.createElement("span"),n(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:i,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(e,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,s='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",s),this.group=n(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,n,r,s){var a,o,l,h,c,u,d,f=[];for(d=0,u=e.length;u>d;d++)f[d]=""+e[d][0]+","+e[d][1];return a=f.splice(0,1),s=s===i?1:s,o=n===i?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+n+'" ',l=r===i?' filled="false"':' fillColor="'+r+'" filled="true" ',h=f[0]===f[f.length-1]?"x ":"",c='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+o+l+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+a+" l "+f.join(", ")+" "+h+'e"> </v:shape>'},_drawCircle:function(t,e,n,r,s,a,o){var l,h,c;return e-=r,n-=r,l=s===i?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+s+'" ',h=a===i?' filled="false"':' fillColor="'+a+'" filled="true" ',c='<v:oval  id="jqsshape'+t+'" '+l+h+' style="position:absolute;top:'+n+"px; left:"+e+"px; width:"+2*r+"px; height:"+2*r+'px"></v:oval>'},_drawPieSlice:function(t,n,r,s,a,o,l,h){var c,u,d,f,p,g,m,v;if(a===o)return"";if(o-a===2*e.PI&&(a=0,o=2*e.PI),u=n+e.round(e.cos(a)*s),d=r+e.round(e.sin(a)*s),f=n+e.round(e.cos(o)*s),p=r+e.round(e.sin(o)*s),u===f&&d===p){if(o-a<e.PI)return"";u=f=n+s,d=p=r}return u===f&&d===p&&o-a<e.PI?"":(c=[n-s,r-s,n+s,r+s,u,d,f,p],g=l===i?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ',m=h===i?' filled="false"':' fillColor="'+h+'" filled="true" ',v='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+g+m+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+n+","+r+" wa "+c.join(", ")+' x e"> </v:shape>')},_drawRect:function(t,e,i,n,r,s,a){return this._drawShape(t,[[e,i],[e,i+r],[e+n,i+r],[e+n,i],[e,i]],s,a)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=n("#jqsshape"+t),r=this["_draw"+e.type].apply(this,e.args);i[0].outerHTML=r},replaceWithShapes:function(t,e){var i,r=n("#jqsshape"+t[0]),s="",a=e.length;for(i=0;a>i;i++)s+=this["_draw"+e[i].type].apply(this,e[i].args);for(r[0].outerHTML=s,i=1;i<t.length;i++)n("#jqsshape"+t[i]).remove()},insertAfterShape:function(t,e){var i=n("#jqsshape"+t),r=this["_draw"+e.type].apply(this,e.args);i[0].insertAdjacentHTML("afterEnd",r)},removeShapeId:function(t){var e=n("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t){var e=t.id.substr(8);return e},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math),/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.1-beta.4
 *
 * Copyright 2014 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
function(){"use strict";var t=this,e=t.Chart,i=function(t){return this.canvas=t.canvas,this.ctx=t,this.width=t.canvas.width,this.height=t.canvas.height,this.aspectRatio=this.width/this.height,n.retinaScale(this),this};i.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},i.types={};var n=i.helpers={},r=n.each=function(t,e,i){var n=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var r;for(r=0;r<t.length;r++)e.apply(i,[t[r],r].concat(n))}else for(var s in t)e.apply(i,[t[s],s].concat(n))},s=n.clone=function(t){var e={};return r(t,function(i,n){t.hasOwnProperty(n)&&(e[n]=i)}),e},a=n.extend=function(t){return r(Array.prototype.slice.call(arguments,1),function(e){r(e,function(i,n){e.hasOwnProperty(n)&&(t[n]=i)})}),t},o=n.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),a.apply(null,t)},l=n.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},h=(n.where=function(t,e){var i=[];return n.each(t,function(t){e(t)&&i.push(t)}),i},n.findNextWhere=function(t,e,i){i||(i=-1);for(var n=i+1;n<t.length;n++){var r=t[n];if(e(r))return r}},n.findPreviousWhere=function(t,e,i){i||(i=t.length);for(var n=i-1;n>=0;n--){var r=t[n];if(e(r))return r}},n.inherits=function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=h,t&&a(i.prototype,t),i.__super__=e.prototype,i}),c=n.noop=function(){},u=n.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=n.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},f=n.amd="function"==typeof t.define&&t.define.amd,p=n.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=n.max=function(t){return Math.max.apply(Math,t)},m=n.min=function(t){return Math.min.apply(Math,t)},v=(n.cap=function(t,e,i){if(p(e)){if(t>e)return e}else if(p(i)&&i>t)return i;return t},n.getDecimalPlaces=function(t){return t%1!==0&&p(t)?t.toString().split(".")[1].length:0}),y=n.radians=function(t){return t*(Math.PI/180)},x=(n.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=Math.sqrt(i*i+n*n),s=2*Math.PI+Math.atan2(n,i);return 0>i&&0>n&&(s+=2*Math.PI),{angle:s,distance:r}},n.aliasPixel=function(t){return t%2===0?0:.5}),b=(n.splineCurve=function(t,e,i,n){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),s=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),a=n*r/(r+s),o=n*s/(r+s);return{inner:{x:e.x-a*(i.x-t.x),y:e.y-a*(i.y-t.y)},outer:{x:e.x+o*(i.x-t.x),y:e.y+o*(i.y-t.y)}}},n.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),w=(n.calculateScaleRange=function(t,e,i,n,r){var s=2,a=Math.floor(e/(1.5*i)),o=s>=a,l=g(t),h=m(t);l===h&&(l+=.5,h>=.5&&!n?h-=.5:l+=.5);for(var c=Math.abs(l-h),u=b(c),d=Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u),f=n?0:Math.floor(h/(1*Math.pow(10,u)))*Math.pow(10,u),p=d-f,v=Math.pow(10,u),y=Math.round(p/v);(y>a||a>2*y)&&!o;)if(y>a)v*=2,y=Math.round(p/v),y%1!==0&&(o=!0);else if(r&&u>=0){if(v/2%1!==0)break;v/=2,y=Math.round(p/v)}else v/=2,y=Math.round(p/v);return o&&(y=s,v=p/y),{steps:y,stepValue:v,min:f,max:f+y*v}},n.template=function(t,e){function i(t,e){var i=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t];return e?i(e):i}if(t instanceof Function)return t(e);var n={};return i(t,e)}),_=(n.generateLabels=function(t,e,i,n){var s=new Array(e);return labelTemplateString&&r(s,function(e,r){s[r]=w(t,{value:i+n*(r+1)})}),s},n.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/i)))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(1*t-e)*Math.PI/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.3*1.5),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/i)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-_.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*_.easeInBounce(2*t):.5*_.easeOutBounce(2*t-1)+.5}}),k=n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),C=(n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),n.animationLoop=function(t,e,i,n,r,s){var a=0,o=_[i]||_.linear,l=function(){a++;var i=a/e,h=o(i);t.call(s,h,i,a),n.call(s,h,i),e>a?s.animationFrame=k(l):r.apply(s)};k(l)},n.getRelativePosition=function(t){var e,i,n=t.originalEvent||t,r=t.currentTarget||t.srcElement,s=r.getBoundingClientRect();return n.touches?(e=n.touches[0].clientX-s.left,i=n.touches[0].clientY-s.top):(e=n.clientX-s.left,i=n.clientY-s.top),{x:e,y:i}},n.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}),M=n.removeEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=c},S=(n.bindEvents=function(t,e,i){t.events||(t.events={}),r(e,function(e){t.events[e]=function(){i.apply(t,arguments)},C(t.chart.canvas,e,t.events[e])})},n.unbindEvents=function(t,e){r(e,function(e,i){M(t.chart.canvas,i,e)})}),T=n.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},D=n.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},A=(n.getMaximumSize=n.getMaximumWidth,n.retinaScale=function(t){var e=t.ctx,i=t.canvas.width,n=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=i+"px",e.canvas.style.height=n+"px",e.canvas.height=n*window.devicePixelRatio,e.canvas.width=i*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),E=n.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},P=n.fontString=function(t,e,i){return e+" "+t+"px "+i},L=n.longestText=function(t,e,i){t.font=e;var n=0;return r(i,function(e){var i=t.measureText(e).width;n=i>n?i:n}),n},F=n.drawRoundedRectangle=function(t,e,i,n,r,s){t.beginPath(),t.moveTo(e+s,i),t.lineTo(e+n-s,i),t.quadraticCurveTo(e+n,i,e+n,i+s),t.lineTo(e+n,i+r-s),t.quadraticCurveTo(e+n,i+r,e+n-s,i+r),t.lineTo(e+s,i+r),t.quadraticCurveTo(e,i+r,e,i+r-s),t.lineTo(e,i+s),t.quadraticCurveTo(e,i,e+s,i),t.closePath()};i.instances={},i.Type=function(t,e,n){this.options=e,this.chart=n,this.id=u(),i.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},a(i.Type.prototype,{initialize:function(){return this},clear:function(){return E(this.chart),this},stop:function(){return n.cancelAnimFrame.call(t,this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,i=T(this.chart.canvas),n=this.options.maintainAspectRatio?i/this.chart.aspectRatio:D(this.chart.canvas);return e.width=this.chart.width=i,e.height=this.chart.height=n,A(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:c,render:function(t){return t&&this.reflow(),this.options.animation&&!t?n.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),S(this,this.events),delete i.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var s=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(r(t,function(t,i){t!==this.activeElements[i]&&(e=!0)},this),e)}.call(this,t);if(s||e){if(this.activeElements=t,this.draw(),t.length>0)if(this.datasets&&this.datasets.length>1){for(var a,o,h=this.datasets.length-1;h>=0&&(a=this.datasets[h].points||this.datasets[h].bars||this.datasets[h].segments,o=l(a,t[0]),-1===o);h--);var c=[],u=[],d=function(){var t,e,i,r,s,a=[],l=[],h=[];return n.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[o]&&t[o].hasValue()&&a.push(t[o])}),n.each(a,function(t){l.push(t.x),h.push(t.y),c.push(n.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),s=m(h),i=g(h),r=m(l),e=g(l),{x:r>this.chart.width/2?r:e,y:(s+i)/2}}.call(this,o);new i.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else r(t,function(t){var e=t.tooltipPosition();new i.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,t),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),i.Type.extend=function(t){var e=this,n=function(){return e.apply(this,arguments)};if(n.prototype=s(e.prototype),a(n.prototype,t),n.extend=i.Type.extend,t.name||e.prototype.name){var r=t.name||e.prototype.name,l=i.defaults[e.prototype.name]?s(i.defaults[e.prototype.name]):{};i.defaults[r]=a(l,t.defaults),i.types[r]=n,i.prototype[r]=function(t,e){var s=o(i.defaults.global,i.defaults[r],e||{});return new n(t,s,this)}}else d("Name not provided for this chart, so it hasn't been registered");return e},i.Element=function(t){a(this,t),this.initialize.apply(this,arguments),this.save()},a(i.Element.prototype,{initialize:function(){},restore:function(t){return t?r(t,function(t){this[t]=this._saved[t]},this):a(this,this._saved),this},save:function(){return this._saved=s(this),delete this._saved._saved,this},update:function(t){return r(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return r(t,function(t,i){this[i]=(t-this._saved[i])*e+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),i.Element.extend=h,i.Point=i.Element.extend({display:!0,inRange:function(t,e){var i=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),i.Arc=i.Element.extend({inRange:function(t,e){var i=n.getAngleFromPoint(this,{x:t,y:e}),r=i.angle>=this.startAngle&&i.angle<=this.endAngle,s=i.distance>=this.innerRadius&&i.distance<=this.outerRadius;return r&&s},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),t.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.lineJoin="bevel",this.showStroke&&t.stroke()}}),i.Rectangle=i.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,i=this.x-e,n=this.x+e,r=this.base-(this.base-this.y),s=this.strokeWidth/2;this.showStroke&&(i+=s,n-=s,r+=s),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(i,this.base),t.lineTo(i,r),t.lineTo(n,r),t.lineTo(n,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),i.Tooltip=i.Element.extend({draw:function(){var t=this.chart.ctx;t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=2,i=t.measureText(this.text).width+2*this.xPadding,n=this.fontSize+2*this.yPadding,r=n+this.caretHeight+e;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right"),this.y-r<0&&(this.yAlign="below");var s=this.x-i/2,a=this.y-r;switch(t.fillStyle=this.fillColor,this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":a=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":s=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":s=this.x-(this.cornerRadius+this.caretHeight)}F(t,s,a,i,n,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,s+i/2,a+n/2)}}),i.MultiTooltip=i.Element.extend({initialize:function(){this.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=P(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=L(this.ctx,this.font,this.labels)+this.fontSize+3,i=g([e,t]);this.width=i+2*this.xPadding;var n=this.height/2;this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,i=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*i+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){F(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,n.each(this.labels,function(e,i){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[i].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}),i.Scale=i.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?L(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,i=this.ctx.measureText(this.xLabels[0]).width,n=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=n/2+3,this.xScalePaddingLeft=i/2>this.yLabelWidth+10?i/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var r,s=L(this.ctx,this.font,this.xLabels);this.xLabelWidth=s;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)r=Math.cos(y(this.xLabelRotation)),t=r*i,e=r*n,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=r*s;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*s+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),i=e/(this.valuesCount-(this.offsetGridLines?0:1)),n=i*t+this.xScalePaddingLeft;return this.offsetGridLines&&(n+=i/2),Math.round(n)},update:function(t){n.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,i=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,r(this.yLabels,function(r,s){var a=this.endPoint-e*s,o=Math.round(a);t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(r,i-10,a),t.beginPath(),s>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),o+=n.aliasPixel(t.lineWidth),t.moveTo(i,o),t.lineTo(this.width,o),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(i-5,o),t.lineTo(i,o),t.stroke(),t.closePath()},this),r(this.xLabels,function(e,i){var n=this.calculateX(i)+x(this.lineWidth),r=this.calculateX(i-(this.offsetGridLines?.5:0))+x(this.lineWidth),s=this.xLabelRotation>0;t.beginPath(),i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(n,s?this.endPoint+12:this.endPoint+8),t.rotate(-1*y(this.xLabelRotation)),t.font=this.font,t.textAlign=s?"right":"center",t.textBaseline=s?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),i.RadialScale=i.Element.extend({initialize:function(){this.size=m([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,i,n,r,s,a,o,l,h,c,u,d=m([this.height/2-this.pointLabelFontSize-5,this.width/2]),f=this.width,g=0;for(this.ctx.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,d),i=this.ctx.measureText(w(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(n=i/2,t.x+n>f&&(f=t.x+n,r=e),t.x-n<g&&(g=t.x-n,a=e)):e<this.valuesCount/2?t.x+i>f&&(f=t.x+i,r=e):e>this.valuesCount/2&&t.x-i<g&&(g=t.x-i,a=e);l=g,h=Math.ceil(f-this.width),s=this.getIndexAngle(r),o=this.getIndexAngle(a),c=h/Math.sin(s+Math.PI/2),u=l/Math.sin(o+Math.PI/2),c=p(c)?c:0,u=p(u)?u:0,this.drawingArea=d-(u+c)/2,this.setCenterPoint(u,c)},setCenterPoint:function(t,e){var i=this.width-e-this.drawingArea,n=t+this.drawingArea;this.xCenter=(n+i)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var i=this.getIndexAngle(t);return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(r(this.yLabels,function(e,i){if(i>0){var n,r=i*(this.drawingArea/this.steps),s=this.yCenter-r;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,r,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var a=0;a<this.valuesCount;a++)n=this.getPointPosition(a,this.calculateCenterOffset(this.min+i*this.stepValue)),0===a?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var o=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-o/2-this.backdropPaddingX,s-this.fontSize/2-this.backdropPaddingY,o+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,s)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var i=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(i.x,i.y),t.stroke(),t.closePath()}var n=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var s=this.labels.length,a=this.labels.length/2,o=a/2,l=o>e||e>s-o,h=e===o||e===s-o;t.textAlign=0===e?"center":e===a?"center":a>e?"left":"right",t.textBaseline=h?"middle":l?"bottom":"top",t.fillText(this.labels[e],n.x,n.y)}}}}}),n.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){r(i.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),f?define(function(){return i}):"object"==typeof module&&module.exports&&(module.exports=i),t.Chart=i,i.noConflict=function(){return t.Chart=e,i}}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:n,initialize:function(t){var n=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,i){var r=this.calculateBaseWidth(),s=this.calculateX(i)-r/2,a=this.calculateBarWidth(t);return s+a*e+e*n.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*n.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*n.barDatasetSpacing;return e/t}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),i.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),i.each(t.datasets,function(e){var n={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(n),i.each(e.data,function(i,r){n.bars.push(new this.BarClass({value:i,label:t.labels[r],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor,highlightFill:e.highlightFill||e.fillColor,highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,n){i.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,n,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){i.each(this.datasets,function(e,n){i.each(e.bars,t,this,n)},this)},getBarsAtEvent:function(t){for(var e,n=[],r=i.getRelativePosition(t),s=function(t){n.push(t.bars[e])},a=0;a<this.datasets.length;a++)for(e=0;e<this.datasets[a].bars.length;e++)if(this.datasets[a].bars[e].inRange(r.x,r.y))return i.each(this.datasets,s),n;return n},buildScale:function(t){var e=this,n=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=i.calculateScaleRange(n(),t,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,e)},xLabels:t,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(r,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(r)},addData:function(t,e){i.each(t,function(t,i){this.datasets[i].bars.push(new this.BarClass({value:t,label:e,x:this.scale.calculateBarX(this.datasets.length,i,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[i].strokeColor,fillColor:this.datasets[i].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){i.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=i.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear(),this.chart.ctx,this.scale.draw(e),i.each(this.datasets,function(t,n){i.each(t.bars,function(t,i){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,n,i),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},e).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:n,initialize:function(t){this.segments=[],this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];i.each(this.segments,function(t){t.restore(["fillColor"])}),i.each(e,function(t){t.fillColor=t.highlightColor;
}),this.showTooltip(e)}),this.calculateTotal(t),i.each(t,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],n=i.getRelativePosition(t);return i.each(this.segments,function(t){t.inRange(n.x,n.y)&&e.push(t)},this),e},addData:function(t,e,i){var n=e||this.segments.length;this.segments.splice(n,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),i||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(t/this.total)},calculateTotal:function(t){this.total=0,i.each(t,function(t){this.total+=t.value},this)},update:function(){this.calculateTotal(this.segments),i.each(this.activeElements,function(t){t.restore(["fillColor"])}),i.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=i.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,i.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var e=t?t:1;this.clear(),i.each(this.segments,function(t,i){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===i&&(t.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:i.merge(n,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Line",defaults:n,initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),i.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),i.each(t.datasets,function(e){var n={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(n),i.each(e.data,function(i,r){n.points.push(new this.PointClass({value:i,label:t.labels[r],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,e){i.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){i.each(this.datasets,function(e){i.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],n=i.getRelativePosition(t);return i.each(this.datasets,function(t){i.each(t.points,function(t){t.inRange(n.x,n.y)&&e.push(t)})},this),e},buildScale:function(t){var n=this,r=function(){var t=[];return n.eachPoints(function(e){t.push(e.value)}),t},s={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=i.calculateScaleRange(r(),t,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,e)},xLabels:t,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(s,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new e.Scale(s)},addData:function(t,e){i.each(t,function(t,i){this.datasets[i].points.push(new this.PointClass({value:t,label:e,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=i.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var n=this.chart.ctx,r=function(t){return null!==t.value},s=function(t,e,n){return i.findNextWhere(e,r,n)||t},a=function(t,e,n){return i.findPreviousWhere(e,r,n)||t};this.scale.draw(e),i.each(this.datasets,function(t){var o=i.where(t.points,r);i.each(t.points,function(t,i){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(i)},e)},this),this.options.bezierCurve&&i.each(o,function(t,e){var n=e>0&&e<o.length-1?this.options.bezierCurveTension:0;t.controlPoints=i.splineCurve(a(t,o,e),t,s(t,o,e),n),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=t.strokeColor,n.beginPath(),i.each(o,function(t,e){if(0===e)n.moveTo(t.x,t.y);else if(this.options.bezierCurve){var i=a(t,o,e);n.bezierCurveTo(i.controlPoints.outer.x,i.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else n.lineTo(t.x,t.y)},this),n.stroke(),this.options.datasetFill&&o.length>0&&(n.lineTo(o[o.length-1].x,this.scale.endPoint),n.lineTo(o[0].x,this.scale.endPoint),n.fillStyle=t.fillColor,n.closePath(),n.fill()),i.each(o,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:n,initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),i.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];i.each(this.segments,function(t){t.restore(["fillColor"])}),i.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],n=i.getRelativePosition(t);return i.each(this.segments,function(t){t.inRange(n.x,n.y)&&e.push(t)},this),e},addData:function(t,e,i){var n=e||this.segments.length;this.segments.splice(n,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),i||(this.reflow(),this.update())},removeData:function(t){var e=i.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,i.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];i.each(t,function(t){e.push(t.value)});var n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(e,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,n,{size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),i.each(this.segments,function(t){t.save()}),this.render()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),i.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),i.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var e=t||1;this.clear(),i.each(this.segments,function(t,i){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},e),t.endAngle=t.startAngle+t.circumference,0===i&&(t.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),i.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),i.each(t.datasets,function(e){var n={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(n),i.each(e.data,function(i,r){var s;this.scale.animation||(s=this.scale.getPointPosition(r,this.scale.calculateCenterOffset(i))),n.points.push(new this.PointClass({value:i,label:t.labels[r],datasetLabel:e.label,x:this.options.animation?this.scale.xCenter:s.x,y:this.options.animation?this.scale.yCenter:s.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){i.each(this.datasets,function(e){i.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=i.getRelativePosition(t),n=i.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),r=2*Math.PI/this.scale.valuesCount,s=Math.round((n.angle-1.5*Math.PI)/r),a=[];return(s>=this.scale.valuesCount||0>s)&&(s=0),n.distance<=this.scale.drawingArea&&i.each(this.datasets,function(t){a.push(t.points[s])}),a},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];return i.each(t,function(t){t.data?e=e.concat(t.data):i.each(t.points,function(t){e.push(t.value)})}),e}(),n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(e,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,n)},addData:function(t,e){this.scale.valuesCount++,i.each(t,function(t,i){var n=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[i].points.push(new this.PointClass({value:t,label:e,x:n.x,y:n.y,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.labels.push(e),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),i.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){i.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var e=t||1,n=this.chart.ctx;this.clear(),this.scale.draw(),i.each(this.datasets,function(t){i.each(t.points,function(t,i){t.hasValue()&&t.transition(this.scale.getPointPosition(i,this.scale.calculateCenterOffset(t.value)),e)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=t.strokeColor,n.beginPath(),i.each(t.points,function(t,e){0===e?n.moveTo(t.x,t.y):n.lineTo(t.x,t.y)},this),n.closePath(),n.stroke(),n.fillStyle=t.fillColor,n.fill(),i.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this),
//  Copyright  2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)     \\
//  Copyright  2008-2012 Sencha Labs (http://sencha.com)               \\
function(t){var e,i,n="0.3.4",r="hasOwnProperty",s=/[\.\/]/,a="*",o=function(){},l=function(t,e){return t-e},h={n:{}},c=function(t,n){var r,s=i,a=Array.prototype.slice.call(arguments,2),o=c.listeners(t),h=0,u=[],d={},f=[],p=e;e=t,i=0;for(var g=0,m=o.length;m>g;g++)"zIndex"in o[g]&&(u.push(o[g].zIndex),o[g].zIndex<0&&(d[o[g].zIndex]=o[g]));for(u.sort(l);u[h]<0;)if(r=d[u[h++]],f.push(r.apply(n,a)),i)return i=s,f;for(g=0;m>g;g++)if(r=o[g],"zIndex"in r)if(r.zIndex==u[h]){if(f.push(r.apply(n,a)),i)break;do if(h++,r=d[u[h]],r&&f.push(r.apply(n,a)),i)break;while(r)}else d[r.zIndex]=r;else if(f.push(r.apply(n,a)),i)break;return i=s,e=p,f.length?f:null};c.listeners=function(t){var e,i,n,r,o,l,c,u,d=t.split(s),f=h,p=[f],g=[];for(r=0,o=d.length;o>r;r++){for(u=[],l=0,c=p.length;c>l;l++)for(f=p[l].n,i=[f[d[r]],f[a]],n=2;n--;)e=i[n],e&&(u.push(e),g=g.concat(e.f||[]));p=u}return g},c.on=function(t,e){for(var i=t.split(s),n=h,r=0,a=i.length;a>r;r++)n=n.n,!n[i[r]]&&(n[i[r]]={n:{}}),n=n[i[r]];for(n.f=n.f||[],r=0,a=n.f.length;a>r;r++)if(n.f[r]==e)return o;return n.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},c.stop=function(){i=1},c.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},c.off=c.unbind=function(t,e){var i,n,o,l,c,u,d,f=t.split(s),p=[h];for(l=0,c=f.length;c>l;l++)for(u=0;u<p.length;u+=o.length-2){if(o=[u,1],i=p[u].n,f[l]!=a)i[f[l]]&&o.push(i[f[l]]);else for(n in i)i[r](n)&&o.push(i[n]);p.splice.apply(p,o)}for(l=0,c=p.length;c>l;l++)for(i=p[l];i.n;){if(e){if(i.f){for(u=0,d=i.f.length;d>u;u++)if(i.f[u]==e){i.f.splice(u,1);break}!i.f.length&&delete i.f}for(n in i.n)if(i.n[r](n)&&i.n[n].f){var g=i.n[n].f;for(u=0,d=g.length;d>u;u++)if(g[u]==e){g.splice(u,1);break}!g.length&&delete i.n[n].f}}else{delete i.f;for(n in i.n)i.n[r](n)&&i.n[n].f&&delete i.n[n].f}i=i.n}},c.once=function(t,e){var i=function(){var n=e.apply(this,arguments);return c.unbind(t,i),n};return c.on(t,i)},c.version=n,c.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=c:"undefined"!=typeof define?define("eve",[],function(){return c}):t.eve=c}(this),function(){function t(t){for(var e=0;e<se.length;e++)se[e].el.paper==t&&se.splice(e--,1)}function e(t,e,i,r,a,o){i=Q(i);var l,h,c,u,d,f,p=t.ms,g={},m={},y={};if(r)for(w=0,_=se.length;_>w;w++){var x=se[w];if(x.el.id==e.id&&x.anim==t){x.percent!=i?(se.splice(w,1),c=1):h=x,e.attr(x.totalOrigin);break}}else r=+m;for(var w=0,_=t.percents.length;_>w;w++){if(t.percents[w]==i||t.percents[w]>r*t.top){i=t.percents[w],d=t.percents[w-1]||0,p=p/t.top*(i-d),u=t.percents[w+1],l=t.anim[i];break}r&&e.attr(t.anim[t.percents[w]])}if(l){if(h)h.initstatus=r,h.start=new Date-h.ms*r;else{for(var C in l)if(l[k](C)&&(et[k](C)||e.paper.customAttributes[k](C)))switch(g[C]=e.attr(C),null==g[C]&&(g[C]=tt[C]),m[C]=l[C],et[C]){case $:y[C]=(m[C]-g[C])/p;break;case"colour":g[C]=v.getRGB(g[C]);var M=v.getRGB(m[C]);y[C]={r:(M.r-g[C].r)/p,g:(M.g-g[C].g)/p,b:(M.b-g[C].b)/p};break;case"path":var S=It(g[C],m[C]),T=S[1];for(g[C]=S[0],y[C]=[],w=0,_=g[C].length;_>w;w++){y[C][w]=[0];for(var A=1,E=g[C][w].length;E>A;A++)y[C][w][A]=(T[w][A]-g[C][w][A])/p}break;case"transform":var P=e._,I=Ht(P[C],m[C]);if(I)for(g[C]=I.from,m[C]=I.to,y[C]=[],y[C].real=!0,w=0,_=g[C].length;_>w;w++)for(y[C][w]=[g[C][w][0]],A=1,E=g[C][w].length;E>A;A++)y[C][w][A]=(m[C][w][A]-g[C][w][A])/p;else{var z=e.matrix||new s,R={_:{transform:P.transform},getBBox:function(){return e.getBBox(1)}};g[C]=[z.a,z.b,z.c,z.d,z.e,z.f],Ot(R,m[C]),m[C]=R._.transform,y[C]=[(R.matrix.a-z.a)/p,(R.matrix.b-z.b)/p,(R.matrix.c-z.c)/p,(R.matrix.d-z.d)/p,(R.matrix.e-z.e)/p,(R.matrix.f-z.f)/p]}break;case"csv":var O=L(l[C])[F](b),N=L(g[C])[F](b);if("clip-rect"==C)for(g[C]=N,y[C]=[],w=N.length;w--;)y[C][w]=(O[w]-g[C][w])/p;m[C]=O;break;default:for(O=[][D](l[C]),N=[][D](g[C]),y[C]=[],w=e.paper.customAttributes[C].length;w--;)y[C][w]=((O[w]||0)-(N[w]||0))/p}var H=l.easing,j=v.easing_formulas[H];if(!j)if(j=L(H).match(G),j&&5==j.length){var W=j;j=function(t){return n(t,+W[1],+W[2],+W[3],+W[4],p)}}else j=ut;if(f=l.start||t.start||+new Date,x={anim:t,percent:i,timestamp:f,start:f+(t.del||0),status:0,initstatus:r||0,stop:!1,ms:p,easing:j,from:g,diff:y,to:m,el:e,callback:l.callback,prev:d,next:u,repeat:o||t.times,origin:e.attr(),totalOrigin:a},se.push(x),r&&!h&&!c&&(x.stop=!0,x.start=new Date-p*r,1==se.length))return oe();c&&(x.start=new Date-x.ms*r),1==se.length&&ae(oe)}eve("raphael.anim.start."+e.id,e,t)}}function i(t,e){var i=[],n={};if(this.ms=e,this.times=1,t){for(var r in t)t[k](r)&&(n[Q(r)]=t[r],i.push(Q(r)));i.sort(ht)}this.anim=n,this.top=i[i.length-1],this.percents=i}function n(t,e,i,n,r,s){function a(t,e){var i,n,r,s,a,o;for(r=t,o=0;8>o;o++){if(s=l(r)-t,j(s)<e)return r;if(a=(3*u*r+2*c)*r+h,j(a)<1e-6)break;r-=s/a}if(i=0,n=1,r=t,i>r)return i;if(r>n)return n;for(;n>i;){if(s=l(r),j(s-t)<e)return r;t>s?i=r:n=r,r=(n-i)/2+i}return r}function o(t,e){var i=a(t,e);return((p*i+f)*i+d)*i}function l(t){return((u*t+c)*t+h)*t}var h=3*e,c=3*(n-e)-h,u=1-h-c,d=3*i,f=3*(r-i)-d,p=1-d-f;return o(t,1/(200*s))}function r(){return this.x+P+this.y+P+this.width+" \xd7 "+this.height}function s(t,e,i,n,r,s){null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+n,this.e=+r,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function a(t,e,i){t=v._path2curve(t),e=v._path2curve(e);for(var n,r,s,a,l,h,c,u,d,f,p=i?0:[],g=0,m=t.length;m>g;g++){var y=t[g];if("M"==y[0])n=l=y[1],r=h=y[2];else{"C"==y[0]?(d=[n,r].concat(y.slice(1)),n=d[6],r=d[7]):(d=[n,r,n,r,l,h,l,h],n=l,r=h);for(var x=0,b=e.length;b>x;x++){var w=e[x];if("M"==w[0])s=c=w[1],a=u=w[2];else{"C"==w[0]?(f=[s,a].concat(w.slice(1)),s=f[6],a=f[7]):(f=[s,a,s,a,c,u,c,u],s=c,a=u);var _=o(d,f,i);if(i)p+=_;else{for(var k=0,C=_.length;C>k;k++)_[k].segment1=g,_[k].segment2=x,_[k].bez1=d,_[k].bez2=f;p=p.concat(_)}}}}}return p}function o(t,e,i){var n=v.bezierBBox(t),r=v.bezierBBox(e);if(!v.isBBoxIntersect(n,r))return i?0:[];for(var s=c.apply(0,t),a=c.apply(0,e),o=~~(s/5),h=~~(a/5),u=[],d=[],f={},p=i?0:[],g=0;o+1>g;g++){var m=v.findDotsAtSegment.apply(v,t.concat(g/o));u.push({x:m.x,y:m.y,t:g/o})}for(g=0;h+1>g;g++)m=v.findDotsAtSegment.apply(v,e.concat(g/h)),d.push({x:m.x,y:m.y,t:g/h});for(g=0;o>g;g++)for(var y=0;h>y;y++){var x=u[g],b=u[g+1],w=d[y],_=d[y+1],k=j(b.x-x.x)<.001?"y":"x",C=j(_.x-w.x)<.001?"y":"x",M=l(x.x,x.y,b.x,b.y,w.x,w.y,_.x,_.y);if(M){if(f[M.x.toFixed(4)]==M.y.toFixed(4))continue;f[M.x.toFixed(4)]=M.y.toFixed(4);var S=x.t+j((M[k]-x[k])/(b[k]-x[k]))*(b.t-x.t),T=w.t+j((M[C]-w[C])/(_[C]-w[C]))*(_.t-w.t);S>=0&&1>=S&&T>=0&&1>=T&&(i?p++:p.push({x:M.x,y:M.y,t1:S,t2:T}))}}return p}function l(t,e,i,n,r,s,a,o){if(!(N(t,i)<H(r,a)||H(t,i)>N(r,a)||N(e,n)<H(s,o)||H(e,n)>N(s,o))){var l=(t*n-e*i)*(r-a)-(t-i)*(r*o-s*a),h=(t*n-e*i)*(s-o)-(e-n)*(r*o-s*a),c=(t-i)*(s-o)-(e-n)*(r-a);if(!c)return;var u=l/c,d=h/c,f=+u.toFixed(2),p=+d.toFixed(2);if(f<+H(t,i).toFixed(2)||f>+N(t,i).toFixed(2)||f<+H(r,a).toFixed(2)||f>+N(r,a).toFixed(2)||p<+H(e,n).toFixed(2)||p>+N(e,n).toFixed(2)||p<+H(s,o).toFixed(2)||p>+N(s,o).toFixed(2))return;return{x:u,y:d}}}function h(t,e,i,n,r,s,a,o,l){if(!(0>l||c(t,e,i,n,r,s,a,o)<l)){var h,u=1,d=u/2,f=u-d,p=.01;for(h=c(t,e,i,n,r,s,a,o,f);j(h-l)>p;)d/=2,f+=(l>h?1:-1)*d,h=c(t,e,i,n,r,s,a,o,f);return f}}function c(t,e,i,n,r,s,a,o,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var h=l/2,c=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;c>g;g++){var m=h*d[g]+h,v=u(m,t,i,r,a),y=u(m,e,n,s,o),x=v*v+y*y;p+=f[g]*O.sqrt(x)}return h*p}function u(t,e,i,n,r){var s=-3*e+9*i-9*n+3*r,a=t*s+6*e-12*i+6*n;return t*a-3*e+3*i}function d(t,e){for(var i=[],n=0,r=t.length;r-2*!e>n;n+=2){var s=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?r-4==n?s[3]={x:+t[0],y:+t[1]}:r-2==n&&(s[2]={x:+t[0],y:+t[1]},s[3]={x:+t[2],y:+t[3]}):s[0]={x:+t[r-2],y:+t[r-1]}:r-4==n?s[3]=s[2]:n||(s[0]={x:+t[n],y:+t[n+1]}),i.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return i}function f(){return this.hex}function p(t,e,i){function n(){var r=Array.prototype.slice.call(arguments,0),s=r.join("\u2400"),a=n.cache=n.cache||{},o=n.count=n.count||[];return a[k](s)?(g(o,s),i?i(a[s]):a[s]):(o.length>=1e3&&delete a[o.shift()],o.push(s),a[s]=t[T](e,r),i?i(a[s]):a[s])}return n}function g(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}function m(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var i in t)t[k](i)&&(e[i]=m(t[i]));return e}function v(t){if(v.is(t,"function"))return y?t():eve.on("raphael.DOMload",t);if(v.is(t,q))return v._engine.create[T](v,t.splice(0,3+v.is(t[0],$))).add(t);var e=Array.prototype.slice.call(arguments,0);if(v.is(e[e.length-1],"function")){var i=e.pop();return y?i.call(v._engine.create[T](v,e)):eve.on("raphael.DOMload",function(){i.call(v._engine.create[T](v,e))})}return v._engine.create[T](v,arguments)}v.version="2.1.0",v.eve=eve;var y,x,b=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},_=/\{(\d+)\}/g,k="hasOwnProperty",C={doc:document,win:window},M={was:Object.prototype[k].call(C.win,"Raphael"),is:C.win.Raphael},S=function(){this.ca=this.customAttributes={}},T="apply",D="concat",A="createTouch"in C.doc,E="",P=" ",L=String,F="split",I="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[F](P),z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},R=L.prototype.toLowerCase,O=Math,N=O.max,H=O.min,j=O.abs,W=O.pow,Y=O.PI,$="number",B="string",q="array",U=Object.prototype.toString,V=(v._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),X={NaN:1,Infinity:1,"-Infinity":1},G=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=O.round,Q=parseFloat,K=parseInt,J=L.prototype.toUpperCase,tt=v._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},et=v._availableAnimAttrs={blur:$,"clip-rect":"csv",cx:$,cy:$,fill:"colour","fill-opacity":$,"font-size":$,height:$,opacity:$,path:"path",r:$,rx:$,ry:$,stroke:"colour","stroke-opacity":$,"stroke-width":$,transform:"transform",width:$,x:$,y:$},it=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,nt={hs:1,rg:1},rt=/,?([achlmqrstvxz]),?/gi,st=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,at=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ot=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,lt=(v._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ht=function(t,e){return Q(t)-Q(e)},ct=function(){},ut=function(t){return t},dt=v._rectPath=function(t,e,i,n,r){return r?[["M",t+r,e],["l",i-2*r,0],["a",r,r,0,0,1,r,r],["l",0,n-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-i,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-n],["a",r,r,0,0,1,r,-r],["z"]]:[["M",t,e],["l",i,0],["l",0,n],["l",-i,0],["z"]]},ft=function(t,e,i,n){return null==n&&(n=i),[["M",t,e],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},pt=v._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return ft(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return ft(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return dt(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return dt(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return dt(e.x,e.y,e.width,e.height)}},gt=v.mapPath=function(t,e){if(!e)return t;var i,n,r,s,a,o,l;for(t=It(t),r=0,a=t.length;a>r;r++)for(l=t[r],s=1,o=l.length;o>s;s+=2)i=e.x(l[s],l[s+1]),n=e.y(l[s],l[s+1]),l[s]=i,l[s+1]=n;return t};if(v._g=C,v.type=C.win.SVGAngle||C.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==v.type){var mt,vt=C.doc.createElement("div");if(vt.innerHTML='<v:shape adj="1"/>',mt=vt.firstChild,mt.style.behavior="url(#default#VML)",!mt||"object"!=typeof mt.adj)return v.type=E;vt=null}v.svg=!(v.vml="VML"==v.type),v._Paper=S,v.fn=x=S.prototype=v.prototype,v._id=0,v._oid=0,v.is=function(t,e){return e=R.call(e),"finite"==e?!X[k](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||U.call(t).slice(8,-1).toLowerCase()==e},v.angle=function(t,e,i,n,r,s){if(null==r){var a=t-i,o=e-n;return a||o?(180+180*O.atan2(-o,-a)/Y+360)%360:0}return v.angle(t,e,r,s)-v.angle(i,n,r,s)},v.rad=function(t){return t%360*Y/180},v.deg=function(t){return 180*t/Y%360},v.snapTo=function(t,e,i){if(i=v.is(i,"finite")?i:10,v.is(t,q)){for(var n=t.length;n--;)if(j(t[n]-e)<=i)return t[n]}else{t=+t;var r=e%t;if(i>r)return e-r;if(r>t-i)return e-r+t}return e};v.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*O.random()|0,i="x"==t?e:3&e|8;return i.toString(16)});v.setWindow=function(t){eve("raphael.setWindow",v,C.win,t),C.win=t,C.doc=C.win.document,v._engine.initWin&&v._engine.initWin(C.win)};var yt=function(t){if(v.vml){var e,i=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),e=n.body}catch(r){e=createPopup().document.body}var s=e.createTextRange();yt=p(function(t){try{e.style.color=L(t).replace(i,E);var n=s.queryCommandValue("ForeColor");return n=(255&n)<<16|65280&n|(16711680&n)>>>16,"#"+("000000"+n.toString(16)).slice(-6)}catch(r){return"none"}})}else{var a=C.doc.createElement("i");a.title="Rapha\xebl Colour Picker",a.style.display="none",C.doc.body.appendChild(a),yt=p(function(t){return a.style.color=t,C.doc.defaultView.getComputedStyle(a,E).getPropertyValue("color")})}return yt(t)},xt=function(){return"hsb("+[this.h,this.s,this.b]+")"},bt=function(){return"hsl("+[this.h,this.s,this.l]+")"},wt=function(){return this.hex},_t=function(t,e,i){if(null==e&&v.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,e=t.g,t=t.r),null==e&&v.is(t,B)){var n=v.getRGB(t);t=n.r,e=n.g,i=n.b}return(t>1||e>1||i>1)&&(t/=255,e/=255,i/=255),[t,e,i]},kt=function(t,e,i,n){t*=255,e*=255,i*=255;var r={r:t,g:e,b:i,hex:v.rgb(t,e,i),toString:wt};return v.is(n,"finite")&&(r.opacity=n),r};v.color=function(t){var e;return v.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=v.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):v.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=v.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(v.is(t,"string")&&(t=v.getRGB(t)),v.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=v.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=v.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=wt,t},v.hsb2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,t=t.h,n=t.o),t*=360;var r,s,a,o,l;return t=t%360/60,l=i*e,o=l*(1-j(t%2-1)),r=s=a=i-l,t=~~t,r+=[l,o,0,0,o,l][t],s+=[o,l,l,o,0,0][t],a+=[0,0,o,l,l,o][t],kt(r,s,a,n)},v.hsl2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h),(t>1||e>1||i>1)&&(t/=360,e/=100,i/=100),t*=360;var r,s,a,o,l;return t=t%360/60,l=2*e*(.5>i?i:1-i),o=l*(1-j(t%2-1)),r=s=a=i-l/2,t=~~t,r+=[l,o,0,0,o,l][t],s+=[o,l,l,o,0,0][t],a+=[0,0,o,l,l,o][t],kt(r,s,a,n)},v.rgb2hsb=function(t,e,i){i=_t(t,e,i),t=i[0],e=i[1],i=i[2];var n,r,s,a;return s=N(t,e,i),a=s-H(t,e,i),n=0==a?null:s==t?(e-i)/a:s==e?(i-t)/a+2:(t-e)/a+4,n=(n+360)%6*60/360,r=0==a?0:a/s,{h:n,s:r,b:s,toString:xt}},v.rgb2hsl=function(t,e,i){i=_t(t,e,i),t=i[0],e=i[1],i=i[2];var n,r,s,a,o,l;return a=N(t,e,i),o=H(t,e,i),l=a-o,n=0==l?null:a==t?(e-i)/l:a==e?(i-t)/l+2:(t-e)/l+4,n=(n+360)%6*60/360,s=(a+o)/2,r=0==l?0:.5>s?l/(2*s):l/(2-2*s),{h:n,s:r,l:s,toString:bt}},v._path2string=function(){return this.join(",").replace(rt,"$1")};v._preload=function(t,e){var i=C.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,C.doc.body.removeChild(this)},i.onerror=function(){C.doc.body.removeChild(this)},C.doc.body.appendChild(i),i.src=t};v.getRGB=p(function(t){if(!t||(t=L(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:f};!nt[k](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=yt(t));var e,i,n,r,s,a,o=t.match(V);return o?(o[2]&&(n=K(o[2].substring(5),16),i=K(o[2].substring(3,5),16),e=K(o[2].substring(1,3),16)),o[3]&&(n=K((s=o[3].charAt(3))+s,16),i=K((s=o[3].charAt(2))+s,16),e=K((s=o[3].charAt(1))+s,16)),o[4]&&(a=o[4][F](it),e=Q(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),i=Q(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),n=Q(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),"rgba"==o[1].toLowerCase().slice(0,4)&&(r=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(r/=100)),o[5]?(a=o[5][F](it),e=Q(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),i=Q(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),n=Q(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),("deg"==a[0].slice(-3)||"\xb0"==a[0].slice(-1))&&(e/=360),"hsba"==o[1].toLowerCase().slice(0,4)&&(r=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(r/=100),v.hsb2rgb(e,i,n,r)):o[6]?(a=o[6][F](it),e=Q(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),i=Q(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),n=Q(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),("deg"==a[0].slice(-3)||"\xb0"==a[0].slice(-1))&&(e/=360),"hsla"==o[1].toLowerCase().slice(0,4)&&(r=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(r/=100),v.hsl2rgb(e,i,n,r)):(o={r:e,g:i,b:n,toString:f},o.hex="#"+(16777216|n|i<<8|e<<16).toString(16).slice(1),v.is(r,"finite")&&(o.opacity=r),o)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f}},v),v.hsb=p(function(t,e,i){return v.hsb2rgb(t,e,i).hex}),v.hsl=p(function(t,e,i){return v.hsl2rgb(t,e,i).hex}),v.rgb=p(function(t,e,i){return"#"+(16777216|i|e<<8|t<<16).toString(16).slice(1)}),v.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),i.hex},v.getColor.reset=function(){delete this.start},v.parsePathString=function(t){if(!t)return null;var e=Ct(t);if(e.arr)return St(e.arr);var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return v.is(t,q)&&v.is(t[0],q)&&(n=St(t)),n.length||L(t).replace(st,function(t,e,r){var s=[],a=e.toLowerCase();if(r.replace(ot,function(t,e){e&&s.push(+e)}),"m"==a&&s.length>2&&(n.push([e][D](s.splice(0,2))),a="l",e="m"==e?"l":"L"),"r"==a)n.push([e][D](s));else for(;s.length>=i[a]&&(n.push([e][D](s.splice(0,i[a]))),i[a]););}),n.toString=v._path2string,e.arr=St(n),n},v.parseTransformString=p(function(t){if(!t)return null;var e=[];return v.is(t,q)&&v.is(t[0],q)&&(e=St(t)),e.length||L(t).replace(at,function(t,i,n){var r=[];R.call(i);n.replace(ot,function(t,e){e&&r.push(+e)}),e.push([i][D](r))}),e.toString=v._path2string,e});var Ct=function(t){var e=Ct.ps=Ct.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var i in e)e[k](i)&&i!=t&&(e[i].sleep--,!e[i].sleep&&delete e[i])}),e[t]};v.findDotsAtSegment=function(t,e,i,n,r,s,a,o,l){var h=1-l,c=W(h,3),u=W(h,2),d=l*l,f=d*l,p=c*t+3*u*l*i+3*h*l*l*r+f*a,g=c*e+3*u*l*n+3*h*l*l*s+f*o,m=t+2*l*(i-t)+d*(r-2*i+t),v=e+2*l*(n-e)+d*(s-2*n+e),y=i+2*l*(r-i)+d*(a-2*r+i),x=n+2*l*(s-n)+d*(o-2*s+n),b=h*t+l*i,w=h*e+l*n,_=h*r+l*a,k=h*s+l*o,C=90-180*O.atan2(m-y,v-x)/Y;return(m>y||x>v)&&(C+=180),{x:p,y:g,m:{x:m,y:v},n:{x:y,y:x},start:{x:b,y:w},end:{x:_,y:k},alpha:C}},v.bezierBBox=function(t,e,i,n,r,s,a,o){v.is(t,"array")||(t=[t,e,i,n,r,s,a,o]);var l=Ft.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},v.isPointInsideBBox=function(t,e,i){return e>=t.x&&e<=t.x2&&i>=t.y&&i<=t.y2},v.isBBoxIntersect=function(t,e){var i=v.isPointInsideBBox;return i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},v.pathIntersection=function(t,e){return a(t,e)},v.pathIntersectionNumber=function(t,e){return a(t,e,1)},v.isPointInsidePath=function(t,e,i){var n=v.pathBBox(t);return v.isPointInsideBBox(n,e,i)&&a(t,[["M",e,i],["H",n.x2+10]],1)%2==1},v._removedFactory=function(t){return function(){eve("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object",t)}};var Mt=v.pathBBox=function(t){var e=Ct(t);if(e.bbox)return e.bbox;if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=It(t);for(var i,n=0,r=0,s=[],a=[],o=0,l=t.length;l>o;o++)if(i=t[o],"M"==i[0])n=i[1],r=i[2],s.push(n),a.push(r);else{var h=Ft(n,r,i[1],i[2],i[3],i[4],i[5],i[6]);s=s[D](h.min.x,h.max.x),a=a[D](h.min.y,h.max.y),n=i[5],r=i[6]}var c=H[T](0,s),u=H[T](0,a),d=N[T](0,s),f=N[T](0,a),p={x:c,y:u,x2:d,y2:f,width:d-c,height:f-u};return e.bbox=m(p),p},St=function(t){var e=m(t);return e.toString=v._path2string,e},Tt=v._pathToRelative=function(t){var e=Ct(t);if(e.rel)return St(e.rel);v.is(t,q)&&v.is(t&&t[0],q)||(t=v.parsePathString(t));var i=[],n=0,r=0,s=0,a=0,o=0;"M"==t[0][0]&&(n=t[0][1],r=t[0][2],s=n,a=r,o++,i.push(["M",n,r]));for(var l=o,h=t.length;h>l;l++){var c=i[l]=[],u=t[l];if(u[0]!=R.call(u[0]))switch(c[0]=R.call(u[0]),c[0]){case"a":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]-n).toFixed(3),c[7]=+(u[7]-r).toFixed(3);break;case"v":c[1]=+(u[1]-r).toFixed(3);break;case"m":s=u[1],a=u[2];default:for(var d=1,f=u.length;f>d;d++)c[d]=+(u[d]-(d%2?n:r)).toFixed(3)}else{c=i[l]=[],"m"==u[0]&&(s=u[1]+n,a=u[2]+r);for(var p=0,g=u.length;g>p;p++)i[l][p]=u[p]}var m=i[l].length;switch(i[l][0]){case"z":n=s,r=a;break;case"h":n+=+i[l][m-1];break;case"v":r+=+i[l][m-1];break;default:n+=+i[l][m-2],r+=+i[l][m-1]}}return i.toString=v._path2string,e.rel=St(i),i},Dt=v._pathToAbsolute=function(t){var e=Ct(t);if(e.abs)return St(e.abs);if(v.is(t,q)&&v.is(t&&t[0],q)||(t=v.parsePathString(t)),!t||!t.length)return[["M",0,0]];var i=[],n=0,r=0,s=0,a=0,o=0;"M"==t[0][0]&&(n=+t[0][1],r=+t[0][2],s=n,a=r,o++,i[0]=["M",n,r]);for(var l,h,c=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),u=o,f=t.length;f>u;u++){if(i.push(l=[]),h=t[u],h[0]!=J.call(h[0]))switch(l[0]=J.call(h[0]),l[0]){case"A":l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=+(h[6]+n),l[7]=+(h[7]+r);break;case"V":l[1]=+h[1]+r;break;case"H":l[1]=+h[1]+n;break;case"R":for(var p=[n,r][D](h.slice(1)),g=2,m=p.length;m>g;g++)p[g]=+p[g]+n,p[++g]=+p[g]+r;i.pop(),i=i[D](d(p,c));break;case"M":s=+h[1]+n,a=+h[2]+r;default:for(g=1,m=h.length;m>g;g++)l[g]=+h[g]+(g%2?n:r)}else if("R"==h[0])p=[n,r][D](h.slice(1)),i.pop(),i=i[D](d(p,c)),l=["R"][D](h.slice(-2));else for(var y=0,x=h.length;x>y;y++)l[y]=h[y];switch(l[0]){case"Z":n=s,r=a;break;case"H":n=l[1];break;case"V":r=l[1];break;case"M":s=l[l.length-2],a=l[l.length-1];default:n=l[l.length-2],r=l[l.length-1]}}return i.toString=v._path2string,e.abs=St(i),i},At=function(t,e,i,n){return[t,e,i,n,i,n]},Et=function(t,e,i,n,r,s){var a=1/3,o=2/3;return[a*t+o*i,a*e+o*n,a*r+o*i,a*s+o*n,r,s]},Pt=function(t,e,i,n,r,s,a,o,l,h){var c,u=120*Y/180,d=Y/180*(+r||0),f=[],g=p(function(t,e,i){var n=t*O.cos(i)-e*O.sin(i),r=t*O.sin(i)+e*O.cos(i);return{x:n,y:r}});if(h)C=h[0],M=h[1],_=h[2],k=h[3];else{c=g(t,e,-d),t=c.x,e=c.y,c=g(o,l,-d),o=c.x,l=c.y;var m=(O.cos(Y/180*r),O.sin(Y/180*r),(t-o)/2),v=(e-l)/2,y=m*m/(i*i)+v*v/(n*n);y>1&&(y=O.sqrt(y),i=y*i,n=y*n);var x=i*i,b=n*n,w=(s==a?-1:1)*O.sqrt(j((x*b-x*v*v-b*m*m)/(x*v*v+b*m*m))),_=w*i*v/n+(t+o)/2,k=w*-n*m/i+(e+l)/2,C=O.asin(((e-k)/n).toFixed(9)),M=O.asin(((l-k)/n).toFixed(9));C=_>t?Y-C:C,M=_>o?Y-M:M,0>C&&(C=2*Y+C),0>M&&(M=2*Y+M),a&&C>M&&(C-=2*Y),!a&&M>C&&(M-=2*Y)}var S=M-C;if(j(S)>u){var T=M,A=o,E=l;M=C+u*(a&&M>C?1:-1),o=_+i*O.cos(M),l=k+n*O.sin(M),f=Pt(o,l,i,n,r,0,a,A,E,[M,T,_,k])}S=M-C;var P=O.cos(C),L=O.sin(C),I=O.cos(M),z=O.sin(M),R=O.tan(S/4),N=4/3*i*R,H=4/3*n*R,W=[t,e],$=[t+N*L,e-H*P],B=[o+N*z,l-H*I],q=[o,l];if($[0]=2*W[0]-$[0],$[1]=2*W[1]-$[1],h)return[$,B,q][D](f);f=[$,B,q][D](f).join()[F](",");for(var U=[],V=0,X=f.length;X>V;V++)U[V]=V%2?g(f[V-1],f[V],d).y:g(f[V],f[V+1],d).x;return U},Lt=function(t,e,i,n,r,s,a,o,l){var h=1-l;return{x:W(h,3)*t+3*W(h,2)*l*i+3*h*l*l*r+W(l,3)*a,y:W(h,3)*e+3*W(h,2)*l*n+3*h*l*l*s+W(l,3)*o}},Ft=p(function(t,e,i,n,r,s,a,o){var l,h=r-2*i+t-(a-2*r+i),c=2*(i-t)-2*(r-i),u=t-i,d=(-c+O.sqrt(c*c-4*h*u))/2/h,f=(-c-O.sqrt(c*c-4*h*u))/2/h,p=[e,o],g=[t,a];return j(d)>"1e12"&&(d=.5),j(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=Lt(t,e,i,n,r,s,a,o,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=Lt(t,e,i,n,r,s,a,o,f),g.push(l.x),p.push(l.y)),h=s-2*n+e-(o-2*s+n),c=2*(n-e)-2*(s-n),u=e-n,d=(-c+O.sqrt(c*c-4*h*u))/2/h,f=(-c-O.sqrt(c*c-4*h*u))/2/h,j(d)>"1e12"&&(d=.5),j(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=Lt(t,e,i,n,r,s,a,o,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=Lt(t,e,i,n,r,s,a,o,f),g.push(l.x),p.push(l.y)),{min:{x:H[T](0,g),y:H[T](0,p)},max:{x:N[T](0,g),y:N[T](0,p)}}}),It=v._path2curve=p(function(t,e){var i=!e&&Ct(t);if(!e&&i.curve)return St(i.curve);for(var n=Dt(t),r=e&&Dt(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=(function(t,e){var i,n;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][D](Pt[T](0,[e.x,e.y][D](t.slice(1))));break;case"S":i=e.x+(e.x-(e.bx||e.x)),n=e.y+(e.y-(e.by||e.y)),t=["C",i,n][D](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][D](Et(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][D](Et(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][D](At(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][D](At(e.x,e.y,t[1],e.y));break;case"V":t=["C"][D](At(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][D](At(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)t.splice(e++,0,["C"][D](i.splice(0,6)));t.splice(e,1),u=N(n.length,r&&r.length||0)}},h=function(t,e,i,s,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",s.x,s.y]),i.bx=0,i.by=0,i.x=t[a][1],i.y=t[a][2],u=N(n.length,r&&r.length||0))},c=0,u=N(n.length,r&&r.length||0);u>c;c++){n[c]=o(n[c],s),l(n,c),r&&(r[c]=o(r[c],a)),r&&l(r,c),h(n,r,s,a,c),h(r,n,a,s,c);var d=n[c],f=r&&r[c],p=d.length,g=r&&f.length;s.x=d[p-2],s.y=d[p-1],s.bx=Q(d[p-4])||s.x,s.by=Q(d[p-3])||s.y,a.bx=r&&(Q(f[g-4])||a.x),a.by=r&&(Q(f[g-3])||a.y),a.x=r&&f[g-2],a.y=r&&f[g-1]}return r||(i.curve=St(n)),r?[n,r]:n},null,St),zt=(v._parseDots=p(function(t){for(var e=[],i=0,n=t.length;n>i;i++){var r={},s=t[i].match(/^([^:]*):?([\d\.]*)/);if(r.color=v.getRGB(s[1]),r.color.error)return null;r.color=r.color.hex,s[2]&&(r.offset=s[2]+"%"),e.push(r)}for(i=1,n=e.length-1;n>i;i++)if(!e[i].offset){for(var a=Q(e[i-1].offset||0),o=0,l=i+1;n>l;l++)if(e[l].offset){o=e[l].offset;break}o||(o=100,l=n),o=Q(o);for(var h=(o-a)/(l-i+1);l>i;i++)a+=h,e[i].offset=a+"%"}return e}),v._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Rt=(v._tofront=function(t,e){e.top!==t&&(zt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},v._toback=function(t,e){e.bottom!==t&&(zt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},v._insertafter=function(t,e,i){zt(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},v._insertbefore=function(t,e,i){zt(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},v.toMatrix=function(t,e){var i=Mt(t),n={_:{transform:E},getBBox:function(){return i}};return Ot(n,e),n.matrix}),Ot=(v.transformPath=function(t,e){return gt(t,Rt(t,e))},v._extractTransform=function(t,e){if(null==e)return t._.transform;e=L(e).replace(/\.{3}|\u2026/g,t._.transform||E);var i=v.parseTransformString(e),n=0,r=0,a=0,o=1,l=1,h=t._,c=new s;if(h.transform=i||[],i)for(var u=0,d=i.length;d>u;u++){var f,p,g,m,y,x=i[u],b=x.length,w=L(x[0]).toLowerCase(),_=x[0]!=w,k=_?c.invert():0;"t"==w&&3==b?_?(f=k.x(0,0),p=k.y(0,0),g=k.x(x[1],x[2]),m=k.y(x[1],x[2]),c.translate(g-f,m-p)):c.translate(x[1],x[2]):"r"==w?2==b?(y=y||t.getBBox(1),c.rotate(x[1],y.x+y.width/2,y.y+y.height/2),n+=x[1]):4==b&&(_?(g=k.x(x[2],x[3]),m=k.y(x[2],x[3]),c.rotate(x[1],g,m)):c.rotate(x[1],x[2],x[3]),n+=x[1]):"s"==w?2==b||3==b?(y=y||t.getBBox(1),c.scale(x[1],x[b-1],y.x+y.width/2,y.y+y.height/2),o*=x[1],l*=x[b-1]):5==b&&(_?(g=k.x(x[3],x[4]),m=k.y(x[3],x[4]),c.scale(x[1],x[2],g,m)):c.scale(x[1],x[2],x[3],x[4]),o*=x[1],l*=x[2]):"m"==w&&7==b&&c.add(x[1],x[2],x[3],x[4],x[5],x[6]),h.dirtyT=1,t.matrix=c}t.matrix=c,h.sx=o,h.sy=l,h.deg=n,h.dx=r=c.e,h.dy=a=c.f,1==o&&1==l&&!n&&h.bbox?(h.bbox.x+=+r,h.bbox.y+=+a):h.dirtyT=1}),Nt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Ht=v._equaliseTransform=function(t,e){e=L(e).replace(/\.{3}|\u2026/g,t),t=v.parseTransformString(t)||[],e=v.parseTransformString(e)||[];for(var i,n,r,s,a=N(t.length,e.length),o=[],l=[],h=0;a>h;h++){if(r=t[h]||Nt(e[h]),s=e[h]||Nt(r),r[0]!=s[0]||"r"==r[0].toLowerCase()&&(r[2]!=s[2]||r[3]!=s[3])||"s"==r[0].toLowerCase()&&(r[3]!=s[3]||r[4]!=s[4]))return;for(o[h]=[],l[h]=[],i=0,n=N(r.length,s.length);n>i;i++)i in r&&(o[h][i]=r[i]),i in s&&(l[h][i]=s[i])}return{from:o,to:l}};v._getContainer=function(t,e,i,n){var r;return r=null!=n||v.is(t,"object")?t:C.doc.getElementById(t),null!=r?r.tagName?null==e?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:e,height:i}:{container:1,x:t,y:e,width:i,height:n}:void 0},v.pathToRelative=Tt,v._engine={},v.path2curve=It,v.matrix=function(t,e,i,n,r,a){return new s(t,e,i,n,r,a)},function(t){function e(t){var e=O.sqrt(i(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}function i(t){return t[0]*t[0]+t[1]*t[1]}t.add=function(t,e,i,n,r,a){var o,l,h,c,u=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[t,i,r],[e,n,a],[0,0,1]];for(t&&t instanceof s&&(f=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;3>o;o++)for(l=0;3>l;l++){for(c=0,h=0;3>h;h++)c+=d[o][h]*f[h][l];u[o][l]=c}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new s(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new s(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,i,n){null==e&&(e=t),(i||n)&&this.add(1,0,0,1,i,n),this.add(t,0,0,e,0,0),(i||n)&&this.add(1,0,0,1,-i,-n);
},t.rotate=function(t,e,i){t=v.rad(t),e=e||0,i=i||0;var n=+O.cos(t).toFixed(9),r=+O.sin(t).toFixed(9);this.add(n,r,-r,n,e,i),this.add(1,0,0,1,-e,-i)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[L.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return v.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];t.scalex=O.sqrt(i(n[0])),e(n[0]),t.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*t.shear,n[1][1]-n[0][1]*t.shear],t.scaley=O.sqrt(i(n[1])),e(n[1]),t.shear/=t.scaley;var r=-n[0][1],s=n[1][1];return 0>s?(t.rotate=v.deg(O.acos(s)),0>r&&(t.rotate=360-t.rotate)):t.rotate=v.deg(O.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[F]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:E)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:E)+(e.rotate?"r"+[e.rotate,0,0]:E)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(s.prototype);var jt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(jt&&jt[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&jt&&jt[1]<8?x.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:x.safari=ct;for(var Wt=function(){this.returnValue=!1},Yt=function(){return this.originalEvent.preventDefault()},$t=function(){this.cancelBubble=!0},Bt=function(){return this.originalEvent.stopPropagation()},qt=function(){return C.doc.addEventListener?function(t,e,i,n){var r=A&&z[e]?z[e]:e,s=function(r){var s=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,a=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,o=r.clientX+a,l=r.clientY+s;if(A&&z[k](e))for(var h=0,c=r.targetTouches&&r.targetTouches.length;c>h;h++)if(r.targetTouches[h].target==t){var u=r;r=r.targetTouches[h],r.originalEvent=u,r.preventDefault=Yt,r.stopPropagation=Bt;break}return i.call(n,r,o,l)};return t.addEventListener(r,s,!1),function(){return t.removeEventListener(r,s,!1),!0}}:C.doc.attachEvent?function(t,e,i,n){var r=function(t){t=t||C.win.event;var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,r=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,s=t.clientX+r,a=t.clientY+e;return t.preventDefault=t.preventDefault||Wt,t.stopPropagation=t.stopPropagation||$t,i.call(n,t,s,a)};t.attachEvent("on"+e,r);var s=function(){return t.detachEvent("on"+e,r),!0};return s}:void 0}(),Ut=[],Vt=function(t){for(var e,i=t.clientX,n=t.clientY,r=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,s=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,a=Ut.length;a--;){if(e=Ut[a],A){for(var o,l=t.touches.length;l--;)if(o=t.touches[l],o.identifier==e.el._drag.id){i=o.clientX,n=o.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var h,c=e.el.node,u=c.nextSibling,d=c.parentNode,f=c.style.display;C.win.opera&&d.removeChild(c),c.style.display="none",h=e.el.paper.getElementByPoint(i,n),c.style.display=f,C.win.opera&&(u?d.insertBefore(c,u):d.appendChild(c)),h&&eve("raphael.drag.over."+e.el.id,e.el,h),i+=s,n+=r,eve("raphael.drag.move."+e.el.id,e.move_scope||e.el,i-e.el._drag.x,n-e.el._drag.y,i,n,t)}},Xt=function(t){v.unmousemove(Vt).unmouseup(Xt);for(var e,i=Ut.length;i--;)e=Ut[i],e.el._drag={},eve("raphael.drag.end."+e.el.id,e.end_scope||e.start_scope||e.move_scope||e.el,t);Ut=[]},Gt=v.el={},Zt=I.length;Zt--;)(function(t){v[t]=Gt[t]=function(e,i){return v.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:qt(this.shape||this.node||C.doc,t,e,i||this)})),this},v["un"+t]=Gt["un"+t]=function(e){for(var i=this.events||[],n=i.length;n--;)if(i[n].name==t&&i[n].f==e)return i[n].unbind(),i.splice(n,1),!i.length&&delete this.events,this;return this}})(I[Zt]);Gt.data=function(t,e){var i=lt[this.id]=lt[this.id]||{};if(1==arguments.length){if(v.is(t,"object")){for(var n in t)t[k](n)&&this.data(n,t[n]);return this}return eve("raphael.data.get."+this.id,this,i[t],t),i[t]}return i[t]=e,eve("raphael.data.set."+this.id,this,e,t),this},Gt.removeData=function(t){return null==t?lt[this.id]={}:lt[this.id]&&delete lt[this.id][t],this},Gt.hover=function(t,e,i,n){return this.mouseover(t,i).mouseout(e,n||i)},Gt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Qt=[];Gt.drag=function(t,e,i,n,r,s){function a(a){(a.originalEvent||a).preventDefault();var o=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,l=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;this._drag.x=a.clientX+l,this._drag.y=a.clientY+o,this._drag.id=a.identifier,!Ut.length&&v.mousemove(Vt).mouseup(Xt),Ut.push({el:this,move_scope:n,start_scope:r,end_scope:s}),e&&eve.on("raphael.drag.start."+this.id,e),t&&eve.on("raphael.drag.move."+this.id,t),i&&eve.on("raphael.drag.end."+this.id,i),eve("raphael.drag.start."+this.id,r||n||this,a.clientX+l,a.clientY+o,a)}return this._drag={},Qt.push({el:this,start:a}),this.mousedown(a),this},Gt.onDragOver=function(t){t?eve.on("raphael.drag.over."+this.id,t):eve.unbind("raphael.drag.over."+this.id)},Gt.undrag=function(){for(var t=Qt.length;t--;)Qt[t].el==this&&(this.unmousedown(Qt[t].start),Qt.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!Qt.length&&v.unmousemove(Vt).unmouseup(Xt)},x.circle=function(t,e,i){var n=v._engine.circle(this,t||0,e||0,i||0);return this.__set__&&this.__set__.push(n),n},x.rect=function(t,e,i,n,r){var s=v._engine.rect(this,t||0,e||0,i||0,n||0,r||0);return this.__set__&&this.__set__.push(s),s},x.ellipse=function(t,e,i,n){var r=v._engine.ellipse(this,t||0,e||0,i||0,n||0);return this.__set__&&this.__set__.push(r),r},x.path=function(t){t&&!v.is(t,B)&&!v.is(t[0],q)&&(t+=E);var e=v._engine.path(v.format[T](v,arguments),this);return this.__set__&&this.__set__.push(e),e},x.image=function(t,e,i,n,r){var s=v._engine.image(this,t||"about:blank",e||0,i||0,n||0,r||0);return this.__set__&&this.__set__.push(s),s},x.text=function(t,e,i){var n=v._engine.text(this,t||0,e||0,L(i));return this.__set__&&this.__set__.push(n),n},x.set=function(t){!v.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new he(t);return this.__set__&&this.__set__.push(e),e},x.setStart=function(t){this.__set__=t||this.set()},x.setFinish=function(){var t=this.__set__;return delete this.__set__,t},x.setSize=function(t,e){return v._engine.setSize.call(this,t,e)},x.setViewBox=function(t,e,i,n,r){return v._engine.setViewBox.call(this,t,e,i,n,r)},x.top=x.bottom=null,x.raphael=v;var Kt=function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,n=i.body,r=i.documentElement,s=r.clientTop||n.clientTop||0,a=r.clientLeft||n.clientLeft||0,o=e.top+(C.win.pageYOffset||r.scrollTop||n.scrollTop)-s,l=e.left+(C.win.pageXOffset||r.scrollLeft||n.scrollLeft)-a;return{y:o,x:l}};x.getElementByPoint=function(t,e){var i=this,n=i.canvas,r=C.doc.elementFromPoint(t,e);if(C.win.opera&&"svg"==r.tagName){var s=Kt(n),a=n.createSVGRect();a.x=t-s.x,a.y=e-s.y,a.width=a.height=1;var o=n.getIntersectionList(a,null);o.length&&(r=o[o.length-1])}if(!r)return null;for(;r.parentNode&&r!=n.parentNode&&!r.raphael;)r=r.parentNode;return r==i.canvas.parentNode&&(r=n),r=r&&r.raphael?i.getById(r.raphaelid):null},x.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},x.forEach=function(t,e){for(var i=this.bottom;i;){if(t.call(e,i)===!1)return this;i=i.next}return this},x.getElementsByPoint=function(t,e){var i=this.set();return this.forEach(function(n){n.isPointInside(t,e)&&i.push(n)}),i},Gt.isPointInside=function(t,e){var i=this.realPath=this.realPath||pt[this.type](this);return v.isPointInsidePath(i,t,e)},Gt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=pt[this.type](this),e.bboxwt=Mt(this.realPath),e.bboxwt.toString=r,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=pt[this.type](this)),e.bbox=Mt(gt(this.realPath,this.matrix)),e.bbox.toString=r,e.dirty=e.dirtyT=0),e.bbox)},Gt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Gt.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,n=this.paper,r=n.set(),s=this.realPath||pt[this.type](this);s=this.matrix?gt(s,this.matrix):s;for(var a=1;i+1>a;a++)r.push(n.path(s).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*a).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return r.insertBefore(this).translate(e.offsetx,e.offsety)};var Jt=function(t,e,i,n,r,s,a,o,l){return null==l?c(t,e,i,n,r,s,a,o):v.findDotsAtSegment(t,e,i,n,r,s,a,o,h(t,e,i,n,r,s,a,o,l))},te=function(t,e){return function(i,n,r){i=It(i);for(var s,a,o,l,h,c="",u={},d=0,f=0,p=i.length;p>f;f++){if(o=i[f],"M"==o[0])s=+o[1],a=+o[2];else{if(l=Jt(s,a,o[1],o[2],o[3],o[4],o[5],o[6]),d+l>n){if(e&&!u.start){if(h=Jt(s,a,o[1],o[2],o[3],o[4],o[5],o[6],n-d),c+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y],r)return c;u.start=c,c=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,o[5],o[6]].join(),d+=l,s=+o[5],a=+o[6];continue}if(!t&&!e)return h=Jt(s,a,o[1],o[2],o[3],o[4],o[5],o[6],n-d),{x:h.x,y:h.y,alpha:h.alpha}}d+=l,s=+o[5],a=+o[6]}c+=o.shift()+o}return u.end=c,h=t?d:e?u:v.findDotsAtSegment(s,a,o[0],o[1],o[2],o[3],o[4],o[5],1),h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},ee=te(1),ie=te(),ne=te(0,1);v.getTotalLength=ee,v.getPointAtLength=ie,v.getSubpath=function(t,e,i){if(this.getTotalLength(t)-i<1e-6)return ne(t,e).end;var n=ne(t,i,1);return e?ne(n,e).end:n},Gt.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():ee(this.attrs.path):void 0},Gt.getPointAtLength=function(t){return"path"==this.type?ie(this.attrs.path,t):void 0},Gt.getSubpath=function(t,e){return"path"==this.type?v.getSubpath(this.attrs.path,t,e):void 0};var re=v.easing_formulas={linear:function(t){return t},"<":function(t){return W(t,1.7)},">":function(t){return W(t,.48)},"<>":function(t){var e=.48-t/1.04,i=O.sqrt(.1734+e*e),n=i-e,r=W(j(n),1/3)*(0>n?-1:1),s=-i-e,a=W(j(s),1/3)*(0>s?-1:1),o=r+a+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:W(2,-10*t)*O.sin(2*(t-.075)*Y/.3)+1},bounce:function(t){var e,i=7.5625,n=2.75;return 1/n>t?e=i*t*t:2/n>t?(t-=1.5/n,e=i*t*t+.75):2.5/n>t?(t-=2.25/n,e=i*t*t+.9375):(t-=2.625/n,e=i*t*t+.984375),e}};re.easeIn=re["ease-in"]=re["<"],re.easeOut=re["ease-out"]=re[">"],re.easeInOut=re["ease-in-out"]=re["<>"],re["back-in"]=re.backIn,re["back-out"]=re.backOut;var se=[],ae=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},oe=function(){for(var t=+new Date,i=0;i<se.length;i++){var n=se[i];if(!n.el.removed&&!n.paused){var r,s,a=t-n.start,o=n.ms,l=n.easing,h=n.from,c=n.diff,u=n.to,d=(n.t,n.el),f={},p={};if(n.initstatus?(a=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*o,n.status=n.initstatus,delete n.initstatus,n.stop&&se.splice(i--,1)):n.status=(n.prev+(n.percent-n.prev)*(a/o))/n.anim.top,!(0>a))if(o>a){var g=l(a/o);for(var m in h)if(h[k](m)){switch(et[m]){case $:r=+h[m]+g*o*c[m];break;case"colour":r="rgb("+[le(Z(h[m].r+g*o*c[m].r)),le(Z(h[m].g+g*o*c[m].g)),le(Z(h[m].b+g*o*c[m].b))].join(",")+")";break;case"path":r=[];for(var y=0,x=h[m].length;x>y;y++){r[y]=[h[m][y][0]];for(var b=1,w=h[m][y].length;w>b;b++)r[y][b]=+h[m][y][b]+g*o*c[m][y][b];r[y]=r[y].join(P)}r=r.join(P);break;case"transform":if(c[m].real)for(r=[],y=0,x=h[m].length;x>y;y++)for(r[y]=[h[m][y][0]],b=1,w=h[m][y].length;w>b;b++)r[y][b]=h[m][y][b]+g*o*c[m][y][b];else{var _=function(t){return+h[m][t]+g*o*c[m][t]};r=[["m",_(0),_(1),_(2),_(3),_(4),_(5)]]}break;case"csv":if("clip-rect"==m)for(r=[],y=4;y--;)r[y]=+h[m][y]+g*o*c[m][y];break;default:var C=[][D](h[m]);for(r=[],y=d.paper.customAttributes[m].length;y--;)r[y]=+C[y]+g*o*c[m][y]}f[m]=r}d.attr(f),function(t,e,i){setTimeout(function(){eve("raphael.anim.frame."+t,e,i)})}(d.id,d,n.anim)}else{if(function(t,e,i){setTimeout(function(){eve("raphael.anim.frame."+e.id,e,i),eve("raphael.anim.finish."+e.id,e,i),v.is(t,"function")&&t.call(e)})}(n.callback,d,n.anim),d.attr(u),se.splice(i--,1),n.repeat>1&&!n.next){for(s in u)u[k](s)&&(p[s]=n.totalOrigin[s]);n.el.attr(p),e(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&e(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}v.svg&&d&&d.paper&&d.paper.safari(),se.length&&ae(oe)},le=function(t){return t>255?255:0>t?0:t};Gt.animateWith=function(t,n,r,s,a,o){var l=this;if(l.removed)return o&&o.call(l),l;var h=r instanceof i?r:v.animation(r,s,a,o);e(h,l,h.percents[0],null,l.attr());for(var c=0,u=se.length;u>c;c++)if(se[c].anim==n&&se[c].el==t){se[u-1].start=se[c].start;break}return l},Gt.onAnimation=function(t){return t?eve.on("raphael.anim.frame."+this.id,t):eve.unbind("raphael.anim.frame."+this.id),this},i.prototype.delay=function(t){var e=new i(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},i.prototype.repeat=function(t){var e=new i(this.anim,this.ms);return e.del=this.del,e.times=O.floor(N(t,0))||1,e},v.animation=function(t,e,n,r){if(t instanceof i)return t;!v.is(n,"function")&&n||(r=r||n||null,n=null),t=Object(t),e=+e||0;var s,a,o={};for(a in t)t[k](a)&&Q(a)!=a&&Q(a)+"%"!=a&&(s=!0,o[a]=t[a]);return s?(n&&(o.easing=n),r&&(o.callback=r),new i({100:o},e)):new i(t,e)},Gt.animate=function(t,n,r,s){var a=this;if(a.removed)return s&&s.call(a),a;var o=t instanceof i?t:v.animation(t,n,r,s);return e(o,a,o.percents[0],null,a.attr()),a},Gt.setTime=function(t,e){return t&&null!=e&&this.status(t,H(e,t.ms)/t.ms),this},Gt.status=function(t,i){var n,r,s=[],a=0;if(null!=i)return e(t,this,-1,H(i,1)),this;for(n=se.length;n>a;a++)if(r=se[a],r.el.id==this.id&&(!t||r.anim==t)){if(t)return r.status;s.push({anim:r.anim,status:r.status})}return t?0:s},Gt.pause=function(t){for(var e=0;e<se.length;e++)se[e].el.id==this.id&&(!t||se[e].anim==t)&&eve("raphael.anim.pause."+this.id,this,se[e].anim)!==!1&&(se[e].paused=!0);return this},Gt.resume=function(t){for(var e=0;e<se.length;e++)if(se[e].el.id==this.id&&(!t||se[e].anim==t)){var i=se[e];eve("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status))}return this},Gt.stop=function(t){for(var e=0;e<se.length;e++)se[e].el.id==this.id&&(!t||se[e].anim==t)&&eve("raphael.anim.stop."+this.id,this,se[e].anim)!==!1&&se.splice(e--,1);return this},eve.on("raphael.remove",t),eve.on("raphael.clear",t),Gt.toString=function(){return"Rapha\xebl\u2019s object"};var he=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,i=t.length;i>e;e++)t[e]&&(t[e].constructor==Gt.constructor||t[e].constructor==he)&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},ce=he.prototype;ce.push=function(){for(var t,e,i=0,n=arguments.length;n>i;i++)t=arguments[i],t&&(t.constructor==Gt.constructor||t.constructor==he)&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},ce.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ce.forEach=function(t,e){for(var i=0,n=this.items.length;n>i;i++)if(t.call(e,this.items[i],i)===!1)return this;return this};for(var ue in Gt)Gt[k](ue)&&(ce[ue]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t][T](i,e)})}}(ue));ce.attr=function(t,e){if(t&&v.is(t,q)&&v.is(t[0],"object"))for(var i=0,n=t.length;n>i;i++)this.items[i].attr(t[i]);else for(var r=0,s=this.items.length;s>r;r++)this.items[r].attr(t,e);return this},ce.clear=function(){for(;this.length;)this.pop()},ce.splice=function(t,e){t=0>t?N(this.length+t,0):t,e=N(0,H(this.length-t,e));var i,n=[],r=[],s=[];for(i=2;i<arguments.length;i++)s.push(arguments[i]);for(i=0;e>i;i++)r.push(this[t+i]);for(;i<this.length-t;i++)n.push(this[t+i]);var a=s.length;for(i=0;i<a+n.length;i++)this.items[t+i]=this[t+i]=a>i?s[i]:n[i-a];for(i=this.items.length=this.length-=e-a;this[i];)delete this[i++];return new he(r)},ce.exclude=function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]==t)return this.splice(e,1),!0},ce.animate=function(t,e,i,n){(v.is(i,"function")||!i)&&(n=i||null);var r,s,a=this.items.length,o=a,l=this;if(!a)return this;n&&(s=function(){!--a&&n.call(l)}),i=v.is(i,B)?i:s;var h=v.animation(t,e,i,s);for(r=this.items[--o].animate(h);o--;)this.items[o]&&!this.items[o].removed&&this.items[o].animateWith(r,h,h);return this},ce.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ce.getBBox=function(){for(var t=[],e=[],i=[],n=[],r=this.items.length;r--;)if(!this.items[r].removed){var s=this.items[r].getBBox();t.push(s.x),e.push(s.y),i.push(s.x+s.width),n.push(s.y+s.height)}return t=H[T](0,t),e=H[T](0,e),i=N[T](0,i),n=N[T](0,n),{x:t,y:e,x2:i,y2:n,width:i-t,height:n-e}},ce.clone=function(t){t=new he;for(var e=0,i=this.items.length;i>e;e++)t.push(this.items[e].clone());return t},ce.toString=function(){return"Rapha\xebl\u2018s set"},v.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var n in t.face)t.face[k](n)&&(e.face[n]=t.face[n]);if(this.fonts[i]?this.fonts[i].push(e):this.fonts[i]=[e],!t.svg){e.face["units-per-em"]=K(t.face["units-per-em"],10);for(var r in t.glyphs)if(t.glyphs[k](r)){var s=t.glyphs[r];if(e.glyphs[r]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},s.k)for(var a in s.k)s[k](a)&&(e.glyphs[r].k[a]=s.k[a])}}return t},x.getFont=function(t,e,i,n){if(n=n||"normal",i=i||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,v.fonts){var r=v.fonts[t];if(!r){var s=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var a in v.fonts)if(v.fonts[k](a)&&s.test(a)){r=v.fonts[a];break}}var o;if(r)for(var l=0,h=r.length;h>l&&(o=r[l],o.face["font-weight"]!=e||o.face["font-style"]!=i&&o.face["font-style"]||o.face["font-stretch"]!=n);l++);return o}},x.print=function(t,e,i,n,r,s,a){s=s||"middle",a=N(H(a||0,1),-1);var o,l=L(i)[F](E),h=0,c=0,u=E;if(v.is(n,i)&&(n=this.getFont(n)),n){o=(r||16)/n.face["units-per-em"];for(var d=n.face.bbox[F](b),f=+d[0],p=d[3]-d[1],g=0,m=+d[1]+("baseline"==s?p+ +n.face.descent:p/2),y=0,x=l.length;x>y;y++){if("\n"==l[y])h=0,_=0,c=0,g+=p;else{var w=c&&n.glyphs[l[y-1]]||{},_=n.glyphs[l[y]];h+=c?(w.w||n.w)+(w.k&&w.k[l[y]]||0)+n.w*a:0,c=1}_&&_.d&&(u+=v.transformPath(_.d,["t",h*o,g*o,"s",o,o,f,m,"t",(t-f)/o,(e-m)/o]))}}return this.path(u).attr({fill:"#000",stroke:"none"})},x.add=function(t){if(v.is(t,"array"))for(var e,i=this.set(),n=0,r=t.length;r>n;n++)e=t[n]||{},w[k](e.type)&&i.push(this[e.type]().attr(e));return i},v.format=function(t,e){var i=v.is(e,q)?[0][D](e):arguments;return t&&v.is(t,B)&&i.length-1&&(t=t.replace(_,function(t,e){return null==i[++e]?E:i[e]})),t||E},v.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(t,i,n){var r=n;return i.replace(e,function(t,e,i,n,s){e=e||n,r&&(e in r&&(r=r[e]),"function"==typeof r&&s&&(r=r()))}),r=(null==r||r==n?t:r)+""};return function(e,n){return String(e).replace(t,function(t,e){return i(t,e,n)})}}(),v.ninja=function(){return M.was?C.win.Raphael=M.is:delete Raphael,v},v.st=ce,function(t,e,i){function n(){/in/.test(t.readyState)?setTimeout(n,9):v.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,i=function(){t.removeEventListener(e,i,!1),t.readyState="complete"},!1),t.readyState="loading"),n()}(document,"DOMContentLoaded"),M.was?C.win.Raphael=v:Raphael=v,eve.on("raphael.DOMload",function(){y=!0})}(),window.Raphael.svg&&function(t){var e="hasOwnProperty",i=String,n=parseFloat,r=parseInt,s=Math,a=s.max,o=s.abs,l=s.pow,h=/[, ]+/,c=t.eve,u="",d=" ",f="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};t.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var m=function(n,r){if(r){"string"==typeof n&&(n=m(n));for(var s in r)r[e](s)&&("xlink:"==s.substring(0,6)?n.setAttributeNS(f,s.substring(6),i(r[s])):n.setAttribute(s,i(r[s])))}else n=t._g.doc.createElementNS("http://www.w3.org/2000/svg",n),n.style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},v=function(e,r){var h="linear",c=e.id+r,d=.5,f=.5,p=e.node,g=e.paper,v=p.style,y=t._g.doc.getElementById(c);if(!y){if(r=i(r).replace(t._radial_gradient,function(t,e,i){if(h="radial",e&&i){d=n(e),f=n(i);var r=2*(f>.5)-1;l(d-.5,2)+l(f-.5,2)>.25&&(f=s.sqrt(.25-l(d-.5,2))*r+.5)&&.5!=f&&(f=f.toFixed(5)-1e-5*r)}return u}),r=r.split(/\s*\-\s*/),"linear"==h){var x=r.shift();if(x=-n(x),isNaN(x))return null;var b=[0,0,s.cos(t.rad(x)),s.sin(t.rad(x))],w=1/(a(o(b[2]),o(b[3]))||1);b[2]*=w,b[3]*=w,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var _=t._parseDots(r);if(!_)return null;if(c=c.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&c!=e.gradient.id&&(g.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){y=m(h+"Gradient",{id:c}),e.gradient=y,m(y,"radial"==h?{fx:d,fy:f}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:e.matrix.invert()}),g.defs.appendChild(y);for(var k=0,C=_.length;C>k;k++)y.appendChild(m("stop",{offset:_[k].offset?_[k].offset:k?"100%":"0%","stop-color":_[k].color||"#fff"}))}}return m(p,{fill:"url(#"+c+")",opacity:1,"fill-opacity":1}),v.fill=u,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);m(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},x=function(n,r,s){if("path"==n.type){for(var a,o,l,h,c,d=i(r).toLowerCase().split("-"),f=n.paper,v=s?"end":"start",y=n.node,x=n.attrs,b=x["stroke-width"],w=d.length,_="classic",k=3,C=3,M=5;w--;)switch(d[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=d[w];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}if("open"==_?(k+=2,C+=2,M+=2,l=1,h=s?4:1,c={fill:"none",stroke:x.stroke}):(h=l=k/2,c={fill:x.stroke,stroke:"none"}),n._.arrows?s?(n._.arrows.endPath&&g[n._.arrows.endPath]--,n._.arrows.endMarker&&g[n._.arrows.endMarker]--):(n._.arrows.startPath&&g[n._.arrows.startPath]--,n._.arrows.startMarker&&g[n._.arrows.startMarker]--):n._.arrows={},"none"!=_){var S="raphael-marker-"+_,T="raphael-marker-"+v+_+k+C;t._g.doc.getElementById(S)?g[S]++:(f.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:p[_],id:S})),g[S]=1);var D,A=t._g.doc.getElementById(T);A?(g[T]++,D=A.getElementsByTagName("use")[0]):(A=m(m("marker"),{id:T,markerHeight:C,markerWidth:k,orient:"auto",refX:h,refY:C/2}),D=m(m("use"),{"xlink:href":"#"+S,transform:(s?"rotate(180 "+k/2+" "+C/2+") ":u)+"scale("+k/M+","+C/M+")","stroke-width":(1/((k/M+C/M)/2)).toFixed(4)}),A.appendChild(D),f.defs.appendChild(A),g[T]=1),m(D,c);var E=l*("diamond"!=_&&"oval"!=_);s?(a=n._.arrows.startdx*b||0,o=t.getTotalLength(x.path)-E*b):(a=E*b,o=t.getTotalLength(x.path)-(n._.arrows.enddx*b||0)),c={},c["marker-"+v]="url(#"+T+")",(o||a)&&(c.d=Raphael.getSubpath(x.path,a,o)),m(y,c),n._.arrows[v+"Path"]=S,n._.arrows[v+"Marker"]=T,n._.arrows[v+"dx"]=E,n._.arrows[v+"Type"]=_,n._.arrows[v+"String"]=r}else s?(a=n._.arrows.startdx*b||0,o=t.getTotalLength(x.path)-a):(a=0,o=t.getTotalLength(x.path)-(n._.arrows.enddx*b||0)),n._.arrows[v+"Path"]&&m(y,{d:Raphael.getSubpath(x.path,a,o)}),delete n._.arrows[v+"Path"],delete n._.arrows[v+"Marker"],delete n._.arrows[v+"dx"],delete n._.arrows[v+"Type"],delete n._.arrows[v+"String"];for(c in g)if(g[e](c)&&!g[c]){var P=t._g.doc.getElementById(c);P&&P.parentNode.removeChild(P)}}},b={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,e,n){if(e=b[i(e).toLowerCase()]){for(var r=t.attrs["stroke-width"]||"1",s={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,a=[],o=e.length;o--;)a[o]=e[o]*r+(o%2?1:-1)*s;m(t.node,{"stroke-dasharray":a.join(",")})}},_=function(n,s){var l=n.node,c=n.attrs,d=l.style.visibility;l.style.visibility="hidden";for(var p in s)if(s[e](p)){if(!t._availableAttrs[e](p))continue;var g=s[p];switch(c[p]=g,p){case"blur":n.blur(g);break;case"href":case"title":case"target":var b=l.parentNode;if("a"!=b.tagName.toLowerCase()){var _=m("a");b.insertBefore(_,l),_.appendChild(l),b=_}"target"==p?b.setAttributeNS(f,"show","blank"==g?"new":g):b.setAttributeNS(f,p,g);break;case"cursor":l.style.cursor=g;break;case"transform":n.transform(g);break;case"arrow-start":x(n,g);break;case"arrow-end":x(n,g,1);break;case"clip-rect":var k=i(g).split(h);if(4==k.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var M=m("clipPath"),S=m("rect");M.id=t.createUUID(),m(S,{x:k[0],y:k[1],width:k[2],height:k[3]}),M.appendChild(S),n.paper.defs.appendChild(M),m(l,{"clip-path":"url(#"+M.id+")"}),n.clip=S}if(!g){var T=l.getAttribute("clip-path");if(T){var D=t._g.doc.getElementById(T.replace(/(^url\(#|\)$)/g,u));D&&D.parentNode.removeChild(D),m(l,{"clip-path":u}),delete n.clip}}break;case"path":"path"==n.type&&(m(l,{d:g?c.path=t._pathToAbsolute(g):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&x(n,n._.arrows.startString),"endString"in n._.arrows&&x(n,n._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,g),n._.dirty=1,!c.fx)break;p="x",g=c.x;case"x":c.fx&&(g=-c.x-(c.width||0));case"rx":if("rx"==p&&"rect"==n.type)break;case"cx":l.setAttribute(p,g),n.pattern&&y(n),n._.dirty=1;break;case"height":if(l.setAttribute(p,g),n._.dirty=1,!c.fy)break;p="y",g=c.y;case"y":c.fy&&(g=-c.y-(c.height||0));case"ry":if("ry"==p&&"rect"==n.type)break;case"cy":l.setAttribute(p,g),n.pattern&&y(n),n._.dirty=1;break;case"r":"rect"==n.type?m(l,{rx:g,ry:g}):l.setAttribute(p,g),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(f,"href",g);break;case"stroke-width":1==n._.sx&&1==n._.sy||(g/=a(o(n._.sx),o(n._.sy))||1),n.paper._vbSize&&(g*=n.paper._vbSize),l.setAttribute(p,g),c["stroke-dasharray"]&&w(n,c["stroke-dasharray"],s),n._.arrows&&("startString"in n._.arrows&&x(n,n._.arrows.startString),"endString"in n._.arrows&&x(n,n._.arrows.endString,1));break;case"stroke-dasharray":w(n,g,s);break;case"fill":var A=i(g).match(t._ISURL);if(A){M=m("pattern");var E=m("image");M.id=t.createUUID(),m(M,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(E,{x:0,y:0,"xlink:href":A[1]}),M.appendChild(E),function(e){t._preload(A[1],function(){var t=this.offsetWidth,i=this.offsetHeight;m(e,{width:t,height:i}),m(E,{width:t,height:i}),n.paper.safari()})}(M),n.paper.defs.appendChild(M),m(l,{fill:"url(#"+M.id+")"}),n.pattern=M,n.pattern&&y(n);break}var P=t.getRGB(g);if(P.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g)){if("opacity"in c||"fill-opacity"in c){var L=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u));if(L){var F=L.getElementsByTagName("stop");m(F[F.length-1],{"stop-opacity":("opacity"in c?c.opacity:1)*("fill-opacity"in c?c["fill-opacity"]:1)})}}c.gradient=g,c.fill="none";break}}else delete s.gradient,delete c.gradient,!t.is(c.opacity,"undefined")&&t.is(s.opacity,"undefined")&&m(l,{opacity:c.opacity}),!t.is(c["fill-opacity"],"undefined")&&t.is(s["fill-opacity"],"undefined")&&m(l,{"fill-opacity":c["fill-opacity"]});P[e]("opacity")&&m(l,{"fill-opacity":P.opacity>1?P.opacity/100:P.opacity});case"stroke":P=t.getRGB(g),l.setAttribute(p,P.hex),"stroke"==p&&P[e]("opacity")&&m(l,{"stroke-opacity":P.opacity>1?P.opacity/100:P.opacity}),"stroke"==p&&n._.arrows&&("startString"in n._.arrows&&x(n,n._.arrows.startString),"endString"in n._.arrows&&x(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g);break;case"opacity":c.gradient&&!c[e]("stroke-opacity")&&m(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(c.gradient){L=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u)),L&&(F=L.getElementsByTagName("stop"),m(F[F.length-1],{"stop-opacity":g}));break}default:"font-size"==p&&(g=r(g,10)+"px");var I=p.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[I]=g,n._.dirty=1,l.setAttribute(p,g)}}C(n,s),l.style.visibility=d},k=1.2,C=function(n,s){if("text"==n.type&&(s[e]("text")||s[e]("font")||s[e]("font-size")||s[e]("x")||s[e]("y"))){var a=n.attrs,o=n.node,l=o.firstChild?r(t._g.doc.defaultView.getComputedStyle(o.firstChild,u).getPropertyValue("font-size"),10):10;if(s[e]("text")){for(a.text=s.text;o.firstChild;)o.removeChild(o.firstChild);for(var h,c=i(s.text).split("\n"),d=[],f=0,p=c.length;p>f;f++)h=m("tspan"),f&&m(h,{dy:l*k,x:a.x}),h.appendChild(t._g.doc.createTextNode(c[f])),o.appendChild(h),d[f]=h}else for(d=o.getElementsByTagName("tspan"),f=0,p=d.length;p>f;f++)f?m(d[f],{dy:l*k,x:a.x}):m(d[0],{dy:0});m(o,{x:a.x,y:a.y}),n._.dirty=1;var g=n._getBBox(),v=a.y-(g.y+g.height/2);v&&t.is(v,"finite")&&m(d[0],{dy:v})}},M=function(e,i){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=i,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},S=t.el;M.prototype=S,S.constructor=M,t._engine.path=function(t,e){var i=m("path");e.canvas&&e.canvas.appendChild(i);var n=new M(i,e);return n.type="path",_(n,{fill:"none",stroke:"#000",path:t}),n},S.rotate=function(t,e,r){if(this.removed)return this;if(t=i(t).split(h),t.length-1&&(e=n(t[1]),r=n(t[2])),t=n(t[0]),null==r&&(e=r),null==e||null==r){var s=this.getBBox(1);e=s.x+s.width/2,r=s.y+s.height/2}return this.transform(this._.transform.concat([["r",t,e,r]])),this},S.scale=function(t,e,r,s){if(this.removed)return this;if(t=i(t).split(h),t.length-1&&(e=n(t[1]),r=n(t[2]),s=n(t[3])),t=n(t[0]),null==e&&(e=t),null==s&&(r=s),null==r||null==s)var a=this.getBBox(1);return r=null==r?a.x+a.width/2:r,s=null==s?a.y+a.height/2:s,this.transform(this._.transform.concat([["s",t,e,r,s]])),this},S.translate=function(t,e){return this.removed?this:(t=i(t).split(h),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},S.transform=function(i){var n=this._;if(null==i)return n.transform;if(t._extractTransform(this,i),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var r=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},S.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},S.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},S.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),c.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),t._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var i in this)this[i]="function"==typeof this[i]?t._removedFactory(i):null;this.removed=!0}},S._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(i){}finally{e=e||{}}return t&&this.hide(),e},S.attr=function(i,n){if(this.removed)return this;if(null==i){var r={};for(var s in this.attrs)this.attrs[e](s)&&(r[s]=this.attrs[s]);
return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&t.is(i,"string")){if("fill"==i&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==i)return this._.transform;for(var a=i.split(h),o={},l=0,u=a.length;u>l;l++)i=a[l],i in this.attrs?o[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?o[i]=this.paper.customAttributes[i].def:o[i]=t._availableAttrs[i];return u-1?o:o[a[0]]}if(null==n&&t.is(i,"array")){for(o={},l=0,u=i.length;u>l;l++)o[i[l]]=this.attr(i[l]);return o}if(null!=n){var d={};d[i]=n}else null!=i&&t.is(i,"object")&&(d=i);for(var f in d)c("raphael.attr."+f+"."+this.id,this,d[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&d[e](f)&&t.is(this.paper.customAttributes[f],"function")){var p=this.paper.customAttributes[f].apply(this,[].concat(d[f]));this.attrs[f]=d[f];for(var g in p)p[e](g)&&(d[g]=p[g])}return _(this,d),this},S.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&t._tofront(this,e),this},S.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper);this.paper;return this},S.insertAfter=function(e){if(this.removed)return this;var i=e.node||e[e.length-1].node;return i.nextSibling?i.parentNode.insertBefore(this.node,i.nextSibling):i.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this},S.insertBefore=function(e){if(this.removed)return this;var i=e.node||e[0].node;return i.parentNode.insertBefore(this.node,i),t._insertbefore(this,e,this.paper),this},S.blur=function(e){var i=this;if(0!==+e){var n=m("filter"),r=m("feGaussianBlur");i.attrs.blur=e,n.id=t.createUUID(),m(r,{stdDeviation:+e||1.5}),n.appendChild(r),i.paper.defs.appendChild(n),i._blur=n,m(i.node,{filter:"url(#"+n.id+")"})}else i._blur&&(i._blur.parentNode.removeChild(i._blur),delete i._blur,delete i.attrs.blur),i.node.removeAttribute("filter")},t._engine.circle=function(t,e,i,n){var r=m("circle");t.canvas&&t.canvas.appendChild(r);var s=new M(r,t);return s.attrs={cx:e,cy:i,r:n,fill:"none",stroke:"#000"},s.type="circle",m(r,s.attrs),s},t._engine.rect=function(t,e,i,n,r,s){var a=m("rect");t.canvas&&t.canvas.appendChild(a);var o=new M(a,t);return o.attrs={x:e,y:i,width:n,height:r,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},o.type="rect",m(a,o.attrs),o},t._engine.ellipse=function(t,e,i,n,r){var s=m("ellipse");t.canvas&&t.canvas.appendChild(s);var a=new M(s,t);return a.attrs={cx:e,cy:i,rx:n,ry:r,fill:"none",stroke:"#000"},a.type="ellipse",m(s,a.attrs),a},t._engine.image=function(t,e,i,n,r,s){var a=m("image");m(a,{x:i,y:n,width:r,height:s,preserveAspectRatio:"none"}),a.setAttributeNS(f,"href",e),t.canvas&&t.canvas.appendChild(a);var o=new M(a,t);return o.attrs={x:i,y:n,width:r,height:s,src:e},o.type="image",o},t._engine.text=function(e,i,n,r){var s=m("text");e.canvas&&e.canvas.appendChild(s);var a=new M(s,e);return a.attrs={x:i,y:n,"text-anchor":"middle",text:r,font:t._availableAttrs.font,stroke:"none",fill:"#000"},a.type="text",_(a,a.attrs),a},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e&&e.container,n=e.x,r=e.y,s=e.width,a=e.height;if(!i)throw new Error("SVG container not found.");var o,l=m("svg"),h="overflow:hidden;";return n=n||0,r=r||0,s=s||512,a=a||342,m(l,{height:a,version:1.1,width:s,xmlns:"http://www.w3.org/2000/svg"}),1==i?(l.style.cssText=h+"position:absolute;left:"+n+"px;top:"+r+"px",t._g.doc.body.appendChild(l),o=1):(l.style.cssText=h+"position:relative",i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l)),i=new t._Paper,i.width=s,i.height=a,i.canvas=l,i.clear(),i._left=i._top=0,o&&(i.renderfix=function(){}),i.renderfix(),i},t._engine.setViewBox=function(t,e,i,n,r){c("raphael.setViewBox",this,this._viewBox,[t,e,i,n,r]);var s,o,l=a(i/this.width,n/this.height),h=this.top,u=r?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,s="0 0 "+this.width+d+this.height):(this._vbSize=l,s=t+d+e+d+i+d+n),m(this.canvas,{viewBox:s,preserveAspectRatio:u});l&&h;)o="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":o}),h._.dirty=1,h._.dirtyT=1,h=h.prev;return this._viewBox=[t,e,i,n,!!r],this},t.prototype.renderfix=function(){var t,e=this.canvas,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(n){t=e.createSVGMatrix()}var r=-t.e%1,s=-t.f%1;(r||s)&&(r&&(this._left=(this._left+r)%1,i.left=this._left+"px"),s&&(this._top=(this._top+s)%1,i.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(t._g.doc.createTextNode("Created with Rapha\xebl "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=m("defs"))},t.prototype.remove=function(){c("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var T=t.st;for(var D in S)S[e](D)&&!T[e](D)&&(T[D]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(D))}(window.Raphael),window.Raphael.vml&&function(t){var e="hasOwnProperty",i=String,n=parseFloat,r=Math,s=r.round,a=r.max,o=r.min,l=r.abs,h="fill",c=/[, ]+/,u=t.eve,d=" progid:DXImageTransform.Microsoft",f=" ",p="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,x="position:absolute;left:0;top:0;width:1px;height:1px",b=21600,w={path:1,rect:1,image:1},_={circle:1,ellipse:1},k=function(e){var n=/[ahqstv]/gi,r=t._pathToAbsolute;if(i(e).match(n)&&(r=t._path2curve),n=/[clmz]/g,r==t._pathToAbsolute&&!i(e).match(n)){var a=i(e).replace(m,function(t,e,i){var n=[],r="m"==e.toLowerCase(),a=g[e];return i.replace(y,function(t){r&&2==n.length&&(a+=n+g["m"==e?"l":"L"],n=[]),n.push(s(t*b))}),a+n});return a}var o,l,h=r(e);a=[];for(var c=0,u=h.length;u>c;c++){o=h[c],l=h[c][0].toLowerCase(),"z"==l&&(l="x");for(var d=1,v=o.length;v>d;d++)l+=s(o[d]*b)+(d!=v-1?",":p);a.push(l)}return a.join(f)},C=function(e,i,n){var r=t.matrix();return r.rotate(-e,.5,.5),{dx:r.x(i,n),dy:r.y(i,n)}},M=function(t,e,i,n,r,s){var a=t._,o=t.matrix,c=a.fillpos,u=t.node,d=u.style,p=1,g="",m=b/e,v=b/i;if(d.visibility="hidden",e&&i){if(u.coordsize=l(m)+f+l(v),d.rotation=s*(0>e*i?-1:1),s){var y=C(s,n,r);n=y.dx,r=y.dy}if(0>e&&(g+="x"),0>i&&(g+=" y")&&(p=-1),d.flip=g,u.coordorigin=n*-m+f+r*-v,c||a.fillsize){var x=u.getElementsByTagName(h);x=x&&x[0],u.removeChild(x),c&&(y=C(s,o.x(c[0],c[1]),o.y(c[0],c[1])),x.position=y.dx*p+f+y.dy*p),a.fillsize&&(x.size=a.fillsize[0]*l(e)+f+a.fillsize[1]*l(i)),u.appendChild(x)}d.visibility="visible"}};t.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var S=function(t,e,n){for(var r=i(e).toLowerCase().split("-"),s=n?"end":"start",a=r.length,o="classic",l="medium",h="medium";a--;)switch(r[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=r[a];break;case"wide":case"narrow":h=r[a];break;case"long":case"short":l=r[a]}var c=t.node.getElementsByTagName("stroke")[0];c[s+"arrow"]=o,c[s+"arrowlength"]=l,c[s+"arrowwidth"]=h},T=function(r,l){r.attrs=r.attrs||{};var u=r.node,d=r.attrs,g=u.style,m=w[r.type]&&(l.x!=d.x||l.y!=d.y||l.width!=d.width||l.height!=d.height||l.cx!=d.cx||l.cy!=d.cy||l.rx!=d.rx||l.ry!=d.ry||l.r!=d.r),v=_[r.type]&&(d.cx!=l.cx||d.cy!=l.cy||d.r!=l.r||d.rx!=l.rx||d.ry!=l.ry),y=r;for(var x in l)l[e](x)&&(d[x]=l[x]);if(m&&(d.path=t._getPath[r.type](r),r._.dirty=1),l.href&&(u.href=l.href),l.title&&(u.title=l.title),l.target&&(u.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||m)&&(u.path=k(~i(d.path).toLowerCase().indexOf("r")?t._pathToAbsolute(d.path):d.path),"image"==r.type&&(r._.fillpos=[d.x,d.y],r._.fillsize=[d.width,d.height],M(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),v){var C=+d.cx,T=+d.cy,A=+d.rx||+d.r||0,E=+d.ry||+d.r||0;u.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",s((C-A)*b),s((T-E)*b),s((C+A)*b),s((T+E)*b),s(C*b))}if("clip-rect"in l){var L=i(l["clip-rect"]).split(c);if(4==L.length){L[2]=+L[2]+ +L[0],L[3]=+L[3]+ +L[1];var F=u.clipRect||t._g.doc.createElement("div"),I=F.style;I.clip=t.format("rect({1}px {2}px {3}px {0}px)",L),u.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=r.paper.width+"px",I.height=r.paper.height+"px",u.parentNode.insertBefore(F,u),F.appendChild(u),u.clipRect=F)}l["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(r.textpath){var z=r.textpath.style;l.font&&(z.font=l.font),l["font-family"]&&(z.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(z.fontSize=l["font-size"]),l["font-weight"]&&(z.fontWeight=l["font-weight"]),l["font-style"]&&(z.fontStyle=l["font-style"])}if("arrow-start"in l&&S(y,l["arrow-start"]),"arrow-end"in l&&S(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var R=u.getElementsByTagName(h),O=!1;if(R=R&&R[0],!R&&(O=R=P(h)),"image"==r.type&&l.src&&(R.src=l.src),l.fill&&(R.on=!0),null!=R.on&&"none"!=l.fill&&null!==l.fill||(R.on=!1),R.on&&l.fill){var N=i(l.fill).match(t._ISURL);if(N){R.parentNode==u&&u.removeChild(R),R.rotate=!0,R.src=N[1],R.type="tile";var H=r.getBBox(1);R.position=H.x+f+H.y,r._.fillpos=[H.x,H.y],t._preload(N[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else R.color=t.getRGB(l.fill).hex,R.src=p,R.type="solid",t.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=i(l.fill).charAt())&&D(y,l.fill,R)&&(d.fill="none",d.gradient=l.fill,R.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var j=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);j=o(a(j,0),1),R.opacity=j,R.src&&(R.color="none")}u.appendChild(R);var W=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],Y=!1;!W&&(Y=W=P("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(W.on=!0),("none"==l.stroke||null===l.stroke||null==W.on||0==l.stroke||0==l["stroke-width"])&&(W.on=!1);var $=t.getRGB(l.stroke);W.on&&l.stroke&&(W.color=$.hex),j=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+$.o+1||2)-1);var B=.75*(n(l["stroke-width"])||1);if(j=o(a(j,0),1),null==l["stroke-width"]&&(B=d["stroke-width"]),l["stroke-width"]&&(W.weight=B),B&&1>B&&(j*=B)&&(W.weight=1),W.opacity=j,l["stroke-linejoin"]&&(W.joinstyle=l["stroke-linejoin"]||"miter"),W.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(W.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var q={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};W.dashstyle=q[e](l["stroke-dasharray"])?q[l["stroke-dasharray"]]:p}Y&&u.appendChild(W)}if("text"==y.type){y.paper.canvas.style.display=p;var U=y.paper.span,V=100,X=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);g=U.style,d.font&&(g.font=d.font),d["font-family"]&&(g.fontFamily=d["font-family"]),d["font-weight"]&&(g.fontWeight=d["font-weight"]),d["font-style"]&&(g.fontStyle=d["font-style"]),X=n(d["font-size"]||X&&X[0])||10,g.fontSize=X*V+"px",y.textpath.string&&(U.innerHTML=i(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=U.getBoundingClientRect();y.W=d.w=(G.right-G.left)/V,y.H=d.h=(G.bottom-G.top)/V,y.X=d.x,y.Y=d.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=t.format("m{0},{1}l{2},{1}",s(d.x*b),s(d.y*b),s(d.x*b)+1));for(var Z=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,K=Z.length;K>Q;Q++)if(Z[Q]in l){y._.dirty=1;break}switch(d["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},D=function(e,s,a){e.attrs=e.attrs||{};var o=(e.attrs,Math.pow),l="linear",h=".5 .5";if(e.attrs.gradient=s,s=i(s).replace(t._radial_gradient,function(t,e,i){return l="radial",e&&i&&(e=n(e),i=n(i),o(e-.5,2)+o(i-.5,2)>.25&&(i=r.sqrt(.25-o(e-.5,2))*(2*(i>.5)-1)+.5),h=e+f+i),p}),s=s.split(/\s*\-\s*/),"linear"==l){var c=s.shift();if(c=-n(c),isNaN(c))return null}var u=t._parseDots(s);if(!u)return null;if(e=e.shape||e.node,u.length){e.removeChild(a),a.on=!0,a.method="none",a.color=u[0].color,a.color2=u[u.length-1].color;for(var d=[],g=0,m=u.length;m>g;g++)u[g].offset&&d.push(u[g].offset+f+u[g].color);a.colors=d.length?d.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=h,a.angle=0):(a.type="gradient",a.angle=(270-c)%360),e.appendChild(a)}return 1},A=function(e,i){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},E=t.el;A.prototype=E,E.constructor=A,E.transform=function(e){if(null==e)return this._.transform;var n,r=this.paper._viewBoxShift,s=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:p;r&&(n=e=i(e).replace(/\.{3}|\u2026/g,this._.transform||p)),t._extractTransform(this,s+e);var a,o=this.matrix.clone(),l=this.skew,h=this.node,c=~i(this.attrs.fill).indexOf("-"),u=!i(this.attrs.fill).indexOf("url(");if(o.translate(-.5,-.5),u||c||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=o.split(),c&&a.noRotation||!a.isSimple){h.style.filter=o.toFilter();var d=this.getBBox(),g=this.getBBox(1),m=d.x-g.x,v=d.y-g.y;h.coordorigin=m*-b+f+v*-b,M(this,1,1,m,v,0)}else h.style.filter=p,M(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else h.style.filter=p,l.matrix=i(o),l.offset=o.offset();return n&&(this._.transform=n),this},E.rotate=function(t,e,r){if(this.removed)return this;if(null!=t){if(t=i(t).split(c),t.length-1&&(e=n(t[1]),r=n(t[2])),t=n(t[0]),null==r&&(e=r),null==e||null==r){var s=this.getBBox(1);e=s.x+s.width/2,r=s.y+s.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,r]])),this}},E.translate=function(t,e){return this.removed?this:(t=i(t).split(c),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},E.scale=function(t,e,r,s){if(this.removed)return this;if(t=i(t).split(c),t.length-1&&(e=n(t[1]),r=n(t[2]),s=n(t[3]),isNaN(r)&&(r=null),isNaN(s)&&(s=null)),t=n(t[0]),null==e&&(e=t),null==s&&(r=s),null==r||null==s)var a=this.getBBox(1);return r=null==r?a.x+a.width/2:r,s=null==s?a.y+a.height/2:s,this.transform(this._.transform.concat([["s",t,e,r,s]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=p),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},E.attr=function(i,n){if(this.removed)return this;if(null==i){var r={};for(var s in this.attrs)this.attrs[e](s)&&(r[s]=this.attrs[s]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&t.is(i,"string")){if(i==h&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=i.split(c),o={},l=0,d=a.length;d>l;l++)i=a[l],i in this.attrs?o[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?o[i]=this.paper.customAttributes[i].def:o[i]=t._availableAttrs[i];return d-1?o:o[a[0]]}if(this.attrs&&null==n&&t.is(i,"array")){for(o={},l=0,d=i.length;d>l;l++)o[i[l]]=this.attr(i[l]);return o}var f;null!=n&&(f={},f[i]=n),null==n&&t.is(i,"object")&&(f=i);for(var p in f)u("raphael.attr."+p+"."+this.id,this,f[p]);if(f){for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&f[e](p)&&t.is(this.paper.customAttributes[p],"function")){var g=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var m in g)g[e](m)&&(f[m]=g[m])}f.text&&"text"==this.type&&(this.textpath.string=f.text),T(this,f)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},E.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},E.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},E.blur=function(e){var i=this.node.runtimeStyle,n=i.filter;n=n.replace(v,p),0!==+e?(this.attrs.blur=e,i.filter=n+f+d+".Blur(pixelradius="+(+e||1.5)+")",i.margin=t.format("-{0}px 0 0 -{0}px",s(+e||1.5))):(i.filter=n,i.margin=0,delete this.attrs.blur)},t._engine.path=function(t,e){var i=P("shape");i.style.cssText=x,i.coordsize=b+f+b,i.coordorigin=e.coordorigin;var n=new A(i,e),r={fill:"none",stroke:"#000"};t&&(r.path=t),n.type="path",n.path=[],n.Path=p,T(n,r),e.canvas.appendChild(i);var s=P("skew");return s.on=!0,i.appendChild(s),n.skew=s,n.transform(p),n},t._engine.rect=function(e,i,n,r,s,a){var o=t._rectPath(i,n,r,s,a),l=e.path(o),h=l.attrs;return l.X=h.x=i,l.Y=h.y=n,l.W=h.width=r,l.H=h.height=s,h.r=a,h.path=o,l.type="rect",l},t._engine.ellipse=function(t,e,i,n,r){var s=t.path();s.attrs;return s.X=e-n,s.Y=i-r,s.W=2*n,s.H=2*r,s.type="ellipse",T(s,{cx:e,cy:i,rx:n,ry:r}),s},t._engine.circle=function(t,e,i,n){var r=t.path();r.attrs;return r.X=e-n,r.Y=i-n,r.W=r.H=2*n,r.type="circle",T(r,{cx:e,cy:i,r:n}),r},t._engine.image=function(e,i,n,r,s,a){var o=t._rectPath(n,r,s,a),l=e.path(o).attr({stroke:"none"}),c=l.attrs,u=l.node,d=u.getElementsByTagName(h)[0];return c.src=i,l.X=c.x=n,l.Y=c.y=r,l.W=c.width=s,l.H=c.height=a,c.path=o,l.type="image",d.parentNode==u&&u.removeChild(d),d.rotate=!0,d.src=i,d.type="tile",l._.fillpos=[n,r],l._.fillsize=[s,a],u.appendChild(d),M(l,1,1,0,0,0),l},t._engine.text=function(e,n,r,a){var o=P("shape"),l=P("path"),h=P("textpath");n=n||0,r=r||0,a=a||"",l.v=t.format("m{0},{1}l{2},{1}",s(n*b),s(r*b),s(n*b)+1),l.textpathok=!0,h.string=i(a),h.on=!0,o.style.cssText=x,o.coordsize=b+f+b,o.coordorigin="0 0";var c=new A(o,e),u={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:a};c.shape=o,c.path=l,c.textpath=h,c.type="text",c.attrs.text=i(a),c.attrs.x=n,c.attrs.y=r,c.attrs.w=1,c.attrs.h=1,T(c,u),o.appendChild(h),o.appendChild(l),e.canvas.appendChild(o);var d=P("skew");return d.on=!0,o.appendChild(d),c.skew=d,c.transform(p),c},t._engine.setSize=function(e,i){var n=this.canvas.style;return this.width=e,this.height=i,e==+e&&(e+="px"),i==+i&&(i+="px"),n.width=e,n.height=i,n.clip="rect(0 "+e+" "+i+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,i,n,r,s){t.eve("raphael.setViewBox",this,this._viewBox,[e,i,n,r,s]);var o,l,h=this.width,c=this.height,u=1/a(n/h,r/c);return s&&(o=c/r,l=h/n,h>n*o&&(e-=(h-n*o)/2/o),c>r*l&&(i-=(c-r*l)/2/l)),this._viewBox=[e,i,n,r,!!s],this._viewBoxShift={dx:-e,dy:-i,scale:u},this.forEach(function(t){t.transform("...")}),this};var P;t._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),P=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(i){P=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e.container,n=e.height,r=e.width,s=e.x,a=e.y;if(!i)throw new Error("VML container not found.");var o=new t._Paper,l=o.canvas=t._g.doc.createElement("div"),h=l.style;return s=s||0,a=a||0,r=r||512,n=n||342,o.width=r,o.height=n,r==+r&&(r+="px"),n==+n&&(n+="px"),o.coordsize=1e3*b+f+1e3*b,o.coordorigin="0 0",o.span=t._g.doc.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(o.span),h.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,n),1==i?(t._g.doc.body.appendChild(l),h.left=s+"px",h.top=a+"px",h.position="absolute"):i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l),o.renderfix=function(){},o},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var L=t.st;for(var F in E)E[e](F)&&!L[e](F)&&(L[F]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(F))}(window.Raphael),/* @license
morris.js v0.5.0
Copyright 2014 Olly Smith All rights reserved.
Licensed under the BSD-2-Clause License.
*/
function(){var t,e,i,n,r=[].slice,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,o=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},l=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};e=window.Morris={},t=jQuery,e.EventEmitter=function(){function t(){}return t.prototype.on=function(t,e){return null==this.handlers&&(this.handlers={}),null==this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this},t.prototype.fire=function(){var t,e,i,n,s,a,o;if(i=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[i]){for(a=this.handlers[i],o=[],n=0,s=a.length;s>n;n++)e=a[n],o.push(e.apply(null,t));return o}},t}(),e.commas=function(t){var e,i,n,r;return null!=t?(n=0>t?"-":"",e=Math.abs(t),i=Math.floor(e).toFixed(0),n+=i.replace(/(?=(?:\d{3})+$)(?!^)/g,","),r=e.toString(),r.length>i.length&&(n+=r.slice(i.length)),n):"-"},e.pad2=function(t){return(10>t?"0":"")+t},e.Grid=function(i){function n(e){this.resizeHandler=s(this.resizeHandler,this);var i=this;if("string"==typeof e.element?this.el=t(document.getElementById(e.element)):this.el=t(e.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=t.extend({},this.gridDefaults,this.defaults||{},e),"string"==typeof this.options.units&&(this.options.postUnits=e.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(t){var e,n,r,s,a;return n=i.el.offset(),a=t.pageX-n.left,i.selectFrom?(e=i.data[i.hitTest(Math.min(a,i.selectFrom))]._x,r=i.data[i.hitTest(Math.max(a,i.selectFrom))]._x,s=r-e,i.selectionRect.attr({x:e,width:s})):i.fire("hovermove",a,t.pageY-n.top)}),this.el.bind("mouseleave",function(){return i.selectFrom&&(i.selectionRect.hide(),i.selectFrom=null),i.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(t){var e,n;return n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],e=i.el.offset(),i.fire("hovermove",n.pageX-e.left,n.pageY-e.top)}),this.el.bind("click",function(t){var e;return e=i.el.offset(),i.fire("gridclick",t.pageX-e.left,t.pageY-e.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(t){var e;return e=i.el.offset(),i.startRange(t.pageX-e.left)}),this.el.bind("mouseup",function(t){var e;return e=i.el.offset(),i.endRange(t.pageX-e.left),i.fire("hovermove",t.pageX-e.left,t.pageY-e.top)})),this.options.resize&&t(window).bind("resize",function(){return null!=i.timeoutId&&window.clearTimeout(i.timeoutId),i.timeoutId=window.setTimeout(i.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return o(n,i),n.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},n.prototype.setData=function(t,i){var n,r,s,a,o,l,h,c,u,d,f,p,g,m,v;return null==i&&(i=!0),this.options.data=t,null==t||0===t.length?(this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide())):(p=this.cumulative?0:null,g=this.cumulative?0:null,this.options.goals.length>0&&(o=Math.min.apply(Math,this.options.goals),a=Math.max.apply(Math,this.options.goals),g=null!=g?Math.min(g,o):o,p=null!=p?Math.max(p,a):a),this.data=function(){var i,n,a;for(a=[],s=i=0,n=t.length;n>i;s=++i)h=t[s],l={src:h},l.label=h[this.options.xkey],this.options.parseTime?(l.x=e.parseDate(l.label),this.options.dateFormat?l.label=this.options.dateFormat(l.x):"number"==typeof l.label&&(l.label=new Date(l.label).toString())):(l.x=s,this.options.xLabelFormat&&(l.label=this.options.xLabelFormat(l))),u=0,l.y=function(){var t,e,i,n;for(i=this.options.ykeys,n=[],r=t=0,e=i.length;e>t;r=++t)f=i[r],m=h[f],"string"==typeof m&&(m=parseFloat(m)),null!=m&&"number"!=typeof m&&(m=null),null!=m&&(this.cumulative?u+=m:null!=p?(p=Math.max(m,p),g=Math.min(m,g)):p=g=m),this.cumulative&&null!=u&&(p=Math.max(u,p),g=Math.min(u,g)),n.push(m);return n}.call(this),a.push(l);return a}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(t,e){return(t.x>e.x)-(e.x>t.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.events.length>0&&(this.options.parseTime?this.events=function(){var t,i,r,s;for(r=this.options.events,s=[],t=0,i=r.length;i>t;t++)n=r[t],s.push(e.parseDate(n));return s}.call(this):this.events=this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",g),this.ymax=this.yboundary("max",p),this.ymin===this.ymax&&(g&&(this.ymin-=1),this.ymax+=1),(v=this.options.axes)!==!0&&"both"!==v&&"y"!==v&&this.options.grid!==!0||(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(c=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var t,e,i,n;for(n=[],d=t=e=this.ymin,i=this.ymax;c>0?i>=t:t>=i;d=t+=c)n.push(d);return n}.call(this))),this.dirty=!0,i?this.redraw():void 0)},n.prototype.yboundary=function(t,e){var i,n;return i=this.options["y"+t],"string"==typeof i?"auto"===i.slice(0,4)?i.length>5?(n=parseInt(i.slice(5),10),null==e?n:Math[t](e,n)):null!=e?e:0:parseInt(i,10):i},n.prototype.autoGridLines=function(t,e,i){var n,r,s,a,o,l,h,c,u;return o=e-t,u=Math.floor(Math.log(o)/Math.log(10)),h=Math.pow(10,u),r=Math.floor(t/h)*h,n=Math.ceil(e/h)*h,l=(n-r)/(i-1),1===h&&l>1&&Math.ceil(l)!==l&&(l=Math.ceil(l),n=r+l*(i-1)),0>r&&n>0&&(r=Math.floor(t/l)*l,n=Math.ceil(e/l)*l),1>l?(a=Math.floor(Math.log(l)/Math.log(10)),s=function(){var t,e;for(e=[],c=t=r;l>0?n>=t:t>=n;c=t+=l)e.push(parseFloat(c.toFixed(1-a)));return e}()):s=function(){var t,e;for(e=[],c=t=r;l>0?n>=t:t>=n;c=t+=l)e.push(c);return e}(),s},n.prototype._calc=function(){var t,e,i,n,r,s,a,o;return r=this.el.width(),i=this.el.height(),(this.elementWidth!==r||this.elementHeight!==i||this.dirty)&&(this.elementWidth=r,this.elementHeight=i,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,(a=this.options.axes)!==!0&&"both"!==a&&"y"!==a||(s=function(){var t,i,n,r;for(n=this.grid,r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(this.measureText(this.yAxisFormat(e)).width);return r}.call(this),this.left+=Math.max.apply(Math,s)),(o=this.options.axes)!==!0&&"both"!==o&&"x"!==o||(t=function(){var t,e,i;for(i=[],n=t=0,e=this.data.length;e>=0?e>t:t>e;n=e>=0?++t:--t)i.push(this.measureText(this.data[n].text,-this.options.xLabelAngle).height);return i}.call(this),this.bottom-=Math.max.apply(Math,t)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc)?this.calc():void 0},n.prototype.transY=function(t){return this.bottom-(t-this.ymin)*this.dy},n.prototype.transX=function(t){return 1===this.data.length?(this.left+this.right)/2:this.left+(t-this.xmin)*this.dx},n.prototype.redraw=function(){return this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw?this.draw():void 0},n.prototype.measureText=function(t,e){var i,n;return null==e&&(e=0),n=this.raphael.text(100,100,t).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(e),i=n.getBBox(),n.remove(),i},n.prototype.yAxisFormat=function(t){return this.yLabelFormat(t)},n.prototype.yLabelFormat=function(t){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(t):""+this.options.preUnits+e.commas(t)+this.options.postUnits},n.prototype.drawGrid=function(){var t,e,i,n,r,s,a,o;if(this.options.grid!==!1||(r=this.options.axes)===!0||"both"===r||"y"===r){for(s=this.grid,o=[],i=0,n=s.length;n>i;i++)t=s[i],e=this.transY(t),(a=this.options.axes)!==!0&&"both"!==a&&"y"!==a||this.drawYAxisLabel(this.left-this.options.padding/2,e,this.yAxisFormat(t)),this.options.grid?o.push(this.drawGridLine("M"+this.left+","+e+"H"+(this.left+this.width))):o.push(void 0);return o}},n.prototype.drawGoals=function(){var t,e,i,n,r,s,a;for(s=this.options.goals,a=[],i=n=0,r=s.length;r>n;i=++n)e=s[i],t=this.options.goalLineColors[i%this.options.goalLineColors.length],a.push(this.drawGoal(e,t));return a},n.prototype.drawEvents=function(){var t,e,i,n,r,s,a;for(s=this.events,a=[],i=n=0,r=s.length;r>n;i=++n)e=s[i],t=this.options.eventLineColors[i%this.options.eventLineColors.length],a.push(this.drawEvent(e,t));return a},n.prototype.drawGoal=function(t,e){return this.raphael.path("M"+this.left+","+this.transY(t)+"H"+this.right).attr("stroke",e).attr("stroke-width",this.options.goalStrokeWidth)},n.prototype.drawEvent=function(t,e){return this.raphael.path("M"+this.transX(t)+","+this.bottom+"V"+this.top).attr("stroke",e).attr("stroke-width",this.options.eventStrokeWidth)},n.prototype.drawYAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},n.prototype.drawGridLine=function(t){return this.raphael.path(t).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},n.prototype.startRange=function(t){return this.hover.hide(),this.selectFrom=t,this.selectionRect.attr({x:t,width:0}).show()},n.prototype.endRange=function(t){var e,i;return this.selectFrom?(i=Math.min(this.selectFrom,t),e=Math.max(this.selectFrom,t),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(i)].x,end:this.data[this.hitTest(e)].x}),this.selectFrom=null):void 0},n.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},n}(e.EventEmitter),e.parseDate=function(t){var e,i,n,r,s,a,o,l,h,c,u;return"number"==typeof t?t:(i=t.match(/^(\d+) Q(\d)$/),r=t.match(/^(\d+)-(\d+)$/),s=t.match(/^(\d+)-(\d+)-(\d+)$/),o=t.match(/^(\d+) W(\d+)$/),l=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),h=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),i?new Date(parseInt(i[1],10),3*parseInt(i[2],10)-1,1).getTime():r?new Date(parseInt(r[1],10),parseInt(r[2],10)-1,1).getTime():s?new Date(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10)).getTime():o?(c=new Date(parseInt(o[1],10),0,1),4!==c.getDay()&&c.setMonth(0,1+(4-c.getDay()+7)%7),c.getTime()+6048e5*parseInt(o[2],10)):l?l[6]?(a=0,"Z"!==l[6]&&(a=60*parseInt(l[8],10)+parseInt(l[9],10),"+"===l[7]&&(a=0-a)),Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+a)):new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)).getTime():h?(u=parseFloat(h[6]),e=Math.floor(u),n=Math.round(1e3*(u-e)),h[8]?(a=0,"Z"!==h[8]&&(a=60*parseInt(h[10],10)+parseInt(h[11],10),"+"===h[9]&&(a=0-a)),Date.UTC(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10)+a,e,n)):new Date(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10),e,n).getTime()):new Date(parseInt(t,10),0,1).getTime())},e.Hover=function(){function i(i){null==i&&(i={}),this.options=t.extend({},e.Hover.defaults,i),this.el=t("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return i.defaults={"class":"morris-hover morris-default-style"},i.prototype.update=function(t,e,i){return t?(this.html(t),this.show(),this.moveTo(e,i)):this.hide()},i.prototype.html=function(t){return this.el.html(t)},i.prototype.moveTo=function(t,e){var i,n,r,s,a,o;return a=this.options.parent.innerWidth(),s=this.options.parent.innerHeight(),n=this.el.outerWidth(),i=this.el.outerHeight(),r=Math.min(Math.max(0,t-n/2),a-n),null!=e?(o=e-i-10,0>o&&(o=e+10,o+i>s&&(o=s/2-i/2))):o=s/2-i/2,this.el.css({left:r+"px",top:parseInt(o)+"px"})},i.prototype.show=function(){return this.el.show()},i.prototype.hide=function(){return this.el.hide()},i}(),e.Line=function(t){function i(t){return this.hilight=s(this.hilight,this),this.onHoverOut=s(this.onHoverOut,this),this.onHoverMove=s(this.onHoverMove,this),this.onGridClick=s(this.onGridClick,this),this instanceof e.Line?void i.__super__.constructor.call(this,t):new e.Line(t)}return o(i,t),i.prototype.init=function(){return"always"!==this.options.hideHover?(this.hover=new e.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},i.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1},i.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},i.prototype.calcPoints=function(){var t,e,i,n,r,s;for(r=this.data,s=[],i=0,n=r.length;n>i;i++)t=r[i],t._x=this.transX(t.x),t._y=function(){var i,n,r,s;for(r=t.y,s=[],i=0,n=r.length;n>i;i++)e=r[i],null!=e?s.push(this.transY(e)):s.push(e);return s}.call(this),s.push(t._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var i,n,r,s;for(r=t._y,s=[],i=0,n=r.length;n>i;i++)e=r[i],null!=e&&s.push(e);return s}())));return s},i.prototype.hitTest=function(t){var e,i,n,r,s;if(0===this.data.length)return null;for(s=this.data.slice(1),e=n=0,r=s.length;r>n&&(i=s[e],!(t<(i._x+this.data[e]._x)/2));e=++n);return e},i.prototype.onGridClick=function(t,e){var i;return i=this.hitTest(t),this.fire("click",i,this.data[i].src,t,e)},i.prototype.onHoverMove=function(t){var e;return e=this.hitTest(t),this.displayHoverForRow(e)},i.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.displayHoverForRow(null):void 0},i.prototype.displayHoverForRow=function(t){var e;return null!=t?((e=this.hover).update.apply(e,this.hoverContentForRow(t)),this.hilight(t)):(this.hover.hide(),this.hilight())},i.prototype.hoverContentForRow=function(t){var e,i,n,r,s,a,o;for(n=this.data[t],e="<div class='morris-hover-row-label'>"+n.label+"</div>",o=n.y,i=s=0,a=o.length;a>s;i=++s)r=o[i],e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(r)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(t,this.options,e,n.src)),[e,n._x,n._ymax]},i.prototype.generatePaths=function(){var t,i,n,r;return this.paths=function(){var s,a,o,h;for(h=[],i=s=0,a=this.options.ykeys.length;a>=0?a>s:s>a;i=a>=0?++s:--s)r="boolean"==typeof this.options.smooth?this.options.smooth:(o=this.options.ykeys[i],l.call(this.options.smooth,o)>=0),t=function(){var t,e,r,s;for(r=this.data,s=[],t=0,e=r.length;e>t;t++)n=r[t],void 0!==n._y[i]&&s.push({x:n._x,y:n._y[i]});return s}.call(this),t.length>1?h.push(e.Line.createPath(t,r,this.bottom)):h.push(null);return h}.call(this)},i.prototype.draw=function(){var t;return(t=this.options.axes)!==!0&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries(),this.options.hideHover===!1?this.displayHoverForRow(this.data.length-1):void 0},i.prototype.drawXAxis=function(){var t,i,n,r,s,a,o,l,h,c,u=this;for(o=this.bottom+this.options.padding/2,s=null,r=null,t=function(t,e){var i,n,a,l,h;return i=u.drawXAxisLabel(u.transX(e),o,t),h=i.getBBox(),i.transform("r"+-u.options.xLabelAngle),n=i.getBBox(),i.transform("t0,"+n.height/2+"..."),0!==u.options.xLabelAngle&&(l=-.5*h.width*Math.cos(u.options.xLabelAngle*Math.PI/180),i.transform("t"+l+",0...")),n=i.getBBox(),(null==s||s>=n.x+n.width||null!=r&&r>=n.x)&&n.x>=0&&n.x+n.width<u.el.width()?(0!==u.options.xLabelAngle&&(a=1.25*u.options.gridTextSize/Math.sin(u.options.xLabelAngle*Math.PI/180),r=n.x-a),s=n.x-u.options.xLabelMargin):i.remove()},n=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:e.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var t,e,i,n;for(i=this.data,n=[],t=0,e=i.length;e>t;t++)a=i[t],n.push([a.label,a.x]);return n}.call(this),n.reverse(),c=[],l=0,h=n.length;h>l;l++)i=n[l],c.push(t(i[0],i[1]));return c},i.prototype.drawSeries=function(){var t,e,i,n,r,s;for(this.seriesPoints=[],t=e=n=this.options.ykeys.length-1;0>=n?0>=e:e>=0;t=0>=n?++e:--e)this._drawLineFor(t);for(s=[],t=i=r=this.options.ykeys.length-1;0>=r?0>=i:i>=0;t=0>=r?++i:--i)s.push(this._drawPointFor(t));return s},i.prototype._drawPointFor=function(t){var e,i,n,r,s,a;for(this.seriesPoints[t]=[],s=this.data,a=[],n=0,r=s.length;r>n;n++)i=s[n],e=null,null!=i._y[t]&&(e=this.drawLinePoint(i._x,i._y[t],this.colorFor(i,t,"point"),t)),a.push(this.seriesPoints[t].push(e));return a},i.prototype._drawLineFor=function(t){var e;return e=this.paths[t],null!==e?this.drawLinePath(e,this.colorFor(null,t,"line"),t):void 0},i.createPath=function(t,i,n){var r,s,a,o,l,h,c,u,d,f,p,g,m,v;for(c="",i&&(a=e.Line.gradients(t)),u={y:null},o=m=0,v=t.length;v>m;o=++m)r=t[o],null!=r.y&&(null!=u.y?i?(s=a[o],h=a[o-1],l=(r.x-u.x)/4,d=u.x+l,p=Math.min(n,u.y+l*h),f=r.x-l,g=Math.min(n,r.y-l*s),c+="C"+d+","+p+","+f+","+g+","+r.x+","+r.y):c+="L"+r.x+","+r.y:i&&null==a[o]||(c+="M"+r.x+","+r.y)),u=r;return c},i.gradients=function(t){var e,i,n,r,s,a,o,l;for(i=function(t,e){return(t.y-e.y)/(t.x-e.x)},l=[],n=a=0,o=t.length;o>a;n=++a)e=t[n],null!=e.y?(r=t[n+1]||{y:null},s=t[n-1]||{y:null},null!=s.y&&null!=r.y?l.push(i(s,r)):null!=s.y?l.push(i(s,e)):null!=r.y?l.push(i(e,r)):l.push(null)):l.push(null);return l},i.prototype.hilight=function(t){var e,i,n,r,s;if(null!==this.prevHilight&&this.prevHilight!==t)for(e=i=0,r=this.seriesPoints.length-1;r>=0?r>=i:i>=r;e=r>=0?++i:--i)this.seriesPoints[e][this.prevHilight]&&this.seriesPoints[e][this.prevHilight].animate(this.pointShrinkSeries(e));if(null!==t&&this.prevHilight!==t)for(e=n=0,s=this.seriesPoints.length-1;s>=0?s>=n:n>=s;e=s>=0?++n:--n)this.seriesPoints[e][t]&&this.seriesPoints[e][t].animate(this.pointGrowSeries(e));return this.prevHilight=t},i.prototype.colorFor=function(t,e,i){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,t,e,i):"point"===i?this.options.pointFillColors[e%this.options.pointFillColors.length]||this.options.lineColors[e%this.options.lineColors.length]:this.options.lineColors[e%this.options.lineColors.length]},i.prototype.drawXAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawLinePath=function(t,e,i){return this.raphael.path(t).attr("stroke",e).attr("stroke-width",this.lineWidthForSeries(i))},i.prototype.drawLinePoint=function(t,e,i,n){return this.raphael.circle(t,e,this.pointSizeForSeries(n)).attr("fill",i).attr("stroke-width",this.pointStrokeWidthForSeries(n)).attr("stroke",this.pointStrokeColorForSeries(n))},i.prototype.pointStrokeWidthForSeries=function(t){return this.options.pointStrokeWidths[t%this.options.pointStrokeWidths.length]},i.prototype.pointStrokeColorForSeries=function(t){return this.options.pointStrokeColors[t%this.options.pointStrokeColors.length]},i.prototype.lineWidthForSeries=function(t){return this.options.lineWidth instanceof Array?this.options.lineWidth[t%this.options.lineWidth.length]:this.options.lineWidth},i.prototype.pointSizeForSeries=function(t){return this.options.pointSize instanceof Array?this.options.pointSize[t%this.options.pointSize.length]:this.options.pointSize},i.prototype.pointGrowSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)+3},25,"linear")},i.prototype.pointShrinkSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)},25,"linear")},i}(e.Grid),e.labelSeries=function(i,n,r,s,a){var o,l,h,c,u,d,f,p,g,m,v;if(h=200*(n-i)/r,l=new Date(i),f=e.LABEL_SPECS[s],void 0===f)for(v=e.AUTO_LABEL_ORDER,g=0,m=v.length;m>g;g++)if(c=v[g],d=e.LABEL_SPECS[c],h>=d.span){f=d;break}for(void 0===f&&(f=e.LABEL_SPECS.second),a&&(f=t.extend({},f,{fmt:a})),o=f.start(l),u=[];(p=o.getTime())<=n;)p>=i&&u.push([f.fmt(o),p]),f.incr(o);return u},i=function(t){return{span:60*t*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},fmt:function(t){return""+e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())},incr:function(e){return e.setUTCMinutes(e.getUTCMinutes()+t)}}},n=function(t){return{span:1e3*t,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())},fmt:function(t){return""+e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())+":"+e.pad2(t.getSeconds())},incr:function(e){return e.setUTCSeconds(e.getUTCSeconds()+t)}}},e.LABEL_SPECS={decade:{span:1728e8,start:function(t){return new Date(t.getFullYear()-t.getFullYear()%10,0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+10)}},year:{span:1728e7,start:function(t){return new Date(t.getFullYear(),0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+1)}},month:{span:24192e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),1)},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)},incr:function(t){return t.setMonth(t.getMonth()+1)}},week:{span:6048e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+7)}},day:{span:864e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+1)}},hour:i(60),"30min":i(30),"15min":i(15),"10min":i(10),"5min":i(5),minute:i(1),"30sec":n(30),"15sec":n(15),"10sec":n(10),"5sec":n(5),second:n(1)},e.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],e.Area=function(i){function n(i){var s;return this instanceof e.Area?(s=t.extend({},r,i),this.cumulative=!s.behaveLikeLine,"auto"===s.fillOpacity&&(s.fillOpacity=s.behaveLikeLine?.8:1),void n.__super__.constructor.call(this,s)):new e.Area(i)}var r;return o(n,i),r={fillOpacity:"auto",behaveLikeLine:!1},n.prototype.calcPoints=function(){var t,e,i,n,r,s,a;for(s=this.data,a=[],n=0,r=s.length;r>n;n++)t=s[n],t._x=this.transX(t.x),e=0,t._y=function(){var n,r,s,a;for(s=t.y,a=[],n=0,r=s.length;r>n;n++)i=s[n],this.options.behaveLikeLine?a.push(this.transY(i)):(e+=i||0,a.push(this.transY(e)));return a}.call(this),a.push(t._ymax=Math.max.apply(Math,t._y));return a},n.prototype.drawSeries=function(){var t,e,i,n,r,s,a,o;for(this.seriesPoints=[],e=this.options.behaveLikeLine?function(){s=[];for(var t=0,e=this.options.ykeys.length-1;e>=0?e>=t:t>=e;e>=0?t++:t--)s.push(t);return s}.apply(this):function(){a=[];for(var t=r=this.options.ykeys.length-1;0>=r?0>=t:t>=0;0>=r?t++:t--)a.push(t);return a}.apply(this),o=[],i=0,n=e.length;n>i;i++)t=e[i],this._drawFillFor(t),this._drawLineFor(t),o.push(this._drawPointFor(t));return o},n.prototype._drawFillFor=function(t){var e;return e=this.paths[t],null!==e?(e+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(e,this.fillForSeries(t))):void 0},n.prototype.fillForSeries=function(t){var e;return e=Raphael.rgb2hsl(this.colorFor(this.data[t],t,"line")),Raphael.hsl(e.h,this.options.behaveLikeLine?.9*e.s:.75*e.s,Math.min(.98,this.options.behaveLikeLine?1.2*e.l:1.25*e.l))},n.prototype.drawFilledPath=function(t,e){return this.raphael.path(t).attr("fill",e).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},n}(e.Line),e.Bar=function(i){function n(i){return this.onHoverOut=s(this.onHoverOut,this),this.onHoverMove=s(this.onHoverMove,this),this.onGridClick=s(this.onGridClick,this),this instanceof e.Bar?void n.__super__.constructor.call(this,t.extend({},i,{parseTime:!1})):new e.Bar(i)}return o(n,i),n.prototype.init=function(){return this.cumulative=this.options.stacked,"always"!==this.options.hideHover?(this.hover=new e.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},n.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50},n.prototype.calc=function(){var t;return this.calcBars(),this.options.hideHover===!1?(t=this.hover).update.apply(t,this.hoverContentForRow(this.data.length-1)):void 0},n.prototype.calcBars=function(){var t,e,i,n,r,s,a;for(s=this.data,a=[],t=n=0,r=s.length;r>n;t=++n)e=s[t],e._x=this.left+this.width*(t+.5)/this.data.length,a.push(e._y=function(){var t,n,r,s;for(r=e.y,s=[],t=0,n=r.length;n>t;t++)i=r[t],null!=i?s.push(this.transY(i)):s.push(null);return s}.call(this));return a},n.prototype.draw=function(){var t;return(t=this.options.axes)!==!0&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries()},n.prototype.drawXAxis=function(){var t,e,i,n,r,s,a,o,l,h,c,u,d;for(h=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2),a=null,s=null,d=[],t=c=0,u=this.data.length;u>=0?u>c:c>u;t=u>=0?++c:--c)o=this.data[this.data.length-1-t],e=this.drawXAxisLabel(o._x,h,o.label),l=e.getBBox(),e.transform("r"+-this.options.xLabelAngle),i=e.getBBox(),e.transform("t0,"+i.height/2+"..."),0!==this.options.xLabelAngle&&(r=-.5*l.width*Math.cos(this.options.xLabelAngle*Math.PI/180),e.transform("t"+r+",0...")),(null==a||a>=i.x+i.width||null!=s&&s>=i.x)&&i.x>=0&&i.x+i.width<this.el.width()?(0!==this.options.xLabelAngle&&(n=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),s=i.x-n),d.push(a=i.x-this.options.xLabelMargin)):d.push(e.remove());return d},n.prototype.drawSeries=function(){var t,e,i,n,r,s,a,o,l,h,c,u,d,f,p;return i=this.width/this.options.data.length,o=this.options.stacked?1:this.options.ykeys.length,t=(i*this.options.barSizeRatio-this.options.barGap*(o-1))/o,this.options.barSize&&(t=Math.min(t,this.options.barSize)),u=i-t*o-this.options.barGap*(o-1),a=u/2,p=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var o,u,g,m;for(g=this.data,m=[],n=o=0,u=g.length;u>o;n=++o)l=g[n],r=0,m.push(function(){var o,u,g,m;for(g=l._y,m=[],h=o=0,u=g.length;u>o;h=++o)f=g[h],null!==f?(p?(d=Math.min(f,p),e=Math.max(f,p)):(d=f,e=this.bottom),s=this.left+n*i+a,this.options.stacked||(s+=h*(t+this.options.barGap)),c=e-d,this.options.verticalGridCondition&&this.options.verticalGridCondition(l.x)&&this.drawBar(this.left+n*i,this.top,i,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(d-=r),this.drawBar(s,d,t,c,this.colorFor(l,h,"bar"),this.options.barOpacity,this.options.barRadius),m.push(r+=c)):m.push(null);return m}.call(this));return m}.call(this)},n.prototype.colorFor=function(t,e,i){var n,r;return"function"==typeof this.options.barColors?(n={x:t.x,y:t.y[e],label:t.label},r={index:e,key:this.options.ykeys[e],label:this.options.labels[e]},this.options.barColors.call(this,n,r,i)):this.options.barColors[e%this.options.barColors.length]},n.prototype.hitTest=function(t){return 0===this.data.length?null:(t=Math.max(Math.min(t,this.right),this.left),Math.min(this.data.length-1,Math.floor((t-this.left)/(this.width/this.data.length))))},n.prototype.onGridClick=function(t,e){var i;return i=this.hitTest(t),this.fire("click",i,this.data[i].src,t,e)},n.prototype.onHoverMove=function(t){var e,i;return e=this.hitTest(t),(i=this.hover).update.apply(i,this.hoverContentForRow(e))},n.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.hover.hide():void 0},n.prototype.hoverContentForRow=function(t){var e,i,n,r,s,a,o,l;for(n=this.data[t],e="<div class='morris-hover-row-label'>"+n.label+"</div>",l=n.y,i=a=0,o=l.length;o>a;i=++a)s=l[i],e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(s)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(t,this.options,e,n.src)),r=this.left+(t+.5)*this.width/this.data.length,[e,r]},n.prototype.drawXAxisLabel=function(t,e,i){var n;return n=this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},n.prototype.drawBar=function(t,e,i,n,r,s,a){var o,l;return o=Math.max.apply(Math,a),l=0===o||o>n?this.raphael.rect(t,e,i,n):this.raphael.path(this.roundedRect(t,e,i,n,a)),l.attr("fill",r).attr("fill-opacity",s).attr("stroke","none")},n.prototype.roundedRect=function(t,e,i,n,r){return null==r&&(r=[0,0,0,0]),["M",t,r[0]+e,"Q",t,e,t+r[0],e,"L",t+i-r[1],e,"Q",t+i,e,t+i,e+r[1],"L",t+i,e+n-r[2],"Q",t+i,e+n,t+i-r[2],e+n,"L",t+r[3],e+n,"Q",t,e+n,t,e+n-r[3],"Z"]},n}(e.Grid),e.Donut=function(i){function n(i){this.resizeHandler=s(this.resizeHandler,this),this.select=s(this.select,this),this.click=s(this.click,this);var n=this;if(!(this instanceof e.Donut))return new e.Donut(i);if(this.options=t.extend({},this.defaults,i),"string"==typeof i.element?this.el=t(document.getElementById(i.element)):this.el=t(i.element),null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==i.data&&0!==i.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&t(window).bind("resize",function(){return null!=n.timeoutId&&window.clearTimeout(n.timeoutId),n.timeoutId=window.setTimeout(n.resizeHandler,100)}),this.setData(i.data))}return o(n,i),n.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:e.commas,resize:!1},n.prototype.redraw=function(){var t,i,n,r,s,a,o,l,h,c,u,d,f,p,g,m,v,y,x,b,w,_,k;for(this.raphael.clear(),i=this.el.width()/2,n=this.el.height()/2,f=(Math.min(i,n)-10)/3,u=0,b=this.values,p=0,v=b.length;v>p;p++)d=b[p],u+=d;for(l=5/(2*f),t=1.9999*Math.PI-l*this.data.length,a=0,s=0,this.segments=[],w=this.values,r=g=0,y=w.length;y>g;r=++g)d=w[r],h=a+l+t*(d/u),c=new e.DonutSegment(i,n,2*f,f,a,h,this.data[r].color||this.options.colors[s%this.options.colors.length],this.options.backgroundColor,s,this.raphael),c.render(),this.segments.push(c),c.on("hover",this.select),c.on("click",this.click),a=h,s+=1;for(this.text1=this.drawEmptyDonutLabel(i,n-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(i,n+10,this.options.labelColor,14),o=Math.max.apply(Math,this.values),s=0,_=this.values,k=[],m=0,x=_.length;x>m;m++){if(d=_[m],d===o){this.select(s);break}k.push(s+=1)}return k},n.prototype.setData=function(t){var e;return this.data=t,this.values=function(){var t,i,n,r;for(n=this.data,r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(parseFloat(e.value));return r}.call(this),this.redraw()},n.prototype.click=function(t){return this.fire("click",t,this.data[t])},n.prototype.select=function(t){var e,i,n,r,s,a;for(a=this.segments,r=0,s=a.length;s>r;r++)i=a[r],i.deselect();return n=this.segments[t],n.select(),e=this.data[t],this.setLabels(e.label,this.options.formatter(e.value,e))},n.prototype.setLabels=function(t,e){var i,n,r,s,a,o,l,h;
return i=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,s=1.8*i,r=i/2,n=i/3,this.text1.attr({text:t,transform:""}),a=this.text1.getBBox(),o=Math.min(s/a.width,r/a.height),this.text1.attr({transform:"S"+o+","+o+","+(a.x+a.width/2)+","+(a.y+a.height)}),this.text2.attr({text:e,transform:""}),l=this.text2.getBBox(),h=Math.min(s/l.width,n/l.height),this.text2.attr({transform:"S"+h+","+h+","+(l.x+l.width/2)+","+l.y})},n.prototype.drawEmptyDonutLabel=function(t,e,i,n,r){var s;return s=this.raphael.text(t,e,"").attr("font-size",n).attr("fill",i),null!=r&&s.attr("font-weight",r),s},n.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},n}(e.EventEmitter),e.DonutSegment=function(t){function e(t,e,i,n,r,a,o,l,h,c){this.cx=t,this.cy=e,this.inner=i,this.outer=n,this.color=o,this.backgroundColor=l,this.index=h,this.raphael=c,this.deselect=s(this.deselect,this),this.select=s(this.select,this),this.sin_p0=Math.sin(r),this.cos_p0=Math.cos(r),this.sin_p1=Math.sin(a),this.cos_p1=Math.cos(a),this.is_long=a-r>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return o(e,t),e.prototype.calcArcPoints=function(t){return[this.cx+t*this.sin_p0,this.cy+t*this.cos_p0,this.cx+t*this.sin_p1,this.cy+t*this.cos_p1]},e.prototype.calcSegment=function(t,e){var i,n,r,s,a,o,l,h,c,u;return c=this.calcArcPoints(t),i=c[0],r=c[1],n=c[2],s=c[3],u=this.calcArcPoints(e),a=u[0],l=u[1],o=u[2],h=u[3],"M"+i+","+r+("A"+t+","+t+",0,"+this.is_long+",0,"+n+","+s)+("L"+o+","+h)+("A"+e+","+e+",0,"+this.is_long+",1,"+a+","+l)+"Z"},e.prototype.calcArc=function(t){var e,i,n,r,s;return s=this.calcArcPoints(t),e=s[0],n=s[1],i=s[2],r=s[3],"M"+e+","+n+("A"+t+","+t+",0,"+this.is_long+",0,"+i+","+r)},e.prototype.render=function(){var t=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return t.fire("hover",t.index)},function(){return t.fire("click",t.index)})},e.prototype.drawDonutArc=function(t,e){return this.raphael.path(t).attr({stroke:e,"stroke-width":2,opacity:0})},e.prototype.drawDonutSegment=function(t,e,i,n,r){return this.raphael.path(t).attr({fill:e,stroke:i,"stroke-width":3}).hover(n).click(r)},e.prototype.select=function(){return this.selected?void 0:(this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0)},e.prototype.deselect=function(){return this.selected?(this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1):void 0},e}(e.EventEmitter)}.call(this),d3=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function i(t){for(var e=1;t*e%1;)e*=10;return e}function n(t,e){try{for(var i in e)Object.defineProperty(t.prototype,i,{value:e[i],enumerable:!1})}catch(n){t.prototype=e}}function r(){}function s(){}function a(t,e,i){return function(){var n=i.apply(e,arguments);return n===e?t:n}}function o(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var i=0,n=Fs.length;n>i;++i){var r=Fs[i]+e;if(r in t)return r}}function l(){}function h(){}function c(t){function e(){for(var e,n=i,r=-1,s=n.length;++r<s;)(e=n[r].on)&&e.apply(this,arguments);return t}var i=[],n=new r;return e.on=function(e,r){var s,a=n.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,i=i.slice(0,s=i.indexOf(a)).concat(i.slice(s+1)),n.remove(e)),r&&i.push(n.set(e,{on:r})),t)},e}function u(){vs.event.preventDefault()}function d(){for(var t,e=vs.event;t=e.sourceEvent;)e=t;return e}function f(t){for(var e=new h,i=0,n=arguments.length;++i<n;)e[arguments[i]]=c(e);return e.of=function(i,n){return function(r){try{var s=r.sourceEvent=vs.event;r.target=t,vs.event=r,e[r.type].apply(i,n)}finally{vs.event=s}}},e}function p(t){return zs(t,js),t}function g(t){return"function"==typeof t?t:function(){return Rs(t,this)}}function m(t){return"function"==typeof t?t:function(){return Os(t,this)}}function v(t,e){function i(){this.removeAttribute(t)}function n(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function s(){this.setAttributeNS(t.space,t.local,e)}function a(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}function o(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}return t=vs.ns.qualify(t),null==e?t.local?n:i:"function"==typeof e?t.local?o:a:t.local?s:r}function y(t){return t.trim().replace(/\s+/g," ")}function x(t){return new RegExp("(?:^|\\s+)"+vs.requote(t)+"(?:\\s+|$)","g")}function b(t,e){function i(){for(var i=-1;++i<r;)t[i](this,e)}function n(){for(var i=-1,n=e.apply(this,arguments);++i<r;)t[i](this,n)}t=t.trim().split(/\s+/).map(w);var r=t.length;return"function"==typeof e?n:i}function w(t){var e=x(t);return function(i,n){if(r=i.classList)return n?r.add(t):r.remove(t);var r=i.getAttribute("class")||"";n?(e.lastIndex=0,e.test(r)||i.setAttribute("class",y(r+" "+t))):i.setAttribute("class",y(r.replace(e," ")))}}function _(t,e,i){function n(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,i)}function s(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}return null==e?n:"function"==typeof e?s:r}function k(t,e){function i(){delete this[t]}function n(){this[t]=e}function r(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}return null==e?i:"function"==typeof e?r:n}function C(t){return"function"==typeof t?t:(t=vs.ns.qualify(t)).local?function(){return bs.createElementNS(t.space,t.local)}:function(){return bs.createElementNS(this.namespaceURI,t)}}function M(t){return{__data__:t}}function S(t){return function(){return Hs(this,t)}}function T(t){return arguments.length||(t=vs.ascending),function(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}}function D(t,e){for(var i=0,n=t.length;n>i;i++)for(var r,s=t[i],a=0,o=s.length;o>a;a++)(r=s[a])&&e(r,a,i);return t}function A(t){return zs(t,Ys),t}function E(t){var e,i;return function(n,r,s){var a,o=t[s].update,l=o.length;for(s!=i&&(i=s,e=0),r>=e&&(e=r+1);!(a=o[e])&&++e<l;);return a}}function P(){var t=this.__transition__;t&&++t.active}function L(t,e,i){function n(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){var r=h(e,xs(arguments));n.call(this),this.addEventListener(t,this[a]=r,r.$=i),r._=e}function s(){var e,i=new RegExp("^__on([^.]+)"+vs.requote(t)+"$");for(var n in this)if(e=n.match(i)){var r=this[n];this.removeEventListener(e[1],r,r.$),delete this[n]}}var a="__on"+t,o=t.indexOf("."),h=F;o>0&&(t=t.substring(0,o));var c=Bs.get(t);return c&&(t=c,h=I),o?e?r:n:e?l:s}function F(t,e){return function(i){var n=vs.event;vs.event=i,e[0]=this.__data__;try{t.apply(this,e)}finally{vs.event=n}}}function I(t,e){var i=F(t,e);return function(t){var e=this,n=t.relatedTarget;n&&(n===e||8&n.compareDocumentPosition(e))||i.call(e,t)}}function z(){var t=".dragsuppress-"+ ++Us,e="touchmove"+t,i="selectstart"+t,n="dragstart"+t,r="click"+t,s=vs.select(_s).on(e,u).on(i,u).on(n,u),a=ws.style,o=a[qs];return a[qs]="none",function(e){function i(){s.on(r,null)}s.on(t,null),a[qs]=o,e&&(s.on(r,function(){u(),i()},!0),setTimeout(i,0))}}function R(t,e){e.changedTouches&&(e=e.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var n=i.createSVGPoint();if(0>Vs&&(_s.scrollX||_s.scrollY)){i=vs.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=i[0][0].getScreenCTM();Vs=!(r.f||r.e),i.remove()}return Vs?(n.x=e.pageX,n.y=e.pageY):(n.x=e.clientX,n.y=e.clientY),n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function O(t){return t>0?1:0>t?-1:0}function N(t){return t>1?0:-1>t?Xs:Math.acos(t)}function H(t){return t>1?Zs:-1>t?-Zs:Math.asin(t)}function j(t){return((t=Math.exp(t))-1/t)/2}function W(t){return((t=Math.exp(t))+1/t)/2}function Y(t){return((t=Math.exp(2*t))-1)/(t+1)}function $(t){return(t=Math.sin(t/2))*t}function B(){}function q(t,e,i){return new U(t,e,i)}function U(t,e,i){this.h=t,this.s=e,this.l=i}function V(t,e,i){function n(t){return t>360?t-=360:0>t&&(t+=360),60>t?s+(a-s)*t/60:180>t?a:240>t?s+(a-s)*(240-t)/60:s}function r(t){return Math.round(255*n(t))}var s,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,i=0>i?0:i>1?1:i,a=.5>=i?i*(1+e):i+e-i*e,s=2*i-a,at(r(t+120),r(t),r(t-120))}function X(t,e,i){return new G(t,e,i)}function G(t,e,i){this.h=t,this.c=e,this.l=i}function Z(t,e,i){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),Q(i,Math.cos(t*=Js)*e,Math.sin(t)*e)}function Q(t,e,i){return new K(t,e,i)}function K(t,e,i){this.l=t,this.a=e,this.b=i}function J(t,e,i){var n=(t+16)/116,r=n+e/500,s=n-i/200;return r=et(r)*ca,n=et(n)*ua,s=et(s)*da,at(nt(3.2404542*r-1.5371385*n-.4985314*s),nt(-.969266*r+1.8760108*n+.041556*s),nt(.0556434*r-.2040259*n+1.0572252*s))}function tt(t,e,i){return t>0?X(Math.atan2(i,e)*ta,Math.sqrt(e*e+i*i),t):X(NaN,NaN,t)}function et(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function it(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function nt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function rt(t){return at(t>>16,255&t>>8,255&t)}function st(t){return rt(t)+""}function at(t,e,i){return new ot(t,e,i)}function ot(t,e,i){this.r=t,this.g=e,this.b=i}function lt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ht(t,e,i){var n,r,s,a=0,o=0,l=0;if(n=/([a-z]+)\((.*)\)/i.exec(t))switch(r=n[2].split(","),n[1]){case"hsl":return i(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(ft(r[0]),ft(r[1]),ft(r[2]))}return(s=ga.get(t))?e(s.r,s.g,s.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(a=t.charAt(1),a+=a,o=t.charAt(2),o+=o,l=t.charAt(3),l+=l):7===t.length&&(a=t.substring(1,3),o=t.substring(3,5),l=t.substring(5,7)),a=parseInt(a,16),o=parseInt(o,16),l=parseInt(l,16)),e(a,o,l))}function ct(t,e,i){var n,r,s=Math.min(t/=255,e/=255,i/=255),a=Math.max(t,e,i),o=a-s,l=(a+s)/2;return o?(r=.5>l?o/(a+s):o/(2-a-s),n=t==a?(e-i)/o+(i>e?6:0):e==a?(i-t)/o+2:(t-e)/o+4,n*=60):(n=NaN,r=l>0&&1>l?0:n),q(n,r,l)}function ut(t,e,i){t=dt(t),e=dt(e),i=dt(i);var n=it((.4124564*t+.3575761*e+.1804375*i)/ca),r=it((.2126729*t+.7151522*e+.072175*i)/ua),s=it((.0193339*t+.119192*e+.9503041*i)/da);return Q(116*r-16,500*(n-r),200*(r-s))}function dt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ft(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function pt(t){return"function"==typeof t?t:function(){return t}}function gt(t){return t}function mt(t){return function(e,i,n){return 2===arguments.length&&"function"==typeof i&&(n=i,i=null),vt(e,i,t,n)}}function vt(t,e,i,n){function r(){var t,e=l.status;if(!e&&l.responseText||e>=200&&300>e||304===e){try{t=i.call(s,l)}catch(n){return void a.error.call(s,n)}a.load.call(s,t)}else a.error.call(s,l)}var s={},a=vs.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,h=null;return!_s.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=vs.event;vs.event=t;try{a.progress.call(s,l)}finally{vs.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?o[t]:(null==e?delete o[t]:o[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",s):e},s.responseType=function(t){return arguments.length?(h=t,s):h},s.response=function(t){return i=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(xs(arguments)))}}),s.send=function(i,n,r){if(2===arguments.length&&"function"==typeof n&&(r=n,n=null),l.open(i,t,!0),null==e||"accept"in o||(o.accept=e+",*/*"),l.setRequestHeader)for(var c in o)l.setRequestHeader(c,o[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=h&&(l.responseType=h),null!=r&&s.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(s,l),l.send(null==n?null:n),s},s.abort=function(){return l.abort(),s},vs.rebind(s,a,"on"),null==n?s:s.get(yt(n))}function yt(t){return 1===t.length?function(e,i){t(null==e?i:null)}:t}function xt(){var t=wt(),e=_t()-t;e>24?(isFinite(e)&&(clearTimeout(xa),xa=setTimeout(xt,e)),ya=0):(ya=1,wa(xt))}function bt(t,e,i){var n=arguments.length;2>n&&(e=0),3>n&&(i=Date.now()),ba.callback=t,ba.time=i+e}function wt(){var t=Date.now();for(ba=ma;ba;)t>=ba.time&&(ba.flush=ba.callback(t-ba.time)),ba=ba.next;return t}function _t(){for(var t,e=ma,i=1/0;e;)e.flush?e=t?t.next=e.next:ma=e.next:(e.time<i&&(i=e.time),e=(t=e).next);return va=t,i}function kt(t,e){var i=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/i}:function(t){return t*i},symbol:t}}function Ct(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Mt(t){return t+""}function St(){}function Tt(t,e,i){var n=i.s=t+e,r=n-t,s=n-r;i.t=t-s+(e-r)}function Dt(t,e){t&&Fa.hasOwnProperty(t.type)&&Fa[t.type](t,e)}function At(t,e,i){var n,r=-1,s=t.length-i;for(e.lineStart();++r<s;)n=t[r],e.point(n[0],n[1],n[2]);e.lineEnd()}function Et(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)At(t[i],e,1);e.polygonEnd()}function Pt(){function t(t,e){t*=Js,e=e*Js/2+Xs/4;var i=t-n,a=Math.cos(e),o=Math.sin(e),l=s*o,h=r*a+l*Math.cos(i),c=l*Math.sin(i);za.add(Math.atan2(c,h)),n=t,r=a,s=o}var e,i,n,r,s;Ra.point=function(a,o){Ra.point=t,n=(e=a)*Js,r=Math.cos(o=(i=o)*Js/2+Xs/4),s=Math.sin(o)},Ra.lineEnd=function(){t(e,i)}}function Lt(t){var e=t[0],i=t[1],n=Math.cos(i);return[n*Math.cos(e),n*Math.sin(e),Math.sin(i)]}function Ft(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function It(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function zt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Rt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ot(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Nt(t){return[Math.atan2(t[1],t[0]),H(t[2])]}function Ht(t,e){return Math.abs(t[0]-e[0])<Qs&&Math.abs(t[1]-e[1])<Qs}function jt(t,e){t*=Js;var i=Math.cos(e*=Js);Wt(i*Math.cos(t),i*Math.sin(t),Math.sin(e))}function Wt(t,e,i){++Oa,Ha+=(t-Ha)/Oa,ja+=(e-ja)/Oa,Wa+=(i-Wa)/Oa}function Yt(){function t(t,r){t*=Js;var s=Math.cos(r*=Js),a=s*Math.cos(t),o=s*Math.sin(t),l=Math.sin(r),h=Math.atan2(Math.sqrt((h=i*l-n*o)*h+(h=n*a-e*l)*h+(h=e*o-i*a)*h),e*a+i*o+n*l);Na+=h,Ya+=h*(e+(e=a)),$a+=h*(i+(i=o)),Ba+=h*(n+(n=l)),Wt(e,i,n)}var e,i,n;Xa.point=function(r,s){r*=Js;var a=Math.cos(s*=Js);e=a*Math.cos(r),i=a*Math.sin(r),n=Math.sin(s),Xa.point=t,Wt(e,i,n)}}function $t(){Xa.point=jt}function Bt(){function t(t,e){t*=Js;var i=Math.cos(e*=Js),a=i*Math.cos(t),o=i*Math.sin(t),l=Math.sin(e),h=r*l-s*o,c=s*a-n*l,u=n*o-r*a,d=Math.sqrt(h*h+c*c+u*u),f=n*a+r*o+s*l,p=d&&-N(f)/d,g=Math.atan2(d,f);qa+=p*h,Ua+=p*c,Va+=p*u,Na+=g,Ya+=g*(n+(n=a)),$a+=g*(r+(r=o)),Ba+=g*(s+(s=l)),Wt(n,r,s)}var e,i,n,r,s;Xa.point=function(a,o){e=a,i=o,Xa.point=t,a*=Js;var l=Math.cos(o*=Js);n=l*Math.cos(a),r=l*Math.sin(a),s=Math.sin(o),Wt(n,r,s)},Xa.lineEnd=function(){t(e,i),Xa.lineEnd=$t,Xa.point=jt}}function qt(){return!0}function Ut(t,e,i,n,r){var s=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,i=t[0],n=t[e];if(Ht(i,n)){r.lineStart();for(var o=0;e>o;++o)r.point((i=t[o])[0],i[1]);return void r.lineEnd()}var l={point:i,points:t,other:null,visited:!1,entry:!0,subject:!0},h={point:i,points:[i],other:l,visited:!1,entry:!1,subject:!1};l.other=h,s.push(l),a.push(h),l={point:n,points:[n],other:null,visited:!1,entry:!1,subject:!0},h={point:n,points:[n],other:l,visited:!1,entry:!0,subject:!1},l.other=h,s.push(l),a.push(h)}}),a.sort(e),Vt(s),Vt(a),s.length){for(var o=0,l=i,h=a.length;h>o;++o)a[o].entry=l=!l;for(var c,u,d,f=s[0];;){for(c=f;c.visited;)if((c=c.next)===f)return;u=c.points,r.lineStart();do{if(c.visited=c.other.visited=!0,c.entry){if(c.subject)for(var o=0;o<u.length;o++)r.point((d=u[o])[0],d[1]);else n(c.point,c.next.point,1,r);c=c.next}else{if(c.subject){u=c.prev.points;for(var o=u.length;--o>=0;)r.point((d=u[o])[0],d[1])}else n(c.point,c.prev.point,-1,r);c=c.prev}c=c.other,u=c.points}while(!c.visited);r.lineEnd()}}}function Vt(t){if(e=t.length){for(var e,i,n=0,r=t[0];++n<e;)r.next=i=t[n],i.prev=r,r=i;r.next=i=t[0],i.prev=r}}function Xt(t,e,i,n){return function(r,s){function a(e,i){var n=r(e,i);t(e=n[0],i=n[1])&&s.point(e,i)}function o(t,e){var i=r(t,e);m.point(i[0],i[1])}function l(){y.point=o,m.lineStart()}function h(){y.point=a,m.lineEnd()}function c(t,e){g.push([t,e]);var i=r(t,e);b.point(i[0],i[1])}function u(){b.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),i=x.buffer(),n=i.length;if(g.pop(),p.push(g),g=null,n){if(1&e){t=i[0];var r,n=t.length-1,a=-1;for(s.lineStart();++a<n;)s.point((r=t[a])[0],r[1]);return void s.lineEnd()}n>1&&2&e&&i.push(i.pop().concat(i.shift())),f.push(i.filter(Gt))}}var f,p,g,m=e(s),v=r.invert(n[0],n[1]),y={point:a,lineStart:l,lineEnd:h,polygonStart:function(){y.point=c,y.lineStart=u,y.lineEnd=d,f=[],p=[],s.polygonStart()},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=h,f=vs.merge(f);var t=Kt(v,p);f.length?Ut(f,Qt,t,i,s):t&&(s.lineStart(),i(null,null,1,s),s.lineEnd()),s.polygonEnd(),f=p=null},sphere:function(){s.polygonStart(),s.lineStart(),i(null,null,1,s),s.lineEnd(),s.polygonEnd()}},x=Zt(),b=e(x);return y}}function Gt(t){return t.length>1}function Zt(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,i){t.push([e,i])},lineEnd:l,buffer:function(){var i=e;return e=[],t=null,i},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Qt(t,e){return((t=t.point)[0]<0?t[1]-Zs-Qs:Zs-t[1])-((e=e.point)[0]<0?e[1]-Zs-Qs:Zs-e[1])}function Kt(t,e){var i=t[0],n=t[1],r=[Math.sin(i),-Math.cos(i),0],s=0,a=0;za.reset();for(var o=0,l=e.length;l>o;++o){var h=e[o],c=h.length;if(c)for(var u=h[0],d=u[0],f=u[1]/2+Xs/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===c&&(m=0),t=h[m];var v=t[0],y=t[1]/2+Xs/4,x=Math.sin(y),b=Math.cos(y),w=v-d,_=Math.abs(w)>Xs,k=p*x;if(za.add(Math.atan2(k*Math.sin(w),g*b+k*Math.cos(w))),s+=_?w+(w>=0?2:-2)*Xs:w,_^d>=i^v>=i){var C=It(Lt(u),Lt(t));Ot(C);var M=It(r,C);Ot(M);var S=(_^w>=0?-1:1)*H(M[2]);(n>S||n===S&&(C[0]||C[1]))&&(a+=_^w>=0?1:-1)}if(!m++)break;d=v,p=x,g=b,u=t}}return(-Qs>s||Qs>s&&0>za)^1&a}function Jt(t){var e,i=NaN,n=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,a){var o=s>0?Xs:-Xs,l=Math.abs(s-i);Math.abs(l-Xs)<Qs?(t.point(i,n=(n+a)/2>0?Zs:-Zs),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),t.point(s,n),e=0):r!==o&&l>=Xs&&(Math.abs(i-r)<Qs&&(i-=r*Qs),Math.abs(s-o)<Qs&&(s-=o*Qs),n=te(i,n,s,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),e=0),t.point(i=s,n=a),r=o},lineEnd:function(){t.lineEnd(),i=n=NaN},clean:function(){return 2-e}}}function te(t,e,i,n){var r,s,a=Math.sin(t-i);return Math.abs(a)>Qs?Math.atan((Math.sin(e)*(s=Math.cos(n))*Math.sin(i)-Math.sin(n)*(r=Math.cos(e))*Math.sin(t))/(r*s*a)):(e+n)/2}function ee(t,e,i,n){var r;if(null==t)r=i*Zs,n.point(-Xs,r),n.point(0,r),n.point(Xs,r),n.point(Xs,0),n.point(Xs,-r),n.point(0,-r),n.point(-Xs,-r),n.point(-Xs,0),n.point(-Xs,r);else if(Math.abs(t[0]-e[0])>Qs){var s=(t[0]<e[0]?1:-1)*Xs;r=i*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function ie(t){function e(t,e){return Math.cos(t)*Math.cos(e)>s}function i(t){var i,s,l,h,c;return{lineStart:function(){h=l=!1,c=1},point:function(u,d){var f,p=[u,d],g=e(u,d),m=a?g?0:r(u,d):g?r(u+(0>u?Xs:-Xs),d):0;if(!i&&(h=l=g)&&t.lineStart(),g!==l&&(f=n(i,p),(Ht(i,f)||Ht(p,f))&&(p[0]+=Qs,p[1]+=Qs,g=e(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),f=n(p,i),t.point(f[0],f[1])):(f=n(i,p),t.point(f[0],f[1]),t.lineEnd()),i=f;else if(o&&i&&a^g){var v;m&s||!(v=n(p,i,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||i&&Ht(i,p)||t.point(p[0],p[1]),i=p,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),i=null},clean:function(){return c|(h&&l)<<1}}}function n(t,e,i){var n=Lt(t),r=Lt(e),a=[1,0,0],o=It(n,r),l=Ft(o,o),h=o[0],c=l-h*h;if(!c)return!i&&t;var u=s*l/c,d=-s*h/c,f=It(a,o),p=Rt(a,u),g=Rt(o,d);zt(p,g);var m=f,v=Ft(p,m),y=Ft(m,m),x=v*v-y*(Ft(p,p)-1);if(!(0>x)){var b=Math.sqrt(x),w=Rt(m,(-v-b)/y);if(zt(w,p),w=Nt(w),!i)return w;var _,k=t[0],C=e[0],M=t[1],S=e[1];k>C&&(_=k,k=C,C=_);var T=C-k,D=Math.abs(T-Xs)<Qs,A=D||Qs>T;if(!D&&M>S&&(_=M,M=S,S=_),A?D?M+S>0^w[1]<(Math.abs(w[0]-k)<Qs?M:S):M<=w[1]&&w[1]<=S:T>Xs^(k<=w[0]&&w[0]<=C)){var E=Rt(m,(-v+b)/y);return zt(E,p),[w,Nt(E)]}}}function r(e,i){var n=a?t:Xs-t,r=0;return-n>e?r|=1:e>n&&(r|=2),-n>i?r|=4:i>n&&(r|=8),r}var s=Math.cos(t),a=s>0,o=Math.abs(s)>Qs,l=Ae(t,6*Js);return Xt(e,i,l,a?[0,-t]:[-Xs,t-Xs])}function ne(t,e,i,n){function r(n,r){return Math.abs(n[0]-t)<Qs?r>0?0:3:Math.abs(n[0]-i)<Qs?r>0?2:1:Math.abs(n[1]-e)<Qs?r>0?1:0:r>0?3:2}function s(t,e){return a(t.point,e.point)}function a(t,e){var i=r(t,1),n=r(e,1);return i!==n?i-n:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}function o(r,s){var a=s[0]-r[0],o=s[1]-r[1],l=[0,1];return Math.abs(a)<Qs&&Math.abs(o)<Qs?t<=r[0]&&r[0]<=i&&e<=r[1]&&r[1]<=n:re(t-r[0],a,l)&&re(r[0]-i,-a,l)&&re(e-r[1],o,l)&&re(r[1]-n,-o,l)?(l[1]<1&&(s[0]=r[0]+l[1]*a,s[1]=r[1]+l[1]*o),l[0]>0&&(r[0]+=l[0]*a,r[1]+=l[0]*o),!0):!1}return function(l){function h(t){for(var e=0,i=y.length,n=t[1],r=0;i>r;++r)for(var s,a=1,o=y[r],l=o.length,h=o[0];l>a;++a)s=o[a],h[1]<=n?s[1]>n&&c(h,s,t)>0&&++e:s[1]<=n&&c(h,s,t)<0&&--e,h=s;return 0!==e}function c(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function u(s,o,l,h){var c=0,u=0;if(null==s||(c=r(s,l))!==(u=r(o,l))||a(s,o)<0^l>0){do h.point(0===c||3===c?t:i,c>1?n:e);while((c=(c+l+4)%4)!==u)}else h.point(o[0],o[1])}function d(r,s){return r>=t&&i>=r&&s>=e&&n>=s}function f(t,e){d(t,e)&&l.point(t,e)}function p(){E.point=m,y&&y.push(x=[]),S=!0,M=!1,k=C=NaN}function g(){v&&(m(b,w),_&&M&&A.rejoin(),v.push(A.buffer())),E.point=f,M&&l.lineEnd()}function m(t,e){t=Math.max(-Za,Math.min(Za,t)),e=Math.max(-Za,Math.min(Za,e));var i=d(t,e);if(y&&x.push([t,e]),S)b=t,w=e,_=i,S=!1,i&&(l.lineStart(),l.point(t,e));else if(i&&M)l.point(t,e);else{var n=[k,C],r=[t,e];o(n,r)?(M||(l.lineStart(),l.point(n[0],n[1])),l.point(r[0],r[1]),i||l.lineEnd(),T=!1):i&&(l.lineStart(),l.point(t,e),T=!1)}k=t,C=e,M=i}var v,y,x,b,w,_,k,C,M,S,T,D=l,A=Zt(),E={point:f,lineStart:p,lineEnd:g,polygonStart:function(){l=A,v=[],y=[],T=!0},polygonEnd:function(){l=D,v=vs.merge(v);var e=h([t,n]),i=T&&e,r=v.length;(i||r)&&(l.polygonStart(),i&&(l.lineStart(),u(null,null,1,l),l.lineEnd()),r&&Ut(v,s,e,u,l),l.polygonEnd()),v=y=x=null}};return E}}function re(t,e,i){if(Math.abs(e)<Qs)return 0>=t;var n=t/e;if(e>0){if(n>i[1])return!1;n>i[0]&&(i[0]=n)}else{if(n<i[0])return!1;n<i[1]&&(i[1]=n)}return!0}function se(t,e){function i(i,n){return i=t(i,n),e(i[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,n){return i=e.invert(i,n),i&&t.invert(i[0],i[1])}),i}function ae(t){var e=0,i=Xs/3,n=we(t),r=n(e,i);return r.parallels=function(t){return arguments.length?n(e=t[0]*Xs/180,i=t[1]*Xs/180):[180*(e/Xs),180*(i/Xs)]},r}function oe(t,e){function i(t,e){var i=Math.sqrt(s-2*r*Math.sin(e))/r;return[i*Math.sin(t*=r),a-i*Math.cos(t)]}var n=Math.sin(t),r=(n+Math.sin(e))/2,s=1+n*(2*r-n),a=Math.sqrt(s)/r;return i.invert=function(t,e){var i=a-e;return[Math.atan2(t,i)/r,H((s-(t*t+i*i)*r*r)/(2*r))]},i}function le(){function t(t,e){Ka+=r*t-n*e,n=t,r=e}var e,i,n,r;no.point=function(s,a){no.point=t,e=n=s,i=r=a},no.lineEnd=function(){t(e,i)}}function he(t,e){Ja>t&&(Ja=t),t>eo&&(eo=t),to>e&&(to=e),e>io&&(io=e)}function ce(){function t(t,e){a.push("M",t,",",e,s)}function e(t,e){a.push("M",t,",",e),o.point=i}function i(t,e){a.push("L",t,",",e)}function n(){o.point=t}function r(){a.push("Z")}var s=ue(4.5),a=[],o={point:t,lineStart:function(){o.point=e},lineEnd:n,polygonStart:function(){o.lineEnd=r},polygonEnd:function(){o.lineEnd=n,o.point=t},pointRadius:function(t){return s=ue(t),o},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return o}function ue(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function de(t,e){Ha+=t,ja+=e,++Wa}function fe(){function t(t,n){var r=t-e,s=n-i,a=Math.sqrt(r*r+s*s);Ya+=a*(e+t)/2,$a+=a*(i+n)/2,Ba+=a,de(e=t,i=n)}var e,i;so.point=function(n,r){so.point=t,de(e=n,i=r)}}function pe(){so.point=de}function ge(){function t(t,e){var i=t-n,s=e-r,a=Math.sqrt(i*i+s*s);Ya+=a*(n+t)/2,$a+=a*(r+e)/2,Ba+=a,a=r*t-n*e,qa+=a*(n+t),Ua+=a*(r+e),Va+=3*a,de(n=t,r=e)}var e,i,n,r;so.point=function(s,a){so.point=t,de(e=n=s,i=r=a)},so.lineEnd=function(){t(e,i)}}function me(t){function e(e,i){t.moveTo(e,i),t.arc(e,i,a,0,Gs)}function i(e,i){t.moveTo(e,i),o.point=n}function n(e,i){t.lineTo(e,i)}function r(){o.point=e}function s(){t.closePath()}var a=4.5,o={point:e,lineStart:function(){o.point=i},lineEnd:r,polygonStart:function(){o.lineEnd=s},polygonEnd:function(){o.lineEnd=r,o.point=e},pointRadius:function(t){return a=t,o},result:l};return o}function ve(t){function e(e){function n(i,n){i=t(i,n),e.point(i[0],i[1])}function r(){x=NaN,C.point=a,e.lineStart()}function a(n,r){var a=Lt([n,r]),o=t(n,r);i(x,b,y,w,_,k,x=o[0],b=o[1],y=n,w=a[0],_=a[1],k=a[2],s,e),e.point(x,b)}function o(){C.point=n,e.lineEnd()}function l(){r(),C.point=h,C.lineEnd=c}function h(t,e){a(u=t,d=e),f=x,p=b,g=w,m=_,v=k,C.point=a}function c(){i(x,b,y,w,_,k,f,p,u,g,m,v,s,e),C.lineEnd=o,o()}var u,d,f,p,g,m,v,y,x,b,w,_,k,C={point:n,lineStart:r,lineEnd:o,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=r}};return C}function i(e,s,a,o,l,h,c,u,d,f,p,g,m,v){var y=c-e,x=u-s,b=y*y+x*x;if(b>4*n&&m--){var w=o+f,_=l+p,k=h+g,C=Math.sqrt(w*w+_*_+k*k),M=Math.asin(k/=C),S=Math.abs(Math.abs(k)-1)<Qs?(a+d)/2:Math.atan2(_,w),T=t(S,M),D=T[0],A=T[1],E=D-e,P=A-s,L=x*E-y*P;(L*L/b>n||Math.abs((y*E+x*P)/b-.5)>.3||r>o*f+l*p+h*g)&&(i(e,s,a,o,l,h,D,A,S,w/=C,_/=C,k,m,v),v.point(D,A),i(D,A,S,w,_,k,c,u,d,f,p,g,m,v))}}var n=.5,r=Math.cos(30*Js),s=16;return e.precision=function(t){return arguments.length?(s=(n=t*t)>0&&16,e):Math.sqrt(n)},e}function ye(t){this.stream=t}function xe(t){var e=ve(function(e,i){return t([e*ta,i*ta])});return function(t){var i=new ye(t=e(t));return i.point=function(e,i){t.point(e*Js,i*Js)},i}}function be(t){return we(function(){return t})()}function we(t){function e(t){return t=o(t[0]*Js,t[1]*Js),[t[0]*d+l,h-t[1]*d]}function i(t){return t=o.invert((t[0]-l)/d,(h-t[1])/d),t&&[t[0]*ta,t[1]*ta]}function n(){o=se(a=Me(v,y,x),s);var t=s(g,m);return l=f-t[0]*d,h=p+t[1]*d,r()}function r(){return c&&(c.valid=!1,c=null),e}var s,a,o,l,h,c,u=ve(function(t,e){return t=s(t,e),[t[0]*d+l,h-t[1]*d]}),d=150,f=480,p=250,g=0,m=0,v=0,y=0,x=0,b=Ga,w=gt,_=null,k=null;return e.stream=function(t){return c&&(c.valid=!1),c=_e(b(a,u(w(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(b=null==t?(_=t,Ga):ie((_=+t)*Js),r()):_},e.clipExtent=function(t){return arguments.length?(k=t,w=t?ne(t[0][0],t[0][1],t[1][0],t[1][1]):gt,r()):k},e.scale=function(t){return arguments.length?(d=+t,n()):d},e.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],n()):[f,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Js,m=t[1]%360*Js,n()):[g*ta,m*ta]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Js,y=t[1]%360*Js,x=t.length>2?t[2]%360*Js:0,n()):[v*ta,y*ta,x*ta]},vs.rebind(e,u,"precision"),function(){return s=t.apply(this,arguments),e.invert=s.invert&&i,n()}}function _e(t){var e=new ye(t);return e.point=function(e,i){t.point(e*Js,i*Js)},e}function ke(t,e){return[t,e]}function Ce(t,e){return[t>Xs?t-Gs:-Xs>t?t+Gs:t,e]}function Me(t,e,i){return t?e||i?se(Te(t),De(e,i)):Te(t):e||i?De(e,i):Ce}function Se(t){return function(e,i){return e+=t,[e>Xs?e-Gs:-Xs>e?e+Gs:e,i]}}function Te(t){var e=Se(t);return e.invert=Se(-t),e}function De(t,e){function i(t,e){var i=Math.cos(e),o=Math.cos(t)*i,l=Math.sin(t)*i,h=Math.sin(e),c=h*n+o*r;return[Math.atan2(l*s-c*a,o*n-h*r),H(c*s+l*a)]}var n=Math.cos(t),r=Math.sin(t),s=Math.cos(e),a=Math.sin(e);return i.invert=function(t,e){var i=Math.cos(e),o=Math.cos(t)*i,l=Math.sin(t)*i,h=Math.sin(e),c=h*s-l*a;return[Math.atan2(l*s+h*a,o*n+c*r),H(c*n-o*r)]},i}function Ae(t,e){var i=Math.cos(t),n=Math.sin(t);return function(r,s,a,o){var l=a*e;null!=r?(r=Ee(i,r),s=Ee(i,s),(a>0?s>r:r>s)&&(r+=a*Gs)):(r=t+a*Gs,s=t-.5*l);for(var h,c=r;a>0?c>s:s>c;c-=l)o.point((h=Nt([i,-n*Math.cos(c),-n*Math.sin(c)]))[0],h[1])}}function Ee(t,e){var i=Lt(e);i[0]-=t,Ot(i);var n=N(-i[1]);return((-i[2]<0?-n:n)+2*Math.PI-Qs)%(2*Math.PI)}function Pe(t,e,i){var n=vs.range(t,e-Qs,i).concat(e);return function(t){return n.map(function(e){return[t,e]})}}function Le(t,e,i){var n=vs.range(t,e-Qs,i).concat(e);return function(t){return n.map(function(e){return[e,t]})}}function Fe(t){return t.source}function Ie(t){return t.target}function ze(t,e,i,n){var r=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=r*Math.cos(t),h=r*Math.sin(t),c=a*Math.cos(i),u=a*Math.sin(i),d=2*Math.asin(Math.sqrt($(n-e)+r*a*$(i-t))),f=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*f,i=Math.sin(d-t)*f,n=i*l+e*c,r=i*h+e*u,a=i*s+e*o;return[Math.atan2(r,n)*ta,Math.atan2(a,Math.sqrt(n*n+r*r))*ta]}:function(){return[t*ta,e*ta]};return p.distance=d,p}function Re(){function t(t,r){var s=Math.sin(r*=Js),a=Math.cos(r),o=Math.abs((t*=Js)-e),l=Math.cos(o);ao+=Math.atan2(Math.sqrt((o=a*Math.sin(o))*o+(o=n*s-i*a*l)*o),i*s+n*a*l),e=t,i=s,n=a}var e,i,n;oo.point=function(r,s){e=r*Js,i=Math.sin(s*=Js),n=Math.cos(s),oo.point=t},oo.lineEnd=function(){oo.point=oo.lineEnd=l}}function Oe(t,e){function i(e,i){var n=Math.cos(e),r=Math.cos(i),s=t(n*r);return[s*r*Math.sin(e),s*Math.sin(i)]}return i.invert=function(t,i){var n=Math.sqrt(t*t+i*i),r=e(n),s=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*s,n*a),Math.asin(n&&i*s/n)]},i}function Ne(t,e){function i(t,e){var i=Math.abs(Math.abs(e)-Zs)<Qs?0:a/Math.pow(r(e),s);return[i*Math.sin(s*t),a-i*Math.cos(s*t)]}var n=Math.cos(t),r=function(t){return Math.tan(Xs/4+t/2)},s=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),a=n*Math.pow(r(t),s)/s;return s?(i.invert=function(t,e){var i=a-e,n=O(s)*Math.sqrt(t*t+i*i);return[Math.atan2(t,i)/s,2*Math.atan(Math.pow(a/n,1/s))-Zs]},i):je}function He(t,e){function i(t,e){var i=s-e;return[i*Math.sin(r*t),s-i*Math.cos(r*t)]}var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),s=n/r+t;return Math.abs(r)<Qs?ke:(i.invert=function(t,e){var i=s-e;return[Math.atan2(t,i)/r,s-O(r)*Math.sqrt(t*t+i*i)]},i)}function je(t,e){return[t,Math.log(Math.tan(Xs/4+e/2))]}function We(t){var e,i=be(t),n=i.scale,r=i.translate,s=i.clipExtent;return i.scale=function(){var t=n.apply(i,arguments);return t===i?e?i.clipExtent(null):i:t},i.translate=function(){var t=r.apply(i,arguments);return t===i?e?i.clipExtent(null):i:t},i.clipExtent=function(t){var a=s.apply(i,arguments);if(a===i){if(e=null==t){var o=Xs*n(),l=r();s([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else e&&(a=null);return a},i.clipExtent(null)}function Ye(t,e){var i=Math.cos(e)*Math.sin(t);return[Math.log((1+i)/(1-i))/2,Math.atan2(Math.tan(e),Math.cos(t))]}function $e(t){function e(e){function a(){h.push("M",s(t(c),o))}for(var l,h=[],c=[],u=-1,d=e.length,f=pt(i),p=pt(n);++u<d;)r.call(this,l=e[u],u)?c.push([+f.call(this,l,u),+p.call(this,l,u)]):c.length&&(a(),c=[]);return c.length&&a(),h.length?h.join(""):null}var i=Be,n=qe,r=qt,s=Ue,a=s.key,o=.7;return e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?s=t:(s=po.get(t)||Ue).key,e):a},e.tension=function(t){return arguments.length?(o=t,e):o},e}function Be(t){return t[0]}function qe(t){return t[1]}function Ue(t){return t.join("L")}function Ve(t){return Ue(t)+"Z"}function Xe(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);return i>1&&r.push("H",n[0]),r.join("")}function Ge(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("V",(n=t[e])[1],"H",n[0]);return r.join("")}function Ze(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("H",(n=t[e])[0],"V",n[1]);return r.join("")}function Qe(t,e){return t.length<4?Ue(t):t[1]+ti(t.slice(1,t.length-1),ei(t,e))}function Ke(t,e){return t.length<3?Ue(t):t[0]+ti((t.push(t[0]),t),ei([t[t.length-2]].concat(t,[t[1]]),e))}function Je(t,e){return t.length<3?Ue(t):t[0]+ti(t,ei(t,e));
}function ti(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ue(t);var i=t.length!=e.length,n="",r=t[0],s=t[1],a=e[0],o=a,l=1;if(i&&(n+="Q"+(s[0]-2*a[0]/3)+","+(s[1]-2*a[1]/3)+","+s[0]+","+s[1],r=t[1],l=2),e.length>1){o=e[1],s=t[l],l++,n+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1];for(var h=2;h<e.length;h++,l++)s=t[l],o=e[h],n+="S"+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1]}if(i){var c=t[l];n+="Q"+(s[0]+2*o[0]/3)+","+(s[1]+2*o[1]/3)+","+c[0]+","+c[1]}return n}function ei(t,e){for(var i,n=[],r=(1-e)/2,s=t[0],a=t[1],o=1,l=t.length;++o<l;)i=s,s=a,a=t[o],n.push([r*(a[0]-i[0]),r*(a[1]-i[1])]);return n}function ii(t){if(t.length<3)return Ue(t);var e=1,i=t.length,n=t[0],r=n[0],s=n[1],a=[r,r,r,(n=t[1])[0]],o=[s,s,s,n[1]],l=[r,",",s,"L",ai(vo,a),",",ai(vo,o)];for(t.push(t[i-1]);++e<=i;)n=t[e],a.shift(),a.push(n[0]),o.shift(),o.push(n[1]),oi(l,a,o);return t.pop(),l.push("L",n),l.join("")}function ni(t){if(t.length<4)return Ue(t);for(var e,i=[],n=-1,r=t.length,s=[0],a=[0];++n<3;)e=t[n],s.push(e[0]),a.push(e[1]);for(i.push(ai(vo,s)+","+ai(vo,a)),--n;++n<r;)e=t[n],s.shift(),s.push(e[0]),a.shift(),a.push(e[1]),oi(i,s,a);return i.join("")}function ri(t){for(var e,i,n=-1,r=t.length,s=r+4,a=[],o=[];++n<4;)i=t[n%r],a.push(i[0]),o.push(i[1]);for(e=[ai(vo,a),",",ai(vo,o)],--n;++n<s;)i=t[n%r],a.shift(),a.push(i[0]),o.shift(),o.push(i[1]),oi(e,a,o);return e.join("")}function si(t,e){var i=t.length-1;if(i)for(var n,r,s=t[0][0],a=t[0][1],o=t[i][0]-s,l=t[i][1]-a,h=-1;++h<=i;)n=t[h],r=h/i,n[0]=e*n[0]+(1-e)*(s+r*o),n[1]=e*n[1]+(1-e)*(a+r*l);return ii(t)}function ai(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function oi(t,e,i){t.push("C",ai(go,e),",",ai(go,i),",",ai(mo,e),",",ai(mo,i),",",ai(vo,e),",",ai(vo,i))}function li(t,e){return(e[1]-t[1])/(e[0]-t[0])}function hi(t){for(var e=0,i=t.length-1,n=[],r=t[0],s=t[1],a=n[0]=li(r,s);++e<i;)n[e]=(a+(a=li(r=s,s=t[e+1])))/2;return n[e]=a,n}function ci(t){for(var e,i,n,r,s=[],a=hi(t),o=-1,l=t.length-1;++o<l;)e=li(t[o],t[o+1]),Math.abs(e)<Qs?a[o]=a[o+1]=0:(i=a[o]/e,n=a[o+1]/e,r=i*i+n*n,r>9&&(r=3*e/Math.sqrt(r),a[o]=r*i,a[o+1]=r*n));for(o=-1;++o<=l;)r=(t[Math.min(l,o+1)][0]-t[Math.max(0,o-1)][0])/(6*(1+a[o]*a[o])),s.push([r||0,a[o]*r||0]);return s}function ui(t){return t.length<3?Ue(t):t[0]+ti(t,ci(t))}function di(t,e,i,n){var r,s,a,o,l,h,c;return r=n[t],s=r[0],a=r[1],r=n[e],o=r[0],l=r[1],r=n[i],h=r[0],c=r[1],(c-a)*(o-s)-(l-a)*(h-s)>0}function fi(t,e,i){return(i[0]-e[0])*(t[1]-e[1])<(i[1]-e[1])*(t[0]-e[0])}function pi(t,e,i,n){var r=t[0],s=i[0],a=e[0]-r,o=n[0]-s,l=t[1],h=i[1],c=e[1]-l,u=n[1]-h,d=(o*(l-h)-u*(r-s))/(u*a-o*c);return[r+d*a,l+d*c]}function gi(t){var e=t[0],i=t[t.length-1];return!(e[0]-i[0]||e[1]-i[1])}function mi(t,e){var i={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},n={list:[],leftEnd:null,rightEnd:null,init:function(){n.leftEnd=n.createHalfEdge(null,"l"),n.rightEnd=n.createHalfEdge(null,"l"),n.leftEnd.r=n.rightEnd,n.rightEnd.l=n.leftEnd,n.list.unshift(n.leftEnd,n.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=n.leftEnd;do e=e.r;while(e!=n.rightEnd&&r.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?i.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?i.bottomSite:t.edge.region[xo[t.side]]}},r={bisect:function(t,e){var i={region:{l:t,r:e},ep:{l:null,r:null}},n=e.x-t.x,r=e.y-t.y,s=n>0?n:-n,a=r>0?r:-r;return i.c=t.x*n+t.y*r+.5*(n*n+r*r),s>a?(i.a=1,i.b=r/n,i.c/=n):(i.b=1,i.a=n/r,i.c/=r),i},intersect:function(t,e){var i=t.edge,n=e.edge;if(!i||!n||i.region.r==n.region.r)return null;var r=i.a*n.b-i.b*n.a;if(Math.abs(r)<1e-10)return null;var s,a,o=(i.c*n.b-n.c*i.b)/r,l=(n.c*i.a-i.c*n.a)/r,h=i.region.r,c=n.region.r;h.y<c.y||h.y==c.y&&h.x<c.x?(s=t,a=i):(s=e,a=n);var u=o>=a.region.r.x;return u&&"l"===s.side||!u&&"r"===s.side?null:{x:o,y:l}},rightOf:function(t,e){var i=t.edge,n=i.region.r,r=e.x>n.x;if(r&&"l"===t.side)return 1;if(!r&&"r"===t.side)return 0;if(1===i.a){var s=e.y-n.y,a=e.x-n.x,o=0,l=0;if(!r&&i.b<0||r&&i.b>=0?l=o=s>=i.b*a:(l=e.x+e.y*i.b>i.c,i.b<0&&(l=!l),l||(o=1)),!o){var h=n.x-i.region.l.x;l=i.b*(a*a-s*s)<h*s*(1+2*a/h+i.b*i.b),i.b<0&&(l=!l)}}else{var c=i.c-i.a*e.x,u=e.y-c,d=e.x-n.x,f=c-n.y;l=u*u>d*d+f*f}return"l"===t.side?l:!l},endPoint:function(t,i,n){t.ep[i]=n,t.ep[xo[i]]&&e(t)},distance:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}},s={list:[],insert:function(t,e,i){t.vertex=e,t.ystar=e.y+i;for(var n=0,r=s.list,a=r.length;a>n;n++){var o=r[n];if(!(t.ystar>o.ystar||t.ystar==o.ystar&&e.x>o.vertex.x))break}r.splice(n,0,t)},del:function(t){for(var e=0,i=s.list,n=i.length;n>e&&i[e]!=t;++e);i.splice(e,1)},empty:function(){return 0===s.list.length},nextEvent:function(t){for(var e=0,i=s.list,n=i.length;n>e;++e)if(i[e]==t)return i[e+1];return null},min:function(){var t=s.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return s.list.shift()}};n.init(),i.bottomSite=i.list.shift();for(var a,o,l,h,c,u,d,f,p,g,m,v,y,x=i.list.shift();;)if(s.empty()||(a=s.min()),x&&(s.empty()||x.y<a.y||x.y==a.y&&x.x<a.x))o=n.leftBound(x),l=n.right(o),d=n.rightRegion(o),v=r.bisect(d,x),u=n.createHalfEdge(v,"l"),n.insert(o,u),g=r.intersect(o,u),g&&(s.del(o),s.insert(o,g,r.distance(g,x))),o=u,u=n.createHalfEdge(v,"r"),n.insert(o,u),g=r.intersect(u,l),g&&s.insert(u,g,r.distance(g,x)),x=i.list.shift();else{if(s.empty())break;o=s.extractMin(),h=n.left(o),l=n.right(o),c=n.right(l),d=n.leftRegion(o),f=n.rightRegion(l),m=o.vertex,r.endPoint(o.edge,o.side,m),r.endPoint(l.edge,l.side,m),n.del(o),s.del(l),n.del(l),y="l",d.y>f.y&&(p=d,d=f,f=p,y="r"),v=r.bisect(d,f),u=n.createHalfEdge(v,y),n.insert(h,u),r.endPoint(v,xo[y],m),g=r.intersect(h,u),g&&(s.del(h),s.insert(h,g,r.distance(g,d))),g=r.intersect(u,c),g&&s.insert(u,g,r.distance(g,d))}for(o=n.right(n.leftEnd);o!=n.rightEnd;o=n.right(o))e(o.edge)}function vi(t){return t.x}function yi(t){return t.y}function xi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function bi(t,e,i,n,r,s){if(!t(e,i,n,r,s)){var a=.5*(i+r),o=.5*(n+s),l=e.nodes;l[0]&&bi(t,l[0],i,n,a,o),l[1]&&bi(t,l[1],a,n,r,o),l[2]&&bi(t,l[2],i,o,a,s),l[3]&&bi(t,l[3],a,o,r,s)}}function wi(t,e){t=vs.rgb(t),e=vs.rgb(e);var i=t.r,n=t.g,r=t.b,s=e.r-i,a=e.g-n,o=e.b-r;return function(t){return"#"+lt(Math.round(i+s*t))+lt(Math.round(n+a*t))+lt(Math.round(r+o*t))}}function _i(t,e){var i,n={},r={};for(i in t)i in e?n[i]=Mi(t[i],e[i]):r[i]=t[i];for(i in e)i in t||(r[i]=e[i]);return function(t){for(i in n)r[i]=n[i](t);return r}}function ki(t,e){return e-=t=+t,function(i){return t+e*i}}function Ci(t,e){var i,n,r,s,a,o=0,l=0,h=[],c=[];for(t+="",e+="",bo.lastIndex=0,n=0;i=bo.exec(e);++n)i.index&&h.push(e.substring(o,l=i.index)),c.push({i:h.length,x:i[0]}),h.push(null),o=bo.lastIndex;for(o<e.length&&h.push(e.substring(o)),n=0,s=c.length;(i=bo.exec(t))&&s>n;++n)if(a=c[n],a.x==i[0]){if(a.i)if(null==h[a.i+1])for(h[a.i-1]+=a.x,h.splice(a.i,1),r=n+1;s>r;++r)c[r].i--;else for(h[a.i-1]+=a.x+h[a.i+1],h.splice(a.i,2),r=n+1;s>r;++r)c[r].i-=2;else if(null==h[a.i+1])h[a.i]=a.x;else for(h[a.i]=a.x+h[a.i+1],h.splice(a.i+1,1),r=n+1;s>r;++r)c[r].i--;c.splice(n,1),s--,n--}else a.x=ki(parseFloat(i[0]),parseFloat(a.x));for(;s>n;)a=c.pop(),null==h[a.i+1]?h[a.i]=a.x:(h[a.i]=a.x+h[a.i+1],h.splice(a.i+1,1)),s--;return 1===h.length?null==h[0]?(a=c[0].x,function(t){return a(t)+""}):function(){return e}:function(t){for(n=0;s>n;++n)h[(a=c[n]).i]=a.x(t);return h.join("")}}function Mi(t,e){for(var i,n=vs.interpolators.length;--n>=0&&!(i=vs.interpolators[n](t,e)););return i}function Si(t,e){var i,n=[],r=[],s=t.length,a=e.length,o=Math.min(t.length,e.length);for(i=0;o>i;++i)n.push(Mi(t[i],e[i]));for(;s>i;++i)r[i]=t[i];for(;a>i;++i)r[i]=e[i];return function(t){for(i=0;o>i;++i)r[i]=n[i](t);return r}}function Ti(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Di(t){return function(e){return 1-t(1-e)}}function Ai(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Ei(t){return t*t}function Pi(t){return t*t*t}function Li(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(.5>t?i:3*(t-e)+i-.75)}function Fi(t){return function(e){return Math.pow(e,t)}}function Ii(t){return 1-Math.cos(t*Zs)}function zi(t){return Math.pow(2,10*(t-1))}function Ri(t){return 1-Math.sqrt(1-t*t)}function Oi(t,e){var i;return arguments.length<2&&(e=.45),arguments.length?i=e/Gs*Math.asin(1/t):(t=1,i=e/4),function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-i)*Gs/e)}}function Ni(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Hi(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function ji(t,e){t=vs.hcl(t),e=vs.hcl(e);var i=t.h,n=t.c,r=t.l,s=e.h-i,a=e.c-n,o=e.l-r;return isNaN(a)&&(a=0,n=isNaN(n)?e.c:n),isNaN(s)?(s=0,i=isNaN(i)?e.h:i):s>180?s-=360:-180>s&&(s+=360),function(t){return Z(i+s*t,n+a*t,r+o*t)+""}}function Wi(t,e){t=vs.hsl(t),e=vs.hsl(e);var i=t.h,n=t.s,r=t.l,s=e.h-i,a=e.s-n,o=e.l-r;return isNaN(a)&&(a=0,n=isNaN(n)?e.s:n),isNaN(s)?(s=0,i=isNaN(i)?e.h:i):s>180?s-=360:-180>s&&(s+=360),function(t){return V(i+s*t,n+a*t,r+o*t)+""}}function Yi(t,e){t=vs.lab(t),e=vs.lab(e);var i=t.l,n=t.a,r=t.b,s=e.l-i,a=e.a-n,o=e.b-r;return function(t){return J(i+s*t,n+a*t,r+o*t)+""}}function $i(t,e){return e-=t,function(i){return Math.round(t+e*i)}}function Bi(t){var e=[t.a,t.b],i=[t.c,t.d],n=Ui(e),r=qi(e,i),s=Ui(Vi(i,e,-r))||0;e[0]*i[1]<i[0]*e[1]&&(e[0]*=-1,e[1]*=-1,n*=-1,r*=-1),this.rotate=(n?Math.atan2(e[1],e[0]):Math.atan2(-i[0],i[1]))*ta,this.translate=[t.e,t.f],this.scale=[n,s],this.skew=s?Math.atan2(r,s)*ta:0}function qi(t,e){return t[0]*e[0]+t[1]*e[1]}function Ui(t){var e=Math.sqrt(qi(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Vi(t,e,i){return t[0]+=i*e[0],t[1]+=i*e[1],t}function Xi(t,e){var i,n=[],r=[],s=vs.transform(t),a=vs.transform(e),o=s.translate,l=a.translate,h=s.rotate,c=a.rotate,u=s.skew,d=a.skew,f=s.scale,p=a.scale;return o[0]!=l[0]||o[1]!=l[1]?(n.push("translate(",null,",",null,")"),r.push({i:1,x:ki(o[0],l[0])},{i:3,x:ki(o[1],l[1])})):l[0]||l[1]?n.push("translate("+l+")"):n.push(""),h!=c?(h-c>180?c+=360:c-h>180&&(h+=360),r.push({i:n.push(n.pop()+"rotate(",null,")")-2,x:ki(h,c)})):c&&n.push(n.pop()+"rotate("+c+")"),u!=d?r.push({i:n.push(n.pop()+"skewX(",null,")")-2,x:ki(u,d)}):d&&n.push(n.pop()+"skewX("+d+")"),f[0]!=p[0]||f[1]!=p[1]?(i=n.push(n.pop()+"scale(",null,",",null,")"),r.push({i:i-4,x:ki(f[0],p[0])},{i:i-2,x:ki(f[1],p[1])})):(1!=p[0]||1!=p[1])&&n.push(n.pop()+"scale("+p+")"),i=r.length,function(t){for(var e,s=-1;++s<i;)n[(e=r[s]).i]=e.x(t);return n.join("")}}function Gi(t,e){return e=e-(t=+t)?1/(e-t):0,function(i){return(i-t)*e}}function Zi(t,e){return e=e-(t=+t)?1/(e-t):0,function(i){return Math.max(0,Math.min(1,(i-t)*e))}}function Qi(t){for(var e=t.source,i=t.target,n=Ji(e,i),r=[e];e!==n;)e=e.parent,r.push(e);for(var s=r.length;i!==n;)r.splice(s,0,i),i=i.parent;return r}function Ki(t){for(var e=[],i=t.parent;null!=i;)e.push(t),t=i,i=i.parent;return e.push(t),e}function Ji(t,e){if(t===e)return t;for(var i=Ki(t),n=Ki(e),r=i.pop(),s=n.pop(),a=null;r===s;)a=r,r=i.pop(),s=n.pop();return a}function tn(t){t.fixed|=2}function en(t){t.fixed&=-7}function nn(t){t.fixed|=4,t.px=t.x,t.py=t.y}function rn(t){t.fixed&=-5}function sn(t,e,i){var n=0,r=0;if(t.charge=0,!t.leaf)for(var s,a=t.nodes,o=a.length,l=-1;++l<o;)s=a[l],null!=s&&(sn(s,e,i),t.charge+=s.charge,n+=s.charge*s.cx,r+=s.charge*s.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var h=e*i[t.point.index];t.charge+=t.pointCharge=h,n+=h*t.point.x,r+=h*t.point.y}t.cx=n/t.charge,t.cy=r/t.charge}function an(t,e){return vs.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=cn,t}function on(t){return t.children}function ln(t){return t.value}function hn(t,e){return e.value-t.value}function cn(t){return vs.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function un(t){return t.x}function dn(t){return t.y}function fn(t,e,i){t.y0=e,t.y=i}function pn(t){return vs.range(t.length)}function gn(t){for(var e=-1,i=t[0].length,n=[];++e<i;)n[e]=0;return n}function mn(t){for(var e,i=1,n=0,r=t[0][1],s=t.length;s>i;++i)(e=t[i][1])>r&&(n=i,r=e);return n}function vn(t){return t.reduce(yn,0)}function yn(t,e){return t+e[1]}function xn(t,e){return bn(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function bn(t,e){for(var i=-1,n=+t[0],r=(t[1]-n)/e,s=[];++i<=e;)s[i]=r*i+n;return s}function wn(t){return[vs.min(t),vs.max(t)]}function _n(t,e){return t.parent==e.parent?1:2}function kn(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function Cn(t){var e,i=t.children;return i&&(e=i.length)?i[e-1]:t._tree.thread}function Mn(t,e){var i=t.children;if(i&&(r=i.length))for(var n,r,s=-1;++s<r;)e(n=Mn(i[s],e),t)>0&&(t=n);return t}function Sn(t,e){return t.x-e.x}function Tn(t,e){return e.x-t.x}function Dn(t,e){return t.depth-e.depth}function An(t,e){function i(t,n){var r=t.children;if(r&&(a=r.length))for(var s,a,o=null,l=-1;++l<a;)s=r[l],i(s,o),o=s;e(t,n)}i(t,null)}function En(t){for(var e,i=0,n=0,r=t.children,s=r.length;--s>=0;)e=r[s]._tree,e.prelim+=i,e.mod+=i,i+=e.shift+(n+=e.change)}function Pn(t,e,i){t=t._tree,e=e._tree;var n=i/(e.number-t.number);t.change+=n,e.change-=n,e.shift+=i,e.prelim+=i,e.mod+=i}function Ln(t,e,i){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:i}function Fn(t,e){return t.value-e.value}function In(t,e){var i=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=i,i._pack_prev=e}function zn(t,e){t._pack_next=e,e._pack_prev=t}function Rn(t,e){var i=e.x-t.x,n=e.y-t.y,r=t.r+e.r;return.999*r*r>i*i+n*n}function On(t){function e(t){c=Math.min(t.x-t.r,c),u=Math.max(t.x+t.r,u),d=Math.min(t.y-t.r,d),f=Math.max(t.y+t.r,f)}if((i=t.children)&&(h=i.length)){var i,n,r,s,a,o,l,h,c=1/0,u=-1/0,d=1/0,f=-1/0;if(i.forEach(Nn),n=i[0],n.x=-n.r,n.y=0,e(n),h>1&&(r=i[1],r.x=r.r,r.y=0,e(r),h>2))for(s=i[2],Wn(n,r,s),e(s),In(n,s),n._pack_prev=s,In(s,r),r=n._pack_next,a=3;h>a;a++){Wn(n,r,s=i[a]);var p=0,g=1,m=1;for(o=r._pack_next;o!==r;o=o._pack_next,g++)if(Rn(o,s)){p=1;break}if(1==p)for(l=n._pack_prev;l!==o._pack_prev&&!Rn(l,s);l=l._pack_prev,m++);p?(m>g||g==m&&r.r<n.r?zn(n,r=o):zn(n=l,r),a--):(In(n,s),r=s,e(s))}var v=(c+u)/2,y=(d+f)/2,x=0;for(a=0;h>a;a++)s=i[a],s.x-=v,s.y-=y,x=Math.max(x,s.r+Math.sqrt(s.x*s.x+s.y*s.y));t.r=x,i.forEach(Hn)}}function Nn(t){t._pack_next=t._pack_prev=t}function Hn(t){delete t._pack_next,delete t._pack_prev}function jn(t,e,i,n){var r=t.children;if(t.x=e+=n*t.x,t.y=i+=n*t.y,t.r*=n,r)for(var s=-1,a=r.length;++s<a;)jn(r[s],e,i,n)}function Wn(t,e,i){var n=t.r+i.r,r=e.x-t.x,s=e.y-t.y;if(n&&(r||s)){var a=e.r+i.r,o=r*r+s*s;a*=a,n*=n;var l=.5+(n-a)/(2*o),h=Math.sqrt(Math.max(0,2*a*(n+o)-(n-=o)*n-a*a))/(2*o);i.x=t.x+l*r+h*s,i.y=t.y+l*s-h*r}else i.x=t.x+n,i.y=t.y}function Yn(t){return 1+vs.max(t,function(t){return t.y})}function $n(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Bn(t){var e=t.children;return e&&e.length?Bn(e[0]):t}function qn(t){var e,i=t.children;return i&&(e=i.length)?qn(i[e-1]):t}function Un(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Vn(t,e){var i=t.x+e[3],n=t.y+e[0],r=t.dx-e[1]-e[3],s=t.dy-e[0]-e[2];return 0>r&&(i+=r/2,r=0),0>s&&(n+=s/2,s=0),{x:i,y:n,dx:r,dy:s}}function Xn(t){var e=t[0],i=t[t.length-1];return i>e?[e,i]:[i,e]}function Gn(t){return t.rangeExtent?t.rangeExtent():Xn(t.range())}function Zn(t,e,i,n){var r=i(t[0],t[1]),s=n(e[0],e[1]);return function(t){return s(r(t))}}function Qn(t,e){var i,n=0,r=t.length-1,s=t[n],a=t[r];return s>a&&(i=n,n=r,r=i,i=s,s=a,a=i),t[n]=e.floor(s),t[r]=e.ceil(a),t}function Kn(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Eo}function Jn(t,e,i,n){var r=[],s=[],a=0,o=Math.min(t.length,e.length)-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=o;)r.push(i(t[a-1],t[a])),s.push(n(e[a-1],e[a]));return function(e){var i=vs.bisect(t,e,1,o)-1;return s[i](r[i](e))}}function tr(t,e,i,n){function r(){var r=Math.min(t.length,e.length)>2?Jn:Zn,l=n?Zi:Gi;return a=r(t,e,l,i),o=r(e,t,l,Mi),s}function s(t){return a(t)}var a,o;return s.invert=function(t){return o(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},s.range=function(t){return arguments.length?(e=t,r()):e},s.rangeRound=function(t){return s.range(t).interpolate($i)},s.clamp=function(t){return arguments.length?(n=t,r()):n},s.interpolate=function(t){return arguments.length?(i=t,r()):i},s.ticks=function(e){return rr(t,e)},s.tickFormat=function(e,i){return sr(t,e,i)},s.nice=function(e){return ir(t,e),r()},s.copy=function(){return tr(t,e,i,n)},r()}function er(t,e){return vs.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ir(t,e){return Qn(t,Kn(nr(t,e)[2]))}function nr(t,e){null==e&&(e=10);var i=Xn(t),n=i[1]-i[0],r=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),s=e/n*r;return.15>=s?r*=10:.35>=s?r*=5:.75>=s&&(r*=2),i[0]=Math.ceil(i[0]/r)*r,i[1]=Math.floor(i[1]/r)*r+.5*r,i[2]=r,i}function rr(t,e){return vs.range.apply(vs,nr(t,e))}function sr(t,e,i){var n=-Math.floor(Math.log(nr(t,e)[2])/Math.LN10+.01);return vs.format(i?i.replace(Ta,function(t,e,i,r,s,a,o,l,h,c){return[e,i,r,s,a,o,l,h||"."+(n-2*("%"===c)),c].join("")}):",."+n+"f")}function ar(t,e,i,n){function r(t){return(i?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function s(t){return i?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(r(e))}return a.invert=function(e){return s(t.invert(e))},a.domain=function(e){return arguments.length?(i=e[0]>=0,t.domain((n=e.map(Number)).map(r)),a):n},a.base=function(i){return arguments.length?(e=+i,t.domain(n.map(r)),a):e},a.nice=function(){var e=Qn(n.map(r),i?Math:Lo);return t.domain(e),n=e.map(s),a},a.ticks=function(){var t=Xn(n),a=[],o=t[0],l=t[1],h=Math.floor(r(o)),c=Math.ceil(r(l)),u=e%1?2:e;if(isFinite(c-h)){if(i){for(;c>h;h++)for(var d=1;u>d;d++)a.push(s(h)*d);a.push(s(h))}else for(a.push(s(h));h++<c;)for(var d=u-1;d>0;d--)a.push(s(h)*d);for(h=0;a[h]<o;h++);for(c=a.length;a[c-1]>l;c--);a=a.slice(h,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return Po;arguments.length<2?e=Po:"function"!=typeof e&&(e=vs.format(e));var n,o=Math.max(.1,t/a.ticks().length),l=i?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/s(l(r(t)+n))<=o?e(t):""}},a.copy=function(){return ar(t.copy(),e,i,n)},er(a,t)}function or(t,e,i){function n(e){return t(r(e))}var r=lr(e),s=lr(1/e);return n.invert=function(e){return s(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain((i=e.map(Number)).map(r)),n):i},n.ticks=function(t){return rr(i,t)},n.tickFormat=function(t,e){return sr(i,t,e)},n.nice=function(t){return n.domain(ir(i,t))},n.exponent=function(a){return arguments.length?(r=lr(e=a),s=lr(1/e),t.domain(i.map(r)),n):e},n.copy=function(){return or(t.copy(),e,i)},er(n,t)}function lr(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function hr(t,e){function i(i){return a[((s.get(i)||"range"===e.t&&s.set(i,t.push(i)))-1)%a.length]}function n(e,i){return vs.range(t.length).map(function(t){return e+i*t})}var s,a,o;return i.domain=function(n){if(!arguments.length)return t;t=[],s=new r;for(var a,o=-1,l=n.length;++o<l;)s.has(a=n[o])||s.set(a,t.push(a));return i[e.t].apply(i,e.a)},i.range=function(t){return arguments.length?(a=t,o=0,e={t:"range",a:arguments},i):a},i.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],h=r[1],c=(h-l)/(Math.max(1,t.length-1)+s);return a=n(t.length<2?(l+h)/2:l+c*s/2,c),o=0,e={t:"rangePoints",a:arguments},i},i.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var h=r[1]<r[0],c=r[h-0],u=r[1-h],d=(u-c)/(t.length-s+2*l);return a=n(c+d*l,d),h&&a.reverse(),o=d*(1-s),e={t:"rangeBands",a:arguments},i},i.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var h=r[1]<r[0],c=r[h-0],u=r[1-h],d=Math.floor((u-c)/(t.length-s+2*l)),f=u-c-(t.length-s)*d;return a=n(c+Math.round(f/2),d),h&&a.reverse(),o=Math.round(d*(1-s)),e={t:"rangeRoundBands",a:arguments},i},i.rangeBand=function(){return o},i.rangeExtent=function(){return Xn(e.a[0])},i.copy=function(){return hr(t,e)},i.domain(t)}function cr(t,e){function i(){var i=0,s=e.length;for(r=[];++i<s;)r[i-1]=vs.quantile(t,i/s);return n}function n(t){return isNaN(t=+t)?void 0:e[vs.bisect(r,t)]}var r;return n.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(vs.ascending),i()):t},n.range=function(t){return arguments.length?(e=t,i()):e},n.quantiles=function(){return r},n.invertExtent=function(i){return i=e.indexOf(i),0>i?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},n.copy=function(){return cr(t,e)},i()}function ur(t,e,i){function n(e){return i[Math.max(0,Math.min(a,Math.floor(s*(e-t))))]}function r(){return s=i.length/(e-t),a=i.length-1,n}var s,a;return n.domain=function(i){return arguments.length?(t=+i[0],e=+i[i.length-1],r()):[t,e]},n.range=function(t){return arguments.length?(i=t,r()):i},n.invertExtent=function(e){return e=i.indexOf(e),e=0>e?NaN:e/s+t,[e,e+1/s]},n.copy=function(){return ur(t,e,i)},r()}function dr(t,e){function i(i){return i>=i?e[vs.bisect(t,i)]:void 0}return i.domain=function(e){return arguments.length?(t=e,i):t},i.range=function(t){return arguments.length?(e=t,i):e},i.invertExtent=function(i){return i=e.indexOf(i),[t[i-1],t[i]]},i.copy=function(){return dr(t,e)},i}function fr(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(i){return arguments.length?(t=i.map(e),e):t},e.ticks=function(e){return rr(t,e)},e.tickFormat=function(e,i){return sr(t,e,i)},e.copy=function(){return fr(t)},e}function pr(t){return t.innerRadius}function gr(t){return t.outerRadius}function mr(t){return t.startAngle}function vr(t){return t.endAngle}function yr(t){for(var e,i,n,r=-1,s=t.length;++r<s;)e=t[r],i=e[0],n=e[1]+Oo,e[0]=i*Math.cos(n),e[1]=i*Math.sin(n);return t}function xr(t){function e(e){function l(){g.push("M",o(t(v),u),c,h(t(m.reverse()),u),"Z")}for(var d,f,p,g=[],m=[],v=[],y=-1,x=e.length,b=pt(i),w=pt(r),_=i===n?function(){return f}:pt(n),k=r===s?function(){return p}:pt(s);++y<x;)a.call(this,d=e[y],y)?(m.push([f=+b.call(this,d,y),p=+w.call(this,d,y)]),v.push([+_.call(this,d,y),+k.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var i=Be,n=Be,r=0,s=qe,a=qt,o=Ue,l=o.key,h=o,c="L",u=.7;return e.x=function(t){return arguments.length?(i=n=t,e):n},e.x0=function(t){return arguments.length?(i=t,e):i},e.x1=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=s=t,e):s},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(s=t,e):s},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?o=t:(o=po.get(t)||Ue).key,h=o.reverse||o,c=o.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(u=t,e):u},e}function br(t){return t.radius}function wr(t){return[t.x,t.y]}function _r(t){return function(){var e=t.apply(this,arguments),i=e[0],n=e[1]+Oo;return[i*Math.cos(n),i*Math.sin(n)]}}function kr(){return 64}function Cr(){return"circle"}function Mr(t){var e=Math.sqrt(t/Xs);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Sr(t,e){return zs(t,Bo),t.id=e,t}function Tr(t,e,i,n){var r=t.id;return D(t,"function"==typeof i?function(t,s,a){t.__transition__[r].tween.set(e,n(i.call(t,t.__data__,s,a)))}:(i=n(i),function(t){t.__transition__[r].tween.set(e,i)}))}function Dr(t){return null==t&&(t=""),function(){this.textContent=t}}function Ar(t,e,i,n){var s=t.__transition__||(t.__transition__={active:0,count:0}),a=s[i];if(!a){var o=n.time;a=s[i]={tween:new r,time:o,ease:n.ease,delay:n.delay,duration:n.duration},++s.count,vs.timer(function(n){function r(n){return s.active>i?h():(s.active=i,a.event&&a.event.start.call(t,c,e),a.tween.forEach(function(i,n){(n=n.call(t,c,e))&&p.push(n)}),l(n||1)?1:void bt(l,d,o))}function l(n){if(s.active!==i)return h();for(var r=n/f,o=u(r),l=p.length;l>0;)p[--l].call(t,o);return r>=1?(a.event&&a.event.end.call(t,c,e),h()):void 0}function h(){return--s.count?delete s[i]:delete t.__transition__,1}var c=t.__data__,u=a.ease,d=a.delay,f=a.duration,p=[];return n>=d?r(n-d):void bt(r,d,o)},0,o)}}function Er(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Pr(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Lr(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Fr(t,e,i){function n(e){var i=t(e),n=s(i,1);return n-e>e-i?i:n}function r(i){return e(i=t(new Qo(i-1)),1),i}function s(t,i){return e(t=new Qo(+t),i),t}function a(t,n,s){var a=r(t),o=[];if(s>1)for(;n>a;)i(a)%s||o.push(new Date(+a)),e(a,1);else for(;n>a;)o.push(new Date(+a)),e(a,1);return o}function o(t,e,i){try{Qo=Lr;var n=new Lr;return n._=t,a(n,e,i)}finally{Qo=Date}}t.floor=t,t.round=n,t.ceil=r,t.offset=s,t.range=a;var l=t.utc=Ir(t);return l.floor=l,l.round=Ir(n),l.ceil=Ir(r),l.offset=Ir(s),l.range=o,t}function Ir(t){return function(e,i){try{Qo=Lr;var n=new Lr;return n._=e,t(n,i)._}finally{Qo=Date}}}function zr(t){function e(e){for(var n,r,s,a=[],o=-1,l=0;++o<i;)37===t.charCodeAt(o)&&(a.push(t.substring(l,o)),null!=(r=ml[n=t.charAt(++o)])&&(n=t.charAt(++o)),(s=vl[n])&&(n=s(e,null==r?"e"===n?" ":"0":r)),a.push(n),l=o+1);return a.push(t.substring(l,o)),a.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},n=Rr(i,t,e,0);if(n!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var r=null!=i.Z&&Qo!==Lr,s=new(r?Lr:Qo);return"j"in i?s.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(s.setFullYear(i.y,0,1),s.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(s.getDay()+5)%7:i.w+7*i.U-(s.getDay()+6)%7)):s.setFullYear(i.y,i.m,i.d),s.setHours(i.H+Math.floor(i.Z/100),i.M+i.Z%100,i.S,i.L),r?s._:s},e.toString=function(){return t},e}function Rr(t,e,i,n){for(var r,s,a,o=0,l=e.length,h=i.length;l>o;){if(n>=h)return-1;if(r=e.charCodeAt(o++),37===r){if(a=e.charAt(o++),s=yl[a in ml?e.charAt(o++):a],!s||(n=s(t,i,n))<0)return-1}else if(r!=i.charCodeAt(n++))return-1}return n}function Or(t){return new RegExp("^(?:"+t.map(vs.requote).join("|")+")","i")}function Nr(t){for(var e=new r,i=-1,n=t.length;++i<n;)e.set(t[i].toLowerCase(),i);return e}function Hr(t,e,i){var n=0>t?"-":"",r=(n?-t:t)+"",s=r.length;return n+(i>s?new Array(i-s+1).join(e)+r:r)}function jr(t,e,i){hl.lastIndex=0;var n=hl.exec(e.substring(i));return n?(t.w=cl.get(n[0].toLowerCase()),i+n[0].length):-1}function Wr(t,e,i){ol.lastIndex=0;var n=ol.exec(e.substring(i));return n?(t.w=ll.get(n[0].toLowerCase()),i+n[0].length):-1}function Yr(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function $r(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i));return n?(t.U=+n[0],i+n[0].length):-1}function Br(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i));return n?(t.W=+n[0],i+n[0].length):-1}function qr(t,e,i){fl.lastIndex=0;var n=fl.exec(e.substring(i));return n?(t.m=pl.get(n[0].toLowerCase()),i+n[0].length):-1}function Ur(t,e,i){ul.lastIndex=0;var n=ul.exec(e.substring(i));return n?(t.m=dl.get(n[0].toLowerCase()),i+n[0].length):-1}function Vr(t,e,i){return Rr(t,vl.c.toString(),e,i)}function Xr(t,e,i){return Rr(t,vl.x.toString(),e,i)}function Gr(t,e,i){return Rr(t,vl.X.toString(),e,i)}function Zr(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function Qr(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+2));return n?(t.y=Jr(+n[0]),i+n[0].length):-1}function Kr(t,e,i){return/^[+-]\d{4}$/.test(e=e.substring(i,i+5))?(t.Z=+e,i+5):-1}function Jr(t){return t+(t>68?1900:2e3)}function ts(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function es(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function is(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+3));return n?(t.j=+n[0],i+n[0].length):-1}function ns(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function rs(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function ss(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function as(t,e,i){xl.lastIndex=0;var n=xl.exec(e.substring(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function os(t,e,i){var n=bl.get(e.substring(i,i+=2).toLowerCase());return null==n?-1:(t.p=n,i)}function ls(t){var e=t.getTimezoneOffset(),i=e>0?"-":"+",n=~~(Math.abs(e)/60),r=Math.abs(e)%60;return i+Hr(n,"0",2)+Hr(r,"0",2)}function hs(t,e,i){gl.lastIndex=0;var n=gl.exec(e.substring(i,i+1));return n?i+n[0].length:-1}function cs(t){function e(t){try{Qo=Lr;var e=new Qo;return e._=t,i(e)}finally{Qo=Date}}var i=zr(t);return e.parse=function(t){try{Qo=Lr;var e=i.parse(t);return e&&e._}finally{Qo=Date}},e.toString=i.toString,e}function us(t){return t.toISOString()}function ds(t,e,i){function n(e){return t(e)}function r(t,i){var n=t[1]-t[0],r=n/i,s=vs.bisect(_l,r);return s==_l.length?[e.year,nr(t.map(function(t){return t/31536e6}),i)[2]]:s?e[r/_l[s-1]<_l[s]/r?s-1:s]:[Sl,nr(t,i)[2]]}return n.invert=function(e){return fs(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e),n):t.domain().map(fs)},n.nice=function(t,e){function i(i){return!isNaN(i)&&!t.range(i,fs(+i+1),e).length}var s=n.domain(),a=Xn(s),o=null==t?r(a,10):"number"==typeof t&&r(a,t);return o&&(t=o[0],e=o[1]),n.domain(Qn(s,e>1?{floor:function(e){for(;i(e=t.floor(e));)e=fs(e-1);return e},ceil:function(e){for(;i(e=t.ceil(e));)e=fs(+e+1);return e}}:t))},n.ticks=function(t,e){var i=Xn(n.domain()),s=null==t?r(i,10):"number"==typeof t?r(i,t):!t.range&&[{range:t},e];return s&&(t=s[0],e=s[1]),t.range(i[0],fs(+i[1]+1),1>e?1:e)},n.tickFormat=function(){return i},n.copy=function(){return ds(t.copy(),e,i)},er(n,t)}function fs(t){return new Date(t)}function ps(t){return function(e){for(var i=t.length-1,n=t[i];!n[1](e);)n=t[--i];return n[0](e)}}function gs(t){return JSON.parse(t.responseText)}function ms(t){var e=bs.createRange();return e.selectNode(bs.body),e.createContextualFragment(t.responseText)}var vs={version:"3.3.6"};Date.now||(Date.now=function(){return+new Date});var ys=[].slice,xs=function(t){return ys.call(t)},bs=document,ws=bs.documentElement,_s=window;try{xs(ws.childNodes)[0].nodeType}catch(ks){xs=function(t){for(var e=t.length,i=new Array(e);e--;)i[e]=t[e];return i}}try{bs.createElement("div").style.setProperty("opacity",0,"")}catch(Cs){var Ms=_s.Element.prototype,Ss=Ms.setAttribute,Ts=Ms.setAttributeNS,Ds=_s.CSSStyleDeclaration.prototype,As=Ds.setProperty;Ms.setAttribute=function(t,e){Ss.call(this,t,e+"")},Ms.setAttributeNS=function(t,e,i){Ts.call(this,t,e,i+"")},Ds.setProperty=function(t,e,i){As.call(this,t,e+"",i)}}vs.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:NaN},vs.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},vs.min=function(t,e){var i,n,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&!(null!=(i=t[r])&&i>=i);)i=void 0;for(;++r<s;)null!=(n=t[r])&&i>n&&(i=n)}else{for(;++r<s&&!(null!=(i=e.call(t,t[r],r))&&i>=i);)i=void 0;for(;++r<s;)null!=(n=e.call(t,t[r],r))&&i>n&&(i=n)}return i},vs.max=function(t,e){var i,n,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&!(null!=(i=t[r])&&i>=i);)i=void 0;for(;++r<s;)null!=(n=t[r])&&n>i&&(i=n)}else{for(;++r<s&&!(null!=(i=e.call(t,t[r],r))&&i>=i);)i=void 0;for(;++r<s;)null!=(n=e.call(t,t[r],r))&&n>i&&(i=n)}return i},vs.extent=function(t,e){var i,n,r,s=-1,a=t.length;if(1===arguments.length){for(;++s<a&&!(null!=(i=r=t[s])&&i>=i);)i=r=void 0;for(;++s<a;)null!=(n=t[s])&&(i>n&&(i=n),n>r&&(r=n))}else{for(;++s<a&&!(null!=(i=r=e.call(t,t[s],s))&&i>=i);)i=void 0;for(;++s<a;)null!=(n=e.call(t,t[s],s))&&(i>n&&(i=n),n>r&&(r=n))}return[i,r]},vs.sum=function(t,e){var i,n=0,r=t.length,s=-1;if(1===arguments.length)for(;++s<r;)isNaN(i=+t[s])||(n+=i);else for(;++s<r;)isNaN(i=+e.call(t,t[s],s))||(n+=i);return n},vs.mean=function(e,i){var n,r=e.length,s=0,a=-1,o=0;if(1===arguments.length)for(;++a<r;)t(n=e[a])&&(s+=(n-s)/++o);else for(;++a<r;)t(n=i.call(e,e[a],a))&&(s+=(n-s)/++o);return o?s:void 0},vs.quantile=function(t,e){var i=(t.length-1)*e+1,n=Math.floor(i),r=+t[n-1],s=i-n;return s?r+s*(t[n]-r):r},vs.median=function(e,i){return arguments.length>1&&(e=e.map(i)),e=e.filter(t),
e.length?vs.quantile(e.sort(vs.ascending),.5):void 0},vs.bisector=function(t){return{left:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);r>n;){var s=n+r>>>1;t.call(e,e[s],s)<i?n=s+1:r=s}return n},right:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);r>n;){var s=n+r>>>1;i<t.call(e,e[s],s)?r=s:n=s+1}return n}}};var Es=vs.bisector(function(t){return t});vs.bisectLeft=Es.left,vs.bisect=vs.bisectRight=Es.right,vs.shuffle=function(t){for(var e,i,n=t.length;n;)i=0|Math.random()*n--,e=t[n],t[n]=t[i],t[i]=e;return t},vs.permute=function(t,e){for(var i=e.length,n=new Array(i);i--;)n[i]=t[e[i]];return n},vs.pairs=function(t){for(var e,i=0,n=t.length-1,r=t[0],s=new Array(0>n?0:n);n>i;)s[i]=[e=r,r=t[++i]];return s},vs.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,i=vs.min(arguments,e),n=new Array(i);++t<i;)for(var r,s=-1,a=n[t]=new Array(r);++s<r;)a[s]=arguments[s][t];return n},vs.transpose=function(t){return vs.zip.apply(vs,t)},vs.keys=function(t){var e=[];for(var i in t)e.push(i);return e},vs.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},vs.entries=function(t){var e=[];for(var i in t)e.push({key:i,value:t[i]});return e},vs.merge=function(t){return Array.prototype.concat.apply([],t)},vs.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),1/0===(e-t)/n)throw new Error("infinite range");var r,s=[],a=i(Math.abs(n)),o=-1;if(t*=a,e*=a,n*=a,0>n)for(;(r=t+n*++o)>e;)s.push(r/a);else for(;(r=t+n*++o)<e;)s.push(r/a);return s},vs.map=function(t){var e=new r;if(t instanceof r)t.forEach(function(t,i){e.set(t,i)});else for(var i in t)e.set(i,t[i]);return e},n(r,{has:function(t){return Ps+t in this},get:function(t){return this[Ps+t]},set:function(t,e){return this[Ps+t]=e},remove:function(t){return t=Ps+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,i){t.push(i)}),t},entries:function(){var t=[];return this.forEach(function(e,i){t.push({key:e,value:i})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Ls&&t.call(this,e.substring(1),this[e])}});var Ps="\x00",Ls=Ps.charCodeAt(0);vs.nest=function(){function t(e,o,l){if(l>=a.length)return n?n.call(s,o):i?o.sort(i):o;for(var h,c,u,d,f=-1,p=o.length,g=a[l++],m=new r;++f<p;)(d=m.get(h=g(c=o[f])))?d.push(c):m.set(h,[c]);return e?(c=e(),u=function(i,n){c.set(i,t(e,n,l))}):(c={},u=function(i,n){c[i]=t(e,n,l)}),m.forEach(u),c}function e(t,i){if(i>=a.length)return t;var n=[],r=o[i++];return t.forEach(function(t,r){n.push({key:t,values:e(r,i)})}),r?n.sort(function(t,e){return r(t.key,e.key)}):n}var i,n,s={},a=[],o=[];return s.map=function(e,i){return t(i,e,0)},s.entries=function(i){return e(t(vs.map,i,0),0)},s.key=function(t){return a.push(t),s},s.sortKeys=function(t){return o[a.length-1]=t,s},s.sortValues=function(t){return i=t,s},s.rollup=function(t){return n=t,s},s},vs.set=function(t){var e=new s;if(t)for(var i=0,n=t.length;n>i;++i)e.add(t[i]);return e},n(s,{has:function(t){return Ps+t in this},add:function(t){return this[Ps+t]=!0,t},remove:function(t){return t=Ps+t,t in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Ls&&t.call(this,e.substring(1))}}),vs.behavior={},vs.rebind=function(t,e){for(var i,n=1,r=arguments.length;++n<r;)t[i=arguments[n]]=a(t,e,e[i]);return t};var Fs=["webkit","ms","moz","Moz","o","O"];vs.dispatch=function(){for(var t=new h,e=-1,i=arguments.length;++e<i;)t[arguments[e]]=c(t);return t},h.prototype.on=function(t,e){var i=t.indexOf("."),n="";if(i>=0&&(n=t.substring(i+1),t=t.substring(0,i)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},vs.event=null,vs.requote=function(t){return t.replace(Is,"\\$&")};var Is=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,zs={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)t[i]=e[i]},Rs=function(t,e){return e.querySelector(t)},Os=function(t,e){return e.querySelectorAll(t)},Ns=ws[o(ws,"matchesSelector")],Hs=function(t,e){return Ns.call(t,e)};"function"==typeof Sizzle&&(Rs=function(t,e){return Sizzle(t,e)[0]||null},Os=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},Hs=Sizzle.matchesSelector),vs.selection=function(){return $s};var js=vs.selection.prototype=[];js.select=function(t){var e,i,n,r,s=[];t=g(t);for(var a=-1,o=this.length;++a<o;){s.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var l=-1,h=n.length;++l<h;)(r=n[l])?(e.push(i=t.call(r,r.__data__,l,a)),i&&"__data__"in r&&(i.__data__=r.__data__)):e.push(null)}return p(s)},js.selectAll=function(t){var e,i,n=[];t=m(t);for(var r=-1,s=this.length;++r<s;)for(var a=this[r],o=-1,l=a.length;++o<l;)(i=a[o])&&(n.push(e=xs(t.call(i,i.__data__,o,r))),e.parentNode=i);return p(n)};var Ws={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};vs.ns={prefix:Ws,qualify:function(t){var e=t.indexOf(":"),i=t;return e>=0&&(i=t.substring(0,e),t=t.substring(e+1)),Ws.hasOwnProperty(i)?{space:Ws[i],local:t}:t}},js.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var i=this.node();return t=vs.ns.qualify(t),t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}for(e in t)this.each(v(e,t[e]));return this}return this.each(v(t,e))},js.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var i=this.node(),n=(t=t.trim().split(/^|\s+/g)).length,r=-1;if(e=i.classList){for(;++r<n;)if(!e.contains(t[r]))return!1}else for(e=i.getAttribute("class");++r<n;)if(!x(t[r]).test(e))return!1;return!0}for(e in t)this.each(b(e,t[e]));return this}return this.each(b(t,e))},js.style=function(t,e,i){var n=arguments.length;if(3>n){if("string"!=typeof t){2>n&&(e="");for(i in t)this.each(_(i,t[i],e));return this}if(2>n)return _s.getComputedStyle(this.node(),null).getPropertyValue(t);i=""}return this.each(_(t,e,i))},js.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(k(e,t[e]));return this}return this.each(k(t,e))},js.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},js.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},js.append=function(t){return t=C(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},js.insert=function(t,e){return t=C(t),e=g(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments))})},js.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},js.data=function(t,e){function i(t,i){var n,s,a,o=t.length,u=i.length,d=Math.min(o,u),f=new Array(u),p=new Array(u),g=new Array(o);if(e){var m,v=new r,y=new r,x=[];for(n=-1;++n<o;)m=e.call(s=t[n],s.__data__,n),v.has(m)?g[n]=s:v.set(m,s),x.push(m);for(n=-1;++n<u;)m=e.call(i,a=i[n],n),(s=v.get(m))?(f[n]=s,s.__data__=a):y.has(m)||(p[n]=M(a)),y.set(m,a),v.remove(m);for(n=-1;++n<o;)v.has(x[n])&&(g[n]=t[n])}else{for(n=-1;++n<d;)s=t[n],a=i[n],s?(s.__data__=a,f[n]=s):p[n]=M(a);for(;u>n;++n)p[n]=M(i[n]);for(;o>n;++n)g[n]=t[n]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,l.push(p),h.push(f),c.push(g)}var n,s,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++a<o;)(s=n[a])&&(t[a]=s.__data__);return t}var l=A([]),h=p([]),c=p([]);if("function"==typeof t)for(;++a<o;)i(n=this[a],t.call(n,n.parentNode.__data__,a));else for(;++a<o;)i(n=this[a],t);return h.enter=function(){return l},h.exit=function(){return c},h},js.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},js.filter=function(t){var e,i,n,r=[];"function"!=typeof t&&(t=S(t));for(var s=0,a=this.length;a>s;s++){r.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var o=0,l=i.length;l>o;o++)(n=i[o])&&t.call(n,n.__data__,o)&&e.push(n)}return p(r)},js.order=function(){for(var t=-1,e=this.length;++t<e;)for(var i,n=this[t],r=n.length-1,s=n[r];--r>=0;)(i=n[r])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},js.sort=function(t){t=T.apply(this,arguments);for(var e=-1,i=this.length;++e<i;)this[e].sort(t);return this.order()},js.each=function(t){return D(this,function(e,i,n){t.call(e,e.__data__,i,n)})},js.call=function(t){var e=xs(arguments);return t.apply(e[0]=this,e),this},js.empty=function(){return!this.node()},js.node=function(){for(var t=0,e=this.length;e>t;t++)for(var i=this[t],n=0,r=i.length;r>n;n++){var s=i[n];if(s)return s}return null},js.size=function(){var t=0;return this.each(function(){++t}),t};var Ys=[];vs.selection.enter=A,vs.selection.enter.prototype=Ys,Ys.append=js.append,Ys.empty=js.empty,Ys.node=js.node,Ys.call=js.call,Ys.size=js.size,Ys.select=function(t){for(var e,i,n,r,s,a=[],o=-1,l=this.length;++o<l;){n=(r=this[o]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var h=-1,c=r.length;++h<c;)(s=r[h])?(e.push(n[h]=i=t.call(r.parentNode,s.__data__,h,o)),i.__data__=s.__data__):e.push(null)}return p(a)},Ys.insert=function(t,e){return arguments.length<2&&(e=E(this)),js.insert.call(this,t,e)},js.transition=function(){for(var t,e,i=jo||++qo,n=[],r=Wo||{time:Date.now(),ease:Li,delay:0,duration:250},s=-1,a=this.length;++s<a;){n.push(t=[]);for(var o=this[s],l=-1,h=o.length;++l<h;)(e=o[l])&&Ar(e,l,i,r),t.push(e)}return Sr(n,i)},js.interrupt=function(){return this.each(P)},vs.select=function(t){var e=["string"==typeof t?Rs(t,bs):t];return e.parentNode=ws,p([e])},vs.selectAll=function(t){var e=xs("string"==typeof t?Os(t,bs):t);return e.parentNode=ws,p([e])};var $s=vs.select(ws);js.on=function(t,e,i){var n=arguments.length;if(3>n){if("string"!=typeof t){2>n&&(e=!1);for(i in t)this.each(L(i,t[i],e));return this}if(2>n)return(n=this.node()["__on"+t])&&n._;i=!1}return this.each(L(t,e,i))};var Bs=vs.map({mouseenter:"mouseover",mouseleave:"mouseout"});Bs.forEach(function(t){"on"+t in bs&&Bs.remove(t)});var qs=o(ws.style,"userSelect"),Us=0;vs.mouse=function(t){return R(t,d())};var Vs=/WebKit/.test(_s.navigator.userAgent)?-1:0;vs.touches=function(t,e){return arguments.length<2&&(e=d().touches),e?xs(e).map(function(e){var i=R(t,e);return i.identifier=e.identifier,i}):[]},vs.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function e(){return vs.event.changedTouches[0].identifier}function i(t,e){return vs.touches(t).filter(function(t){return t.identifier===e})[0]}function n(t,e,i,n){return function(){function a(){var t=e(c,f),i=t[0]-g[0],n=t[1]-g[1];m|=i|n,g=t,u({type:"drag",x:t[0]+l[0],y:t[1]+l[1],dx:i,dy:n})}function o(){v.on(i+"."+p,null).on(n+"."+p,null),y(m&&vs.event.target===d),u({type:"dragend"})}var l,h=this,c=h.parentNode,u=r.of(h,arguments),d=vs.event.target,f=t(),p=null==f?"drag":"drag-"+f,g=e(c,f),m=0,v=vs.select(_s).on(i+"."+p,a).on(n+"."+p,o),y=z();s?(l=s.apply(h,arguments),l=[l.x-g[0],l.y-g[1]]):l=[0,0],u({type:"dragstart"})}}var r=f(t,"drag","dragstart","dragend"),s=null,a=n(l,vs.mouse,"mousemove","mouseup"),o=n(e,i,"touchmove","touchend");return t.origin=function(e){return arguments.length?(s=e,t):s},vs.rebind(t,r,"on")};var Xs=Math.PI,Gs=2*Xs,Zs=Xs/2,Qs=1e-6,Ks=Qs*Qs,Js=Xs/180,ta=180/Xs,ea=Math.SQRT2,ia=2,na=4;vs.interpolateZoom=function(t,e){function i(t){var e=t*y;if(v){var i=W(g),a=s/(ia*d)*(i*Y(ea*e+g)-j(g));return[n+a*h,r+a*c,s*i/W(ea*e+g)]}return[n+t*h,r+t*c,s*Math.exp(ea*e)]}var n=t[0],r=t[1],s=t[2],a=e[0],o=e[1],l=e[2],h=a-n,c=o-r,u=h*h+c*c,d=Math.sqrt(u),f=(l*l-s*s+na*u)/(2*s*ia*d),p=(l*l-s*s-na*u)/(2*l*ia*d),g=Math.log(Math.sqrt(f*f+1)-f),m=Math.log(Math.sqrt(p*p+1)-p),v=m-g,y=(v||Math.log(l/s))/ea;return i.duration=1e3*y,i},vs.behavior.zoom=function(){function t(t){t.on(T,h).on(aa+".zoom",d).on(D,p).on("dblclick.zoom",g).on(E,c)}function e(t){return[(t[0]-C.x)/C.k,(t[1]-C.y)/C.k]}function i(t){return[t[0]*C.k+C.x,t[1]*C.k+C.y]}function n(t){C.k=Math.max(S[0],Math.min(S[1],t))}function r(t,e){e=i(e),C.x+=t[0]-e[0],C.y+=t[1]-e[1]}function s(){w&&w.domain(b.range().map(function(t){return(t-C.x)/C.k}).map(b.invert)),k&&k.domain(_.range().map(function(t){return(t-C.y)/C.k}).map(_.invert))}function a(t){t({type:"zoomstart"})}function o(t){s(),t({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function l(t){t({type:"zoomend"})}function h(){function t(){c=1,r(vs.mouse(n),d),o(s)}function i(){u.on(D,_s===n?p:null).on(A,null),f(c&&vs.event.target===h),l(s)}var n=this,s=L.of(n,arguments),h=vs.event.target,c=0,u=vs.select(_s).on(D,t).on(A,i),d=e(vs.mouse(n)),f=z();P.call(n),a(s)}function c(){function t(){var t=vs.touches(p);return f=C.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function i(){for(var e=vs.event.changedTouches,i=0,s=e.length;s>i;++i)m[e[i].identifier]=null;var a=t(),l=Date.now();if(1===a.length){if(500>l-x){var h=a[0],c=m[h.identifier];n(2*C.k),r(h,c),u(),o(g)}x=l}else if(a.length>1){var h=a[0],d=a[1],f=h[0]-d[0],p=h[1]-d[1];v=f*f+p*p}}function s(){for(var t,e,i,s,a=vs.touches(p),l=0,h=a.length;h>l;++l,s=null)if(i=a[l],s=m[i.identifier]){if(e)break;t=i,e=s}if(s){var c=(c=i[0]-t[0])*c+(c=i[1]-t[1])*c,u=v&&Math.sqrt(c/v);t=[(t[0]+i[0])/2,(t[1]+i[1])/2],e=[(e[0]+s[0])/2,(e[1]+s[1])/2],n(u*f)}x=null,r(t,e),o(g)}function d(){if(vs.event.touches.length){for(var e=vs.event.changedTouches,i=0,n=e.length;n>i;++i)delete m[e[i].identifier];for(var r in m)return void t()}_.on(b,null).on(w,null),k.on(T,h).on(E,c),M(),l(g)}var f,p=this,g=L.of(p,arguments),m={},v=0,y=vs.event.changedTouches[0].identifier,b="touchmove.zoom-"+y,w="touchend.zoom-"+y,_=vs.select(_s).on(b,s).on(w,d),k=vs.select(p).on(T,null).on(E,i),M=z();P.call(p),i(),a(g)}function d(){var t=L.of(this,arguments);y?clearTimeout(y):(P.call(this),a(t)),y=setTimeout(function(){y=null,l(t)},50),u();var i=v||vs.mouse(this);m||(m=e(i)),n(Math.pow(2,.002*ra())*C.k),r(i,m),o(t)}function p(){m=null}function g(){var t=L.of(this,arguments),i=vs.mouse(this),s=e(i),h=Math.log(C.k)/Math.LN2;a(t),n(Math.pow(2,vs.event.shiftKey?Math.ceil(h)-1:Math.floor(h)+1)),r(i,s),o(t),l(t)}var m,v,y,x,b,w,_,k,C={x:0,y:0,k:1},M=[960,500],S=sa,T="mousedown.zoom",D="mousemove.zoom",A="mouseup.zoom",E="touchstart.zoom",L=f(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=L.of(this,arguments),e=C;jo?vs.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var i=M[0],n=M[1],r=i/2,s=n/2,a=vs.interpolateZoom([(r-C.x)/C.k,(s-C.y)/C.k,i/C.k],[(r-e.x)/e.k,(s-e.y)/e.k,i/e.k]);return function(e){var n=a(e),l=i/n[2];this.__chart__=C={x:r-n[0]*l,y:s-n[1]*l,k:l},o(t)}}).each("end.zoom",function(){l(t)}):(this.__chart__=C,a(t),o(t),l(t))})},t.translate=function(e){return arguments.length?(C={x:+e[0],y:+e[1],k:C.k},s(),t):[C.x,C.y]},t.scale=function(e){return arguments.length?(C={x:C.x,y:C.y,k:+e},s(),t):C.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?sa:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(M=e&&[+e[0],+e[1]],t):M},t.x=function(e){return arguments.length?(w=e,b=e.copy(),C={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(k=e,_=e.copy(),C={x:0,y:0,k:1},t):k},vs.rebind(t,L,"on")};var ra,sa=[0,1/0],aa="onwheel"in bs?(ra=function(){return-vs.event.deltaY*(vs.event.deltaMode?120:1)},"wheel"):"onmousewheel"in bs?(ra=function(){return vs.event.wheelDelta},"mousewheel"):(ra=function(){return-vs.event.detail},"MozMousePixelScroll");B.prototype.toString=function(){return this.rgb()+""},vs.hsl=function(t,e,i){return 1===arguments.length?t instanceof U?q(t.h,t.s,t.l):ht(""+t,ct,q):q(+t,+e,+i)};var oa=U.prototype=new B;oa.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),q(this.h,this.s,this.l/t)},oa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),q(this.h,this.s,t*this.l)},oa.rgb=function(){return V(this.h,this.s,this.l)},vs.hcl=function(t,e,i){return 1===arguments.length?t instanceof G?X(t.h,t.c,t.l):t instanceof K?tt(t.l,t.a,t.b):tt((t=ut((t=vs.rgb(t)).r,t.g,t.b)).l,t.a,t.b):X(+t,+e,+i)};var la=G.prototype=new B;la.brighter=function(t){return X(this.h,this.c,Math.min(100,this.l+ha*(arguments.length?t:1)))},la.darker=function(t){return X(this.h,this.c,Math.max(0,this.l-ha*(arguments.length?t:1)))},la.rgb=function(){return Z(this.h,this.c,this.l).rgb()},vs.lab=function(t,e,i){return 1===arguments.length?t instanceof K?Q(t.l,t.a,t.b):t instanceof G?Z(t.l,t.c,t.h):ut((t=vs.rgb(t)).r,t.g,t.b):Q(+t,+e,+i)};var ha=18,ca=.95047,ua=1,da=1.08883,fa=K.prototype=new B;fa.brighter=function(t){return Q(Math.min(100,this.l+ha*(arguments.length?t:1)),this.a,this.b)},fa.darker=function(t){return Q(Math.max(0,this.l-ha*(arguments.length?t:1)),this.a,this.b)},fa.rgb=function(){return J(this.l,this.a,this.b)},vs.rgb=function(t,e,i){return 1===arguments.length?t instanceof ot?at(t.r,t.g,t.b):ht(""+t,at,V):at(~~t,~~e,~~i)};var pa=ot.prototype=new B;pa.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,i=this.g,n=this.b,r=30;return e||i||n?(e&&r>e&&(e=r),i&&r>i&&(i=r),n&&r>n&&(n=r),at(Math.min(255,~~(e/t)),Math.min(255,~~(i/t)),Math.min(255,~~(n/t)))):at(r,r,r)},pa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),at(~~(t*this.r),~~(t*this.g),~~(t*this.b))},pa.hsl=function(){return ct(this.r,this.g,this.b)},pa.toString=function(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)};var ga=vs.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ga.forEach(function(t,e){ga.set(t,rt(e))}),vs.functor=pt,vs.xhr=mt(gt),vs.dsv=function(t,e){function i(t,i,s){arguments.length<3&&(s=i,i=null);var a=vs.xhr(t,e,s);return a.row=function(t){return arguments.length?a.response(null==(i=t)?n:r(t)):i},a.row(i)}function n(t){return i.parse(t.responseText)}function r(t){return function(e){return i.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=new RegExp('["'+t+"\n]"),h=t.charCodeAt(0);return i.parse=function(t,e){var n;return i.parseRows(t,function(t,i){if(n)return n(t,i-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,i){return e(r(t),i)}:r})},i.parseRows=function(t,e){function i(){if(c>=l)return a;if(r)return r=!1,s;var e=c;if(34===t.charCodeAt(e)){for(var i=e;i++<l;)if(34===t.charCodeAt(i)){if(34!==t.charCodeAt(i+1))break;++i}c=i+2;var n=t.charCodeAt(i+1);return 13===n?(r=!0,10===t.charCodeAt(i+2)&&++c):10===n&&(r=!0),t.substring(e+1,i).replace(/""/g,'"')}for(;l>c;){var n=t.charCodeAt(c++),o=1;if(10===n)r=!0;else if(13===n)r=!0,10===t.charCodeAt(c)&&(++c,++o);else if(n!==h)continue;return t.substring(e,c-o)}return t.substring(e)}for(var n,r,s={},a={},o=[],l=t.length,c=0,u=0;(n=i())!==a;){for(var d=[];n!==s&&n!==a;)d.push(n),n=i();(!e||(d=e(d,u++)))&&o.push(d)}return o},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new s,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(o).join(t)].concat(e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(a).join("\n")},i},vs.csv=vs.dsv(",","text/csv"),vs.tsv=vs.dsv("	","text/tab-separated-values");var ma,va,ya,xa,ba,wa=_s[o(_s,"requestAnimationFrame")]||function(t){setTimeout(t,17)};vs.timer=function(t,e,i){var n=arguments.length;2>n&&(e=0),3>n&&(i=Date.now());var r=i+e,s={callback:t,time:r,next:null};va?va.next=s:ma=s,va=s,ya||(xa=clearTimeout(xa),ya=1,wa(xt))},vs.timer.flush=function(){wt(),_t()};var _a=".",ka=",",Ca=[3,3],Ma="$",Sa=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(kt);vs.formatPrefix=function(t,e){var i=0;return t&&(0>t&&(t*=-1),e&&(t=vs.round(t,Ct(t,e))),i=1+Math.floor(1e-12+Math.log(t)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((0>=i?i+1:i-1)/3)))),Sa[8+i/3]},vs.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},vs.format=function(t){var e=Ta.exec(t),i=e[1]||" ",n=e[2]||">",r=e[3]||"",s=e[4]||"",a=e[5],o=+e[6],l=e[7],h=e[8],c=e[9],u=1,d="",f=!1;switch(h&&(h=+h.substring(1)),(a||"0"===i&&"="===n)&&(a=i="0",n="=",l&&(o-=Math.floor((o-1)/4))),c){case"n":l=!0,c="g";break;case"%":u=100,d="%",c="f";break;case"p":u=100,d="%",c="r";break;case"b":case"o":case"x":case"X":"#"===s&&(s="0"+c.toLowerCase());case"c":case"d":f=!0,h=0;break;case"s":u=-1,c="r"}"#"===s?s="":"$"===s&&(s=Ma),"r"!=c||h||(c="g"),null!=h&&("g"==c?h=Math.max(1,Math.min(21,h)):("e"==c||"f"==c)&&(h=Math.max(0,Math.min(20,h)))),c=Da.get(c)||Mt;var p=a&&l;return function(t){if(f&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):r;if(0>u){var g=vs.formatPrefix(t,h);t=g.scale(t),d=g.symbol}else t*=u;t=c(t,h);var m=t.lastIndexOf("."),v=0>m?t:t.substring(0,m),y=0>m?"":_a+t.substring(m+1);!a&&l&&(v=Aa(v));var x=s.length+v.length+y.length+(p?0:e.length),b=o>x?new Array(x=o-x+1).join(i):"";return p&&(v=Aa(b+v)),e+=s,t=v+y,("<"===n?e+t+b:">"===n?b+e+t:"^"===n?b.substring(0,x>>=1)+e+t+b.substring(x):e+(p?t:b+t))+d}};var Ta=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Da=vs.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=vs.round(t,Ct(t,e))).toFixed(Math.max(0,Math.min(20,Ct(t*(1+1e-15),e))))}}),Aa=gt;if(Ca){var Ea=Ca.length;Aa=function(t){for(var e=t.length,i=[],n=0,r=Ca[0];e>0&&r>0;)i.push(t.substring(e-=r,e+r)),r=Ca[n=(n+1)%Ea];return i.reverse().join(ka)}}vs.geo={},St.prototype={s:0,t:0,add:function(t){Tt(t,this.t,Pa),Tt(Pa.s,this.s,this),this.s?this.t+=Pa.t:this.s=Pa.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Pa=new St;vs.geo.stream=function(t,e){t&&La.hasOwnProperty(t.type)?La[t.type](t,e):Dt(t,e)};var La={Feature:function(t,e){Dt(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,r=i.length;++n<r;)Dt(i[n].geometry,e)}},Fa={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){At(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)At(i[n],e,0)},Polygon:function(t,e){Et(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)Et(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,r=i.length;++n<r;)Dt(i[n],e)}};vs.geo.area=function(t){return Ia=0,vs.geo.stream(t,Ra),Ia};var Ia,za=new St,Ra={sphere:function(){Ia+=4*Xs},point:l,lineStart:l,lineEnd:l,polygonStart:function(){za.reset(),Ra.lineStart=Pt},polygonEnd:function(){var t=2*za;Ia+=0>t?4*Xs+t:t,Ra.lineStart=Ra.lineEnd=Ra.point=l}};vs.geo.bounds=function(){function t(t,e){x.push(b=[c=t,d=t]),u>e&&(u=e),e>f&&(f=e)}function e(e,i){var n=Lt([e*Js,i*Js]);if(v){var r=It(v,n),s=[r[1],-r[0],0],a=It(s,r);Ot(a),a=Nt(a);var l=e-p,h=l>0?1:-1,g=a[0]*ta*h,m=Math.abs(l)>180;if(m^(g>h*p&&h*e>g)){var y=a[1]*ta;y>f&&(f=y)}else if(g=(g+360)%360-180,m^(g>h*p&&h*e>g)){var y=-a[1]*ta;u>y&&(u=y)}else u>i&&(u=i),i>f&&(f=i);m?p>e?o(c,e)>o(c,d)&&(d=e):o(e,d)>o(c,d)&&(c=e):d>=c?(c>e&&(c=e),e>d&&(d=e)):e>p?o(c,e)>o(c,d)&&(d=e):o(e,d)>o(c,d)&&(c=e)}else t(e,i);v=n,p=e}function i(){w.point=e}function n(){b[0]=c,b[1]=d,w.point=t,v=null}function r(t,i){if(v){var n=t-p;y+=Math.abs(n)>180?n+(n>0?360:-360):n}else g=t,m=i;Ra.point(t,i),e(t,i)}function s(){Ra.lineStart()}function a(){r(g,m),Ra.lineEnd(),Math.abs(y)>Qs&&(c=-(d=180)),b[0]=c,b[1]=d,v=null}function o(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function h(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,u,d,f,p,g,m,v,y,x,b,w={point:t,lineStart:i,lineEnd:n,polygonStart:function(){w.point=r,w.lineStart=s,w.lineEnd=a,y=0,Ra.polygonStart()},polygonEnd:function(){Ra.polygonEnd(),w.point=t,w.lineStart=i,w.lineEnd=n,0>za?(c=-(d=180),u=-(f=90)):y>Qs?f=90:-Qs>y&&(u=-90),b[0]=c,b[1]=d}};return function(t){f=d=-(c=u=1/0),x=[],vs.geo.stream(t,w);var e=x.length;if(e){x.sort(l);for(var i,n=1,r=x[0],s=[r];e>n;++n)i=x[n],h(i[0],r)||h(i[1],r)?(o(r[0],i[1])>o(r[0],r[1])&&(r[1]=i[1]),o(i[0],r[1])>o(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(var a,i,p=-1/0,e=s.length-1,n=0,r=s[e];e>=n;r=i,++n)i=s[n],(a=o(r[1],i[0]))>p&&(p=a,c=i[0],d=r[1])}return x=b=null,1/0===c||1/0===u?[[NaN,NaN],[NaN,NaN]]:[[c,u],[d,f]]}}(),vs.geo.centroid=function(t){Oa=Na=Ha=ja=Wa=Ya=$a=Ba=qa=Ua=Va=0,vs.geo.stream(t,Xa);var e=qa,i=Ua,n=Va,r=e*e+i*i+n*n;return Ks>r&&(e=Ya,i=$a,n=Ba,Qs>Na&&(e=Ha,i=ja,n=Wa),r=e*e+i*i+n*n,Ks>r)?[NaN,NaN]:[Math.atan2(i,e)*ta,H(n/Math.sqrt(r))*ta]};var Oa,Na,Ha,ja,Wa,Ya,$a,Ba,qa,Ua,Va,Xa={sphere:l,point:jt,lineStart:Yt,lineEnd:$t,polygonStart:function(){Xa.lineStart=Bt},polygonEnd:function(){Xa.lineStart=Yt}},Ga=Xt(qt,Jt,ee,[-Xs,-Xs/2]),Za=1e9;vs.geo.clipExtent=function(){var t,e,i,n,r,s,a={stream:function(t){return r&&(r.valid=!1),r=s(t),r.valid=!0,r},extent:function(o){return arguments.length?(s=ne(t=+o[0][0],e=+o[0][1],i=+o[1][0],n=+o[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[i,n]]}};return a.extent([[0,0],[960,500]])},(vs.geo.conicEqualArea=function(){return ae(oe)}).raw=oe,vs.geo.albers=function(){return vs.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},vs.geo.albersUsa=function(){function t(t){var s=t[0],a=t[1];return e=null,i(s,a),e||(n(s,a),e)||r(s,a),e}var e,i,n,r,s=vs.geo.albers(),a=vs.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=vs.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,i){e=[t,i]}};return t.invert=function(t){var e=s.scale(),i=s.translate(),n=(t[0]-i[0])/e,r=(t[1]-i[1])/e;return(r>=.12&&.234>r&&n>=-.425&&-.214>n?a:r>=.166&&.234>r&&n>=-.214&&-.115>n?o:s).invert(t)},t.stream=function(t){var e=s.stream(t),i=a.stream(t),n=o.stream(t);return{point:function(t,r){e.point(t,r),i.point(t,r),n.point(t,r)},sphere:function(){e.sphere(),i.sphere(),n.sphere()},lineStart:function(){e.lineStart(),i.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),i.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),i.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),i.polygonEnd(),n.polygonEnd()}}},t.precision=function(e){return arguments.length?(s.precision(e),a.precision(e),o.precision(e),t):s.precision()},t.scale=function(e){return arguments.length?(s.scale(e),a.scale(.35*e),o.scale(e),t.translate(s.translate())):s.scale()},t.translate=function(e){if(!arguments.length)return s.translate();var h=s.scale(),c=+e[0],u=+e[1];return i=s.translate(e).clipExtent([[c-.455*h,u-.238*h],[c+.455*h,u+.238*h]]).stream(l).point,n=a.translate([c-.307*h,u+.201*h]).clipExtent([[c-.425*h+Qs,u+.12*h+Qs],[c-.214*h-Qs,u+.234*h-Qs]]).stream(l).point,r=o.translate([c-.205*h,u+.212*h]).clipExtent([[c-.214*h+Qs,u+.166*h+Qs],[c-.115*h-Qs,u+.234*h-Qs]]).stream(l).point,t},t.scale(1070)};var Qa,Ka,Ja,to,eo,io,no={point:l,lineStart:l,lineEnd:l,polygonStart:function(){Ka=0,no.lineStart=le},polygonEnd:function(){no.lineStart=no.lineEnd=no.point=l,Qa+=Math.abs(Ka/2)}},ro={point:he,lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l},so={point:de,lineStart:fe,lineEnd:pe,polygonStart:function(){so.lineStart=ge},polygonEnd:function(){so.point=de,so.lineStart=fe,so.lineEnd=pe}};vs.geo.transform=function(t){return{stream:function(e){var i=new ye(e);for(var n in t)i[n]=t[n];return i}}},ye.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},vs.geo.path=function(){function t(t){return t&&("function"==typeof o&&s.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=r(s)),vs.geo.stream(t,a)),s.result()}function e(){return a=null,t}var i,n,r,s,a,o=4.5;return t.area=function(t){return Qa=0,vs.geo.stream(t,r(no)),Qa},t.centroid=function(t){return Ha=ja=Wa=Ya=$a=Ba=qa=Ua=Va=0,vs.geo.stream(t,r(so)),Va?[qa/Va,Ua/Va]:Ba?[Ya/Ba,$a/Ba]:Wa?[Ha/Wa,ja/Wa]:[NaN,NaN]},t.bounds=function(t){return eo=io=-(Ja=to=1/0),vs.geo.stream(t,r(ro)),[[Ja,to],[eo,io]]},t.projection=function(t){return arguments.length?(r=(i=t)?t.stream||xe(t):gt,e()):i},t.context=function(t){return arguments.length?(s=null==(n=t)?new ce:new me(t),"function"!=typeof o&&s.pointRadius(o),e()):n},t.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(s.pointRadius(+e),+e),t):o},t.projection(vs.geo.albersUsa()).context(null)},vs.geo.projection=be,vs.geo.projectionMutator=we,(vs.geo.equirectangular=function(){return be(ke)}).raw=ke.invert=ke,vs.geo.rotation=function(t){function e(e){return e=t(e[0]*Js,e[1]*Js),e[0]*=ta,e[1]*=ta,e}return t=Me(t[0]%360*Js,t[1]*Js,t.length>2?t[2]*Js:0),e.invert=function(e){return e=t.invert(e[0]*Js,e[1]*Js),e[0]*=ta,e[1]*=ta,e},e},Ce.invert=ke,vs.geo.circle=function(){function t(){var t="function"==typeof n?n.apply(this,arguments):n,e=Me(-t[0]*Js,-t[1]*Js,0).invert,r=[];return i(null,null,1,{point:function(t,i){r.push(t=e(t,i)),t[0]*=ta,t[1]*=ta}}),{type:"Polygon",coordinates:[r]}}var e,i,n=[0,0],r=6;return t.origin=function(e){return arguments.length?(n=e,t):n},t.angle=function(n){return arguments.length?(i=Ae((e=+n)*Js,r*Js),t):e},t.precision=function(n){return arguments.length?(i=Ae(e*Js,(r=+n)*Js),
t):r},t.angle(90)},vs.geo.distance=function(t,e){var i,n=(e[0]-t[0])*Js,r=t[1]*Js,s=e[1]*Js,a=Math.sin(n),o=Math.cos(n),l=Math.sin(r),h=Math.cos(r),c=Math.sin(s),u=Math.cos(s);return Math.atan2(Math.sqrt((i=u*a)*i+(i=h*c-l*u*o)*i),l*c+h*u*o)},vs.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return vs.range(Math.ceil(s/m)*m,r,m).map(d).concat(vs.range(Math.ceil(h/v)*v,l,v).map(f)).concat(vs.range(Math.ceil(n/p)*p,i,p).filter(function(t){return Math.abs(t%m)>Qs}).map(c)).concat(vs.range(Math.ceil(o/g)*g,a,g).filter(function(t){return Math.abs(t%v)>Qs}).map(u))}var i,n,r,s,a,o,l,h,c,u,d,f,p=10,g=p,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(s).concat(f(l).slice(1),d(r).reverse().slice(1),f(h).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(s=+e[0][0],r=+e[1][0],h=+e[0][1],l=+e[1][1],s>r&&(e=s,s=r,r=e),h>l&&(e=h,h=l,l=e),t.precision(y)):[[s,h],[r,l]]},t.minorExtent=function(e){return arguments.length?(n=+e[0][0],i=+e[1][0],o=+e[0][1],a=+e[1][1],n>i&&(e=n,n=i,i=e),o>a&&(e=o,o=a,a=e),t.precision(y)):[[n,o],[i,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=Pe(o,a,90),u=Le(n,i,y),d=Pe(h,l,90),f=Le(s,r,y),t):y},t.majorExtent([[-180,-90+Qs],[180,90-Qs]]).minorExtent([[-180,-80-Qs],[180,80+Qs]])},vs.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),i||r.apply(this,arguments)]}}var e,i,n=Fe,r=Ie;return t.distance=function(){return vs.geo.distance(e||n.apply(this,arguments),i||r.apply(this,arguments))},t.source=function(i){return arguments.length?(n=i,e="function"==typeof i?null:i,t):n},t.target=function(e){return arguments.length?(r=e,i="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},vs.geo.interpolate=function(t,e){return ze(t[0]*Js,t[1]*Js,e[0]*Js,e[1]*Js)},vs.geo.length=function(t){return ao=0,vs.geo.stream(t,oo),ao};var ao,oo={sphere:l,point:l,lineStart:Re,lineEnd:l,polygonStart:l,polygonEnd:l},lo=Oe(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(vs.geo.azimuthalEqualArea=function(){return be(lo)}).raw=lo;var ho=Oe(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},gt);(vs.geo.azimuthalEquidistant=function(){return be(ho)}).raw=ho,(vs.geo.conicConformal=function(){return ae(Ne)}).raw=Ne,(vs.geo.conicEquidistant=function(){return ae(He)}).raw=He;var co=Oe(function(t){return 1/t},Math.atan);(vs.geo.gnomonic=function(){return be(co)}).raw=co,je.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Zs]},(vs.geo.mercator=function(){return We(je)}).raw=je;var uo=Oe(function(){return 1},Math.asin);(vs.geo.orthographic=function(){return be(uo)}).raw=uo;var fo=Oe(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(vs.geo.stereographic=function(){return be(fo)}).raw=fo,Ye.invert=function(t,e){return[Math.atan2(j(t),Math.cos(e)),H(Math.sin(e)/W(t))]},(vs.geo.transverseMercator=function(){return We(Ye)}).raw=Ye,vs.geom={},vs.svg={},vs.svg.line=function(){return $e(gt)};var po=vs.map({linear:Ue,"linear-closed":Ve,step:Xe,"step-before":Ge,"step-after":Ze,basis:ii,"basis-open":ni,"basis-closed":ri,bundle:si,cardinal:Je,"cardinal-open":Qe,"cardinal-closed":Ke,monotone:ui});po.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var go=[0,2/3,1/3,0],mo=[0,1/3,2/3,0],vo=[0,1/6,2/3,1/6];vs.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r,s,a,o,l,h,c,u,d,f,p,g=pt(i),m=pt(n),v=t.length,y=v-1,x=[],b=[],w=0;if(g===Be&&n===qe)e=t;else for(s=0,e=[];v>s;++s)e.push([+g.call(this,r=t[s],s),+m.call(this,r,s)]);for(s=1;v>s;++s)(e[s][1]<e[w][1]||e[s][1]==e[w][1]&&e[s][0]<e[w][0])&&(w=s);for(s=0;v>s;++s)s!==w&&(l=e[s][1]-e[w][1],o=e[s][0]-e[w][0],x.push({angle:Math.atan2(l,o),index:s}));for(x.sort(function(t,e){return t.angle-e.angle}),f=x[0].angle,d=x[0].index,u=0,s=1;y>s;++s){if(a=x[s].index,f==x[s].angle){if(o=e[d][0]-e[w][0],l=e[d][1]-e[w][1],h=e[a][0]-e[w][0],c=e[a][1]-e[w][1],o*o+l*l>=h*h+c*c){x[s].index=-1;continue}x[u].index=-1}f=x[s].angle,u=s,d=a}for(b.push(w),s=0,a=0;2>s;++a)x[a].index>-1&&(b.push(x[a].index),s++);for(p=b.length;y>a;++a)if(!(x[a].index<0)){for(;!di(b[p-2],b[p-1],x[a].index,e);)--p;b[p++]=x[a].index}var _=[];for(s=p-1;s>=0;--s)_.push(t[b[s]]);return _}var i=Be,n=qe;return arguments.length?e(t):(e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e)},vs.geom.polygon=function(t){return zs(t,yo),t};var yo=vs.geom.polygon.prototype=[];yo.area=function(){for(var t,e=-1,i=this.length,n=this[i-1],r=0;++e<i;)t=n,n=this[e],r+=t[1]*n[0]-t[0]*n[1];return.5*r},yo.centroid=function(t){var e,i,n=-1,r=this.length,s=0,a=0,o=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++n<r;)e=o,o=this[n],i=e[0]*o[1]-o[0]*e[1],s+=(e[0]+o[0])*i,a+=(e[1]+o[1])*i;return[s*t,a*t]},yo.clip=function(t){for(var e,i,n,r,s,a,o=gi(t),l=-1,h=this.length-gi(this),c=this[h-1];++l<h;){for(e=t.slice(),t.length=0,r=this[l],s=e[(n=e.length-o)-1],i=-1;++i<n;)a=e[i],fi(a,c,r)?(fi(s,c,r)||t.push(pi(s,a,c,r)),t.push(a)):fi(s,c,r)&&t.push(pi(s,a,c,r)),s=a;o&&t.push(t[0]),c=r}return t},vs.geom.delaunay=function(t){var e=t.map(function(){return[]}),i=[];return mi(t,function(i){e[i.region.l.index].push(t[i.region.r.index])}),e.forEach(function(e,n){var r=t[n],s=r[0],a=r[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-s,t[1]-a)}),e.sort(function(t,e){return t.angle-e.angle});for(var o=0,l=e.length-1;l>o;o++)i.push([r,e[o],e[o+1]])}),i},vs.geom.voronoi=function(t){function e(t){var e,s,a,o=t.map(function(){return[]}),l=pt(i),h=pt(n),c=t.length,u=1e6;if(l===Be&&h===qe)e=t;else for(e=new Array(c),a=0;c>a;++a)e[a]=[+l.call(this,s=t[a],a),+h.call(this,s,a)];if(mi(e,function(t){var e,i,n,r,s,a;1===t.a&&t.b>=0?(e=t.ep.r,i=t.ep.l):(e=t.ep.l,i=t.ep.r),1===t.a?(s=e?e.y:-u,n=t.c-t.b*s,a=i?i.y:u,r=t.c-t.b*a):(n=e?e.x:-u,s=t.c-t.a*n,r=i?i.x:u,a=t.c-t.a*r);var l=[n,s],h=[r,a];o[t.region.l.index].push(l,h),o[t.region.r.index].push(l,h)}),o=o.map(function(t,i){var n=e[i][0],r=e[i][1],s=t.map(function(t){return Math.atan2(t[0]-n,t[1]-r)}),a=vs.range(t.length).sort(function(t,e){return s[t]-s[e]});return a.filter(function(t,e){return!e||s[t]-s[a[e-1]]>Qs}).map(function(e){return t[e]})}),o.forEach(function(t,i){var n=t.length;if(!n)return t.push([-u,-u],[-u,u],[u,u],[u,-u]);if(!(n>2)){var r=e[i],s=t[0],a=t[1],o=r[0],l=r[1],h=s[0],c=s[1],d=a[0],f=a[1],p=Math.abs(d-h),g=f-c;if(Math.abs(g)<Qs){var m=c>l?-u:u;t.push([-u,m],[u,m])}else if(Qs>p){var v=h>o?-u:u;t.push([v,-u],[v,u])}else{var m=(h-o)*(f-c)>(d-h)*(c-l)?u:-u,y=Math.abs(g)-p;Math.abs(y)<Qs?t.push([0>g?m:-m,m]):(y>0&&(m*=-1),t.push([-u,m],[u,m]))}}}),r)for(a=0;c>a;++a)r.clip(o[a]);for(a=0;c>a;++a)o[a].point=t[a];return o}var i=Be,n=qe,r=null;return arguments.length?e(t):(e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e.clipExtent=function(t){if(!arguments.length)return r&&[r[0],r[2]];if(null==t)r=null;else{var i=+t[0][0],n=+t[0][1],s=+t[1][0],a=+t[1][1];r=vs.geom.polygon([[i,n],[i,a],[s,a],[s,n]])}return e},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):r&&r[2]},e.links=function(t){var e,r,s,a=t.map(function(){return[]}),o=[],l=pt(i),h=pt(n),c=t.length;if(l===Be&&h===qe)e=t;else for(e=new Array(c),s=0;c>s;++s)e[s]=[+l.call(this,r=t[s],s),+h.call(this,r,s)];return mi(e,function(e){var i=e.region.l.index,n=e.region.r.index;a[i][n]||(a[i][n]=a[n][i]=!0,o.push({source:t[i],target:t[n]}))}),o},e.triangles=function(t){if(i===Be&&n===qe)return vs.geom.delaunay(t);for(var e,r=new Array(l),s=pt(i),a=pt(n),o=-1,l=t.length;++o<l;)(r[o]=[+s.call(this,e=t[o],o),+a.call(this,e,o)]).data=e;return vs.geom.delaunay(r).map(function(t){return t.map(function(t){return t.data})})},e)};var xo={l:"r",r:"l"};vs.geom.quadtree=function(t,e,i,n,r){function s(t){function s(t,e,i,n,r,s,a,o){if(!isNaN(i)&&!isNaN(n))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(Math.abs(l-i)+Math.abs(c-n)<.01)h(t,e,i,n,r,s,a,o);else{var u=t.point;t.x=t.y=t.point=null,h(t,u,l,c,r,s,a,o),h(t,e,i,n,r,s,a,o)}else t.x=i,t.y=n,t.point=e}else h(t,e,i,n,r,s,a,o)}function h(t,e,i,n,r,a,o,l){var h=.5*(r+o),c=.5*(a+l),u=i>=h,d=n>=c,f=(d<<1)+u;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]=xi()),u?r=h:o=h,d?a=c:l=c,s(t,e,i,n,r,a,o,l)}var c,u,d,f,p,g,m,v,y,x=pt(o),b=pt(l);if(null!=e)g=e,m=i,v=n,y=r;else if(v=y=-(g=m=1/0),u=[],d=[],p=t.length,a)for(f=0;p>f;++f)c=t[f],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),u.push(c.x),d.push(c.y);else for(f=0;p>f;++f){var w=+x(c=t[f],f),_=+b(c,f);g>w&&(g=w),m>_&&(m=_),w>v&&(v=w),_>y&&(y=_),u.push(w),d.push(_)}var k=v-g,C=y-m;k>C?y=m+k:v=g+C;var M=xi();if(M.add=function(t){s(M,t,+x(t,++f),+b(t,f),g,m,v,y)},M.visit=function(t){bi(t,M,g,m,v,y)},f=-1,null==e){for(;++f<p;)s(M,t[f],u[f],d[f],g,m,v,y);--f}else t.forEach(M.add);return u=d=t=c=null,M}var a,o=Be,l=qe;return(a=arguments.length)?(o=vi,l=yi,3===a&&(r=i,n=e,i=e=0),s(t)):(s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(l=t,s):l},s.extent=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=+t[0][0],i=+t[0][1],n=+t[1][0],r=+t[1][1]),s):null==e?null:[[e,i],[n,r]]},s.size=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=i=0,n=+t[0],r=+t[1]),s):null==e?null:[n-e,r-i]},s)},vs.interpolateRgb=wi,vs.interpolateObject=_i,vs.interpolateNumber=ki,vs.interpolateString=Ci;var bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;vs.interpolate=Mi,vs.interpolators=[function(t,e){var i=typeof e;return("string"===i?ga.has(e)||/^(#|rgb\(|hsl\()/.test(e)?wi:Ci:e instanceof B?wi:"object"===i?Array.isArray(e)?Si:_i:ki)(t,e)}],vs.interpolateArray=Si;var wo=function(){return gt},_o=vs.map({linear:wo,poly:Fi,quad:function(){return Ei},cubic:function(){return Pi},sin:function(){return Ii},exp:function(){return zi},circle:function(){return Ri},elastic:Oi,back:Ni,bounce:function(){return Hi}}),ko=vs.map({"in":gt,out:Di,"in-out":Ai,"out-in":function(t){return Ai(Di(t))}});vs.ease=function(t){var e=t.indexOf("-"),i=e>=0?t.substring(0,e):t,n=e>=0?t.substring(e+1):"in";return i=_o.get(i)||wo,n=ko.get(n)||gt,Ti(n(i.apply(null,Array.prototype.slice.call(arguments,1))))},vs.interpolateHcl=ji,vs.interpolateHsl=Wi,vs.interpolateLab=Yi,vs.interpolateRound=$i,vs.transform=function(t){var e=bs.createElementNS(vs.ns.prefix.svg,"g");return(vs.transform=function(t){if(null!=t){e.setAttribute("transform",t);var i=e.transform.baseVal.consolidate()}return new Bi(i?i.matrix:Co)})(t)},Bi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Co={a:1,b:0,c:0,d:1,e:0,f:0};vs.interpolateTransform=Xi,vs.layout={},vs.layout.bundle=function(){return function(t){for(var e=[],i=-1,n=t.length;++i<n;)e.push(Qi(t[i]));return e}},vs.layout.chord=function(){function t(){var t,h,u,d,f,p={},g=[],m=vs.range(s),v=[];for(i=[],n=[],t=0,d=-1;++d<s;){for(h=0,f=-1;++f<s;)h+=r[d][f];g.push(h),v.push(vs.range(s)),t+=h}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),o&&v.forEach(function(t,e){t.sort(function(t,i){return o(r[e][t],r[e][i])})}),t=(Gs-c*s)/t,h=0,d=-1;++d<s;){for(u=h,f=-1;++f<s;){var y=m[d],x=v[y][f],b=r[y][x],w=h,_=h+=b*t;p[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:_,value:b}}n[y]={index:y,startAngle:u,endAngle:h,value:(h-u)/t},h+=c}for(d=-1;++d<s;)for(f=d-1;++f<s;){var k=p[d+"-"+f],C=p[f+"-"+d];(k.value||C.value)&&i.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){i.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var i,n,r,s,a,o,l,h={},c=0;return h.matrix=function(t){return arguments.length?(s=(r=t)&&r.length,i=n=null,h):r},h.padding=function(t){return arguments.length?(c=t,i=n=null,h):c},h.sortGroups=function(t){return arguments.length?(a=t,i=n=null,h):a},h.sortSubgroups=function(t){return arguments.length?(o=t,i=null,h):o},h.sortChords=function(t){return arguments.length?(l=t,i&&e(),h):l},h.chords=function(){return i||t(),i},h.groups=function(){return n||t(),n},h},vs.layout.force=function(){function t(t){return function(e,i,n,r){if(e.point!==t){var s=e.cx-t.x,a=e.cy-t.y,o=1/Math.sqrt(s*s+a*a);if(g>(r-i)*o){var l=e.charge*o*o;return t.px-=s*l,t.py-=a*l,!0}if(e.point&&isFinite(o)){var l=e.pointCharge*o*o;t.px-=s*l,t.py-=a*l}}return!e.charge}}function e(t){t.px=vs.event.x,t.py=vs.event.y,o.resume()}var i,n,r,s,a,o={},l=vs.dispatch("start","tick","end"),h=[1,1],c=.9,u=Mo,d=So,f=-30,p=.1,g=.8,m=[],v=[];return o.tick=function(){if((n*=.99)<.005)return l.end({type:"end",alpha:n=0}),!0;var e,i,o,u,d,g,y,x,b,w=m.length,_=v.length;for(i=0;_>i;++i)o=v[i],u=o.source,d=o.target,x=d.x-u.x,b=d.y-u.y,(g=x*x+b*b)&&(g=n*s[i]*((g=Math.sqrt(g))-r[i])/g,x*=g,b*=g,d.x-=x*(y=u.weight/(d.weight+u.weight)),d.y-=b*y,u.x+=x*(y=1-y),u.y+=b*y);if((y=n*p)&&(x=h[0]/2,b=h[1]/2,i=-1,y))for(;++i<w;)o=m[i],o.x+=(x-o.x)*y,o.y+=(b-o.y)*y;if(f)for(sn(e=vs.geom.quadtree(m),n,a),i=-1;++i<w;)(o=m[i]).fixed||e.visit(t(o));for(i=-1;++i<w;)o=m[i],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*c,o.y-=(o.py-(o.py=o.y))*c);l.tick({type:"tick",alpha:n})},o.nodes=function(t){return arguments.length?(m=t,o):m},o.links=function(t){return arguments.length?(v=t,o):v},o.size=function(t){return arguments.length?(h=t,o):h},o.linkDistance=function(t){return arguments.length?(u="function"==typeof t?t:+t,o):u},o.distance=o.linkDistance,o.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,o):d},o.friction=function(t){return arguments.length?(c=+t,o):c},o.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,o):f},o.gravity=function(t){return arguments.length?(p=+t,o):p},o.theta=function(t){return arguments.length?(g=+t,o):g},o.alpha=function(t){return arguments.length?(t=+t,n?n=t>0?t:0:t>0&&(l.start({type:"start",alpha:n=t}),vs.timer(o.tick)),o):n},o.start=function(){function t(t,n){for(var r,s=e(i),a=-1,o=s.length;++a<o;)if(!isNaN(r=s[a][t]))return r;return Math.random()*n}function e(){if(!l){for(l=[],n=0;p>n;++n)l[n]=[];for(n=0;g>n;++n){var t=v[n];l[t.source.index].push(t.target),l[t.target.index].push(t.source)}}return l[i]}var i,n,l,c,p=m.length,g=v.length,y=h[0],x=h[1];for(i=0;p>i;++i)(c=m[i]).index=i,c.weight=0;for(i=0;g>i;++i)c=v[i],"number"==typeof c.source&&(c.source=m[c.source]),"number"==typeof c.target&&(c.target=m[c.target]),++c.source.weight,++c.target.weight;for(i=0;p>i;++i)c=m[i],isNaN(c.x)&&(c.x=t("x",y)),isNaN(c.y)&&(c.y=t("y",x)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);if(r=[],"function"==typeof u)for(i=0;g>i;++i)r[i]=+u.call(this,v[i],i);else for(i=0;g>i;++i)r[i]=u;if(s=[],"function"==typeof d)for(i=0;g>i;++i)s[i]=+d.call(this,v[i],i);else for(i=0;g>i;++i)s[i]=d;if(a=[],"function"==typeof f)for(i=0;p>i;++i)a[i]=+f.call(this,m[i],i);else for(i=0;p>i;++i)a[i]=f;return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){return i||(i=vs.behavior.drag().origin(gt).on("dragstart.force",tn).on("drag.force",e).on("dragend.force",en)),arguments.length?void this.on("mouseover.force",nn).on("mouseout.force",rn).call(i):i},vs.rebind(o,l,"on")};var Mo=20,So=1;vs.layout.hierarchy=function(){function t(e,a,o){var l=r.call(i,e,a);if(e.depth=a,o.push(e),l&&(h=l.length)){for(var h,c,u=-1,d=e.children=[],f=0,p=a+1;++u<h;)c=t(l[u],p,o),c.parent=e,d.push(c),f+=c.value;n&&d.sort(n),s&&(e.value=f)}else s&&(e.value=+s.call(i,e,a)||0);return e}function e(t,n){var r=t.children,a=0;if(r&&(o=r.length))for(var o,l=-1,h=n+1;++l<o;)a+=e(r[l],h);else s&&(a=+s.call(i,t,n)||0);return s&&(t.value=a),a}function i(e){var i=[];return t(e,0,i),i}var n=hn,r=on,s=ln;return i.sort=function(t){return arguments.length?(n=t,i):n},i.children=function(t){return arguments.length?(r=t,i):r},i.value=function(t){return arguments.length?(s=t,i):s},i.revalue=function(t){return e(t,0),t},i},vs.layout.partition=function(){function t(e,i,n,r){var s=e.children;if(e.x=i,e.y=e.depth*r,e.dx=n,e.dy=r,s&&(a=s.length)){var a,o,l,h=-1;for(n=e.value?n/e.value:0;++h<a;)t(o=s[h],i,l=o.value*n,r),i+=l}}function e(t){var i=t.children,n=0;if(i&&(r=i.length))for(var r,s=-1;++s<r;)n=Math.max(n,e(i[s]));return 1+n}function i(i,s){var a=n.call(this,i,s);return t(a[0],0,r[0],r[1]/e(a[0])),a}var n=vs.layout.hierarchy(),r=[1,1];return i.size=function(t){return arguments.length?(r=t,i):r},an(i,n)},vs.layout.pie=function(){function t(s){var a=s.map(function(i,n){return+e.call(t,i,n)}),o=+("function"==typeof n?n.apply(this,arguments):n),l=(("function"==typeof r?r.apply(this,arguments):r)-o)/vs.sum(a),h=vs.range(s.length);null!=i&&h.sort(i===To?function(t,e){return a[e]-a[t]}:function(t,e){return i(s[t],s[e])});var c=[];return h.forEach(function(t){var e;c[t]={data:s[t],value:e=a[t],startAngle:o,endAngle:o+=e*l}}),c}var e=Number,i=To,n=0,r=Gs;return t.value=function(i){return arguments.length?(e=i,t):e},t.sort=function(e){return arguments.length?(i=e,t):i},t.startAngle=function(e){return arguments.length?(n=e,t):n},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var To={};vs.layout.stack=function(){function t(o,l){var h=o.map(function(i,n){return e.call(t,i,n)}),c=h.map(function(e){return e.map(function(e,i){return[s.call(t,e,i),a.call(t,e,i)]})}),u=i.call(t,c,l);h=vs.permute(h,u),c=vs.permute(c,u);var d,f,p,g=n.call(t,c,l),m=h.length,v=h[0].length;for(f=0;v>f;++f)for(r.call(t,h[0][f],p=g[f],c[0][f][1]),d=1;m>d;++d)r.call(t,h[d][f],p+=c[d-1][f][1],c[d][f][1]);return o}var e=gt,i=pn,n=gn,r=fn,s=un,a=dn;return t.values=function(i){return arguments.length?(e=i,t):e},t.order=function(e){return arguments.length?(i="function"==typeof e?e:Do.get(e)||pn,t):i},t.offset=function(e){return arguments.length?(n="function"==typeof e?e:Ao.get(e)||gn,t):n},t.x=function(e){return arguments.length?(s=e,t):s},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(r=e,t):r},t};var Do=vs.map({"inside-out":function(t){var e,i,n=t.length,r=t.map(mn),s=t.map(vn),a=vs.range(n).sort(function(t,e){return r[t]-r[e]}),o=0,l=0,h=[],c=[];for(e=0;n>e;++e)i=a[e],l>o?(o+=s[i],h.push(i)):(l+=s[i],c.push(i));return c.reverse().concat(h)},reverse:function(t){return vs.range(t.length).reverse()},"default":pn}),Ao=vs.map({silhouette:function(t){var e,i,n,r=t.length,s=t[0].length,a=[],o=0,l=[];for(i=0;s>i;++i){for(e=0,n=0;r>e;e++)n+=t[e][i][1];n>o&&(o=n),a.push(n)}for(i=0;s>i;++i)l[i]=(o-a[i])/2;return l},wiggle:function(t){var e,i,n,r,s,a,o,l,h,c=t.length,u=t[0],d=u.length,f=[];for(f[0]=l=h=0,i=1;d>i;++i){for(e=0,r=0;c>e;++e)r+=t[e][i][1];for(e=0,s=0,o=u[i][0]-u[i-1][0];c>e;++e){for(n=0,a=(t[e][i][1]-t[e][i-1][1])/(2*o);e>n;++n)a+=(t[n][i][1]-t[n][i-1][1])/o;s+=a*t[e][i][1]}f[i]=l-=r?s/r*o:0,h>l&&(h=l)}for(i=0;d>i;++i)f[i]-=h;return f},expand:function(t){var e,i,n,r=t.length,s=t[0].length,a=1/r,o=[];for(i=0;s>i;++i){for(e=0,n=0;r>e;e++)n+=t[e][i][1];if(n)for(e=0;r>e;e++)t[e][i][1]/=n;else for(e=0;r>e;e++)t[e][i][1]=a}for(i=0;s>i;++i)o[i]=0;return o},zero:gn});vs.layout.histogram=function(){function t(t,s){for(var a,o,l=[],h=t.map(i,this),c=n.call(this,h,s),u=r.call(this,c,h,s),s=-1,d=h.length,f=u.length-1,p=e?1:1/d;++s<f;)a=l[s]=[],a.dx=u[s+1]-(a.x=u[s]),a.y=0;if(f>0)for(s=-1;++s<d;)o=h[s],o>=c[0]&&o<=c[1]&&(a=l[vs.bisect(u,o,1,f)-1],a.y+=p,a.push(t[s]));return l}var e=!0,i=Number,n=wn,r=xn;return t.value=function(e){return arguments.length?(i=e,t):i},t.range=function(e){return arguments.length?(n=pt(e),t):n},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return bn(t,e)}:pt(e),t):r},t.frequency=function(i){return arguments.length?(e=!!i,t):e},t},vs.layout.tree=function(){function t(t,s){function a(t,e){var n=t.children,r=t._tree;if(n&&(s=n.length)){for(var s,o,h,c=n[0],u=c,d=-1;++d<s;)h=n[d],a(h,o),u=l(h,o,u),o=h;En(t);var f=.5*(c._tree.prelim+h._tree.prelim);e?(r.prelim=e._tree.prelim+i(t,e),r.mod=r.prelim-f):r.prelim=f}else e&&(r.prelim=e._tree.prelim+i(t,e))}function o(t,e){t.x=t._tree.prelim+e;var i=t.children;if(i&&(n=i.length)){var n,r=-1;for(e+=t._tree.mod;++r<n;)o(i[r],e)}}function l(t,e,n){if(e){for(var r,s=t,a=t,o=e,l=t.parent.children[0],h=s._tree.mod,c=a._tree.mod,u=o._tree.mod,d=l._tree.mod;o=Cn(o),s=kn(s),o&&s;)l=kn(l),a=Cn(a),a._tree.ancestor=t,r=o._tree.prelim+u-s._tree.prelim-h+i(o,s),r>0&&(Pn(Ln(o,t,n),t,r),h+=r,c+=r),u+=o._tree.mod,h+=s._tree.mod,d+=l._tree.mod,c+=a._tree.mod;o&&!Cn(a)&&(a._tree.thread=o,a._tree.mod+=u-c),s&&!kn(l)&&(l._tree.thread=s,l._tree.mod+=h-d,n=t)}return n}var h=e.call(this,t,s),c=h[0];An(c,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),a(c),o(c,-c._tree.prelim);var u=Mn(c,Tn),d=Mn(c,Sn),f=Mn(c,Dn),p=u.x-i(u,d)/2,g=d.x+i(d,u)/2,m=f.depth||1;return An(c,r?function(t){t.x*=n[0],t.y=t.depth*n[1],delete t._tree}:function(t){t.x=(t.x-p)/(g-p)*n[0],t.y=t.depth/m*n[1],delete t._tree}),h}var e=vs.layout.hierarchy().sort(null).value(null),i=_n,n=[1,1],r=!1;return t.separation=function(e){return arguments.length?(i=e,t):i},t.size=function(e){return arguments.length?(r=null==(n=e),t):r?null:n},t.nodeSize=function(e){return arguments.length?(r=null!=(n=e),t):r?n:null},an(t,e)},vs.layout.pack=function(){function t(t,s){var a=i.call(this,t,s),o=a[0],l=r[0],h=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(o.x=o.y=0,An(o,function(t){t.r=+c(t.value)}),An(o,On),n){var u=n*(e?1:Math.max(2*o.r/l,2*o.r/h))/2;An(o,function(t){t.r+=u}),An(o,On),An(o,function(t){t.r-=u})}return jn(o,l/2,h/2,e?1:1/Math.max(2*o.r/l,2*o.r/h)),a}var e,i=vs.layout.hierarchy().sort(Fn),n=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(i){return arguments.length?(e=null==i||"function"==typeof i?i:+i,t):e},t.padding=function(e){return arguments.length?(n=+e,t):n},an(t,i)},vs.layout.cluster=function(){function t(t,s){var a,o=e.call(this,t,s),l=o[0],h=0;An(l,function(t){var e=t.children;e&&e.length?(t.x=$n(e),t.y=Yn(e)):(t.x=a?h+=i(t,a):0,t.y=0,a=t)});var c=Bn(l),u=qn(l),d=c.x-i(c,u)/2,f=u.x+i(u,c)/2;return An(l,r?function(t){t.x=(t.x-l.x)*n[0],t.y=(l.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(f-d)*n[0],t.y=(1-(l.y?t.y/l.y:1))*n[1]}),o}var e=vs.layout.hierarchy().sort(null).value(null),i=_n,n=[1,1],r=!1;return t.separation=function(e){return arguments.length?(i=e,t):i},t.size=function(e){return arguments.length?(r=null==(n=e),t):r?null:n},t.nodeSize=function(e){return arguments.length?(r=null!=(n=e),t):r?n:null},an(t,e)},vs.layout.treemap=function(){function t(t,e){for(var i,n,r=-1,s=t.length;++r<s;)n=(i=t[r]).value*(0>e?0:e),i.area=isNaN(n)||0>=n?0:n}function e(i){var s=i.children;if(s&&s.length){var a,o,l,h=u(i),c=[],d=s.slice(),p=1/0,g="slice"===f?h.dx:"dice"===f?h.dy:"slice-dice"===f?1&i.depth?h.dy:h.dx:Math.min(h.dx,h.dy);for(t(d,h.dx*h.dy/i.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==f||(o=n(c,g))<=p?(d.pop(),p=o):(c.area-=c.pop().area,r(c,g,h,!1),g=Math.min(h.dx,h.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,g,h,!0),c.length=c.area=0),s.forEach(e)}}function i(e){var n=e.children;if(n&&n.length){var s,a=u(e),o=n.slice(),l=[];for(t(o,a.dx*a.dy/e.value),l.area=0;s=o.pop();)l.push(s),l.area+=s.area,null!=s.z&&(r(l,s.z?a.dx:a.dy,a,!o.length),l.length=l.area=0);n.forEach(i)}}function n(t,e){for(var i,n=t.area,r=0,s=1/0,a=-1,o=t.length;++a<o;)(i=t[a].area)&&(s>i&&(s=i),i>r&&(r=i));return n*=n,e*=e,n?Math.max(e*r*p/n,n/(e*s*p)):1/0}function r(t,e,i,n){var r,s=-1,a=t.length,o=i.x,h=i.y,c=e?l(t.area/e):0;if(e==i.dx){for((n||c>i.dy)&&(c=i.dy);++s<a;)r=t[s],r.x=o,r.y=h,r.dy=c,o+=r.dx=Math.min(i.x+i.dx-o,c?l(r.area/c):0);r.z=!0,r.dx+=i.x+i.dx-o,i.y+=c,i.dy-=c}else{for((n||c>i.dx)&&(c=i.dx);++s<a;)r=t[s],r.x=o,r.y=h,r.dx=c,h+=r.dy=Math.min(i.y+i.dy-h,c?l(r.area/c):0);r.z=!1,r.dy+=i.y+i.dy-h,i.x+=c,i.dx-=c}}function s(n){var r=a||o(n),s=r[0];return s.x=0,s.y=0,s.dx=h[0],s.dy=h[1],a&&o.revalue(s),t([s],s.dx*s.dy/s.value),(a?i:e)(s),d&&(a=r),r}var a,o=vs.layout.hierarchy(),l=Math.round,h=[1,1],c=null,u=Un,d=!1,f="squarify",p=.5*(1+Math.sqrt(5));return s.size=function(t){return arguments.length?(h=t,s):h},s.padding=function(t){function e(e){var i=t.call(s,e,e.depth);return null==i?Un(e):Vn(e,"number"==typeof i?[i,i,i,i]:i)}function i(e){return Vn(e,t)}if(!arguments.length)return c;var n;return u=null==(c=t)?Un:"function"==(n=typeof t)?e:"number"===n?(t=[t,t,t,t],i):i,s},s.round=function(t){return arguments.length?(l=t?Math.round:Number,s):l!=Number},s.sticky=function(t){return arguments.length?(d=t,a=null,s):d},s.ratio=function(t){return arguments.length?(p=t,s):p},s.mode=function(t){return arguments.length?(f=t+"",s):f},an(s,o)},vs.random={normal:function(t,e){var i=arguments.length;return 2>i&&(e=1),1>i&&(t=0),function(){var i,n,r;do i=2*Math.random()-1,n=2*Math.random()-1,r=i*i+n*n;while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=vs.random.normal.apply(vs,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var e=0,i=0;t>i;i++)e+=Math.random();return e/t}}},vs.scale={};var Eo={floor:gt,ceil:gt};vs.scale.linear=function(){return tr([0,1],[0,1],Mi,!1)},vs.scale.log=function(){return ar(vs.scale.linear().domain([0,1]),10,!0,[1,10])};var Po=vs.format(".0e"),Lo={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};vs.scale.pow=function(){return or(vs.scale.linear(),1,[0,1])},vs.scale.sqrt=function(){return vs.scale.pow().exponent(.5)},vs.scale.ordinal=function(){return hr([],{t:"range",a:[[]]})},vs.scale.category10=function(){return vs.scale.ordinal().range(Fo)},vs.scale.category20=function(){return vs.scale.ordinal().range(Io)},vs.scale.category20b=function(){return vs.scale.ordinal().range(zo)},vs.scale.category20c=function(){return vs.scale.ordinal().range(Ro)};var Fo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(st),Io=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(st),zo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(st),Ro=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(st);vs.scale.quantile=function(){return cr([],[])},vs.scale.quantize=function(){return ur(0,1,[0,1])},vs.scale.threshold=function(){return dr([.5],[0,1])},vs.scale.identity=function(){return fr([0,1])},vs.svg.arc=function(){function t(){var t=e.apply(this,arguments),s=i.apply(this,arguments),a=n.apply(this,arguments)+Oo,o=r.apply(this,arguments)+Oo,l=(a>o&&(l=a,a=o,o=l),o-a),h=Xs>l?"0":"1",c=Math.cos(a),u=Math.sin(a),d=Math.cos(o),f=Math.sin(o);return l>=No?t?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":t?"M"+s*c+","+s*u+"A"+s+","+s+" 0 "+h+",1 "+s*d+","+s*f+"L"+t*d+","+t*f+"A"+t+","+t+" 0 "+h+",0 "+t*c+","+t*u+"Z":"M"+s*c+","+s*u+"A"+s+","+s+" 0 "+h+",1 "+s*d+","+s*f+"L0,0Z"}var e=pr,i=gr,n=mr,r=vr;return t.innerRadius=function(i){return arguments.length?(e=pt(i),t):e},t.outerRadius=function(e){return arguments.length?(i=pt(e),t):i},t.startAngle=function(e){return arguments.length?(n=pt(e),t):n},t.endAngle=function(e){return arguments.length?(r=pt(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+i.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+Oo;return[Math.cos(s)*t,Math.sin(s)*t]},t};var Oo=-Zs,No=Gs-Qs;vs.svg.line.radial=function(){var t=$e(yr);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ge.reverse=Ze,Ze.reverse=Ge,vs.svg.area=function(){return xr(gt)},vs.svg.area.radial=function(){var t=xr(yr);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},vs.svg.chord=function(){function t(t,o){var l=e(this,s,t,o),h=e(this,a,t,o);return"M"+l.p0+n(l.r,l.p1,l.a1-l.a0)+(i(l,h)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,h.r,h.p0)+n(h.r,h.p1,h.a1-h.a0)+r(h.r,h.p1,l.r,l.p0))+"Z"}function e(t,e,i,n){var r=e.call(t,i,n),s=o.call(t,r,n),a=l.call(t,r,n)+Oo,c=h.call(t,r,n)+Oo;return{r:s,a0:a,a1:c,p0:[s*Math.cos(a),s*Math.sin(a)],p1:[s*Math.cos(c),s*Math.sin(c)]}}function i(t,e){return t.a0==e.a0&&t.a1==e.a1}function n(t,e,i){return"A"+t+","+t+" 0 "+ +(i>Xs)+",1 "+e}function r(t,e,i,n){return"Q 0,0 "+n}var s=Fe,a=Ie,o=br,l=mr,h=vr;return t.radius=function(e){return arguments.length?(o=pt(e),t):o},t.source=function(e){return arguments.length?(s=pt(e),t):s},t.target=function(e){return arguments.length?(a=pt(e),t):a},t.startAngle=function(e){return arguments.length?(l=pt(e),t):l},t.endAngle=function(e){return arguments.length?(h=pt(e),t):h},t},vs.svg.diagonal=function(){function t(t,r){var s=e.call(this,t,r),a=i.call(this,t,r),o=(s.y+a.y)/2,l=[s,{x:s.x,y:o},{x:a.x,y:o},a];return l=l.map(n),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=Fe,i=Ie,n=wr;return t.source=function(i){return arguments.length?(e=pt(i),t):e},t.target=function(e){return arguments.length?(i=pt(e),t):i},t.projection=function(e){return arguments.length?(n=e,t):n},t},vs.svg.diagonal.radial=function(){var t=vs.svg.diagonal(),e=wr,i=t.projection;return t.projection=function(t){return arguments.length?i(_r(e=t)):e},t},vs.svg.symbol=function(){function t(t,n){return(Ho.get(e.call(this,t,n))||Mr)(i.call(this,t,n))}var e=Cr,i=kr;return t.type=function(i){return arguments.length?(e=pt(i),t):e},t.size=function(e){return arguments.length?(i=pt(e),t):i},t};var Ho=vs.map({circle:Mr,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*$o)),i=e*$o;return"M0,"+-e+"L"+i+",0 0,"+e+" "+-i+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Yo),i=e*Yo/2;return"M0,"+i+"L"+e+","+-i+" "+-e+","+-i+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Yo),i=e*Yo/2;return"M0,"+-i+"L"+e+","+i+" "+-e+","+i+"Z"}});vs.svg.symbolTypes=Ho.keys();var jo,Wo,Yo=Math.sqrt(3),$o=Math.tan(30*Js),Bo=[],qo=0;Bo.call=js.call,Bo.empty=js.empty,Bo.node=js.node,Bo.size=js.size,vs.transition=function(t){return arguments.length?jo?t.transition():t:$s.transition()},vs.transition.prototype=Bo,Bo.select=function(t){var e,i,n,r=this.id,s=[];t=g(t);for(var a=-1,o=this.length;++a<o;){s.push(e=[]);for(var l=this[a],h=-1,c=l.length;++h<c;)(n=l[h])&&(i=t.call(n,n.__data__,h,a))?("__data__"in n&&(i.__data__=n.__data__),Ar(i,h,r,n.__transition__[r]),e.push(i)):e.push(null)}return Sr(s,r)},Bo.selectAll=function(t){var e,i,n,r,s,a=this.id,o=[];t=m(t);for(var l=-1,h=this.length;++l<h;)for(var c=this[l],u=-1,d=c.length;++u<d;)if(n=c[u]){s=n.__transition__[a],i=t.call(n,n.__data__,u,l),o.push(e=[]);for(var f=-1,p=i.length;++f<p;)(r=i[f])&&Ar(r,f,a,s),e.push(r)}return Sr(o,a)},Bo.filter=function(t){var e,i,n,r=[];"function"!=typeof t&&(t=S(t));for(var s=0,a=this.length;a>s;s++){r.push(e=[]);for(var i=this[s],o=0,l=i.length;l>o;o++)(n=i[o])&&t.call(n,n.__data__,o)&&e.push(n)}return Sr(r,this.id)},Bo.tween=function(t,e){var i=this.id;return arguments.length<2?this.node().__transition__[i].tween.get(t):D(this,null==e?function(e){e.__transition__[i].tween.remove(t)}:function(n){n.__transition__[i].tween.set(t,e)})},Bo.attr=function(t,e){function i(){this.removeAttribute(o)}function n(){this.removeAttributeNS(o.space,o.local)}function r(t){return null==t?i:(t+="",function(){var e,i=this.getAttribute(o);return i!==t&&(e=a(i,t),function(t){this.setAttribute(o,e(t))})})}function s(t){return null==t?n:(t+="",function(){var e,i=this.getAttributeNS(o.space,o.local);return i!==t&&(e=a(i,t),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Xi:Mi,o=vs.ns.qualify(t);return Tr(this,"attr."+t,e,o.local?s:r)},Bo.attrTween=function(t,e){function i(t,i){var n=e.call(this,t,i,this.getAttribute(r));
return n&&function(t){this.setAttribute(r,n(t))}}function n(t,i){var n=e.call(this,t,i,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}var r=vs.ns.qualify(t);return this.tween("attr."+t,r.local?n:i)},Bo.style=function(t,e,i){function n(){this.style.removeProperty(t)}function r(e){return null==e?n:(e+="",function(){var n,r=_s.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(n=Mi(r,e),function(e){this.style.setProperty(t,n(e),i)})})}var s=arguments.length;if(3>s){if("string"!=typeof t){2>s&&(e="");for(i in t)this.style(i,t[i],e);return this}i=""}return Tr(this,"style."+t,e,r)},Bo.styleTween=function(t,e,i){function n(n,r){var s=e.call(this,n,r,_s.getComputedStyle(this,null).getPropertyValue(t));return s&&function(e){this.style.setProperty(t,s(e),i)}}return arguments.length<3&&(i=""),this.tween("style."+t,n)},Bo.text=function(t){return Tr(this,"text",t,Dr)},Bo.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Bo.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=vs.ease.apply(vs,arguments)),D(this,function(i){i.__transition__[e].ease=t}))},Bo.delay=function(t){var e=this.id;return D(this,"function"==typeof t?function(i,n,r){i.__transition__[e].delay=+t.call(i,i.__data__,n,r)}:(t=+t,function(i){i.__transition__[e].delay=t}))},Bo.duration=function(t){var e=this.id;return D(this,"function"==typeof t?function(i,n,r){i.__transition__[e].duration=Math.max(1,t.call(i,i.__data__,n,r))}:(t=Math.max(1,t),function(i){i.__transition__[e].duration=t}))},Bo.each=function(t,e){var i=this.id;if(arguments.length<2){var n=Wo,r=jo;jo=i,D(this,function(e,n,r){Wo=e.__transition__[i],t.call(e,e.__data__,n,r)}),Wo=n,jo=r}else D(this,function(n){var r=n.__transition__[i];(r.event||(r.event=vs.dispatch("start","end"))).on(t,e)});return this},Bo.transition=function(){for(var t,e,i,n,r=this.id,s=++qo,a=[],o=0,l=this.length;l>o;o++){a.push(t=[]);for(var e=this[o],h=0,c=e.length;c>h;h++)(i=e[h])&&(n=Object.create(i.__transition__[r]),n.delay+=n.duration,Ar(i,h,s,n)),t.push(i)}return Sr(a,s)},vs.svg.axis=function(){function t(t){t.each(function(){var t,h=vs.select(this),c=this.__chart__||i,u=this.__chart__=i.copy(),d=null==l?u.ticks?u.ticks.apply(u,o):u.domain():l,f=null==e?u.tickFormat?u.tickFormat.apply(u,o):gt:e,p=h.selectAll(".tick").data(d,u),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Qs),m=vs.transition(p.exit()).style("opacity",Qs).remove(),v=vs.transition(p).style("opacity",1),y=Gn(u),x=h.selectAll(".domain").data([0]),b=(x.enter().append("path").attr("class","domain"),vs.transition(x));g.append("line"),g.append("text");var w=g.select("line"),_=v.select("line"),k=p.select("text").text(f),C=g.select("text"),M=v.select("text");switch(n){case"bottom":t=Er,w.attr("y2",r),C.attr("y",Math.max(r,0)+a),_.attr("x2",0).attr("y2",r),M.attr("x",0).attr("y",Math.max(r,0)+a),k.attr("dy",".71em").style("text-anchor","middle"),b.attr("d","M"+y[0]+","+s+"V0H"+y[1]+"V"+s);break;case"top":t=Er,w.attr("y2",-r),C.attr("y",-(Math.max(r,0)+a)),_.attr("x2",0).attr("y2",-r),M.attr("x",0).attr("y",-(Math.max(r,0)+a)),k.attr("dy","0em").style("text-anchor","middle"),b.attr("d","M"+y[0]+","+-s+"V0H"+y[1]+"V"+-s);break;case"left":t=Pr,w.attr("x2",-r),C.attr("x",-(Math.max(r,0)+a)),_.attr("x2",-r).attr("y2",0),M.attr("x",-(Math.max(r,0)+a)).attr("y",0),k.attr("dy",".32em").style("text-anchor","end"),b.attr("d","M"+-s+","+y[0]+"H0V"+y[1]+"H"+-s);break;case"right":t=Pr,w.attr("x2",r),C.attr("x",Math.max(r,0)+a),_.attr("x2",r).attr("y2",0),M.attr("x",Math.max(r,0)+a).attr("y",0),k.attr("dy",".32em").style("text-anchor","start"),b.attr("d","M"+s+","+y[0]+"H0V"+y[1]+"H"+s)}if(u.rangeBand){var S=u.rangeBand()/2,T=function(t){return u(t)+S};g.call(t,T),v.call(t,T)}else g.call(t,c),v.call(t,u),m.call(t,u)})}var e,i=vs.scale.linear(),n=Uo,r=6,s=6,a=3,o=[10],l=null;return t.scale=function(e){return arguments.length?(i=e,t):i},t.orient=function(e){return arguments.length?(n=e in Vo?e+"":Uo,t):n},t.ticks=function(){return arguments.length?(o=arguments,t):o},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(i){return arguments.length?(e=i,t):e},t.tickSize=function(e){var i=arguments.length;return i?(r=+e,s=+arguments[i-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(s=+e,t):s},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Uo="bottom",Vo={top:1,right:1,bottom:1,left:1};vs.svg.brush=function(){function t(s){s.each(function(){var s=vs.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),a=s.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=s.selectAll(".resize").data(m,gt);o.exit().remove(),o.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Xo[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",t.empty()?"none":null);var c,u=vs.transition(s),d=vs.transition(a);l&&(c=Gn(l),d.attr("x",c[0]).attr("width",c[1]-c[0]),i(u)),h&&(c=Gn(h),d.attr("y",c[0]).attr("height",c[1]-c[0]),n(u)),e(u)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function i(t){t.select(".extent").attr("x",c[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function n(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function r(){function r(){32==vs.event.keyCode&&(D||(x=null,E[0]-=c[1],E[1]-=d[1],D=2),u())}function f(){32==vs.event.keyCode&&2==D&&(E[0]+=c[1],E[1]+=d[1],D=0,u())}function m(){var t=vs.mouse(w),r=!1;b&&(t[0]+=b[0],t[1]+=b[1]),D||(vs.event.altKey?(x||(x=[(c[0]+c[1])/2,(d[0]+d[1])/2]),E[0]=c[+(t[0]<x[0])],E[1]=d[+(t[1]<x[1])]):x=null),S&&v(t,l,0)&&(i(C),r=!0),T&&v(t,h,1)&&(n(C),r=!0),r&&(e(C),k({type:"brush",mode:D?"move":"resize"}))}function v(t,e,i){var n,r,o=Gn(e),l=o[0],h=o[1],u=E[i],f=i?d:c,m=f[1]-f[0];return D&&(l-=u,h-=m+u),n=(i?g:p)?Math.max(l,Math.min(h,t[i])):t[i],D?r=(n+=u)+m:(x&&(u=Math.max(l,Math.min(h,2*x[i]-n))),n>u?(r=n,n=u):r=u),f[0]!=n||f[1]!=r?(i?a=null:s=null,f[0]=n,f[1]=r,!0):void 0}function y(){m(),C.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),vs.select("body").style("cursor",null),P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),k({type:"brushend"})}var x,b,w=this,_=vs.select(vs.event.target),k=o.of(w,arguments),C=vs.select(w),M=_.datum(),S=!/^(n|s)$/.test(M)&&l,T=!/^(e|w)$/.test(M)&&h,D=_.classed("extent"),A=z(),E=vs.mouse(w),P=vs.select(_s).on("keydown.brush",r).on("keyup.brush",f);if(vs.event.changedTouches?P.on("touchmove.brush",m).on("touchend.brush",y):P.on("mousemove.brush",m).on("mouseup.brush",y),C.interrupt().selectAll("*").interrupt(),D)E[0]=c[0]-E[0],E[1]=d[0]-E[1];else if(M){var L=+/w$/.test(M),F=+/^n/.test(M);b=[c[1-L]-E[0],d[1-F]-E[1]],E[0]=c[L],E[1]=d[F]}else vs.event.altKey&&(x=E.slice());C.style("pointer-events","none").selectAll(".resize").style("display",null),vs.select("body").style("cursor",_.style("cursor")),k({type:"brushstart"}),m()}var s,a,o=f(t,"brushstart","brush","brushend"),l=null,h=null,c=[0,0],d=[0,0],p=!0,g=!0,m=Go[0];return t.event=function(t){t.each(function(){var t=o.of(this,arguments),e={x:c,y:d,i:s,j:a},i=this.__chart__||e;this.__chart__=e,jo?vs.select(this).transition().each("start.brush",function(){s=i.i,a=i.j,c=i.x,d=i.y,t({type:"brushstart"})}).tween("brush:brush",function(){var i=Si(c,e.x),n=Si(d,e.y);return s=a=null,function(r){c=e.x=i(r),d=e.y=n(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=e.i,a=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,m=Go[!l<<1|!h],t):l},t.y=function(e){return arguments.length?(h=e,m=Go[!l<<1|!h],t):h},t.clamp=function(e){return arguments.length?(l&&h?(p=!!e[0],g=!!e[1]):l?p=!!e:h&&(g=!!e),t):l&&h?[p,g]:l?p:h?g:null},t.extent=function(e){var i,n,r,o,u;return arguments.length?(l&&(i=e[0],n=e[1],h&&(i=i[0],n=n[0]),s=[i,n],l.invert&&(i=l(i),n=l(n)),i>n&&(u=i,i=n,n=u),(i!=c[0]||n!=c[1])&&(c=[i,n])),h&&(r=e[0],o=e[1],l&&(r=r[1],o=o[1]),a=[r,o],h.invert&&(r=h(r),o=h(o)),r>o&&(u=r,r=o,o=u),(r!=d[0]||o!=d[1])&&(d=[r,o])),t):(l&&(s?(i=s[0],n=s[1]):(i=c[0],n=c[1],l.invert&&(i=l.invert(i),n=l.invert(n)),i>n&&(u=i,i=n,n=u))),h&&(a?(r=a[0],o=a[1]):(r=d[0],o=d[1],h.invert&&(r=h.invert(r),o=h.invert(o)),r>o&&(u=r,r=o,o=u))),l&&h?[[i,r],[n,o]]:l?[i,n]:h&&[r,o])},t.clear=function(){return t.empty()||(c=[0,0],d=[0,0],s=a=null),t},t.empty=function(){return!!l&&c[0]==c[1]||!!h&&d[0]==d[1]},vs.rebind(t,o,"on")};var Xo={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Go=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Zo=vs.time={},Qo=Date,Ko=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Lr.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Jo.setUTCDate.apply(this._,arguments)},setDay:function(){Jo.setUTCDay.apply(this._,arguments)},setFullYear:function(){Jo.setUTCFullYear.apply(this._,arguments)},setHours:function(){Jo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Jo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Jo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Jo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Jo.setUTCSeconds.apply(this._,arguments)},setTime:function(){Jo.setTime.apply(this._,arguments)}};var Jo=Date.prototype,tl="%a %b %e %X %Y",el="%m/%d/%Y",il="%H:%M:%S",nl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],sl=["January","February","March","April","May","June","July","August","September","October","November","December"],al=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Zo.year=Fr(function(t){return t=Zo.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Zo.years=Zo.year.range,Zo.years.utc=Zo.year.utc.range,Zo.day=Fr(function(t){var e=new Qo(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Zo.days=Zo.day.range,Zo.days.utc=Zo.day.utc.range,Zo.dayOfYear=function(t){var e=Zo.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},Ko.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var i=Zo[t]=Fr(function(t){return(t=Zo.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var i=Zo.year(t).getDay();return Math.floor((Zo.dayOfYear(t)+(i+e)%7)/7)-(i!==e)});Zo[t+"s"]=i.range,Zo[t+"s"].utc=i.utc.range,Zo[t+"OfYear"]=function(t){var i=Zo.year(t).getDay();return Math.floor((Zo.dayOfYear(t)+(i+e)%7)/7)}}),Zo.week=Zo.sunday,Zo.weeks=Zo.sunday.range,Zo.weeks.utc=Zo.sunday.utc.range,Zo.weekOfYear=Zo.sundayOfYear,Zo.format=zr;var ol=Or(nl),ll=Nr(nl),hl=Or(rl),cl=Nr(rl),ul=Or(sl),dl=Nr(sl),fl=Or(al),pl=Nr(al),gl=/^%/,ml={"-":"",_:" ",0:"0"},vl={a:function(t){return rl[t.getDay()]},A:function(t){return nl[t.getDay()]},b:function(t){return al[t.getMonth()]},B:function(t){return sl[t.getMonth()]},c:zr(tl),d:function(t,e){return Hr(t.getDate(),e,2)},e:function(t,e){return Hr(t.getDate(),e,2)},H:function(t,e){return Hr(t.getHours(),e,2)},I:function(t,e){return Hr(t.getHours()%12||12,e,2)},j:function(t,e){return Hr(1+Zo.dayOfYear(t),e,3)},L:function(t,e){return Hr(t.getMilliseconds(),e,3)},m:function(t,e){return Hr(t.getMonth()+1,e,2)},M:function(t,e){return Hr(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return Hr(t.getSeconds(),e,2)},U:function(t,e){return Hr(Zo.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Hr(Zo.mondayOfYear(t),e,2)},x:zr(el),X:zr(il),y:function(t,e){return Hr(t.getFullYear()%100,e,2)},Y:function(t,e){return Hr(t.getFullYear()%1e4,e,4)},Z:ls,"%":function(){return"%"}},yl={a:jr,A:Wr,b:qr,B:Ur,c:Vr,d:es,e:es,H:ns,I:ns,j:is,L:as,m:ts,M:rs,p:os,S:ss,U:$r,w:Yr,W:Br,x:Xr,X:Gr,y:Qr,Y:Zr,Z:Kr,"%":hs},xl=/^\s*\d+/,bl=vs.map({am:0,pm:1});zr.utc=cs;var wl=cs("%Y-%m-%dT%H:%M:%S.%LZ");zr.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?us:wl,us.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},us.toString=wl.toString,Zo.second=Fr(function(t){return new Qo(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Zo.seconds=Zo.second.range,Zo.seconds.utc=Zo.second.utc.range,Zo.minute=Fr(function(t){return new Qo(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Zo.minutes=Zo.minute.range,Zo.minutes.utc=Zo.minute.utc.range,Zo.hour=Fr(function(t){var e=t.getTimezoneOffset()/60;return new Qo(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Zo.hours=Zo.hour.range,Zo.hours.utc=Zo.hour.utc.range,Zo.month=Fr(function(t){return t=Zo.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Zo.months=Zo.month.range,Zo.months.utc=Zo.month.utc.range;var _l=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],kl=[[Zo.second,1],[Zo.second,5],[Zo.second,15],[Zo.second,30],[Zo.minute,1],[Zo.minute,5],[Zo.minute,15],[Zo.minute,30],[Zo.hour,1],[Zo.hour,3],[Zo.hour,6],[Zo.hour,12],[Zo.day,1],[Zo.day,2],[Zo.week,1],[Zo.month,1],[Zo.month,3],[Zo.year,1]],Cl=[[zr("%Y"),qt],[zr("%B"),function(t){return t.getMonth()}],[zr("%b %d"),function(t){return 1!=t.getDate()}],[zr("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[zr("%I %p"),function(t){return t.getHours()}],[zr("%I:%M"),function(t){return t.getMinutes()}],[zr(":%S"),function(t){return t.getSeconds()}],[zr(".%L"),function(t){return t.getMilliseconds()}]],Ml=ps(Cl);kl.year=Zo.year,Zo.scale=function(){return ds(vs.scale.linear(),kl,Ml)};var Sl={range:function(t,e,i){return vs.range(+t,+e,i).map(fs)}},Tl=kl.map(function(t){return[t[0].utc,t[1]]}),Dl=[[cs("%Y"),qt],[cs("%B"),function(t){return t.getUTCMonth()}],[cs("%b %d"),function(t){return 1!=t.getUTCDate()}],[cs("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[cs("%I %p"),function(t){return t.getUTCHours()}],[cs("%I:%M"),function(t){return t.getUTCMinutes()}],[cs(":%S"),function(t){return t.getUTCSeconds()}],[cs(".%L"),function(t){return t.getUTCMilliseconds()}]],Al=ps(Dl);return Tl.year=Zo.year.utc,Zo.scale.utc=function(){return ds(vs.scale.linear(),Tl,Al)},vs.text=mt(function(t){return t.responseText}),vs.json=function(t,e){return vt(t,"application/json",gs,e)},vs.html=function(t,e){return vt(t,"text/html",ms,e)},vs.xml=mt(function(t){return t.responseXML}),vs}(),function(t,e){"function"==typeof define&&define.amd?define(["d3"],function(i){return t.Rickshaw=e(i)}):"object"==typeof exports?module.exports=e(require("d3")):t.Rickshaw=e(d3)}(this,function(t){var e={namespace:function(t){for(var i=t.split("."),n=e,r=1,s=i.length;s>r;r++){var a=i[r];n[a]=n[a]||{},n=n[a]}return n},keys:function(t){var e=[];for(var i in t)e.push(i);return e},extend:function(t,e){for(var i in e)t[i]=e[i];return t},clone:function(t){return JSON.parse(JSON.stringify(t))}};return function(t){function e(t){return u.call(t)===y}function i(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function n(t){if(r(t)!==v)throw new TypeError;var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}function r(t){switch(t){case null:return d;case void 0:return f}var e=typeof t;switch(e){case"boolean":return p;case"number":return g;case"string":return m}return v}function s(t){return"undefined"==typeof t}function a(t){var e=t.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=e.length||e[0]?e:[]}function o(t,e){var i=t;return function(){var t=l([c(i,this)],arguments);return e.apply(this,t)}}function l(t,e){for(var i=t.length,n=e.length;n--;)t[i+n]=e[n];return t}function h(t,e){return t=x.call(t,0),l(t,e)}function c(t,e){if(arguments.length<2&&s(arguments[0]))return this;var i=t,n=x.call(arguments,2);return function(){var t=h(n,arguments);return i.apply(e,t)}}var u=Object.prototype.toString,d="Null",f="Undefined",p="Boolean",g="Number",m="String",v="Object",y="[object Function]",x=Array.prototype.slice,b=function(){},w=function(){function t(){}function r(){function n(){this.initialize.apply(this,arguments)}var r=null,s=[].slice.apply(arguments);if(e(s[0])&&(r=s.shift()),i(n,w.Methods),n.superclass=r,n.subclasses=[],r){t.prototype=r.prototype,n.prototype=new t;try{r.subclasses.push(n)}catch(a){}}for(var o=0,l=s.length;l>o;o++)n.addMethods(s[o]);return n.prototype.initialize||(n.prototype.initialize=b),n.prototype.constructor=n,n}function s(t){var i=this.superclass&&this.superclass.prototype,r=n(t);l&&(t.toString!=Object.prototype.toString&&r.push("toString"),t.valueOf!=Object.prototype.valueOf&&r.push("valueOf"));for(var s=0,h=r.length;h>s;s++){var u=r[s],d=t[u];if(i&&e(d)&&"$super"==a(d)[0]){var f=d;d=o(function(t){return function(){return i[t].apply(this,arguments)}}(u),f),d.valueOf=c(f.valueOf,f),d.toString=c(f.toString,f)}this.prototype[u]=d}return this}var l=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();return{create:r,Methods:{addMethods:s}}}();t.exports?t.exports.Class=w:t.Class=w}(e),e.namespace("Rickshaw.Compat.ClassList"),e.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){"use strict";var e="classList",i="prototype",n=(t.HTMLElement||t.Element)[i],r=Object,s=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[i].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},o=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},h=function(t){for(var e=s.call(t.className),i=e?e.split(/\s+/):[],n=0,r=i.length;r>n;n++)this.push(i[n]);this._updateClassName=function(){t.className=this.toString()}},c=h[i]=[],u=function(){return new h(this)};if(o[i]=Error[i],c.item=function(t){return this[t]||null},c.contains=function(t){return t+="",-1!==l(this,t)},c.add=function(t){t+="",-1===l(this,t)&&(this.push(t),this._updateClassName())},c.remove=function(t){t+="";var e=l(this,t);-1!==e&&(this.splice(e,1),this._updateClassName())},c.toggle=function(t){t+="",-1===l(this,t)?this.add(t):this.remove(t)},c.toString=function(){return this.join(" ")},r.defineProperty){var d={get:u,enumerable:!0,configurable:!0};try{r.defineProperty(n,e,d)}catch(f){-2146823252===f.number&&(d.enumerable=!1,r.defineProperty(n,e,d))}}else r[i].__defineGetter__&&n.__defineGetter__(e,u)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new e.Compat.ClassList,e.namespace("Rickshaw.Graph"),e.Graph=function(i){var n=this;this.initialize=function(e){if(!e.element)throw"Rickshaw.Graph needs a reference to an element";if(1!==e.element.nodeType)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=e.element,this.series=e.series,this.window={},this.updateCallbacks=[],this.configureCallbacks=[],this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0,preserve:!1,xScale:void 0,yScale:void 0,stack:!0},this._loadRenderers(),this.configure(e),this.validateSeries(e.series),this.series.active=function(){return n.series.filter(function(t){return!t.disabled})},this.setSize({width:e.width,height:e.height}),this.element.classList.add("rickshaw_graph"),this.vis=t.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height),this.discoverRange()},this._loadRenderers=function(){for(var t in e.Graph.Renderer)if(t&&e.Graph.Renderer.hasOwnProperty(t)){var i=e.Graph.Renderer[t];i&&i.prototype&&i.prototype.render&&n.registerRenderer(new i({graph:n}))}},this.validateSeries=function(t){if(!(Array.isArray(t)||t instanceof e.Series)){var i=Object.prototype.toString.apply(t);throw"series is not an array: "+i}t.forEach(function(t){if(!(t instanceof Object))throw"series element is not an object: "+t;if(!t.data)throw"series has no data: "+JSON.stringify(t);if(!Array.isArray(t.data))throw"series data is not an array: "+JSON.stringify(t.data);if(t.data.length>0){var e=t.data[0].x,i=t.data[0].y;if("number"!=typeof e||"number"!=typeof i&&null!==i)throw"x and y properties of points should be numbers instead of "+typeof e+" and "+typeof i}if(t.data.length>=3&&(t.data[2].x<t.data[1].x||t.data[1].x<t.data[0].x||t.data[t.data.length-1].x<t.data[0].x))throw"series data needs to be sorted on x values for series name: "+t.name},this)},this.dataDomain=function(){var e=this.series.map(function(t){return t.data}),i=t.min(e.map(function(t){return t[0].x})),n=t.max(e.map(function(t){return t[t.length-1].x}));return[i,n]},this.discoverRange=function(){var e=this.renderer.domain();this.x=(this.xScale||t.scale.linear()).copy().domain(e.x).range([0,this.width]),this.y=(this.yScale||t.scale.linear()).copy().domain(e.y).range([this.height,0]),this.x.magnitude=t.scale.linear().domain([e.x[0]-e.x[0],e.x[1]-e.x[0]]).range([0,this.width]),this.y.magnitude=t.scale.linear().domain([e.y[0]-e.y[0],e.y[1]-e.y[0]]).range([0,this.height])},this.render=function(){this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(t){t()})},this.update=this.render,this.stackData=function(){var i=this.series.active().map(function(t){return t.data}).map(function(t){return t.filter(function(t){return this._slice(t)},this)},this),r=this.preserve;r||this.series.forEach(function(t){t.scale&&(r=!0)}),i=r?e.clone(i):i,this.series.active().forEach(function(t,e){if(t.scale){var n=i[e];n&&n.forEach(function(e){e.y=t.scale(e.y)})}}),this.stackData.hooks.data.forEach(function(t){i=t.f.apply(n,[i])});var s;if(!this.renderer.unstack){this._validateStackable();var a=t.layout.stack();a.offset(n.offset),s=a(i)}s=s||i,this.renderer.unstack&&s.forEach(function(t){t.forEach(function(t){t.y0=void 0===t.y0?0:t.y0})}),this.stackData.hooks.after.forEach(function(t){s=t.f.apply(n,[i])});var o=0;return this.series.forEach(function(t){t.disabled||(t.stack=s[o++])}),this.stackedData=s,s},this._validateStackable=function(){var t,e=this.series;e.forEach(function(e){if(t=t||e.data.length,t&&e.data.length!=t)throw"stacked series cannot have differing numbers of points: "+t+" vs "+e.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(t){if(this.window.xMin||this.window.xMax){var e=!0;return this.window.xMin&&t.x<this.window.xMin&&(e=!1),this.window.xMax&&t.x>this.window.xMax&&(e=!1),e}return!0},this.onUpdate=function(t){this.updateCallbacks.push(t)},this.onConfigure=function(t){this.configureCallbacks.push(t)},this.registerRenderer=function(t){this._renderers=this._renderers||{},this._renderers[t.name]=t},this.configure=function(t){this.config=this.config||{},(t.width||t.height)&&this.setSize(t),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this?this[e]:this.defaults[e]},this),e.keys(this.config).forEach(function(t){this[t]=this.config[t]},this),"stack"in t&&(t.unstack=!t.stack);var i=t.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(i,t),this.configureCallbacks.forEach(function(e){e(t)})},this.setRenderer=function(t,e){if("function"==typeof t)this.renderer=new t({graph:n}),this.registerRenderer(this.renderer);else{if(!this._renderers[t])throw"couldn't find renderer "+t;this.renderer=this._renderers[t]}"object"==typeof e&&this.renderer.configure(e)},this.setSize=function(t){if(t=t||{},void 0!==typeof window)var e=window.getComputedStyle(this.element,null),i=parseInt(e.getPropertyValue("width"),10),n=parseInt(e.getPropertyValue("height"),10);this.width=t.width||i||400,this.height=t.height||n||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(i)},e.namespace("Rickshaw.Fixtures.Color"),e.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},e.namespace("Rickshaw.Fixtures.RandomData"),e.Fixtures.RandomData=function(t){t=t||1;var e=200,i=Math.floor((new Date).getTime()/1e3);this.addData=function(n){var r=100*Math.random()+15+e,s=n[0].length,a=1;n.forEach(function(e){var n=20*Math.random(),o=r/25+a++ +15*(Math.cos(s*a*11/960)+2)+7*(Math.cos(s/7)+2)+1*(Math.cos(s/17)+2);e.push({x:s*t+i,y:o+n})}),e=.85*r},this.removeData=function(e){e.forEach(function(t){t.shift()}),i+=t}},e.namespace("Rickshaw.Fixtures.Time"),e.Fixtures.Time=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getUTCFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getUTCMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var i,n,r;if("month"==e.name){if(i=new Date(1e3*t),n=Date.UTC(i.getUTCFullYear(),i.getUTCMonth())/1e3,n==t)return t;r=i.getUTCFullYear();var s=i.getUTCMonth();return 11==s?(s=0,r+=1):s+=1,Date.UTC(r,s)/1e3}return"year"==e.name?(i=new Date(1e3*t),n=Date.UTC(i.getUTCFullYear(),0)/1e3,n==t?t:(r=i.getUTCFullYear()+1,Date.UTC(r,0)/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Time.Local"),e.Fixtures.Time.Local=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var i,n,r;if("day"==e.name){var s=new Date(1e3*(t+e.seconds-1)),a=new Date(0);return a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),a.setDate(s.getDate()),a.setMonth(s.getMonth()),a.setFullYear(s.getFullYear()),a.getTime()/1e3}if("month"==e.name){if(i=new Date(1e3*t),n=new Date(i.getFullYear(),i.getMonth()).getTime()/1e3,n==t)return t;r=i.getFullYear();var o=i.getMonth();return 11==o?(o=0,r+=1):o+=1,new Date(r,o).getTime()/1e3}return"year"==e.name?(i=new Date(1e3*t),n=new Date(i.getUTCFullYear(),0).getTime()/1e3,n==t?t:(r=i.getFullYear()+1,new Date(r,0).getTime()/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Number"),e.Fixtures.Number.formatKMBT=function(t){var e=Math.abs(t);return e>=1e12?t/1e12+"T":e>=1e9?t/1e9+"B":e>=1e6?t/1e6+"M":e>=1e3?t/1e3+"K":1>e&&t>0?t.toFixed(2):0===e?"":t},e.Fixtures.Number.formatBase1024KMGTP=function(t){var e=Math.abs(t);return e>=0x4000000000000?t/0x4000000000000+"P":e>=1099511627776?t/1099511627776+"T":e>=1073741824?t/1073741824+"G":e>=1048576?t/1048576+"M":e>=1024?t/1024+"K":1>e&&t>0?t.toFixed(2):0===e?"":t},e.namespace("Rickshaw.Color.Palette"),e.Color.Palette=function(i){var n=new e.Fixtures.Color;if(i=i||{},this.schemes={},this.scheme=n.schemes[i.scheme]||i.scheme||n.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,i.interpolatedStopCount){var r,s,a=this.scheme.length-1,o=[];for(r=0;a>r;r++){o.push(this.scheme[r]);var l=t.interpolateHsl(this.scheme[r],this.scheme[r+1]);for(s=1;s<i.interpolatedStopCount;s++)o.push(l(1/i.interpolatedStopCount*s))}o.push(this.scheme[this.scheme.length-1]),
this.scheme=o}this.rotateCount=this.scheme.length,this.color=function(t){return this.scheme[t]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){if(Array.isArray(this.scheme)){var e;return this.generatorIndex==2*this.rotateCount-1?(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(e),e}}},e.namespace("Rickshaw.Graph.Ajax"),e.Graph.Ajax=e.Class.create({initialize:function(t){this.dataURL=t.dataURL,this.onData=t.onData||function(t){return t},this.onComplete=t.onComplete||function(){},this.onError=t.onError||function(){},this.args=t,this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(t){t=this.onData(t),this.args.series=this._splice({data:t,series:this.args.series}),this.graph=this.graph||new e.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(t){var e=t.data,i=t.series;return t.series?(i.forEach(function(t){var i=t.key||t.name;if(!i)throw"series needs a key or a name";e.forEach(function(e){var n=e.key||e.name;if(!n)throw"data needs a key or a name";if(i==n){var r=["color","name","data"];r.forEach(function(i){e[i]&&(t[i]=e[i])})}})}),i):e}}),e.namespace("Rickshaw.Graph.Annotate"),e.Graph.Annotate=function(t){this.graph=t.graph;this.elements={intimeline:t.element};var i=this;this.data={},this.elements.intimeline.classList.add("rickshaw_annotation_intimeline"),this.add=function(t,e,n){i.data[t]=i.data[t]||{boxes:[]},i.data[t].boxes.push({content:e,end:n})},this.update=function(){e.keys(i.data).forEach(function(t){var e=i.data[t],n=i.graph.x(t);if(0>n||n>i.graph.x.range()[1])return e.element&&(e.line.classList.add("offscreen"),e.element.style.display="none"),void e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.add("offscreen")});if(!e.element){var r=e.element=document.createElement("div");r.classList.add("annotation"),this.elements.intimeline.appendChild(r),r.addEventListener("click",function(){r.classList.toggle("active"),e.line.classList.toggle("active"),e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.toggle("active")})},!1)}e.element.style.left=n+"px",e.element.style.display="block",e.boxes.forEach(function(t){var r=t.element;if(r||(r=t.element=document.createElement("div"),r.classList.add("content"),r.innerHTML=t.content,e.element.appendChild(r),e.line=document.createElement("div"),e.line.classList.add("annotation_line"),i.graph.element.appendChild(e.line),t.end&&(t.rangeElement=document.createElement("div"),t.rangeElement.classList.add("annotation_range"),i.graph.element.appendChild(t.rangeElement))),t.end){var s=n,a=Math.min(i.graph.x(t.end),i.graph.x.range()[1]);s>a&&(a=n,s=Math.max(i.graph.x(t.end),i.graph.x.range()[0]));var o=a-s;t.rangeElement.style.left=s+"px",t.rangeElement.style.width=o+"px",t.rangeElement.classList.remove("offscreen")}e.line.classList.remove("offscreen"),e.line.style.left=n+"px"})},this)},this.graph.onUpdate(function(){i.update()})},e.namespace("Rickshaw.Graph.Axis.Time"),e.Graph.Axis.Time=function(t){var i=this;this.graph=t.graph,this.elements=[],this.ticksTreatment=t.ticksTreatment||"plain",this.fixedTimeUnit=t.timeUnit;var n=t.timeFixture||new e.Fixtures.Time;this.appropriateTimeUnit=function(){var t,e=n.units,i=this.graph.x.domain(),r=i[1]-i[0];return e.forEach(function(e){Math.floor(r/e.seconds)>=2&&(t=t||e)}),t||n.units[n.units.length-1]},this.tickOffsets=function(){for(var t=this.graph.x.domain(),e=this.fixedTimeUnit||this.appropriateTimeUnit(),i=Math.ceil((t[1]-t[0])/e.seconds),r=t[0],s=[],a=0;i>a;a++){var o=n.ceil(r,e);r=o+e.seconds/2,s.push({value:o,unit:e})}return s},this.render=function(){this.elements.forEach(function(t){t.parentNode.removeChild(t)}),this.elements=[];var t=this.tickOffsets();t.forEach(function(t){if(!(i.graph.x(t.value)>i.graph.x.range()[1])){var e=document.createElement("div");e.style.left=i.graph.x(t.value)+"px",e.classList.add("x_tick"),e.classList.add(i.ticksTreatment);var n=document.createElement("div");n.classList.add("title"),n.innerHTML=t.unit.formatter(new Date(1e3*t.value)),e.appendChild(n),i.graph.element.appendChild(e),i.elements.push(e)}})},this.graph.onUpdate(function(){i.render()})},e.namespace("Rickshaw.Graph.Axis.X"),e.Graph.Axis.X=function(e){var i=this,n=.1;this.initialize=function(e){this.graph=e.graph,this.orientation=e.orientation||"top",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",e.element?(this.element=e.element,this._discoverSize(e.element,e),this.vis=t.select(e.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){i.render()})},this.setSize=function(t){if(t=t||{},this.element){this._discoverSize(this.element.parentNode,t),this.vis.attr("height",this.height).attr("width",this.width*(1+n));var e=Math.floor(this.width*n/2);this.element.style.left=-1*e+"px"}},this.render=function(){void 0!==this._renderWidth&&this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var i=t.svg.axis().scale(this.graph.x).orient(this.orientation);i.tickFormat(e.tickFormat||function(t){return t}),this.tickValues&&i.tickValues(this.tickValues),this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var r,s=Math.floor(this.width*n/2)||0;if("top"==this.orientation){var a=this.height||this.graph.height;r="translate("+s+","+a+")"}else r="translate("+s+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",r).call(i.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var o=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(i.ticks(this.ticks).tickSubdivide(0).tickSize(o)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)}),this._renderHeight=this.graph.height},this._discoverSize=function(t,e){if("undefined"!=typeof window){var i=window.getComputedStyle(t,null),r=parseInt(i.getPropertyValue("height"),10);if(!e.auto)var s=parseInt(i.getPropertyValue("width"),10)}this.width=(e.width||s||this.graph.width)*(1+n),this.height=e.height||r||40},this.initialize(e)},e.namespace("Rickshaw.Graph.Axis.Y"),e.Graph.Axis.Y=e.Class.create({initialize:function(e){this.graph=e.graph,this.orientation=e.orientation||"right",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",this.tickFormat=e.tickFormat||function(t){return t},this.berthRate=.1,e.element?(this.element=e.element,this.vis=t.select(e.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis;var i=this;this.graph.onUpdate(function(){i.render()})},setSize:function(t){if(t=t||{},this.element){if("undefined"!=typeof window){var e=window.getComputedStyle(this.element.parentNode,null),i=parseInt(e.getPropertyValue("width"),10);if(!t.auto)var n=parseInt(e.getPropertyValue("height"),10)}this.width=t.width||i||this.graph.width*this.berthRate,this.height=t.height||n||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var r=this.height*this.berthRate;"left"==this.orientation&&(this.element.style.top=-1*r+"px")}},render:function(){void 0!==this._renderHeight&&this.graph.height!==this._renderHeight&&this.setSize({auto:!0}),this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var t=this._drawAxis(this.graph.y);this._drawGrid(t),this._renderHeight=this.graph.height},_drawAxis:function(e){var i=t.svg.axis().scale(e).orient(this.orientation);if(i.tickFormat(this.tickFormat),this.tickValues&&i.tickValues(this.tickValues),"left"==this.orientation)var n=this.height*this.berthRate,r="translate("+this.width+", "+n+")";return this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",r).call(i.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),i},_drawGrid:function(t){var e=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(e)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)})}}),e.namespace("Rickshaw.Graph.Axis.Y.Scaled"),e.Graph.Axis.Y.Scaled=e.Class.create(e.Graph.Axis.Y,{initialize:function($super,t){if("undefined"==typeof t.scale)throw new Error("Scaled requires scale");this.scale=t.scale,"undefined"==typeof t.grid?this.grid=!0:this.grid=t.grid,$super(t)},_drawAxis:function($super,e){var i=this.scale.domain(),n=this.graph.renderer.domain().y,r=[Math.min.apply(Math,i),Math.max.apply(Math,i)],s=t.scale.linear().domain([0,1]).range(r),a=[s(n[0]),s(n[1])],o=t.scale.linear().domain(r).range(a),l=this.scale.copy().domain(i.map(o)).range(e.range());return $super(l)},_drawGrid:function($super,t){this.grid&&$super(t)}}),e.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),e.Graph.Behavior.Series.Highlight=function(e){this.graph=e.graph,this.legend=e.legend;var i=this,n={},r=null,s=e.disabledColor||function(e){return t.interpolateRgb(e,t.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(t){t.element.addEventListener("mouseover",function(){r||(r=t,i.legend.lines.forEach(function(e){if(t!==e)n[e.series.name]=n[e.series.name]||e.series.color,e.series.color=s(e.series.color);else if(i.graph.renderer.unstack&&(e.series.renderer?e.series.renderer.unstack:!0)){var r=i.graph.series.indexOf(e.series);e.originalIndex=r;var a=i.graph.series.splice(r,1)[0];i.graph.series.push(a)}}),i.graph.update())},!1),t.element.addEventListener("mouseout",function(){r&&(r=null,i.legend.lines.forEach(function(e){if(t===e&&e.hasOwnProperty("originalIndex")){var r=i.graph.series.pop();i.graph.series.splice(e.originalIndex,0,r),delete e.originalIndex}n[e.series.name]&&(e.series.color=n[e.series.name])}),i.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(t){i.addHighlightEvents(t)})},e.namespace("Rickshaw.Graph.Behavior.Series.Order"),e.Graph.Behavior.Series.Order=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if("undefined"==typeof window.jQuery)throw"couldn't find jQuery at window.jQuery";if("undefined"==typeof window.jQuery.ui)throw"couldn't find jQuery UI at window.jQuery.ui";jQuery(function(){jQuery(e.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(){var t=[];jQuery(e.legend.list).find("li").each(function(e,i){i.series&&t.push(i.series)});for(var i=e.graph.series.length-1;i>=0;i--)e.graph.series[i]=t.shift();e.graph.update()}}),jQuery(e.legend.list).disableSelection()}),this.graph.onUpdate(function(){var t=window.getComputedStyle(e.legend.element).height;e.legend.element.style.height=t})},e.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),e.Graph.Behavior.Series.Toggle=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if(this.addAnchor=function(t){var i=document.createElement("a");i.innerHTML="&#10004;",i.classList.add("action"),t.element.insertBefore(i,t.element.firstChild),i.onclick=function(){if(t.series.disabled)t.series.enable(),t.element.classList.remove("disabled");else{if(this.graph.series.filter(function(t){return!t.disabled}).length<=1)return;t.series.disable(),t.element.classList.add("disabled")}}.bind(this);var n=t.element.getElementsByTagName("span")[0];n.onclick=function(){var i=t.series.disabled;if(!i)for(var n=0;n<e.legend.lines.length;n++){var r=e.legend.lines[n];if(t.series===r.series);else if(!r.series.disabled){i=!0;break}}i?(t.series.enable(),t.element.classList.remove("disabled"),e.legend.lines.forEach(function(e){t.series===e.series||(e.series.disable(),e.element.classList.add("disabled"))})):e.legend.lines.forEach(function(t){t.series.enable(),t.element.classList.remove("disabled")})}},this.legend){var i=jQuery;"undefined"!=typeof i&&i(this.legend.list).sortable&&i(this.legend.list).sortable({start:function(t,e){e.item.bind("no.onclick",function(t){t.preventDefault()})},stop:function(t,e){setTimeout(function(){e.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(t){e.addAnchor(t)})}this._addBehavior=function(){this.graph.series.forEach(function(t){t.disable=function(){if(e.graph.series.length<=1)throw"only one series left";t.disabled=!0,e.graph.update()},t.enable=function(){t.disabled=!1,e.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},e.namespace("Rickshaw.Graph.HoverDetail"),e.Graph.HoverDetail=e.Class.create({initialize:function(t){var e=this.graph=t.graph;this.xFormatter=t.xFormatter||function(t){return new Date(1e3*t).toUTCString()},this.yFormatter=t.yFormatter||function(t){return null===t?t:t.toFixed(2)};var i=this.element=document.createElement("div");i.className="detail",this.visible=!0,e.element.appendChild(i),this.lastEvent=null,this._addListeners(),this.onShow=t.onShow,this.onHide=t.onHide,this.onRender=t.onRender,this.formatter=t.formatter||this.formatter},formatter:function(t,e,i,n,r){return t.name+":&nbsp;"+r},update:function(e){if(e=e||this.lastEvent,e&&(this.lastEvent=e,e.target.nodeName.match(/^(path|svg|rect|circle)$/))){var i,n=this.graph,r=e.offsetX||e.layerX,s=e.offsetY||e.layerY,a=0,o=[];if(this.graph.series.active().forEach(function(e){var l=this.graph.stackedData[a++];if(l.length){var h=n.x.invert(r),c=t.scale.linear().domain([l[0].x,l.slice(-1)[0].x]).range([0,l.length-1]),u=Math.round(c(h));u==l.length-1&&u--;for(var d=Math.min(u||0,l.length-1),f=u;f<l.length-1&&(l[f]&&l[f+1]);){if(l[f].x<=h&&l[f+1].x>h){d=Math.abs(h-l[f].x)<Math.abs(h-l[f+1].x)?f:f+1;break}l[f+1].x<=h?f++:f--}0>d&&(d=0);var p=l[d],g=Math.sqrt(Math.pow(Math.abs(n.x(p.x)-r),2)+Math.pow(Math.abs(n.y(p.y+p.y0)-s),2)),m=e.xFormatter||this.xFormatter,v=e.yFormatter||this.yFormatter,y={formattedXValue:m(p.x),formattedYValue:v(e.scale?e.scale.invert(p.y):p.y),series:e,value:p,distance:g,order:a,name:e.name};(!i||g<i.distance)&&(i=y),o.push(y)}},this),i){i.active=!0;var l=i.value.x,h=i.formattedXValue;this.element.innerHTML="",this.element.style.left=n.x(l)+"px",this.visible&&this.render({points:o,detail:o,mouseX:r,mouseY:s,formattedXValue:h,domainX:l})}}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(t){var e=this.graph,i=t.points,n=i.filter(function(t){return t.active}).shift();if(null!==n.value.y){var r=n.formattedXValue,s=n.formattedYValue;this.element.innerHTML="",this.element.style.left=e.x(n.value.x)+"px";var a=document.createElement("div");a.className="x_label",a.innerHTML=r,this.element.appendChild(a);var o=document.createElement("div");o.className="item";var l=n.series,h=l.scale?l.scale.invert(n.value.y):n.value.y;o.innerHTML=this.formatter(l,n.value.x,h,r,s,n),o.style.top=this.graph.y(n.value.y0+n.value.y)+"px",this.element.appendChild(o);var c=document.createElement("div");c.className="dot",c.style.top=o.style.top,c.style.borderColor=l.color,this.element.appendChild(c),n.active&&(o.classList.add("active"),c.classList.add("active"));var u=[a,o];u.forEach(function(t){t.classList.add("left")}),this.show();var d=this._calcLayoutError(u);if(d>0){u.forEach(function(t){t.classList.remove("left"),t.classList.add("right")});var f=this._calcLayoutError(u);f>d&&u.forEach(function(t){t.classList.remove("right"),t.classList.add("left")})}"function"==typeof this.onRender&&this.onRender(t)}},_calcLayoutError:function(t){var e=this.element.parentNode.getBoundingClientRect(),i=0;t.forEach(function(t){var n=t.getBoundingClientRect();n.width&&(n.right>e.right&&(i+=n.right-e.right),n.left<e.left&&(i+=e.left-n.left))});return i},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(t){this.visible=!0,this.update(t)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(t){!t.relatedTarget||t.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),e.namespace("Rickshaw.Graph.JSONP"),e.Graph.JSONP=e.Class.create(e.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),e.namespace("Rickshaw.Graph.Legend"),e.Graph.Legend=e.Class.create({className:"rickshaw_legend",initialize:function(t){this.element=t.element,this.graph=t.graph,this.naturalOrder=t.naturalOrder,this.element.classList.add(this.className),this.list=document.createElement("ul"),this.element.appendChild(this.list),this.render(),this.graph.onUpdate(function(){})},render:function(){for(var t=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.lines=[];var e=this.graph.series.map(function(t){return t});this.naturalOrder||(e=e.reverse()),e.forEach(function(e){t.addLine(e)})},addLine:function(e){var i=document.createElement("li");i.className="line",e.disabled&&(i.className+=" disabled"),e.className&&t.select(i).classed(e.className,!0);var n=document.createElement("div");n.className="swatch",n.style.backgroundColor=e.color,i.appendChild(n);var r=document.createElement("span");r.className="label",r.innerHTML=e.name,i.appendChild(r),this.list.appendChild(i),i.series=e,e.noLegend&&(i.style.display="none");var s={element:i,series:e};return this.shelving&&(this.shelving.addAnchor(s),this.shelving.updateBehaviour()),this.highlighter&&this.highlighter.addHighlightEvents(s),this.lines.push(s),i}}),e.namespace("Rickshaw.Graph.RangeSlider"),e.Graph.RangeSlider=e.Class.create({initialize:function(t){var e=(this.element=t.element,this.graph=t.graph);this.slideCallbacks=[],this.build(),e.onUpdate(function(){this.update()}.bind(this))},build:function(){var t=this.element,e=this.graph,i=jQuery,n=e.dataDomain(),r=this;i(function(){i(t).slider({range:!0,min:n[0],max:n[1],values:[n[0],n[1]],slide:function(t,i){if(!(i.values[1]<=i.values[0])){e.window.xMin=i.values[0],e.window.xMax=i.values[1],e.update();var n=e.dataDomain();n[0]==i.values[0]&&(e.window.xMin=void 0),n[1]==i.values[1]&&(e.window.xMax=void 0),r.slideCallbacks.forEach(function(t){t(e,e.window.xMin,e.window.xMax)})}}})}),i(t)[0].style.width=e.width+"px"},update:function(){var t=this.element,e=this.graph,i=jQuery,n=i(t).slider("option","values"),r=e.dataDomain();i(t).slider("option","min",r[0]),i(t).slider("option","max",r[1]),null==e.window.xMin&&(n[0]=r[0]),null==e.window.xMax&&(n[1]=r[1]),i(t).slider("option","values",n)},onSlide:function(t){this.slideCallbacks.push(t)}}),e.namespace("Rickshaw.Graph.RangeSlider.Preview"),e.Graph.RangeSlider.Preview=e.Class.create({initialize:function(e){if(!e.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!e.graph&&!e.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=e.element,this.element.style.position="relative",this.graphs=e.graph?[e.graph]:e.graphs,this.defaults={height:75,width:400,gripperColor:void 0,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2},this.heightRatio=e.heightRatio||this.defaults.heightRatio,this.defaults.gripperColor=t.rgb(this.defaults.frameColor).darker().toString(),this.configureCallbacks=[],this.slideCallbacks=[],this.previews=[],e.width||(this.widthFromGraph=!0),e.height||(this.heightFromGraph=!0),(this.widthFromGraph||this.heightFromGraph)&&this.graphs[0].onConfigure(function(){this.configure(e),this.render()}.bind(this)),e.width=e.width||this.graphs[0].width||this.defaults.width,e.height=e.height||this.graphs[0].height*this.heightRatio||this.defaults.height,this.configure(e),this.render()},onSlide:function(t){this.slideCallbacks.push(t)},onConfigure:function(t){this.configureCallbacks.push(t)},configure:function(t){this.config=this.config||{},this.configureCallbacks.forEach(function(e){e(t)}),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this.config?this.config[e]:this.defaults[e]},this),("width"in t||"height"in t)&&(this.widthFromGraph&&(this.config.width=this.graphs[0].width),this.heightFromGraph&&(this.config.height=this.graphs[0].height*this.heightRatio,this.previewHeight=this.config.height),this.previews.forEach(function(t){var e=this.previewHeight/this.graphs.length-2*this.config.frameTopThickness,i=this.config.width-2*this.config.frameHandleThickness;if(t.setSize({width:i,height:e}),this.svg){var n=e+2*this.config.frameHandleThickness,r=i+2*this.config.frameHandleThickness;this.svg.style("width",r+"px"),this.svg.style("height",n+"px")}},this))},render:function(){var i=this;this.svg=t.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]),this.previewHeight=this.config.height-2*this.config.frameTopThickness,this.previewWidth=this.config.width-2*this.config.frameHandleThickness,this.currentFrame=[0,this.previewWidth];var n=function(t){var n=e.extend({},t.config),r=i.previewHeight/i.graphs.length,s=t.renderer.name;e.extend(n,{element:this.appendChild(document.createElement("div")),height:r,width:i.previewWidth,series:t.series,renderer:s});var a=new e.Graph(n);i.previews.push(a),t.onUpdate(function(){a.render(),i.render()}),t.onConfigure(function(t){delete t.height,t.width=t.width-2*i.config.frameHandleThickness,a.configure(t),a.render()}),a.render()},r=t.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs),s="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";r.enter().append("div").classed("rickshaw_range_slider_preview_container",!0).style("-webkit-transform",s).style("-moz-transform",s).style("-ms-transform",s).style("transform",s).each(n),r.exit().remove();var a=this.graphs[0],o=t.scale.linear().domain([0,this.previewWidth]).range(a.dataDomain()),l=[a.window.xMin,a.window.xMax];this.currentFrame[0]=void 0===l[0]?0:Math.round(o.invert(l[0])),this.currentFrame[0]<0&&(this.currentFrame[0]=0),this.currentFrame[1]=void 0===l[1]?this.previewWidth:o.invert(l[1]),this.currentFrame[1]-this.currentFrame[0]<i.config.minimumFrameWidth&&(this.currentFrame[1]=(this.currentFrame[0]||0)+i.config.minimumFrameWidth),this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",!0).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0),this._renderDimming(),this._renderFrame(),this._renderGrippers(),this._renderHandles(),this._renderMiddle(),this._registerMouseEvents()},_renderDimming:function(){var t=this.svg.selectAll("path.dimming").data([null]);t.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",!0);var e="";e+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness,e+=" h "+this.previewWidth,e+=" v "+this.previewHeight,e+=" h "+-this.previewWidth,e+=" z ",e+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+Math.min(this.currentFrame[1]+2*this.config.frameHandleThickness,this.previewWidth+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderFrame:function(){var t=this.svg.selectAll("path.frame").data([null]);t.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",!0);var e="";e+=" M "+this.currentFrame[0]+" 0",e+=" H "+(this.currentFrame[1]+2*this.config.frameHandleThickness),e+=" V "+this.config.height,e+=" H "+this.currentFrame[0],e+=" z",e+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderGrippers:function(){var t=this.svg.selectAll("path.gripper").data([null]);t.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",!0);var e="";[.4,.6].forEach(function(t){e+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*t)+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height),e+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+t))+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height)}.bind(this)),t.attr("d",e)},_renderHandles:function(){var t=this.svg.selectAll("rect.left_handle").data([null]);t.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",!0),t.attr("x",this.currentFrame[0]).attr("height",this.config.height);var e=this.svg.selectAll("rect.right_handle").data([null]);e.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",!0),e.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var t=this.svg.selectAll("rect.middle_handle").data([null]);t.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",!0),t.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){function e(){l.stop=h._getClientXFromEvent(t.event,l);var e=l.stop-l.start,i=h.frameBeforeDrag.slice(0),n=h.config.minimumFrameWidth;l.rigid&&(n=h.frameBeforeDrag[1]-h.frameBeforeDrag[0]),l.left&&(i[0]=Math.max(i[0]+e,0)),l.right&&(i[1]=Math.min(i[1]+e,h.previewWidth));var r=i[1]-i[0];n>=r&&(l.left&&(i[0]=i[1]-n),l.right&&(i[1]=i[0]+n),i[0]<=0&&(i[1]-=i[0],i[0]=0),i[1]>=h.previewWidth&&(i[0]-=i[1]-h.previewWidth,i[1]=h.previewWidth)),h.graphs.forEach(function(e){var n=t.scale.linear().interpolate(t.interpolateNumber).domain([0,h.previewWidth]).range(e.dataDomain()),r=[n(i[0]),n(i[1])];h.slideCallbacks.forEach(function(t){t(e,r[0],r[1])}),0===i[0]&&(r[0]=void 0),i[1]===h.previewWidth&&(r[1]=void 0),e.window.xMin=r[0],e.window.xMax=r[1],e.update()})}function i(){l.target=t.event.target,l.start=h._getClientXFromEvent(t.event,l),h.frameBeforeDrag=h.currentFrame.slice(),t.event.preventDefault?t.event.preventDefault():t.event.returnValue=!1,t.select(document).on("mousemove.rickshaw_range_slider_preview",e),t.select(document).on("mouseup.rickshaw_range_slider_preview",a),t.select(document).on("touchmove.rickshaw_range_slider_preview",e),t.select(document).on("touchend.rickshaw_range_slider_preview",a),t.select(document).on("touchcancel.rickshaw_range_slider_preview",a)}function n(){l.left=!0,i()}function r(){l.right=!0,i()}function s(){l.left=!0,l.right=!0,l.rigid=!0,i()}function a(){t.select(document).on("mousemove.rickshaw_range_slider_preview",null),t.select(document).on("mouseup.rickshaw_range_slider_preview",null),t.select(document).on("touchmove.rickshaw_range_slider_preview",null),t.select(document).on("touchend.rickshaw_range_slider_preview",null),t.select(document).on("touchcancel.rickshaw_range_slider_preview",null),delete h.frameBeforeDrag,l.left=!1,l.right=!1,l.rigid=!1}var o=t.select(this.element),l={target:null,start:null,stop:null,left:!1,right:!1,rigid:!1},h=this;o.select("rect.left_handle").on("mousedown",n),o.select("rect.right_handle").on("mousedown",r),o.select("rect.middle_handle").on("mousedown",s),o.select("rect.left_handle").on("touchstart",n),o.select("rect.right_handle").on("touchstart",r),o.select("rect.middle_handle").on("touchstart",s)},_getClientXFromEvent:function(t,e){switch(t.type){case"touchstart":case"touchmove":for(var i=t.changedTouches,n=null,r=0;r<i.length;r++)if(i[r].target===e.target){n=i[r];break}return null!==n?n.clientX:void 0;default:return t.clientX}}}),e.namespace("Rickshaw.Graph.Renderer"),e.Graph.Renderer=e.Class.create({initialize:function(t){this.graph=t.graph,this.tension=t.tension||this.tension,this.configure(t)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(t){var e=t||this.graph.stackedData||this.graph.stackData(),i=+(1/0),n=-(1/0),r=+(1/0),s=-(1/0);return e.forEach(function(t){t.forEach(function(t){if(null!=t.y){var e=t.y+t.y0;r>e&&(r=e),e>s&&(s=e)}}),t.length&&(t[0].x<i&&(i=t[0].x),t[t.length-1].x>n&&(n=t[t.length-1].x))}),i-=(n-i)*this.padding.left,n+=(n-i)*this.padding.right,r="auto"===this.graph.min?r:this.graph.min||0,s=void 0===this.graph.max?s:this.graph.max,("auto"===this.graph.min||0>r)&&(r-=(s-r)*this.padding.bottom),void 0===this.graph.max&&(s+=(s-r)*this.padding.top),{x:[i,n],y:[r,s]}},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis;n.selectAll("*").remove();var r=i.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),s=n.selectAll("path.path").data(r).enter().append("svg:path").classed("path",!0).attr("d",this.seriesPathFactory());if(this.stroke)var a=n.selectAll("path.stroke").data(r).enter().append("svg:path").classed("stroke",!0).attr("d",this.seriesStrokeFactory());var o=0;i.forEach(function(t){t.disabled||(t.path=s[0][o],this.stroke&&(t.stroke=a[0][o]),this._styleSeries(t),o++)},this)},_styleSeries:function(e){var i=this.fill?e.color:"none",n=this.stroke?e.color:"none";e.path.setAttribute("fill",i),e.path.setAttribute("stroke",n),e.path.setAttribute("stroke-width",this.strokeWidth),e.className&&t.select(e.path).classed(e.className,!0),e.className&&this.stroke&&t.select(e.stroke).classed(e.className,!0)},configure:function(t){t=t||{},e.keys(this.defaults()).forEach(function(i){return t.hasOwnProperty(i)?void("object"==typeof this.defaults()[i]?e.keys(this.defaults()[i]).forEach(function(e){this[i][e]=void 0!==t[i][e]?t[i][e]:void 0!==this[i][e]?this[i][e]:this.defaults()[i][e]},this):this[i]=void 0!==t[i]?t[i]:void 0!==this[i]?this[i]:void 0!==this.graph[i]?this.graph[i]:this.defaults()[i]):void(this[i]=this[i]||this.graph[i]||this.defaults()[i])},this)},setStrokeWidth:function(t){void 0!==t&&(this.strokeWidth=t)},setTension:function(t){void 0!==t&&(this.tension=t)}}),e.namespace("Rickshaw.Graph.Renderer.Line"),e.Graph.Renderer.Line=e.Class.create(e.Graph.Renderer,{name:"line",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var e=this.graph,i=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i}}),e.namespace("Rickshaw.Graph.Renderer.Stack"),e.Graph.Renderer.Stack=e.Class.create(e.Graph.Renderer,{name:"stack",defaults:function($super){return e.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var e=this.graph,i=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i}}),e.namespace("Rickshaw.Graph.Renderer.Bar"),e.Graph.Renderer.Bar=e.Class.create(e.Graph.Renderer,{name:"bar",defaults:function($super){var t=e.extend($super(),{gapSize:.05,unstack:!1});return delete t.tension,t},initialize:function($super,t){t=t||{},this.gapSize=t.gapSize||this.gapSize,$super(t)},domain:function($super){var t=$super(),e=this._frequentInterval(this.graph.stackedData.slice(-1).shift());
return t.x[1]+=Number(e.magnitude),t},barWidth:function(t){var e=this._frequentInterval(t.stack),i=this.graph.x.magnitude(e.magnitude)*(1-this.gapSize);return i},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis;n.selectAll("*").remove();var r=this.barWidth(i.active()[0]),s=0,a=i.filter(function(t){return!t.disabled}).length,o=this.unstack?r/a:r,l=function(t){var i=[1,0,0,t.y<0?-1:1,0,t.y<0?2*e.y.magnitude(Math.abs(t.y)):0];return"matrix("+i.join(",")+")"};i.forEach(function(t){if(!t.disabled){var i=(this.barWidth(t),n.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:rect").attr("x",function(t){return e.x(t.x)+s}).attr("y",function(t){return e.y(t.y0+Math.abs(t.y))*(t.y<0?-1:1)}).attr("width",o).attr("height",function(t){return e.y.magnitude(Math.abs(t.y))}).attr("transform",l));Array.prototype.forEach.call(i[0],function(e){e.setAttribute("fill",t.color)}),this.unstack&&(s+=o)}},this)},_frequentInterval:function(t){for(var i={},n=0;n<t.length-1;n++){var r=t[n+1].x-t[n].x;i[r]=i[r]||0,i[r]++}var s={count:0,magnitude:1};return e.keys(i).forEach(function(t){s.count<i[t]&&(s={count:i[t],magnitude:t})}),s}}),e.namespace("Rickshaw.Graph.Renderer.Area"),e.Graph.Renderer.Area=e.Class.create(e.Graph.Renderer,{name:"area",defaults:function($super){return e.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var e=this.graph,i=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i},seriesStrokeFactory:function(){var e=this.graph,i=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis;n.selectAll("*").remove();var r=this.unstack?"append":"insert",s=i.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=n.selectAll("path").data(s).enter()[r]("svg:g","g");a.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&a.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var o=0;i.forEach(function(t){t.disabled||(t.path=a[0][o++],this._styleSeries(t))},this)},_styleSeries:function(e){e.path&&(t.select(e.path).select(".area").attr("fill",e.color),this.stroke&&t.select(e.path).select(".line").attr("fill","none").attr("stroke",e.stroke||t.interpolateRgb(e.color,"black")(.125)).attr("stroke-width",this.strokeWidth),e.className&&e.path.setAttribute("class",e.className))}}),e.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),e.Graph.Renderer.ScatterPlot=e.Class.create(e.Graph.Renderer,{name:"scatterplot",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,t){$super(t)},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis,r=this.dotSize;n.selectAll("*").remove(),i.forEach(function(t){if(!t.disabled){var i=n.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:r});t.className&&i.classed(t.className,!0),Array.prototype.forEach.call(i[0],function(e){e.setAttribute("fill",t.color)})}},this)}}),e.namespace("Rickshaw.Graph.Renderer.Multi"),e.Graph.Renderer.Multi=e.Class.create(e.Graph.Renderer,{name:"multi",initialize:function($super,t){$super(t)},defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0})},configure:function($super,t){t=t||{},this.config=t,$super(t)},domain:function($super){this.graph.stackData();var e=[],i=this._groups();this._stack(i),i.forEach(function(t){var i=t.series.filter(function(t){return!t.disabled}).map(function(t){return t.stack});if(i.length){var n=null;n=t.renderer&&t.renderer.domain?t.renderer.domain(i):$super(i),e.push(n)}});var n=t.min(e.map(function(t){return t.x[0]})),r=t.max(e.map(function(t){return t.x[1]})),s=t.min(e.map(function(t){return t.y[0]})),a=t.max(e.map(function(t){return t.y[1]}));return{x:[n,r],y:[s,a]}},_groups:function(){var i=this.graph,n={};i.series.forEach(function(r){if(!r.disabled){if(!n[r.renderer]){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"g");i.vis[0][0].appendChild(a);var o=i._renderers[r.renderer],l={},h=[this.defaults(),o.defaults(),this.config,this.graph];h.forEach(function(t){e.extend(l,t)}),o.configure(l),n[r.renderer]={renderer:o,series:[],vis:t.select(a)}}n[r.renderer].series.push(r)}},this);var r=[];return Object.keys(n).forEach(function(t){var e=n[t];r.push(e)}),r},_stack:function(i){return i.forEach(function(i){var n=i.series.filter(function(t){return!t.disabled}),r=n.map(function(t){return t.stack});if(!i.renderer.unstack){var s=t.layout.stack(),a=e.clone(s(r));n.forEach(function(t,i){t._stack=e.clone(a[i])})}},this),i},render:function(){this.graph.series.forEach(function(t){if(!t.renderer)throw new Error("Each series needs a renderer for graph 'multi' renderer")}),this.graph.vis.selectAll("*").remove();var t=this._groups();t=this._stack(t),t.forEach(function(t){var e=t.series.filter(function(t){return!t.disabled});e.active=function(){return e},t.renderer.render({series:e,vis:t.vis}),e.forEach(function(t){t.stack=t._stack||t.stack||t.data})})}}),e.namespace("Rickshaw.Graph.Renderer.LinePlot"),e.Graph.Renderer.LinePlot=e.Class.create(e.Graph.Renderer,{name:"lineplot",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var e=this.graph,i=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis,r=this.dotSize;n.selectAll("*").remove();var s=i.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=n.selectAll("path").data(s).enter().append("svg:path").attr("d",this.seriesPathFactory()),o=0;i.forEach(function(t){t.disabled||(t.path=a[0][o++],this._styleSeries(t))},this),i.forEach(function(t){if(!t.disabled){var i=n.selectAll("x").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:r});Array.prototype.forEach.call(i[0],function(e){e&&(e.setAttribute("data-color",t.color),e.setAttribute("fill","white"),e.setAttribute("stroke",t.color),e.setAttribute("stroke-width",this.strokeWidth))}.bind(this))}},this)}}),e.namespace("Rickshaw.Graph.Smoother"),e.Graph.Smoother=e.Class.create({initialize:function(t){this.graph=t.graph,this.element=t.element,this.aggregationScale=1,this.build(),this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var t=this,e=jQuery;this.element&&e(function(){e(t.element).slider({min:1,max:100,slide:function(e,i){t.setScale(i.value),t.graph.update()}})})},setScale:function(t){if(1>t)throw"scale out of range: "+t;this.aggregationScale=t,this.graph.update()},transformer:function(t){if(1==this.aggregationScale)return t;var e=[];return t.forEach(function(t){for(var i=[];t.length;){var n=0,r=0,s=t.splice(0,this.aggregationScale);s.forEach(function(t){n+=t.x/s.length,r+=t.y/s.length}),i.push({x:n,y:r})}e.push(i)}.bind(this)),e}}),e.namespace("Rickshaw.Graph.Socketio"),e.Graph.Socketio=e.Class.create(e.Graph.Ajax,{request:function(){var t=io.connect(this.dataURL),e=this;t.on("rickshaw",function(t){e.success(t)})}}),e.namespace("Rickshaw.Series"),e.Series=e.Class.create(Array,{initialize:function(t,i,n){n=n||{},this.palette=new e.Color.Palette(i),this.timeBase="undefined"==typeof n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase;var r="undefined"==typeof n.timeInterval?1e3:n.timeInterval;this.setTimeInterval(r),t&&"object"==typeof t&&Array.isArray(t)&&t.forEach(function(t){this.addItem(t)},this)},addItem:function(t){if("undefined"==typeof t.name)throw"addItem() needs a name";t.color=t.color||this.palette.color(t.name),t.data=t.data||[],0===t.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach(function(e){t.data.push({x:e.x,y:0})}):0===t.data.length&&t.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},addData:function(t,i){var n=this.getIndex();e.keys(t).forEach(function(t){this.itemByName(t)||this.addItem({name:t})},this),this.forEach(function(e){e.data.push({x:i||(n*this.timeInterval||1)+this.timeBase,y:t[e.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return this[e]},setTimeInterval:function(t){this.timeInterval=t/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var t={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(e){var i={color:e.color,name:e.name,data:[]};e.data.forEach(function(t){i.data.push({x:t.x,y:t.y})}),t.items.push(i)}),t},load:function(t){t.timeInterval&&(this.timeInterval=t.timeInterval),t.timeBase&&(this.timeBase=t.timeBase),t.items&&t.items.forEach(function(t){this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},this)}}),e.Series.zeroFill=function(t){e.Series.fill(t,0)},e.Series.fill=function(t,e){for(var i,n=0,r=t.map(function(t){return t.data});n<Math.max.apply(null,r.map(function(t){return t.length}));)i=Math.min.apply(null,r.filter(function(t){return t[n]}).map(function(t){return t[n].x})),r.forEach(function(t){t[n]&&t[n].x==i||t.splice(n,0,{x:i,y:e})}),n++},e.namespace("Rickshaw.Series.FixedDuration"),e.Series.FixedDuration=e.Class.create(e.Series,{initialize:function(t,i,n){if(n=n||{},"undefined"==typeof n.timeInterval)throw new Error("FixedDuration series requires timeInterval");if("undefined"==typeof n.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new e.Color.Palette(i),this.timeBase="undefined"==typeof n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase,this.setTimeInterval(n.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=n.maxDataPoints,t&&"object"==typeof t&&Array.isArray(t)&&(t.forEach(function(t){this.addItem(t)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,"undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var r=this.maxDataPoints-this.currentSize-1;r>1;r--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(t){t.data.unshift({x:((r-1)*this.timeInterval||1)+this.timeBase,y:0,i:r})},this)},addData:function($super,t,e){if($super(t,e),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(t){t.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}}),e}),/* Chartist.js 0.8.3
 * Copyright  2015 Gion Kunz
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.Chartist=e()}):"object"==typeof exports?module.exports=e():t.Chartist=e()}(this,function(){var t={version:"0.8.3"};return function(t,e,i){"use strict";i.noop=function(t){return t},i.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},i.extend=function(t){t=t||{};var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){for(var n in e)"object"!=typeof e[n]||null===e[n]||e[n]instanceof Array?t[n]=e[n]:t[n]=i.extend({},t[n],e[n])}),t},i.replaceAll=function(t,e,i){return t.replace(new RegExp(e,"g"),i)},i.stripUnit=function(t){return"string"==typeof t&&(t=t.replace(/[^0-9\+-\.]/g,"")),+t},i.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},i.querySelector=function(t){return t instanceof Node?t:e.querySelector(t)},i.times=function(t){return Array.apply(null,new Array(t))},i.sum=function(t,e){return t+(e?e:0)},i.mapMultiply=function(t){return function(e){return e*t}},i.mapAdd=function(t){return function(e){return e+t}},i.serialMap=function(t,e){var n=[],r=Math.max.apply(null,t.map(function(t){return t.length}));return i.times(r).forEach(function(i,r){var s=t.map(function(t){return t[r]});n[r]=e.apply(null,s)}),n},i.roundWithPrecision=function(t,e){var n=Math.pow(10,e||i.precision);return Math.round(t*n)/n},i.precision=8,i.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},i.serialize=function(t){return null===t||void 0===t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(i.escapingMap).reduce(function(t,e){return i.replaceAll(t,e,i.escapingMap[e])},t))},i.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(i.escapingMap).reduce(function(t,e){return i.replaceAll(t,i.escapingMap[e],e)},t);try{t=JSON.parse(t),t=void 0!==t.data?t.data:t}catch(e){}return t},i.createSvg=function(t,e,n,r){var s;return e=e||"100%",n=n||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter(function(t){return t.getAttribute(i.xmlNs.qualifiedName)}).forEach(function(e){t.removeChild(e)}),s=new i.Svg("svg").attr({width:e,height:n}).addClass(r).attr({style:"width: "+e+"; height: "+n+";"}),t.appendChild(s._node),s},i.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},i.getDataArray=function(t,e){function n(t){return void 0===t||null===t||"number"==typeof t&&isNaN(t)?void 0:(t.data||t)instanceof Array?(t.data||t).map(n):t.hasOwnProperty("value")?n(t.value):+t}return(e&&!t.reversed||!e&&t.reversed)&&(i.reverseData(t),t.reversed=!t.reversed),t.series.map(n)},i.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},i.normalizeDataArray=function(t,e){for(var i=0;i<t.length;i++)if(t[i].length!==e)for(var n=t[i].length;e>n;n++)t[i][n]=void 0;return t},i.getMetaData=function(t,e){var n=t.data?t.data[e]:t[e];return n?i.serialize(n.meta):void 0},i.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},i.projectLength=function(t,e,i){return e/i.range*t},i.getAvailableHeight=function(t,e){return Math.max((i.stripUnit(e.height)||t.height())-(e.chartPadding.top+e.chartPadding.bottom)-e.axisX.offset,0)},i.getHighLow=function(t,e){function i(t){if(t instanceof Array)for(var e=0;e<t.length;e++)i(t[e]);else r&&t>n.high&&(n.high=t),s&&t<n.low&&(n.low=t)}var n={high:void 0===e.high?-Number.MAX_VALUE:+e.high,low:void 0===e.low?Number.MAX_VALUE:+e.low},r=void 0===e.high,s=void 0===e.low;return i(t),n.high<=n.low&&(0===n.low?n.high=1:n.low<0?n.high=0:n.low=0),n},i.rho=function(t){function e(t,i){return t%i===0?i:e(i,t%i)}function i(t){return t*t+1}if(1===t)return t;var n,r=2,s=2;if(t%2===0)return 2;do r=i(r)%t,s=i(i(s))%t,n=e(Math.abs(r-s),t);while(1===n);return n},i.getBounds=function(t,e,n,r,s){var a,o,l,h={high:e.high,low:e.low};(r||0===r)&&(h.high=Math.max(r,h.high),h.low=Math.min(r,h.low)),h.valueRange=h.high-h.low,h.oom=i.orderOfMagnitude(h.valueRange),h.step=Math.pow(10,h.oom),h.min=Math.floor(h.low/h.step)*h.step,h.max=Math.ceil(h.high/h.step)*h.step,h.range=h.max-h.min,h.numberOfSteps=Math.round(h.range/h.step);var c=i.projectLength(t,h.step,h),u=n>c,d=s?i.rho(h.range):0;if(s&&i.projectLength(t,1,h)>=n)h.step=1;else if(s&&d<h.step&&i.projectLength(t,d,h)>=n)h.step=d;else for(;;)if(u&&i.projectLength(t,h.step,h)<=n)h.step*=2;else{if(u||!(i.projectLength(t,h.step/2,h)>=n))break;if(h.step/=2,s&&h.step%1!==0){h.step*=2;break}}for(o=h.min,l=h.max;o+h.step<=h.low;)o+=h.step;for(;l-h.step>=h.high;)l-=h.step;for(h.min=o,h.max=l,h.range=h.max-h.min,h.values=[],a=h.min;a<=h.max;a+=h.step)h.values.push(i.roundWithPrecision(a));return h},i.polarToCartesian=function(t,e,i,n){var r=(n-90)*Math.PI/180;return{x:t+i*Math.cos(r),y:e+i*Math.sin(r)}},i.createChartRect=function(t,e,n){var r=!(!e.axisX&&!e.axisY),s=r?e.axisY.offset:0,a=r?e.axisX.offset:0,o=t.width()||i.stripUnit(e.width)||0,l=t.height()||i.stripUnit(e.height)||0,h=i.normalizePadding(e.chartPadding,n);o=Math.max(o,a+h.left+h.right),l=Math.max(l,s+h.top+h.bottom);var c={padding:h,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return r?("start"===e.axisX.position?(c.y2=h.top+a,c.y1=Math.max(l-h.bottom,c.y2+1)):(c.y2=h.top,c.y1=Math.max(l-h.bottom-a,c.y2+1)),"start"===e.axisY.position?(c.x1=h.left+s,c.x2=Math.max(o-h.right,c.x1+1)):(c.x1=h.left,c.x2=Math.max(o-h.right-s,c.x1+1))):(c.x1=h.left,c.x2=Math.max(o-h.right,c.x1+1),c.y2=h.top,c.y1=Math.max(l-h.bottom,c.y2+1)),c},i.createGrid=function(t,e,n,r,s,a,o,l){var h={};h[n.units.pos+"1"]=t.pos,h[n.units.pos+"2"]=t.pos,h[n.counterUnits.pos+"1"]=r,h[n.counterUnits.pos+"2"]=r+s;var c=a.elem("line",h,o.join(" "));l.emit("draw",i.extend({type:"grid",axis:n,index:e,group:a,element:c},h))},i.createLabel=function(t,e,n,r,s,a,o,l,h,c){var u,d={};if(d[r.units.pos]=t.pos+a[r.units.pos],d[r.counterUnits.pos]=a[r.counterUnits.pos],d[r.units.len]=t.len,d[r.counterUnits.len]=s-10,h){var f='<span class="'+l.join(" ")+'" style="'+r.units.len+": "+Math.round(d[r.units.len])+"px; "+r.counterUnits.len+": "+Math.round(d[r.counterUnits.len])+'px">'+n[e]+"</span>";u=o.foreignObject(f,i.extend({style:"overflow: visible;"},d))}else u=o.elem("text",d,l.join(" ")).text(n[e]);c.emit("draw",i.extend({type:"label",axis:r,index:e,group:o,element:u,text:n[e]},d))},i.createAxis=function(t,e,n,r,s,a,o,l){var h=o["axis"+t.units.pos.toUpperCase()],c=e.map(t.projectValue.bind(t)),u=e.map(h.labelInterpolationFnc);c.forEach(function(e,c){var d={x:0,y:0};(u[c]||0===u[c])&&("x"===t.units.pos?(e.pos=n.x1+e.pos,d.x=o.axisX.labelOffset.x,"start"===o.axisX.position?d.y=n.padding.top+o.axisX.labelOffset.y+(a?5:20):d.y=n.y1+o.axisX.labelOffset.y+(a?5:20)):(e.pos=n.y1-e.pos,d.y=o.axisY.labelOffset.y-(a?e.len:0),"start"===o.axisY.position?d.x=a?n.padding.left+o.axisY.labelOffset.x:n.x1-10:d.x=n.x2+o.axisY.labelOffset.x+10),h.showGrid&&i.createGrid(e,c,t,t.gridOffset,n[t.counterUnits.len](),r,[o.classNames.grid,o.classNames[t.units.dir]],l),h.showLabel&&i.createLabel(e,c,u,t,h.offset,d,s,[o.classNames.label,o.classNames[t.units.dir],o.classNames[h.position]],a,l))})},i.getSeriesOption=function(t,e,i){if(t.name&&e.series&&e.series[t.name]){var n=e.series[t.name];return n.hasOwnProperty(i)?n[i]:e[i]}return e[i]},i.optionsProvider=function(e,n,r){function s(e){var s=o;if(o=i.extend({},h),n)for(l=0;l<n.length;l++){var a=t.matchMedia(n[l][0]);a.matches&&(o=i.extend(o,n[l][1]))}r&&!e&&r.emit("optionsChanged",{previousOptions:s,currentOptions:o})}function a(){c.forEach(function(t){t.removeListener(s)})}var o,l,h=i.extend({},e),c=[];if(!t.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(n)for(l=0;l<n.length;l++){var u=t.matchMedia(n[l][0]);u.addListener(s),c.push(u)}return s(!0),{removeMediaQueryListeners:a,getCurrentOptions:function(){return i.extend({},o)}}}}(window,document,t),function(t,e,i){"use strict";i.Interpolation={},i.Interpolation.none=function(){return function(t,e){for(var n=new i.Svg.Path,r=!0,s=1;s<t.length;s+=2){var a=e[(s-1)/2];void 0===a.value?r=!0:r?(n.move(t[s-1],t[s],!1,a),r=!1):n.line(t[s-1],t[s],!1,a)}return n}},i.Interpolation.simple=function(t){var e={divisor:2};t=i.extend({},e,t);var n=1/Math.max(1,t.divisor);return function(t,e){for(var r=new i.Svg.Path,s=!0,a=2;a<t.length;a+=2){var o=t[a-2],l=t[a-1],h=t[a],c=t[a+1],u=(h-o)*n,d=e[a/2-1],f=e[a/2];void 0===d.value?s=!0:(s&&r.move(o,l,!1,d),void 0!==f.value&&(r.curve(o+u,l,h-u,c,h,c,!1,f),s=!1))}return r}},i.Interpolation.cardinal=function(t){function e(t,e){for(var i=[],n=!0,r=0;r<t.length;r+=2)void 0===e[r/2].value?n=!0:(n&&(i.push({pathCoordinates:[],valueData:[]}),n=!1),i[i.length-1].pathCoordinates.push(t[r],t[r+1]),i[i.length-1].valueData.push(e[r/2]));return i}var n={tension:1};t=i.extend({},n,t);var r=Math.min(1,Math.max(0,t.tension)),s=1-r;return function a(t,n){var o=e(t,n);if(o.length>1){var l=[];return o.forEach(function(t){l.push(a(t.pathCoordinates,t.valueData))}),i.Svg.Path.join(l)}if(t=o[0].pathCoordinates,n=o[0].valueData,t.length<=4)return i.Interpolation.none()(t,n);for(var h,c=(new i.Svg.Path).move(t[0],t[1],!1,n[0]),u=0,d=t.length;d-2*!h>u;u+=2){var f=[{x:+t[u-2],y:+t[u-1]},{x:+t[u],y:+t[u+1]},{x:+t[u+2],y:+t[u+3]},{x:+t[u+4],y:+t[u+5]}];h?u?d-4===u?f[3]={x:+t[0],y:+t[1]}:d-2===u&&(f[2]={x:+t[0],y:+t[1]},f[3]={x:+t[2],y:+t[3]}):f[0]={x:+t[d-2],y:+t[d-1]}:d-4===u?f[3]=f[2]:u||(f[0]={x:+t[u],y:+t[u+1]}),c.curve(r*(-f[0].x+6*f[1].x+f[2].x)/6+s*f[2].x,r*(-f[0].y+6*f[1].y+f[2].y)/6+s*f[2].y,r*(f[1].x+6*f[2].x-f[3].x)/6+s*f[2].x,r*(f[1].y+6*f[2].y-f[3].y)/6+s*f[2].y,f[2].x,f[2].y,!1,n[(u+2)/2])}return c}},i.Interpolation.step=function(t){var e={postpone:!0};return t=i.extend({},e,t),function(e,n){for(var r=new i.Svg.Path,s=!0,a=2;a<e.length;a+=2){var o=e[a-2],l=e[a-1],h=e[a],c=e[a+1],u=n[a/2-1],d=n[a/2];void 0===u.value?s=!0:(s&&r.move(o,l,!1,u),void 0!==d.value&&(t.postpone?r.line(h,l,!1,u):r.line(o,c,!1,d),r.line(h,c,!1,d),s=!1))}return r}}}(window,document,t),function(t,e,i){"use strict";i.EventEmitter=function(){function t(t,e){n[t]=n[t]||[],n[t].push(e)}function e(t,e){n[t]&&(e?(n[t].splice(n[t].indexOf(e),1),0===n[t].length&&delete n[t]):delete n[t])}function i(t,e){n[t]&&n[t].forEach(function(t){t(e)}),n["*"]&&n["*"].forEach(function(i){i(t,e)})}var n=[];return{addEventHandler:t,removeEventHandler:e,emit:i}}}(window,document,t),function(t,e,i){"use strict";function n(t){var e=[];if(t.length)for(var i=0;i<t.length;i++)e.push(t[i]);return e}function r(t,e){var n=e||this.prototype||i.Class,r=Object.create(n);i.Class.cloneDefinitions(r,t);var s=function(){var t,e=r.constructor||function(){};return t=this===i?Object.create(r):this,e.apply(t,Array.prototype.slice.call(arguments,0)),t};return s.prototype=r,s["super"]=n,s.extend=this.extend,s}function s(){var t=n(arguments),e=t[0];return t.splice(1,t.length-1).forEach(function(t){Object.getOwnPropertyNames(t).forEach(function(i){delete e[i],Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}),e}i.Class={extend:r,cloneDefinitions:s}}(window,document,t),function(t,e,i){"use strict";function n(t,e,n){return t&&(this.data=t,this.eventEmitter.emit("data",{type:"update",data:this.data})),e&&(this.options=i.extend({},n?this.options:this.defaultOptions,e),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=i.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this}function r(){return this.initializeTimeoutId?t.clearTimeout(this.initializeTimeoutId):(t.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this}function s(t,e){return this.eventEmitter.addEventHandler(t,e),this}function a(t,e){return this.eventEmitter.removeEventHandler(t,e),this}function o(){t.addEventListener("resize",this.resizeListener),this.optionsProvider=i.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(t){t instanceof Array?t[0](this,t[1]):t(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}function l(t,e,n,r,s){this.container=i.querySelector(t),this.data=e,this.defaultOptions=n,this.options=r,this.responsiveOptions=s,this.eventEmitter=i.EventEmitter(),this.supportsForeignObject=i.Svg.isSupported("Extensibility"),this.supportsAnimations=i.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(o.bind(this),0)}i.Base=i.Class.extend({constructor:l,optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:n,detach:r,on:s,off:a,version:i.version,supportsForeignObject:!1})}(window,document,t),function(t,e,i){"use strict";function n(t,n,r,s,a){t instanceof Element?this._node=t:(this._node=e.createElementNS(M,t),"svg"===t&&this._node.setAttributeNS(S,i.xmlNs.qualifiedName,i.xmlNs.uri),n&&this.attr(n),r&&this.addClass(r),s&&(a&&s._node.firstChild?s._node.insertBefore(this._node,s._node.firstChild):s._node.appendChild(this._node)))}function r(t,e){return"string"==typeof t?e?this._node.getAttributeNS(e,t):this._node.getAttribute(t):(Object.keys(t).forEach(function(n){void 0!==t[n]&&(e?this._node.setAttributeNS(e,[i.xmlNs.prefix,":",n].join(""),t[n]):this._node.setAttribute(n,t[n]))}.bind(this)),this)}function s(t,e,n,r){return new i.Svg(t,e,n,this,r)}function a(){return this._node.parentNode instanceof SVGElement?new i.Svg(this._node.parentNode):null}function o(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new i.Svg(t)}function l(t){var e=this._node.querySelector(t);return e?new i.Svg(e):null}function h(t){var e=this._node.querySelectorAll(t);return e.length?new i.Svg.List(e):null}function c(t,i,n,r){if("string"==typeof t){var s=e.createElement("div");s.innerHTML=t,t=s.firstChild}t.setAttribute("xmlns",T);var a=this.elem("foreignObject",i,n,r);return a._node.appendChild(t),a}function u(t){return this._node.appendChild(e.createTextNode(t)),this}function d(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}function f(){return this._node.parentNode.removeChild(this._node),this.parent()}function p(t){return this._node.parentNode.replaceChild(t._node,this._node),t}function g(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this}function m(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]}function v(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter(function(t,e,i){return i.indexOf(t)===e}).join(" ")),this}function y(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(t){return-1===e.indexOf(t)}).join(" ")),this}function x(){return this._node.setAttribute("class",""),this}function b(t,e){try{return t.getBBox()[e]}catch(i){}return 0}function w(){return this._node.clientHeight||Math.round(b(this._node,"height"))||this._node.parentNode.clientHeight}function _(){return this._node.clientWidth||Math.round(b(this._node,"width"))||this._node.parentNode.clientWidth}function k(t,e,n){return void 0===e&&(e=!0),Object.keys(t).forEach(function(r){function s(t,e){var s,a,o,l={};t.easing&&(o=t.easing instanceof Array?t.easing:i.Svg.Easing[t.easing],delete t.easing),t.begin=i.ensureUnit(t.begin,"ms"),t.dur=i.ensureUnit(t.dur,"ms"),o&&(t.calcMode="spline",t.keySplines=o.join(" "),t.keyTimes="0;1"),e&&(t.fill="freeze",l[r]=t.from,this.attr(l),a=i.stripUnit(t.begin||0),t.begin="indefinite"),s=this.elem("animate",i.extend({attributeName:r},t)),e&&setTimeout(function(){try{s._node.beginElement()}catch(e){l[r]=t.to,this.attr(l),s.remove()}}.bind(this),a),n&&s._node.addEventListener("beginEvent",function(){n.emit("animationBegin",{element:this,animate:s._node,params:t})}.bind(this)),s._node.addEventListener("endEvent",function(){n&&n.emit("animationEnd",{element:this,animate:s._node,params:t}),e&&(l[r]=t.to,this.attr(l),s.remove())}.bind(this))}t[r]instanceof Array?t[r].forEach(function(t){s.bind(this)(t,!1)}.bind(this)):s.bind(this)(t[r],e)}.bind(this)),this}function C(t){var e=this;this.svgElements=[];for(var n=0;n<t.length;n++)this.svgElements.push(new i.Svg(t[n]));Object.keys(i.Svg.prototype).filter(function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)}).forEach(function(t){e[t]=function(){var n=Array.prototype.slice.call(arguments,0);return e.svgElements.forEach(function(e){i.Svg.prototype[t].apply(e,n)}),e}})}var M="http://www.w3.org/2000/svg",S="http://www.w3.org/2000/xmlns/",T="http://www.w3.org/1999/xhtml";i.xmlNs={qualifiedName:"xmlns:ct",prefix:"ct",uri:"http://gionkunz.github.com/chartist-js/ct"},i.Svg=i.Class.extend({constructor:n,attr:r,elem:s,parent:a,root:o,querySelector:l,querySelectorAll:h,foreignObject:c,text:u,empty:d,remove:f,replace:p,append:g,classes:m,addClass:v,removeClass:y,removeAllClasses:x,height:w,width:_,animate:k}),i.Svg.isSupported=function(t){return e.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#"+t,"1.1")};var D={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};i.Svg.Easing=D,i.Svg.List=i.Class.extend({constructor:C})}(window,document,t),function(t,e,i){"use strict";function n(t,e,n,r,s,a){var o=i.extend({command:s?t.toLowerCase():t.toUpperCase()},e,a?{data:a}:{});n.splice(r,0,o)}function r(t,e){t.forEach(function(i,n){b[i.command.toLowerCase()].forEach(function(r,s){e(i,r,n,s,t)})})}function s(t,e){this.pathElements=[],this.pos=0,this.close=t,this.options=i.extend({},w,e)}function a(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos}function o(t){return this.pathElements.splice(this.pos,t),this}function l(t,e,i,r){return n("M",{x:+t,y:+e},this.pathElements,this.pos++,i,r),this}function h(t,e,i,r){return n("L",{x:+t,y:+e},this.pathElements,this.pos++,i,r),this}function c(t,e,i,r,s,a,o,l){return n("C",{x1:+t,y1:+e,x2:+i,y2:+r,x:+s,y:+a},this.pathElements,this.pos++,o,l),this}function u(t,e,i,r,s,a,o,l,h){return n("A",{rx:+t,ry:+e,xAr:+i,lAf:+r,sf:+s,x:+a,y:+o},this.pathElements,this.pos++,l,h),this}function d(t){var e=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t},[]);"Z"===e[e.length-1][0].toUpperCase()&&e.pop();var n=e.map(function(t){var e=t.shift(),n=b[e.toLowerCase()];return i.extend({command:e},n.reduce(function(e,i,n){return e[i]=+t[n],e},{}))}),r=[this.pos,0];return Array.prototype.push.apply(r,n),Array.prototype.splice.apply(this.pathElements,r),this.pos+=n.length,this}function f(){var t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(e,i){var n=b[i.command.toLowerCase()].map(function(e){return this.options.accuracy?Math.round(i[e]*t)/t:i[e]}.bind(this));return e+i.command+n.join(",")}.bind(this),"")+(this.close?"Z":"")}function p(t,e){return r(this.pathElements,function(i,n){i[n]*="x"===n[0]?t:e}),this}function g(t,e){return r(this.pathElements,function(i,n){i[n]+="x"===n[0]?t:e}),this}function m(t){return r(this.pathElements,function(e,i,n,r,s){var a=t(e,i,n,r,s);(a||0===a)&&(e[i]=a)}),this}function v(t){var e=new i.Svg.Path(t||this.close);return e.pos=this.pos,e.pathElements=this.pathElements.slice().map(function(t){return i.extend({},t)}),e.options=i.extend({},this.options),e}function y(t){var e=[new i.Svg.Path];return this.pathElements.forEach(function(n){n.command===t.toUpperCase()&&0!==e[e.length-1].pathElements.length&&e.push(new i.Svg.Path),e[e.length-1].pathElements.push(n)}),e}function x(t,e,n){for(var r=new i.Svg.Path(e,n),s=0;s<t.length;s++)for(var a=t[s],o=0;o<a.pathElements.length;o++)r.pathElements.push(a.pathElements[o]);return r}var b={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},w={accuracy:3};i.Svg.Path=i.Class.extend({constructor:s,position:a,remove:o,move:l,line:h,curve:c,arc:u,scale:p,translate:g,transform:m,parse:d,stringify:f,clone:v,splitByCommand:y}),i.Svg.Path.elementDescriptions=b,i.Svg.Path.join=x}(window,document,t),function(t,e,i){"use strict";function n(t,e,i){this.units=t,this.counterUnits=t===r.x?r.y:r.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.options=i}var r={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};i.Axis=i.Class.extend({constructor:n,projectValue:function(){throw new Error("Base axis can't be instantiated!")}}),i.Axis.units=r}(window,document,t),function(t,e,i){"use strict";function n(t,e,n){i.LinearScaleAxis["super"].constructor.call(this,t,e,n),this.bounds=i.getBounds(this.axisLength,n.highLow,n.scaleMinSpace,n.referenceValue,n.onlyInteger)}function r(t){return{pos:this.axisLength*(t-this.bounds.min)/this.bounds.range,len:i.projectLength(this.axisLength,this.bounds.step,this.bounds)}}i.LinearScaleAxis=i.Axis.extend({constructor:n,projectValue:r})}(window,document,t),function(t,e,i){"use strict";function n(t,e,n){i.StepAxis["super"].constructor.call(this,t,e,n),this.stepLength=this.axisLength/(n.stepCount-(n.stretch?1:0))}function r(t,e){return{pos:this.stepLength*e,len:this.stepLength}}i.StepAxis=i.Axis.extend({constructor:n,projectValue:r})}(window,document,t),function(t,e,i){"use strict";function n(t){var e=[],n=i.normalizeDataArray(i.getDataArray(this.data,t.reverseData),this.data.labels.length);this.svg=i.createSvg(this.container,t.width,t.height,t.classNames.chart);var r=i.createChartRect(this.svg,t,s.padding),a=i.getHighLow(n,t),o=new i.StepAxis(i.Axis.units.x,r,{stepCount:this.data.labels.length,stretch:t.fullWidth}),l=new i.LinearScaleAxis(i.Axis.units.y,r,{highLow:a,scaleMinSpace:t.axisY.scaleMinSpace,onlyInteger:t.axisY.onlyInteger}),h=this.svg.elem("g").addClass(t.classNames.labelGroup),c=this.svg.elem("g").addClass(t.classNames.gridGroup);i.createAxis(o,this.data.labels,r,c,h,this.supportsForeignObject,t,this.eventEmitter),i.createAxis(l,l.bounds.values,r,c,h,this.supportsForeignObject,t,this.eventEmitter),this.data.series.forEach(function(s,a){e[a]=this.svg.elem("g"),e[a].attr({"series-name":s.name,meta:i.serialize(s.meta)},i.xmlNs.uri),e[a].addClass([t.classNames.series,s.className||t.classNames.series+"-"+i.alphaNumerate(a)].join(" "));var h=[],c=[];n[a].forEach(function(t,e){var u={x:r.x1+o.projectValue(t,e,n[a]).pos,y:r.y1-l.projectValue(t,e,n[a]).pos};h.push(u.x,u.y),c.push({value:t,valueIndex:e,meta:i.getMetaData(s,e)})}.bind(this));var u={lineSmooth:i.getSeriesOption(s,t,"lineSmooth"),showPoint:i.getSeriesOption(s,t,"showPoint"),showLine:i.getSeriesOption(s,t,"showLine"),showArea:i.getSeriesOption(s,t,"showArea")},d="function"==typeof u.lineSmooth?u.lineSmooth:u.lineSmooth?i.Interpolation.cardinal():i.Interpolation.none(),f=d(h,c);if(u.showPoint&&f.pathElements.forEach(function(n){var r=e[a].elem("line",{x1:n.x,y1:n.y,x2:n.x+.01,y2:n.y},t.classNames.point).attr({value:n.data.value,meta:n.data.meta},i.xmlNs.uri);this.eventEmitter.emit("draw",{type:"point",value:n.data.value,index:n.data.valueIndex,meta:n.data.meta,series:s,seriesIndex:a,group:e[a],element:r,x:n.x,y:n.y})}.bind(this)),u.showLine){var p=e[a].elem("path",{d:f.stringify()},t.classNames.line,!0).attr({values:n[a]},i.xmlNs.uri);this.eventEmitter.emit("draw",{type:"line",values:n[a],path:f.clone(),chartRect:r,index:a,series:s,seriesIndex:a,group:e[a],element:p})}if(u.showArea){var g=Math.max(Math.min(t.areaBase,l.bounds.max),l.bounds.min),m=r.y1-l.projectValue(g).pos;f.splitByCommand("M").filter(function(t){return t.pathElements.length>1}).map(function(t){var e=t.pathElements[0],i=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,m).line(e.x,e.y).position(t.pathElements.length+1).line(i.x,m)}).forEach(function(o){var l=e[a].elem("path",{d:o.stringify()},t.classNames.area,!0).attr({values:n[a]},i.xmlNs.uri);this.eventEmitter.emit("draw",{type:"area",values:n[a],path:o.clone(),series:s,seriesIndex:a,chartRect:r,index:a,group:e[a],element:l})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:l.bounds,chartRect:r,axisX:o,axisY:l,svg:this.svg,options:t})}function r(t,e,n,r){i.Line["super"].constructor.call(this,t,e,s,i.extend({},s,n),r)}var s={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:i.noop,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:i.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};i.Line=i.Base.extend({constructor:r,createChart:n})}(window,document,t),function(t,e,i){"use strict";function n(t){var e,n=[],r=i.getDataArray(this.data,t.reverseData),a=t.distributeSeries?r.map(function(t){return[t]}):i.normalizeDataArray(r,this.data.labels.length);if(this.svg=i.createSvg(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:"")),t.stackBars){var o=i.serialMap(a,function(){return Array.prototype.slice.call(arguments).reduce(i.sum,0)});e=i.getHighLow([o],t)}else e=i.getHighLow(a,t);e.high=+t.high||(0===t.high?0:e.high),e.low=+t.low||(0===t.low?0:e.low);var l,h,c,u,d,f=i.createChartRect(this.svg,t,s.padding);h=t.distributeSeries&&!t.stackBars?a.length:t.distributeSeries&&t.stackBars?1:this.data.labels.length,t.horizontalBars?(c=d=new i.StepAxis(i.Axis.units.y,f,{stepCount:h}),l=u=new i.LinearScaleAxis(i.Axis.units.x,f,{highLow:e,scaleMinSpace:t.axisX.scaleMinSpace,onlyInteger:t.axisX.onlyInteger,referenceValue:0})):(c=u=new i.StepAxis(i.Axis.units.x,f,{stepCount:h}),l=d=new i.LinearScaleAxis(i.Axis.units.y,f,{highLow:e,scaleMinSpace:t.axisY.scaleMinSpace,onlyInteger:t.axisY.onlyInteger,referenceValue:0}));var p=this.svg.elem("g").addClass(t.classNames.labelGroup),g=this.svg.elem("g").addClass(t.classNames.gridGroup),m=t.horizontalBars?f.x1+l.projectValue(0).pos:f.y1-l.projectValue(0).pos,v=[];i.createAxis(c,this.data.labels,f,g,p,this.supportsForeignObject,t,this.eventEmitter),i.createAxis(l,l.bounds.values,f,g,p,this.supportsForeignObject,t,this.eventEmitter),this.data.series.forEach(function(e,r){var s,o=r-(this.data.series.length-1)/2;s=t.distributeSeries&&!t.stackBars?c.axisLength/a.length/2:t.distributeSeries&&t.stackBars?c.axisLength/2:c.axisLength/a[r].length/2,n[r]=this.svg.elem("g"),n[r].attr({"series-name":e.name,meta:i.serialize(e.meta)},i.xmlNs.uri),n[r].addClass([t.classNames.series,e.className||t.classNames.series+"-"+i.alphaNumerate(r)].join(" ")),a[r].forEach(function(h,u){var d,p,g,y;if(y=t.distributeSeries&&!t.stackBars?r:t.distributeSeries&&t.stackBars?0:u,d=t.horizontalBars?{x:f.x1+l.projectValue(h||0,u,a[r]).pos,y:f.y1-c.projectValue(h||0,y,a[r]).pos}:{x:f.x1+c.projectValue(h||0,y,a[r]).pos,y:f.y1-l.projectValue(h||0,u,a[r]).pos},d[c.units.pos]+=s*(t.horizontalBars?-1:1),d[c.units.pos]+=t.stackBars||t.distributeSeries?0:o*t.seriesBarDistance*(t.horizontalBars?-1:1),g=v[u]||m,v[u]=g-(m-d[c.counterUnits.pos]),void 0!==h){var x={};x[c.units.pos+"1"]=d[c.units.pos],x[c.units.pos+"2"]=d[c.units.pos],x[c.counterUnits.pos+"1"]=t.stackBars?g:m,x[c.counterUnits.pos+"2"]=t.stackBars?v[u]:d[c.counterUnits.pos],p=n[r].elem("line",x,t.classNames.bar).attr({value:h,meta:i.getMetaData(e,u)},i.xmlNs.uri),this.eventEmitter.emit("draw",i.extend({type:"bar",value:h,index:u,meta:i.getMetaData(e,u),series:e,seriesIndex:r,chartRect:f,group:n[r],element:p},x))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:l.bounds,chartRect:f,axisX:u,axisY:d,svg:this.svg,options:t})}function r(t,e,n,r){i.Bar["super"].constructor.call(this,t,e,s,i.extend({},s,n),r)}var s={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:i.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:i.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,onlyInteger:!1,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,horizontalBars:!1,distributeSeries:!1,reverseData:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};i.Bar=i.Base.extend({constructor:r,createChart:n})}(window,document,t),function(t,e,i){"use strict";function n(t,e,i){var n=e.x>t.x;return n&&"explode"===i||!n&&"implode"===i?"start":n&&"implode"===i||!n&&"explode"===i?"end":"middle"}function r(t){var e,r,s,o,l=[],h=t.startAngle,c=i.getDataArray(this.data,t.reverseData);this.svg=i.createSvg(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie),e=i.createChartRect(this.svg,t,a.padding),r=Math.min(e.width()/2,e.height()/2),o=t.total||c.reduce(function(t,e){return t+e},0),r-=t.donut?t.donutWidth/2:0,s="outside"===t.labelPosition||t.donut?r:"center"===t.labelPosition?0:r/2,s+=t.labelOffset;for(var u={x:e.x1+e.width()/2,y:e.y2+e.height()/2},d=1===this.data.series.filter(function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t}).length,f=0;f<this.data.series.length;f++){var p=this.data.series[f];l[f]=this.svg.elem("g",null,null,!0),l[f].attr({"series-name":p.name},i.xmlNs.uri),l[f].addClass([t.classNames.series,p.className||t.classNames.series+"-"+i.alphaNumerate(f)].join(" "));var g=h+c[f]/o*360;g-h===360&&(g-=.01);var m=i.polarToCartesian(u.x,u.y,r,h-(0===f||d?0:.2)),v=i.polarToCartesian(u.x,u.y,r,g),y=new i.Svg.Path(!t.donut).move(v.x,v.y).arc(r,r,0,g-h>180,0,m.x,m.y);t.donut||y.line(u.x,u.y);var x=l[f].elem("path",{d:y.stringify()},t.donut?t.classNames.sliceDonut:t.classNames.slicePie);if(x.attr({value:c[f],meta:i.serialize(p.meta)},i.xmlNs.uri),t.donut&&x.attr({style:"stroke-width: "+ +t.donutWidth+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:c[f],totalDataSum:o,index:f,meta:p.meta,series:p,group:l[f],element:x,path:y.clone(),center:u,radius:r,startAngle:h,endAngle:g}),t.showLabel){var b=i.polarToCartesian(u.x,u.y,s,h+(g-h)/2),w=t.labelInterpolationFnc(this.data.labels?this.data.labels[f]:c[f],f);if(w||0===w){var _=l[f].elem("text",{dx:b.x,dy:b.y,"text-anchor":n(u,b,t.labelDirection)},t.classNames.label).text(""+w);this.eventEmitter.emit("draw",{type:"label",index:f,group:l[f],element:_,text:""+w,x:b.x,y:b.y})}}h=g}this.eventEmitter.emit("created",{chartRect:e,svg:this.svg,options:t})}function s(t,e,n,r){i.Pie["super"].constructor.call(this,t,e,a,i.extend({},a,n),r)}var a={width:void 0,height:void 0,chartPadding:5,
classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:i.noop,labelDirection:"neutral",reverseData:!1};i.Pie=i.Base.extend({constructor:s,createChart:r,determineAnchorPosition:n})}(window,document,t),t}),!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function i(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function n(t){return null===t?NaN:+t}function r(t){return!isNaN(t)}function s(t){return{left:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);r>n;){var s=n+r>>>1;t(e[s],i)<0?n=s+1:r=s}return n},right:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);r>n;){var s=n+r>>>1;t(e[s],i)>0?r=s:n=s+1}return n}}}function a(t){return t.length}function o(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var i in e)Object.defineProperty(t.prototype,i,{value:e[i],enumerable:!1})}function h(){this._=Object.create(null)}function c(t){return(t+="")===ba||t[0]===wa?wa+t:t}function u(t){return(t+="")[0]===wa?t.slice(1):t}function d(t){return c(t)in this._}function f(t){return(t=c(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(u(e));return t}function g(){var t=0;for(var e in this._)++t;return t}function m(){for(var t in this._)return!1;return!0}function v(){this._=Object.create(null)}function y(t){return t}function x(t,e,i){return function(){var n=i.apply(e,arguments);return n===e?t:n}}function b(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var i=0,n=_a.length;n>i;++i){var r=_a[i]+e;if(r in t)return r}}function w(){}function _(){}function k(t){function e(){for(var e,n=i,r=-1,s=n.length;++r<s;)(e=n[r].on)&&e.apply(this,arguments);return t}var i=[],n=new h;return e.on=function(e,r){var s,a=n.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,i=i.slice(0,s=i.indexOf(a)).concat(i.slice(s+1)),n.remove(e)),r&&i.push(n.set(e,{on:r})),t)},e}function C(){oa.event.preventDefault()}function M(){for(var t,e=oa.event;t=e.sourceEvent;)e=t;return e}function S(t){for(var e=new _,i=0,n=arguments.length;++i<n;)e[arguments[i]]=k(e);return e.of=function(i,n){return function(r){try{var s=r.sourceEvent=oa.event;r.target=t,oa.event=r,e[r.type].apply(i,n)}finally{oa.event=s}}},e}function T(t){return Ca(t,Da),t}function D(t){return"function"==typeof t?t:function(){return Ma(t,this)}}function A(t){return"function"==typeof t?t:function(){return Sa(t,this)}}function E(t,e){function i(){this.removeAttribute(t)}function n(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function s(){this.setAttributeNS(t.space,t.local,e)}function a(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}function o(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}return t=oa.ns.qualify(t),null==e?t.local?n:i:"function"==typeof e?t.local?o:a:t.local?s:r}function P(t){return t.trim().replace(/\s+/g," ")}function L(t){return new RegExp("(?:^|\\s+)"+oa.requote(t)+"(?:\\s+|$)","g")}function F(t){return(t+"").trim().split(/^|\s+/)}function I(t,e){function i(){for(var i=-1;++i<r;)t[i](this,e)}function n(){for(var i=-1,n=e.apply(this,arguments);++i<r;)t[i](this,n)}t=F(t).map(z);var r=t.length;return"function"==typeof e?n:i}function z(t){var e=L(t);return function(i,n){if(r=i.classList)return n?r.add(t):r.remove(t);var r=i.getAttribute("class")||"";n?(e.lastIndex=0,e.test(r)||i.setAttribute("class",P(r+" "+t))):i.setAttribute("class",P(r.replace(e," ")))}}function R(t,e,i){function n(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,i)}function s(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}return null==e?n:"function"==typeof e?s:r}function O(t,e){function i(){delete this[t]}function n(){this[t]=e}function r(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}return null==e?i:"function"==typeof e?r:n}function N(t){function e(){var e=this.ownerDocument,i=this.namespaceURI;return i?e.createElementNS(i,t):e.createElement(t)}function i(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=oa.ns.qualify(t)).local?i:e}function H(){var t=this.parentNode;t&&t.removeChild(this)}function j(t){return{__data__:t}}function W(t){return function(){return Ta(this,t)}}function Y(t){return arguments.length||(t=i),function(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}}function $(t,e){for(var i=0,n=t.length;n>i;i++)for(var r,s=t[i],a=0,o=s.length;o>a;a++)(r=s[a])&&e(r,a,i);return t}function B(t){return Ca(t,Ea),t}function q(t){var e,i;return function(n,r,s){var a,o=t[s].update,l=o.length;for(s!=i&&(i=s,e=0),r>=e&&(e=r+1);!(a=o[e])&&++e<l;);return a}}function U(t,e,i){function n(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){var r=l(e,ha(arguments));n.call(this),this.addEventListener(t,this[a]=r,r.$=i),r._=e}function s(){var e,i=new RegExp("^__on([^.]+)"+oa.requote(t)+"$");for(var n in this)if(e=n.match(i)){var r=this[n];this.removeEventListener(e[1],r,r.$),delete this[n]}}var a="__on"+t,o=t.indexOf("."),l=V;o>0&&(t=t.slice(0,o));var h=Pa.get(t);return h&&(t=h,l=X),o?e?r:n:e?w:s}function V(t,e){return function(i){var n=oa.event;oa.event=i,e[0]=this.__data__;try{t.apply(this,e)}finally{oa.event=n}}}function X(t,e){var i=V(t,e);return function(t){var e=this,n=t.relatedTarget;n&&(n===e||8&n.compareDocumentPosition(e))||i.call(e,t)}}function G(i){var n=".dragsuppress-"+ ++Fa,r="click"+n,s=oa.select(e(i)).on("touchmove"+n,C).on("dragstart"+n,C).on("selectstart"+n,C);if(null==La&&(La="onselectstart"in i?!1:b(i.style,"userSelect")),La){var a=t(i).style,o=a[La];a[La]="none"}return function(t){if(s.on(n,null),La&&(a[La]=o),t){var e=function(){s.on(r,null)};s.on(r,function(){C(),e()},!0),setTimeout(e,0)}}}function Z(t,i){i.changedTouches&&(i=i.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Ia){var s=e(t);if(s.scrollX||s.scrollY){n=oa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=n[0][0].getScreenCTM();Ia=!(a.f||a.e),n.remove()}}return Ia?(r.x=i.pageX,r.y=i.pageY):(r.x=i.clientX,r.y=i.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var o=t.getBoundingClientRect();return[i.clientX-o.left-t.clientLeft,i.clientY-o.top-t.clientTop]}function Q(){return oa.event.changedTouches[0].identifier}function K(t){return t>0?1:0>t?-1:0}function J(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0])}function tt(t){return t>1?0:-1>t?Oa:Math.acos(t)}function et(t){return t>1?ja:-1>t?-ja:Math.asin(t)}function it(t){return((t=Math.exp(t))-1/t)/2}function nt(t){return((t=Math.exp(t))+1/t)/2}function rt(t){return((t=Math.exp(2*t))-1)/(t+1)}function st(t){return(t=Math.sin(t/2))*t}function at(){}function ot(t,e,i){return this instanceof ot?(this.h=+t,this.s=+e,void(this.l=+i)):arguments.length<2?t instanceof ot?new ot(t.h,t.s,t.l):wt(""+t,_t,ot):new ot(t,e,i)}function lt(t,e,i){function n(t){return t>360?t-=360:0>t&&(t+=360),60>t?s+(a-s)*t/60:180>t?a:240>t?s+(a-s)*(240-t)/60:s}function r(t){return Math.round(255*n(t))}var s,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,i=0>i?0:i>1?1:i,a=.5>=i?i*(1+e):i+e-i*e,s=2*i-a,new vt(r(t+120),r(t),r(t-120))}function ht(t,e,i){return this instanceof ht?(this.h=+t,this.c=+e,void(this.l=+i)):arguments.length<2?t instanceof ht?new ht(t.h,t.c,t.l):t instanceof ut?ft(t.l,t.a,t.b):ft((t=kt((t=oa.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ht(t,e,i)}function ct(t,e,i){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ut(i,Math.cos(t*=Wa)*e,Math.sin(t)*e)}function ut(t,e,i){return this instanceof ut?(this.l=+t,this.a=+e,void(this.b=+i)):arguments.length<2?t instanceof ut?new ut(t.l,t.a,t.b):t instanceof ht?ct(t.h,t.c,t.l):kt((t=vt(t)).r,t.g,t.b):new ut(t,e,i)}function dt(t,e,i){var n=(t+16)/116,r=n+e/500,s=n-i/200;return r=pt(r)*Ka,n=pt(n)*Ja,s=pt(s)*to,new vt(mt(3.2404542*r-1.5371385*n-.4985314*s),mt(-.969266*r+1.8760108*n+.041556*s),mt(.0556434*r-.2040259*n+1.0572252*s))}function ft(t,e,i){return t>0?new ht(Math.atan2(i,e)*Ya,Math.sqrt(e*e+i*i),t):new ht(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function gt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function mt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function vt(t,e,i){return this instanceof vt?(this.r=~~t,this.g=~~e,void(this.b=~~i)):arguments.length<2?t instanceof vt?new vt(t.r,t.g,t.b):wt(""+t,vt,lt):new vt(t,e,i)}function yt(t){return new vt(t>>16,t>>8&255,255&t)}function xt(t){return yt(t)+""}function bt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,e,i){var n,r,s,a=0,o=0,l=0;if(n=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=n[2].split(","),n[1]){case"hsl":return i(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(Mt(r[0]),Mt(r[1]),Mt(r[2]))}return(s=no.get(t))?e(s.r,s.g,s.b):(null==t||"#"!==t.charAt(0)||isNaN(s=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&s)>>4,a=a>>4|a,o=240&s,o=o>>4|o,l=15&s,l=l<<4|l):7===t.length&&(a=(16711680&s)>>16,o=(65280&s)>>8,l=255&s)),e(a,o,l))}function _t(t,e,i){var n,r,s=Math.min(t/=255,e/=255,i/=255),a=Math.max(t,e,i),o=a-s,l=(a+s)/2;return o?(r=.5>l?o/(a+s):o/(2-a-s),n=t==a?(e-i)/o+(i>e?6:0):e==a?(i-t)/o+2:(t-e)/o+4,n*=60):(n=NaN,r=l>0&&1>l?0:n),new ot(n,r,l)}function kt(t,e,i){t=Ct(t),e=Ct(e),i=Ct(i);var n=gt((.4124564*t+.3575761*e+.1804375*i)/Ka),r=gt((.2126729*t+.7151522*e+.072175*i)/Ja),s=gt((.0193339*t+.119192*e+.9503041*i)/to);return ut(116*r-16,500*(n-r),200*(r-s))}function Ct(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function St(t){return"function"==typeof t?t:function(){return t}}function Tt(t){return function(e,i,n){return 2===arguments.length&&"function"==typeof i&&(n=i,i=null),Dt(e,i,t,n)}}function Dt(t,e,i,n){function r(){var t,e=l.status;if(!e&&Et(l)||e>=200&&300>e||304===e){try{t=i.call(s,l)}catch(n){return void a.error.call(s,n)}a.load.call(s,t)}else a.error.call(s,l)}var s={},a=oa.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,h=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=oa.event;oa.event=t;try{a.progress.call(s,l)}finally{oa.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?o[t]:(null==e?delete o[t]:o[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",s):e},s.responseType=function(t){return arguments.length?(h=t,s):h},s.response=function(t){return i=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(ha(arguments)))}}),s.send=function(i,n,r){if(2===arguments.length&&"function"==typeof n&&(r=n,n=null),l.open(i,t,!0),null==e||"accept"in o||(o.accept=e+",*/*"),l.setRequestHeader)for(var c in o)l.setRequestHeader(c,o[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=h&&(l.responseType=h),null!=r&&s.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(s,l),l.send(null==n?null:n),s},s.abort=function(){return l.abort(),s},oa.rebind(s,a,"on"),null==n?s:s.get(At(n))}function At(t){return 1===t.length?function(e,i){t(null==e?i:null)}:t}function Et(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Pt(t,e,i){var n=arguments.length;2>n&&(e=0),3>n&&(i=Date.now());var r=i+e,s={c:t,t:r,n:null};return so?so.n=s:ro=s,so=s,ao||(oo=clearTimeout(oo),ao=1,lo(Lt)),s}function Lt(){var t=Ft(),e=It()-t;e>24?(isFinite(e)&&(clearTimeout(oo),oo=setTimeout(Lt,e)),ao=0):(ao=1,lo(Lt))}function Ft(){for(var t=Date.now(),e=ro;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function It(){for(var t,e=ro,i=1/0;e;)e.c?(e.t<i&&(i=e.t),e=(t=e).n):e=t?t.n=e.n:ro=e.n;return so=t,i}function zt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Rt(t,e){var i=Math.pow(10,3*xa(8-e));return{scale:e>8?function(t){return t/i}:function(t){return t*i},symbol:t}}function Ot(t){var e=t.decimal,i=t.thousands,n=t.grouping,r=t.currency,s=n&&i?function(t,e){for(var r=t.length,s=[],a=0,o=n[0],l=0;r>0&&o>0&&(l+o+1>e&&(o=Math.max(1,e-l)),s.push(t.substring(r-=o,r+o)),!((l+=o+1)>e));)o=n[a=(a+1)%n.length];return s.reverse().join(i)}:y;return function(t){var i=co.exec(t),n=i[1]||" ",a=i[2]||">",o=i[3]||"-",l=i[4]||"",h=i[5],c=+i[6],u=i[7],d=i[8],f=i[9],p=1,g="",m="",v=!1,y=!0;switch(d&&(d=+d.substring(1)),(h||"0"===n&&"="===a)&&(h=n="0",a="="),f){case"n":u=!0,f="g";break;case"%":p=100,m="%",f="f";break;case"p":p=100,m="%",f="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+f.toLowerCase());case"c":y=!1;case"d":v=!0,d=0;break;case"s":p=-1,f="r"}"$"===l&&(g=r[0],m=r[1]),"r"!=f||d||(f="g"),null!=d&&("g"==f?d=Math.max(1,Math.min(21,d)):("e"==f||"f"==f)&&(d=Math.max(0,Math.min(20,d)))),f=uo.get(f)||Nt;var x=h&&u;return function(t){var i=m;if(v&&t%1)return"";var r=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===o?"":o;if(0>p){var l=oa.formatPrefix(t,d);t=l.scale(t),i=l.symbol+m}else t*=p;t=f(t,d);var b,w,_=t.lastIndexOf(".");if(0>_){var k=y?t.lastIndexOf("e"):-1;0>k?(b=t,w=""):(b=t.substring(0,k),w=t.substring(k))}else b=t.substring(0,_),w=e+t.substring(_+1);!h&&u&&(b=s(b,1/0));var C=g.length+b.length+w.length+(x?0:r.length),M=c>C?new Array(C=c-C+1).join(n):"";return x&&(b=s(M+b,M.length?c-w.length:1/0)),r+=g,t=b+w,("<"===a?r+t+M:">"===a?M+r+t:"^"===a?M.substring(0,C>>=1)+r+t+M.substring(C):r+(x?t:M+t))+i}}}function Nt(t){return t+""}function Ht(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function jt(t,e,i){function n(e){var i=t(e),n=s(i,1);return n-e>e-i?i:n}function r(i){return e(i=t(new po(i-1)),1),i}function s(t,i){return e(t=new po(+t),i),t}function a(t,n,s){var a=r(t),o=[];if(s>1)for(;n>a;)i(a)%s||o.push(new Date(+a)),e(a,1);else for(;n>a;)o.push(new Date(+a)),e(a,1);return o}function o(t,e,i){try{po=Ht;var n=new Ht;return n._=t,a(n,e,i)}finally{po=Date}}t.floor=t,t.round=n,t.ceil=r,t.offset=s,t.range=a;var l=t.utc=Wt(t);return l.floor=l,l.round=Wt(n),l.ceil=Wt(r),l.offset=Wt(s),l.range=o,t}function Wt(t){return function(e,i){try{po=Ht;var n=new Ht;return n._=e,t(n,i)._}finally{po=Date}}}function Yt(t){function e(t){function e(e){for(var i,r,s,a=[],o=-1,l=0;++o<n;)37===t.charCodeAt(o)&&(a.push(t.slice(l,o)),null!=(r=mo[i=t.charAt(++o)])&&(i=t.charAt(++o)),(s=D[i])&&(i=s(e,null==r?"e"===i?" ":"0":r)),a.push(i),l=o+1);return a.push(t.slice(l,o)),a.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=i(n,t,e,0);if(r!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var s=null!=n.Z&&po!==Ht,a=new(s?Ht:po);return"j"in n?a.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),a.setFullYear(n.y,0,1),a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(a.getDay()+5)%7:n.w+7*n.U-(a.getDay()+6)%7)):a.setFullYear(n.y,n.m,n.d),a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),s?a._:a},e.toString=function(){return t},e}function i(t,e,i,n){for(var r,s,a,o=0,l=e.length,h=i.length;l>o;){if(n>=h)return-1;if(r=e.charCodeAt(o++),37===r){if(a=e.charAt(o++),s=A[a in mo?e.charAt(o++):a],!s||(n=s(t,i,n))<0)return-1}else if(r!=i.charCodeAt(n++))return-1}return n}function n(t,e,i){_.lastIndex=0;var n=_.exec(e.slice(i));return n?(t.w=k.get(n[0].toLowerCase()),i+n[0].length):-1}function r(t,e,i){b.lastIndex=0;var n=b.exec(e.slice(i));return n?(t.w=w.get(n[0].toLowerCase()),i+n[0].length):-1}function s(t,e,i){S.lastIndex=0;var n=S.exec(e.slice(i));return n?(t.m=T.get(n[0].toLowerCase()),i+n[0].length):-1}function a(t,e,i){C.lastIndex=0;var n=C.exec(e.slice(i));return n?(t.m=M.get(n[0].toLowerCase()),i+n[0].length):-1}function o(t,e,n){return i(t,D.c.toString(),e,n)}function l(t,e,n){return i(t,D.x.toString(),e,n)}function h(t,e,n){return i(t,D.X.toString(),e,n)}function c(t,e,i){var n=x.get(e.slice(i,i+=2).toLowerCase());return null==n?-1:(t.p=n,i)}var u=t.dateTime,d=t.date,f=t.time,p=t.periods,g=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function i(t){try{po=Ht;var e=new po;return e._=t,n(e)}finally{po=Date}}var n=e(t);return i.parse=function(t){try{po=Ht;var e=n.parse(t);return e&&e._}finally{po=Date}},i.toString=n.toString,i},e.multi=e.utc.multi=le;var x=oa.map(),b=Bt(g),w=qt(g),_=Bt(m),k=qt(m),C=Bt(v),M=qt(v),S=Bt(y),T=qt(y);p.forEach(function(t,e){x.set(t.toLowerCase(),e)});var D={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(u),d:function(t,e){return $t(t.getDate(),e,2)},e:function(t,e){return $t(t.getDate(),e,2)},H:function(t,e){return $t(t.getHours(),e,2)},I:function(t,e){return $t(t.getHours()%12||12,e,2)},j:function(t,e){return $t(1+fo.dayOfYear(t),e,3)},L:function(t,e){return $t(t.getMilliseconds(),e,3)},m:function(t,e){return $t(t.getMonth()+1,e,2)},M:function(t,e){return $t(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return $t(t.getSeconds(),e,2)},U:function(t,e){return $t(fo.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return $t(fo.mondayOfYear(t),e,2)},x:e(d),X:e(f),y:function(t,e){return $t(t.getFullYear()%100,e,2)},Y:function(t,e){return $t(t.getFullYear()%1e4,e,4)},Z:ae,"%":function(){return"%"}},A={a:n,A:r,b:s,B:a,c:o,d:te,e:te,H:ie,I:ie,j:ee,L:se,m:Jt,M:ne,p:c,S:re,U:Vt,w:Ut,W:Xt,x:l,X:h,y:Zt,Y:Gt,Z:Qt,"%":oe};return e}function $t(t,e,i){var n=0>t?"-":"",r=(n?-t:t)+"",s=r.length;return n+(i>s?new Array(i-s+1).join(e)+r:r)}function Bt(t){return new RegExp("^(?:"+t.map(oa.requote).join("|")+")","i")}function qt(t){for(var e=new h,i=-1,n=t.length;++i<n;)e.set(t[i].toLowerCase(),i);return e}function Ut(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function Vt(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i));return n?(t.U=+n[0],i+n[0].length):-1}function Xt(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i));return n?(t.W=+n[0],i+n[0].length):-1}function Gt(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function Zt(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+2));return n?(t.y=Kt(+n[0]),i+n[0].length):-1}function Qt(t,e,i){return/^[+-]\d{4}$/.test(e=e.slice(i,i+5))?(t.Z=-e,i+5):-1}function Kt(t){return t+(t>68?1900:2e3)}function Jt(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function te(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function ee(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+3));return n?(t.j=+n[0],i+n[0].length):-1}function ie(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function ne(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function re(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function se(t,e,i){vo.lastIndex=0;var n=vo.exec(e.slice(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function ae(t){var e=t.getTimezoneOffset(),i=e>0?"-":"+",n=xa(e)/60|0,r=xa(e)%60;return i+$t(n,"0",2)+$t(r,"0",2)}function oe(t,e,i){yo.lastIndex=0;var n=yo.exec(e.slice(i,i+1));return n?i+n[0].length:-1}function le(t){for(var e=t.length,i=-1;++i<e;)t[i][0]=this(t[i][0]);return function(e){for(var i=0,n=t[i];!n[1](e);)n=t[++i];return n[0](e)}}function he(){}function ce(t,e,i){var n=i.s=t+e,r=n-t,s=n-r;i.t=t-s+(e-r)}function ue(t,e){t&&_o.hasOwnProperty(t.type)&&_o[t.type](t,e)}function de(t,e,i){var n,r=-1,s=t.length-i;for(e.lineStart();++r<s;)n=t[r],e.point(n[0],n[1],n[2]);e.lineEnd()}function fe(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)de(t[i],e,1);e.polygonEnd()}function pe(){function t(t,e){t*=Wa,e=e*Wa/2+Oa/4;var i=t-n,a=i>=0?1:-1,o=a*i,l=Math.cos(e),h=Math.sin(e),c=s*h,u=r*l+c*Math.cos(o),d=c*a*Math.sin(o);Co.add(Math.atan2(d,u)),n=t,r=l,s=h}var e,i,n,r,s;Mo.point=function(a,o){Mo.point=t,n=(e=a)*Wa,r=Math.cos(o=(i=o)*Wa/2+Oa/4),s=Math.sin(o)},Mo.lineEnd=function(){t(e,i)}}function ge(t){var e=t[0],i=t[1],n=Math.cos(i);return[n*Math.cos(e),n*Math.sin(e),Math.sin(i)]}function me(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ve(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ye(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function xe(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function be(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function we(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function _e(t,e){return xa(t[0]-e[0])<za&&xa(t[1]-e[1])<za}function ke(t,e){t*=Wa;var i=Math.cos(e*=Wa);Ce(i*Math.cos(t),i*Math.sin(t),Math.sin(e))}function Ce(t,e,i){++So,Do+=(t-Do)/So,Ao+=(e-Ao)/So,Eo+=(i-Eo)/So}function Me(){function t(t,r){t*=Wa;var s=Math.cos(r*=Wa),a=s*Math.cos(t),o=s*Math.sin(t),l=Math.sin(r),h=Math.atan2(Math.sqrt((h=i*l-n*o)*h+(h=n*a-e*l)*h+(h=e*o-i*a)*h),e*a+i*o+n*l);To+=h,Po+=h*(e+(e=a)),Lo+=h*(i+(i=o)),Fo+=h*(n+(n=l)),Ce(e,i,n)}var e,i,n;Oo.point=function(r,s){r*=Wa;var a=Math.cos(s*=Wa);e=a*Math.cos(r),i=a*Math.sin(r),n=Math.sin(s),Oo.point=t,Ce(e,i,n)}}function Se(){Oo.point=ke}function Te(){function t(t,e){t*=Wa;var i=Math.cos(e*=Wa),a=i*Math.cos(t),o=i*Math.sin(t),l=Math.sin(e),h=r*l-s*o,c=s*a-n*l,u=n*o-r*a,d=Math.sqrt(h*h+c*c+u*u),f=n*a+r*o+s*l,p=d&&-tt(f)/d,g=Math.atan2(d,f);Io+=p*h,zo+=p*c,Ro+=p*u,To+=g,Po+=g*(n+(n=a)),Lo+=g*(r+(r=o)),Fo+=g*(s+(s=l)),Ce(n,r,s)}var e,i,n,r,s;Oo.point=function(a,o){e=a,i=o,Oo.point=t,a*=Wa;var l=Math.cos(o*=Wa);n=l*Math.cos(a),r=l*Math.sin(a),s=Math.sin(o),Ce(n,r,s)},Oo.lineEnd=function(){t(e,i),Oo.lineEnd=Se,Oo.point=ke}}function De(t,e){function i(i,n){return i=t(i,n),e(i[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,n){return i=e.invert(i,n),i&&t.invert(i[0],i[1])}),i}function Ae(){return!0}function Ee(t,e,i,n,r){var s=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,i=t[0],n=t[e];if(_e(i,n)){r.lineStart();for(var o=0;e>o;++o)r.point((i=t[o])[0],i[1]);return void r.lineEnd()}var l=new Le(i,t,null,!0),h=new Le(i,null,l,!1);l.o=h,s.push(l),a.push(h),l=new Le(n,t,null,!1),h=new Le(n,null,l,!0),l.o=h,s.push(l),a.push(h)}}),a.sort(e),Pe(s),Pe(a),s.length){for(var o=0,l=i,h=a.length;h>o;++o)a[o].e=l=!l;for(var c,u,d=s[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(var o=0,h=c.length;h>o;++o)r.point((u=c[o])[0],u[1]);else n(f.x,f.n.x,1,r);f=f.n}else{if(p){c=f.p.z;for(var o=c.length-1;o>=0;--o)r.point((u=c[o])[0],u[1])}else n(f.x,f.p.x,-1,r);f=f.p}f=f.o,c=f.z,p=!p}while(!f.v);r.lineEnd()}}}function Pe(t){if(e=t.length){for(var e,i,n=0,r=t[0];++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Le(t,e,i,n){this.x=t,this.z=e,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function Fe(t,e,i,n){return function(r,s){function a(e,i){var n=r(e,i);t(e=n[0],i=n[1])&&s.point(e,i)}function o(t,e){var i=r(t,e);m.point(i[0],i[1])}function l(){y.point=o,m.lineStart()}function h(){y.point=a,m.lineEnd()}function c(t,e){g.push([t,e]);var i=r(t,e);b.point(i[0],i[1])}function u(){b.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),i=x.buffer(),n=i.length;if(g.pop(),p.push(g),g=null,n)if(1&e){t=i[0];var r,n=t.length-1,a=-1;if(n>0){for(w||(s.polygonStart(),w=!0),s.lineStart();++a<n;)s.point((r=t[a])[0],r[1]);s.lineEnd()}}else n>1&&2&e&&i.push(i.pop().concat(i.shift())),f.push(i.filter(Ie))}var f,p,g,m=e(s),v=r.invert(n[0],n[1]),y={point:a,lineStart:l,lineEnd:h,polygonStart:function(){y.point=c,y.lineStart=u,y.lineEnd=d,f=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=h,f=oa.merge(f);var t=je(v,p);f.length?(w||(s.polygonStart(),w=!0),Ee(f,Re,t,i,s)):t&&(w||(s.polygonStart(),w=!0),s.lineStart(),i(null,null,1,s),s.lineEnd()),w&&(s.polygonEnd(),w=!1),f=p=null},sphere:function(){s.polygonStart(),s.lineStart(),i(null,null,1,s),s.lineEnd(),s.polygonEnd()}},x=ze(),b=e(x),w=!1;return y}}function Ie(t){return t.length>1}function ze(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,i){t.push([e,i])},lineEnd:w,buffer:function(){var i=e;return e=[],t=null,i},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Re(t,e){return((t=t.x)[0]<0?t[1]-ja-za:ja-t[1])-((e=e.x)[0]<0?e[1]-ja-za:ja-e[1])}function Oe(t){var e,i=NaN,n=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,a){var o=s>0?Oa:-Oa,l=xa(s-i);xa(l-Oa)<za?(t.point(i,n=(n+a)/2>0?ja:-ja),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),t.point(s,n),e=0):r!==o&&l>=Oa&&(xa(i-r)<za&&(i-=r*za),xa(s-o)<za&&(s-=o*za),n=Ne(i,n,s,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),e=0),t.point(i=s,n=a),r=o},lineEnd:function(){t.lineEnd(),i=n=NaN},clean:function(){return 2-e}}}function Ne(t,e,i,n){var r,s,a=Math.sin(t-i);return xa(a)>za?Math.atan((Math.sin(e)*(s=Math.cos(n))*Math.sin(i)-Math.sin(n)*(r=Math.cos(e))*Math.sin(t))/(r*s*a)):(e+n)/2}function He(t,e,i,n){var r;if(null==t)r=i*ja,n.point(-Oa,r),n.point(0,r),n.point(Oa,r),n.point(Oa,0),n.point(Oa,-r),n.point(0,-r),n.point(-Oa,-r),n.point(-Oa,0),n.point(-Oa,r);else if(xa(t[0]-e[0])>za){var s=t[0]<e[0]?Oa:-Oa;r=i*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function je(t,e){var i=t[0],n=t[1],r=[Math.sin(i),-Math.cos(i),0],s=0,a=0;Co.reset();for(var o=0,l=e.length;l>o;++o){var h=e[o],c=h.length;if(c)for(var u=h[0],d=u[0],f=u[1]/2+Oa/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===c&&(m=0),t=h[m];var v=t[0],y=t[1]/2+Oa/4,x=Math.sin(y),b=Math.cos(y),w=v-d,_=w>=0?1:-1,k=_*w,C=k>Oa,M=p*x;if(Co.add(Math.atan2(M*_*Math.sin(k),g*b+M*Math.cos(k))),s+=C?w+_*Na:w,C^d>=i^v>=i){var S=ve(ge(u),ge(t));be(S);var T=ve(r,S);be(T);var D=(C^w>=0?-1:1)*et(T[2]);(n>D||n===D&&(S[0]||S[1]))&&(a+=C^w>=0?1:-1)}if(!m++)break;d=v,p=x,g=b,u=t}}return(-za>s||za>s&&0>Co)^1&a}function We(t){function e(t,e){return Math.cos(t)*Math.cos(e)>s}function i(t){var i,s,l,h,c;return{lineStart:function(){h=l=!1,c=1},point:function(u,d){var f,p=[u,d],g=e(u,d),m=a?g?0:r(u,d):g?r(u+(0>u?Oa:-Oa),d):0;if(!i&&(h=l=g)&&t.lineStart(),g!==l&&(f=n(i,p),(_e(i,f)||_e(p,f))&&(p[0]+=za,p[1]+=za,g=e(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),f=n(p,i),t.point(f[0],f[1])):(f=n(i,p),t.point(f[0],f[1]),t.lineEnd()),i=f;else if(o&&i&&a^g){var v;m&s||!(v=n(p,i,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||i&&_e(i,p)||t.point(p[0],p[1]),i=p,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),i=null},clean:function(){return c|(h&&l)<<1}}}function n(t,e,i){var n=ge(t),r=ge(e),a=[1,0,0],o=ve(n,r),l=me(o,o),h=o[0],c=l-h*h;if(!c)return!i&&t;var u=s*l/c,d=-s*h/c,f=ve(a,o),p=xe(a,u),g=xe(o,d);ye(p,g);var m=f,v=me(p,m),y=me(m,m),x=v*v-y*(me(p,p)-1);if(!(0>x)){var b=Math.sqrt(x),w=xe(m,(-v-b)/y);if(ye(w,p),w=we(w),!i)return w;var _,k=t[0],C=e[0],M=t[1],S=e[1];k>C&&(_=k,k=C,C=_);var T=C-k,D=xa(T-Oa)<za,A=D||za>T;if(!D&&M>S&&(_=M,M=S,S=_),A?D?M+S>0^w[1]<(xa(w[0]-k)<za?M:S):M<=w[1]&&w[1]<=S:T>Oa^(k<=w[0]&&w[0]<=C)){var E=xe(m,(-v+b)/y);return ye(E,p),[w,we(E)]}}}function r(e,i){var n=a?t:Oa-t,r=0;return-n>e?r|=1:e>n&&(r|=2),-n>i?r|=4:i>n&&(r|=8),r}var s=Math.cos(t),a=s>0,o=xa(s)>za,l=pi(t,6*Wa);return Fe(e,i,l,a?[0,-t]:[-Oa,t-Oa])}function Ye(t,e,i,n){return function(r){var s,a=r.a,o=r.b,l=a.x,h=a.y,c=o.x,u=o.y,d=0,f=1,p=c-l,g=u-h;if(s=t-l,p||!(s>0)){if(s/=p,0>p){if(d>s)return;f>s&&(f=s)}else if(p>0){if(s>f)return;s>d&&(d=s)}if(s=i-l,p||!(0>s)){if(s/=p,0>p){if(s>f)return;s>d&&(d=s)}else if(p>0){if(d>s)return;f>s&&(f=s)}if(s=e-h,g||!(s>0)){if(s/=g,0>g){if(d>s)return;f>s&&(f=s)}else if(g>0){if(s>f)return;s>d&&(d=s)}if(s=n-h,g||!(0>s)){if(s/=g,0>g){if(s>f)return;s>d&&(d=s)}else if(g>0){if(d>s)return;f>s&&(f=s)}return d>0&&(r.a={x:l+d*p,y:h+d*g}),1>f&&(r.b={x:l+f*p,y:h+f*g}),r}}}}}}function $e(t,e,i,n){function r(n,r){return xa(n[0]-t)<za?r>0?0:3:xa(n[0]-i)<za?r>0?2:1:xa(n[1]-e)<za?r>0?1:0:r>0?3:2}function s(t,e){return a(t.x,e.x)}function a(t,e){var i=r(t,1),n=r(e,1);return i!==n?i-n:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}return function(o){function l(t){for(var e=0,i=m.length,n=t[1],r=0;i>r;++r)for(var s,a=1,o=m[r],l=o.length,h=o[0];l>a;++a)s=o[a],h[1]<=n?s[1]>n&&J(h,s,t)>0&&++e:s[1]<=n&&J(h,s,t)<0&&--e,h=s;return 0!==e}function h(s,o,l,h){var c=0,u=0;if(null==s||(c=r(s,l))!==(u=r(o,l))||a(s,o)<0^l>0){do h.point(0===c||3===c?t:i,c>1?n:e);while((c=(c+l+4)%4)!==u)}else h.point(o[0],o[1])}function c(r,s){return r>=t&&i>=r&&s>=e&&n>=s}function u(t,e){c(t,e)&&o.point(t,e)}function d(){A.point=p,m&&m.push(v=[]),C=!0,k=!1,w=_=NaN}function f(){g&&(p(y,x),b&&k&&T.rejoin(),g.push(T.buffer())),A.point=u,k&&o.lineEnd()}function p(t,e){t=Math.max(-Ho,Math.min(Ho,t)),e=Math.max(-Ho,Math.min(Ho,e));var i=c(t,e);if(m&&v.push([t,e]),C)y=t,x=e,b=i,C=!1,i&&(o.lineStart(),o.point(t,e));else if(i&&k)o.point(t,e);else{var n={a:{x:w,y:_},b:{x:t,y:e}};D(n)?(k||(o.lineStart(),o.point(n.a.x,n.a.y)),o.point(n.b.x,n.b.y),i||o.lineEnd(),M=!1):i&&(o.lineStart(),o.point(t,e),M=!1)}w=t,_=e,k=i}var g,m,v,y,x,b,w,_,k,C,M,S=o,T=ze(),D=Ye(t,e,i,n),A={point:u,lineStart:d,lineEnd:f,polygonStart:function(){o=T,g=[],m=[],M=!0},polygonEnd:function(){o=S,g=oa.merge(g);var e=l([t,n]),i=M&&e,r=g.length;(i||r)&&(o.polygonStart(),i&&(o.lineStart(),h(null,null,1,o),o.lineEnd()),r&&Ee(g,s,e,h,o),o.polygonEnd()),g=m=v=null}};return A}}function Be(t){var e=0,i=Oa/3,n=ai(t),r=n(e,i);return r.parallels=function(t){return arguments.length?n(e=t[0]*Oa/180,i=t[1]*Oa/180):[e/Oa*180,i/Oa*180]},r}function qe(t,e){function i(t,e){var i=Math.sqrt(s-2*r*Math.sin(e))/r;return[i*Math.sin(t*=r),a-i*Math.cos(t)]}var n=Math.sin(t),r=(n+Math.sin(e))/2,s=1+n*(2*r-n),a=Math.sqrt(s)/r;return i.invert=function(t,e){var i=a-e;return[Math.atan2(t,i)/r,et((s-(t*t+i*i)*r*r)/(2*r))]},i}function Ue(){function t(t,e){Wo+=r*t-n*e,n=t,r=e}var e,i,n,r;Uo.point=function(s,a){Uo.point=t,e=n=s,i=r=a},Uo.lineEnd=function(){t(e,i)}}function Ve(t,e){Yo>t&&(Yo=t),t>Bo&&(Bo=t),$o>e&&($o=e),e>qo&&(qo=e)}function Xe(){function t(t,e){a.push("M",t,",",e,s)}function e(t,e){a.push("M",t,",",e),o.point=i}function i(t,e){a.push("L",t,",",e)}function n(){o.point=t}function r(){a.push("Z")}var s=Ge(4.5),a=[],o={point:t,lineStart:function(){o.point=e},lineEnd:n,polygonStart:function(){o.lineEnd=r},polygonEnd:function(){o.lineEnd=n,o.point=t},pointRadius:function(t){return s=Ge(t),o},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return o}function Ge(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ze(t,e){Do+=t,Ao+=e,++Eo}function Qe(){function t(t,n){var r=t-e,s=n-i,a=Math.sqrt(r*r+s*s);Po+=a*(e+t)/2,Lo+=a*(i+n)/2,Fo+=a,Ze(e=t,i=n)}var e,i;Xo.point=function(n,r){Xo.point=t,Ze(e=n,i=r)}}function Ke(){Xo.point=Ze}function Je(){function t(t,e){var i=t-n,s=e-r,a=Math.sqrt(i*i+s*s);Po+=a*(n+t)/2,Lo+=a*(r+e)/2,Fo+=a,a=r*t-n*e,Io+=a*(n+t),zo+=a*(r+e),Ro+=3*a,Ze(n=t,r=e)}var e,i,n,r;Xo.point=function(s,a){Xo.point=t,Ze(e=n=s,i=r=a)},Xo.lineEnd=function(){t(e,i)}}function ti(t){function e(e,i){t.moveTo(e+a,i),t.arc(e,i,a,0,Na)}function i(e,i){t.moveTo(e,i),o.point=n}function n(e,i){t.lineTo(e,i)}function r(){o.point=e}function s(){t.closePath()}var a=4.5,o={point:e,lineStart:function(){o.point=i},lineEnd:r,polygonStart:function(){o.lineEnd=s},polygonEnd:function(){o.lineEnd=r,o.point=e},pointRadius:function(t){return a=t,o},result:w};return o}function ei(t){function e(t){return(o?n:i)(t)}function i(e){return ri(e,function(i,n){i=t(i,n),e.point(i[0],i[1])})}function n(e){function i(i,n){i=t(i,n),e.point(i[0],i[1])}function n(){x=NaN,C.point=s,e.lineStart()}function s(i,n){var s=ge([i,n]),a=t(i,n);r(x,b,y,w,_,k,x=a[0],b=a[1],y=i,w=s[0],_=s[1],k=s[2],o,e),e.point(x,b)}function a(){C.point=i,e.lineEnd()}function l(){n(),C.point=h,C.lineEnd=c}function h(t,e){s(u=t,d=e),f=x,p=b,g=w,m=_,v=k,C.point=s}function c(){r(x,b,y,w,_,k,f,p,u,g,m,v,o,e),C.lineEnd=a,a()}var u,d,f,p,g,m,v,y,x,b,w,_,k,C={point:i,lineStart:n,lineEnd:a,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=n}};return C}function r(e,i,n,o,l,h,c,u,d,f,p,g,m,v){var y=c-e,x=u-i,b=y*y+x*x;
if(b>4*s&&m--){var w=o+f,_=l+p,k=h+g,C=Math.sqrt(w*w+_*_+k*k),M=Math.asin(k/=C),S=xa(xa(k)-1)<za||xa(n-d)<za?(n+d)/2:Math.atan2(_,w),T=t(S,M),D=T[0],A=T[1],E=D-e,P=A-i,L=x*E-y*P;(L*L/b>s||xa((y*E+x*P)/b-.5)>.3||a>o*f+l*p+h*g)&&(r(e,i,n,o,l,h,D,A,S,w/=C,_/=C,k,m,v),v.point(D,A),r(D,A,S,w,_,k,c,u,d,f,p,g,m,v))}}var s=.5,a=Math.cos(30*Wa),o=16;return e.precision=function(t){return arguments.length?(o=(s=t*t)>0&&16,e):Math.sqrt(s)},e}function ii(t){var e=ei(function(e,i){return t([e*Ya,i*Ya])});return function(t){return oi(e(t))}}function ni(t){this.stream=t}function ri(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function si(t){return ai(function(){return t})()}function ai(t){function e(t){return t=o(t[0]*Wa,t[1]*Wa),[t[0]*d+l,h-t[1]*d]}function i(t){return t=o.invert((t[0]-l)/d,(h-t[1])/d),t&&[t[0]*Ya,t[1]*Ya]}function n(){o=De(a=ci(v,x,b),s);var t=s(g,m);return l=f-t[0]*d,h=p+t[1]*d,r()}function r(){return c&&(c.valid=!1,c=null),e}var s,a,o,l,h,c,u=ei(function(t,e){return t=s(t,e),[t[0]*d+l,h-t[1]*d]}),d=150,f=480,p=250,g=0,m=0,v=0,x=0,b=0,w=No,_=y,k=null,C=null;return e.stream=function(t){return c&&(c.valid=!1),c=oi(w(a,u(_(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(k=t,No):We((k=+t)*Wa),r()):k},e.clipExtent=function(t){return arguments.length?(C=t,_=t?$e(t[0][0],t[0][1],t[1][0],t[1][1]):y,r()):C},e.scale=function(t){return arguments.length?(d=+t,n()):d},e.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],n()):[f,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Wa,m=t[1]%360*Wa,n()):[g*Ya,m*Ya]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Wa,x=t[1]%360*Wa,b=t.length>2?t[2]%360*Wa:0,n()):[v*Ya,x*Ya,b*Ya]},oa.rebind(e,u,"precision"),function(){return s=t.apply(this,arguments),e.invert=s.invert&&i,n()}}function oi(t){return ri(t,function(e,i){t.point(e*Wa,i*Wa)})}function li(t,e){return[t,e]}function hi(t,e){return[t>Oa?t-Na:-Oa>t?t+Na:t,e]}function ci(t,e,i){return t?e||i?De(di(t),fi(e,i)):di(t):e||i?fi(e,i):hi}function ui(t){return function(e,i){return e+=t,[e>Oa?e-Na:-Oa>e?e+Na:e,i]}}function di(t){var e=ui(t);return e.invert=ui(-t),e}function fi(t,e){function i(t,e){var i=Math.cos(e),o=Math.cos(t)*i,l=Math.sin(t)*i,h=Math.sin(e),c=h*n+o*r;return[Math.atan2(l*s-c*a,o*n-h*r),et(c*s+l*a)]}var n=Math.cos(t),r=Math.sin(t),s=Math.cos(e),a=Math.sin(e);return i.invert=function(t,e){var i=Math.cos(e),o=Math.cos(t)*i,l=Math.sin(t)*i,h=Math.sin(e),c=h*s-l*a;return[Math.atan2(l*s+h*a,o*n+c*r),et(c*n-o*r)]},i}function pi(t,e){var i=Math.cos(t),n=Math.sin(t);return function(r,s,a,o){var l=a*e;null!=r?(r=gi(i,r),s=gi(i,s),(a>0?s>r:r>s)&&(r+=a*Na)):(r=t+a*Na,s=t-.5*l);for(var h,c=r;a>0?c>s:s>c;c-=l)o.point((h=we([i,-n*Math.cos(c),-n*Math.sin(c)]))[0],h[1])}}function gi(t,e){var i=ge(e);i[0]-=t,be(i);var n=tt(-i[1]);return((-i[2]<0?-n:n)+2*Math.PI-za)%(2*Math.PI)}function mi(t,e,i){var n=oa.range(t,e-za,i).concat(e);return function(t){return n.map(function(e){return[t,e]})}}function vi(t,e,i){var n=oa.range(t,e-za,i).concat(e);return function(t){return n.map(function(e){return[e,t]})}}function yi(t){return t.source}function xi(t){return t.target}function bi(t,e,i,n){var r=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=r*Math.cos(t),h=r*Math.sin(t),c=a*Math.cos(i),u=a*Math.sin(i),d=2*Math.asin(Math.sqrt(st(n-e)+r*a*st(i-t))),f=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*f,i=Math.sin(d-t)*f,n=i*l+e*c,r=i*h+e*u,a=i*s+e*o;return[Math.atan2(r,n)*Ya,Math.atan2(a,Math.sqrt(n*n+r*r))*Ya]}:function(){return[t*Ya,e*Ya]};return p.distance=d,p}function wi(){function t(t,r){var s=Math.sin(r*=Wa),a=Math.cos(r),o=xa((t*=Wa)-e),l=Math.cos(o);Go+=Math.atan2(Math.sqrt((o=a*Math.sin(o))*o+(o=n*s-i*a*l)*o),i*s+n*a*l),e=t,i=s,n=a}var e,i,n;Zo.point=function(r,s){e=r*Wa,i=Math.sin(s*=Wa),n=Math.cos(s),Zo.point=t},Zo.lineEnd=function(){Zo.point=Zo.lineEnd=w}}function _i(t,e){function i(e,i){var n=Math.cos(e),r=Math.cos(i),s=t(n*r);return[s*r*Math.sin(e),s*Math.sin(i)]}return i.invert=function(t,i){var n=Math.sqrt(t*t+i*i),r=e(n),s=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*s,n*a),Math.asin(n&&i*s/n)]},i}function ki(t,e){function i(t,e){a>0?-ja+za>e&&(e=-ja+za):e>ja-za&&(e=ja-za);var i=a/Math.pow(r(e),s);return[i*Math.sin(s*t),a-i*Math.cos(s*t)]}var n=Math.cos(t),r=function(t){return Math.tan(Oa/4+t/2)},s=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),a=n*Math.pow(r(t),s)/s;return s?(i.invert=function(t,e){var i=a-e,n=K(s)*Math.sqrt(t*t+i*i);return[Math.atan2(t,i)/s,2*Math.atan(Math.pow(a/n,1/s))-ja]},i):Mi}function Ci(t,e){function i(t,e){var i=s-e;return[i*Math.sin(r*t),s-i*Math.cos(r*t)]}var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),s=n/r+t;return xa(r)<za?li:(i.invert=function(t,e){var i=s-e;return[Math.atan2(t,i)/r,s-K(r)*Math.sqrt(t*t+i*i)]},i)}function Mi(t,e){return[t,Math.log(Math.tan(Oa/4+e/2))]}function Si(t){var e,i=si(t),n=i.scale,r=i.translate,s=i.clipExtent;return i.scale=function(){var t=n.apply(i,arguments);return t===i?e?i.clipExtent(null):i:t},i.translate=function(){var t=r.apply(i,arguments);return t===i?e?i.clipExtent(null):i:t},i.clipExtent=function(t){var a=s.apply(i,arguments);if(a===i){if(e=null==t){var o=Oa*n(),l=r();s([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else e&&(a=null);return a},i.clipExtent(null)}function Ti(t,e){return[Math.log(Math.tan(Oa/4+e/2)),-t]}function Di(t){return t[0]}function Ai(t){return t[1]}function Ei(t){for(var e=t.length,i=[0,1],n=2,r=2;e>r;r++){for(;n>1&&J(t[i[n-2]],t[i[n-1]],t[r])<=0;)--n;i[n++]=r}return i.slice(0,n)}function Pi(t,e){return t[0]-e[0]||t[1]-e[1]}function Li(t,e,i){return(i[0]-e[0])*(t[1]-e[1])<(i[1]-e[1])*(t[0]-e[0])}function Fi(t,e,i,n){var r=t[0],s=i[0],a=e[0]-r,o=n[0]-s,l=t[1],h=i[1],c=e[1]-l,u=n[1]-h,d=(o*(l-h)-u*(r-s))/(u*a-o*c);return[r+d*a,l+d*c]}function Ii(t){var e=t[0],i=t[t.length-1];return!(e[0]-i[0]||e[1]-i[1])}function zi(){nn(this),this.edge=this.site=this.circle=null}function Ri(t){var e=ll.pop()||new zi;return e.site=t,e}function Oi(t){Vi(t),sl.remove(t),ll.push(t),nn(t)}function Ni(t){var e=t.circle,i=e.x,n=e.cy,r={x:i,y:n},s=t.P,a=t.N,o=[t];Oi(t);for(var l=s;l.circle&&xa(i-l.circle.x)<za&&xa(n-l.circle.cy)<za;)s=l.P,o.unshift(l),Oi(l),l=s;o.unshift(l),Vi(l);for(var h=a;h.circle&&xa(i-h.circle.x)<za&&xa(n-h.circle.cy)<za;)a=h.N,o.push(h),Oi(h),h=a;o.push(h),Vi(h);var c,u=o.length;for(c=1;u>c;++c)h=o[c],l=o[c-1],Ji(h.edge,l.site,h.site,r);l=o[0],h=o[u-1],h.edge=Qi(l.site,h.site,null,r),Ui(l),Ui(h)}function Hi(t){for(var e,i,n,r,s=t.x,a=t.y,o=sl._;o;)if(n=ji(o,a)-s,n>za)o=o.L;else{if(r=s-Wi(o,a),!(r>za)){n>-za?(e=o.P,i=o):r>-za?(e=o,i=o.N):e=i=o;break}if(!o.R){e=o;break}o=o.R}var l=Ri(t);if(sl.insert(e,l),e||i){if(e===i)return Vi(e),i=Ri(e.site),sl.insert(l,i),l.edge=i.edge=Qi(e.site,l.site),Ui(e),void Ui(i);if(!i)return void(l.edge=Qi(e.site,l.site));Vi(e),Vi(i);var h=e.site,c=h.x,u=h.y,d=t.x-c,f=t.y-u,p=i.site,g=p.x-c,m=p.y-u,v=2*(d*m-f*g),y=d*d+f*f,x=g*g+m*m,b={x:(m*y-f*x)/v+c,y:(d*x-g*y)/v+u};Ji(i.edge,h,p,b),l.edge=Qi(h,t,null,b),i.edge=Qi(t,p,null,b),Ui(e),Ui(i)}}function ji(t,e){var i=t.site,n=i.x,r=i.y,s=r-e;if(!s)return n;var a=t.P;if(!a)return-(1/0);i=a.site;var o=i.x,l=i.y,h=l-e;if(!h)return o;var c=o-n,u=1/s-1/h,d=c/h;return u?(-d+Math.sqrt(d*d-2*u*(c*c/(-2*h)-l+h/2+r-s/2)))/u+n:(n+o)/2}function Wi(t,e){var i=t.N;if(i)return ji(i,e);var n=t.site;return n.y===e?n.x:1/0}function Yi(t){this.site=t,this.edges=[]}function $i(t){for(var e,i,n,r,s,a,o,l,h,c,u=t[0][0],d=t[1][0],f=t[0][1],p=t[1][1],g=rl,m=g.length;m--;)if(s=g[m],s&&s.prepare())for(o=s.edges,l=o.length,a=0;l>a;)c=o[a].end(),n=c.x,r=c.y,h=o[++a%l].start(),e=h.x,i=h.y,(xa(n-e)>za||xa(r-i)>za)&&(o.splice(a,0,new tn(Ki(s.site,c,xa(n-u)<za&&p-r>za?{x:u,y:xa(e-u)<za?i:p}:xa(r-p)<za&&d-n>za?{x:xa(i-p)<za?e:d,y:p}:xa(n-d)<za&&r-f>za?{x:d,y:xa(e-d)<za?i:f}:xa(r-f)<za&&n-u>za?{x:xa(i-f)<za?e:u,y:f}:null),s.site,null)),++l)}function Bi(t,e){return e.angle-t.angle}function qi(){nn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ui(t){var e=t.P,i=t.N;if(e&&i){var n=e.site,r=t.site,s=i.site;if(n!==s){var a=r.x,o=r.y,l=n.x-a,h=n.y-o,c=s.x-a,u=s.y-o,d=2*(l*u-h*c);if(!(d>=-Ra)){var f=l*l+h*h,p=c*c+u*u,g=(u*f-h*p)/d,m=(l*p-c*f)/d,u=m+o,v=hl.pop()||new qi;v.arc=t,v.site=r,v.x=g+a,v.y=u+Math.sqrt(g*g+m*m),v.cy=u,t.circle=v;for(var y=null,x=ol._;x;)if(v.y<x.y||v.y===x.y&&v.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}ol.insert(y,v),y||(al=v)}}}}function Vi(t){var e=t.circle;e&&(e.P||(al=e.N),ol.remove(e),hl.push(e),nn(e),t.circle=null)}function Xi(t){for(var e,i=nl,n=Ye(t[0][0],t[0][1],t[1][0],t[1][1]),r=i.length;r--;)e=i[r],(!Gi(e,t)||!n(e)||xa(e.a.x-e.b.x)<za&&xa(e.a.y-e.b.y)<za)&&(e.a=e.b=null,i.splice(r,1))}function Gi(t,e){var i=t.b;if(i)return!0;var n,r,s=t.a,a=e[0][0],o=e[1][0],l=e[0][1],h=e[1][1],c=t.l,u=t.r,d=c.x,f=c.y,p=u.x,g=u.y,m=(d+p)/2,v=(f+g)/2;if(g===f){if(a>m||m>=o)return;if(d>p){if(s){if(s.y>=h)return}else s={x:m,y:l};i={x:m,y:h}}else{if(s){if(s.y<l)return}else s={x:m,y:h};i={x:m,y:l}}}else if(n=(d-p)/(g-f),r=v-n*m,-1>n||n>1)if(d>p){if(s){if(s.y>=h)return}else s={x:(l-r)/n,y:l};i={x:(h-r)/n,y:h}}else{if(s){if(s.y<l)return}else s={x:(h-r)/n,y:h};i={x:(l-r)/n,y:l}}else if(g>f){if(s){if(s.x>=o)return}else s={x:a,y:n*a+r};i={x:o,y:n*o+r}}else{if(s){if(s.x<a)return}else s={x:o,y:n*o+r};i={x:a,y:n*a+r}}return t.a=s,t.b=i,!0}function Zi(t,e){this.l=t,this.r=e,this.a=this.b=null}function Qi(t,e,i,n){var r=new Zi(t,e);return nl.push(r),i&&Ji(r,t,e,i),n&&Ji(r,e,t,n),rl[t.i].edges.push(new tn(r,t,e)),rl[e.i].edges.push(new tn(r,e,t)),r}function Ki(t,e,i){var n=new Zi(t,null);return n.a=e,n.b=i,nl.push(n),n}function Ji(t,e,i,n){t.a||t.b?t.l===i?t.b=n:t.a=n:(t.a=n,t.l=e,t.r=i)}function tn(t,e,i){var n=t.a,r=t.b;this.edge=t,this.site=e,this.angle=i?Math.atan2(i.y-e.y,i.x-e.x):t.l===e?Math.atan2(r.x-n.x,n.y-r.y):Math.atan2(n.x-r.x,r.y-n.y)}function en(){this._=null}function nn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function rn(t,e){var i=e,n=e.R,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function sn(t,e){var i=e,n=e.L,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function an(t){for(;t.L;)t=t.L;return t}function on(t,e){var i,n,r,s=t.sort(ln).pop();for(nl=[],rl=new Array(t.length),sl=new en,ol=new en;;)if(r=al,s&&(!r||s.y<r.y||s.y===r.y&&s.x<r.x))(s.x!==i||s.y!==n)&&(rl[s.i]=new Yi(s),Hi(s),i=s.x,n=s.y),s=t.pop();else{if(!r)break;Ni(r.arc)}e&&(Xi(e),$i(e));var a={cells:rl,edges:nl};return sl=ol=nl=rl=null,a}function ln(t,e){return e.y-t.y||e.x-t.x}function hn(t,e,i){return(t.x-i.x)*(e.y-t.y)-(t.x-e.x)*(i.y-t.y)}function cn(t){return t.x}function un(t){return t.y}function dn(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fn(t,e,i,n,r,s){if(!t(e,i,n,r,s)){var a=.5*(i+r),o=.5*(n+s),l=e.nodes;l[0]&&fn(t,l[0],i,n,a,o),l[1]&&fn(t,l[1],a,n,r,o),l[2]&&fn(t,l[2],i,o,a,s),l[3]&&fn(t,l[3],a,o,r,s)}}function pn(t,e,i,n,r,s,a){var o,l=1/0;return function h(t,c,u,d,f){if(!(c>s||u>a||n>d||r>f)){if(p=t.point){var p,g=e-t.x,m=i-t.y,v=g*g+m*m;if(l>v){var y=Math.sqrt(l=v);n=e-y,r=i-y,s=e+y,a=i+y,o=p}}for(var x=t.nodes,b=.5*(c+d),w=.5*(u+f),_=e>=b,k=i>=w,C=k<<1|_,M=C+4;M>C;++C)if(t=x[3&C])switch(3&C){case 0:h(t,c,u,b,w);break;case 1:h(t,b,u,d,w);break;case 2:h(t,c,w,b,f);break;case 3:h(t,b,w,d,f)}}}(t,n,r,s,a),o}function gn(t,e){t=oa.rgb(t),e=oa.rgb(e);var i=t.r,n=t.g,r=t.b,s=e.r-i,a=e.g-n,o=e.b-r;return function(t){return"#"+bt(Math.round(i+s*t))+bt(Math.round(n+a*t))+bt(Math.round(r+o*t))}}function mn(t,e){var i,n={},r={};for(i in t)i in e?n[i]=xn(t[i],e[i]):r[i]=t[i];for(i in e)i in t||(r[i]=e[i]);return function(t){for(i in n)r[i]=n[i](t);return r}}function vn(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function yn(t,e){var i,n,r,s=ul.lastIndex=dl.lastIndex=0,a=-1,o=[],l=[];for(t+="",e+="";(i=ul.exec(t))&&(n=dl.exec(e));)(r=n.index)>s&&(r=e.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(i=i[0])===(n=n[0])?o[a]?o[a]+=n:o[++a]=n:(o[++a]=null,l.push({i:a,x:vn(i,n)})),s=dl.lastIndex;return s<e.length&&(r=e.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var i,n=0;e>n;++n)o[(i=l[n]).i]=i.x(t);return o.join("")})}function xn(t,e){for(var i,n=oa.interpolators.length;--n>=0&&!(i=oa.interpolators[n](t,e)););return i}function bn(t,e){var i,n=[],r=[],s=t.length,a=e.length,o=Math.min(t.length,e.length);for(i=0;o>i;++i)n.push(xn(t[i],e[i]));for(;s>i;++i)r[i]=t[i];for(;a>i;++i)r[i]=e[i];return function(t){for(i=0;o>i;++i)r[i]=n[i](t);return r}}function wn(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function _n(t){return function(e){return 1-t(1-e)}}function kn(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Cn(t){return t*t}function Mn(t){return t*t*t}function Sn(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(.5>t?i:3*(t-e)+i-.75)}function Tn(t){return function(e){return Math.pow(e,t)}}function Dn(t){return 1-Math.cos(t*ja)}function An(t){return Math.pow(2,10*(t-1))}function En(t){return 1-Math.sqrt(1-t*t)}function Pn(t,e){var i;return arguments.length<2&&(e=.45),arguments.length?i=e/Na*Math.asin(1/t):(t=1,i=e/4),function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-i)*Na/e)}}function Ln(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Fn(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function In(t,e){t=oa.hcl(t),e=oa.hcl(e);var i=t.h,n=t.c,r=t.l,s=e.h-i,a=e.c-n,o=e.l-r;return isNaN(a)&&(a=0,n=isNaN(n)?e.c:n),isNaN(s)?(s=0,i=isNaN(i)?e.h:i):s>180?s-=360:-180>s&&(s+=360),function(t){return ct(i+s*t,n+a*t,r+o*t)+""}}function zn(t,e){t=oa.hsl(t),e=oa.hsl(e);var i=t.h,n=t.s,r=t.l,s=e.h-i,a=e.s-n,o=e.l-r;return isNaN(a)&&(a=0,n=isNaN(n)?e.s:n),isNaN(s)?(s=0,i=isNaN(i)?e.h:i):s>180?s-=360:-180>s&&(s+=360),function(t){return lt(i+s*t,n+a*t,r+o*t)+""}}function Rn(t,e){t=oa.lab(t),e=oa.lab(e);var i=t.l,n=t.a,r=t.b,s=e.l-i,a=e.a-n,o=e.b-r;return function(t){return dt(i+s*t,n+a*t,r+o*t)+""}}function On(t,e){return e-=t,function(i){return Math.round(t+e*i)}}function Nn(t){var e=[t.a,t.b],i=[t.c,t.d],n=jn(e),r=Hn(e,i),s=jn(Wn(i,e,-r))||0;e[0]*i[1]<i[0]*e[1]&&(e[0]*=-1,e[1]*=-1,n*=-1,r*=-1),this.rotate=(n?Math.atan2(e[1],e[0]):Math.atan2(-i[0],i[1]))*Ya,this.translate=[t.e,t.f],this.scale=[n,s],this.skew=s?Math.atan2(r,s)*Ya:0}function Hn(t,e){return t[0]*e[0]+t[1]*e[1]}function jn(t){var e=Math.sqrt(Hn(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Wn(t,e,i){return t[0]+=i*e[0],t[1]+=i*e[1],t}function Yn(t){return t.length?t.pop()+",":""}function $n(t,e,i,n){if(t[0]!==e[0]||t[1]!==e[1]){var r=i.push("translate(",null,",",null,")");n.push({i:r-4,x:vn(t[0],e[0])},{i:r-2,x:vn(t[1],e[1])})}else(e[0]||e[1])&&i.push("translate("+e+")")}function Bn(t,e,i,n){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),n.push({i:i.push(Yn(i)+"rotate(",null,")")-2,x:vn(t,e)})):e&&i.push(Yn(i)+"rotate("+e+")")}function qn(t,e,i,n){t!==e?n.push({i:i.push(Yn(i)+"skewX(",null,")")-2,x:vn(t,e)}):e&&i.push(Yn(i)+"skewX("+e+")")}function Un(t,e,i,n){if(t[0]!==e[0]||t[1]!==e[1]){var r=i.push(Yn(i)+"scale(",null,",",null,")");n.push({i:r-4,x:vn(t[0],e[0])},{i:r-2,x:vn(t[1],e[1])})}else(1!==e[0]||1!==e[1])&&i.push(Yn(i)+"scale("+e+")")}function Vn(t,e){var i=[],n=[];return t=oa.transform(t),e=oa.transform(e),$n(t.translate,e.translate,i,n),Bn(t.rotate,e.rotate,i,n),qn(t.skew,e.skew,i,n),Un(t.scale,e.scale,i,n),t=e=null,function(t){for(var e,r=-1,s=n.length;++r<s;)i[(e=n[r]).i]=e.x(t);return i.join("")}}function Xn(t,e){return e=(e-=t=+t)||1/e,function(i){return(i-t)/e}}function Gn(t,e){return e=(e-=t=+t)||1/e,function(i){return Math.max(0,Math.min(1,(i-t)/e))}}function Zn(t){for(var e=t.source,i=t.target,n=Kn(e,i),r=[e];e!==n;)e=e.parent,r.push(e);for(var s=r.length;i!==n;)r.splice(s,0,i),i=i.parent;return r}function Qn(t){for(var e=[],i=t.parent;null!=i;)e.push(t),t=i,i=i.parent;return e.push(t),e}function Kn(t,e){if(t===e)return t;for(var i=Qn(t),n=Qn(e),r=i.pop(),s=n.pop(),a=null;r===s;)a=r,r=i.pop(),s=n.pop();return a}function Jn(t){t.fixed|=2}function tr(t){t.fixed&=-7}function er(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ir(t){t.fixed&=-5}function nr(t,e,i){var n=0,r=0;if(t.charge=0,!t.leaf)for(var s,a=t.nodes,o=a.length,l=-1;++l<o;)s=a[l],null!=s&&(nr(s,e,i),t.charge+=s.charge,n+=s.charge*s.cx,r+=s.charge*s.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var h=e*i[t.point.index];t.charge+=t.pointCharge=h,n+=h*t.point.x,r+=h*t.point.y}t.cx=n/t.charge,t.cy=r/t.charge}function rr(t,e){return oa.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=cr,t}function sr(t,e){for(var i=[t];null!=(t=i.pop());)if(e(t),(r=t.children)&&(n=r.length))for(var n,r;--n>=0;)i.push(r[n])}function ar(t,e){for(var i=[t],n=[];null!=(t=i.pop());)if(n.push(t),(s=t.children)&&(r=s.length))for(var r,s,a=-1;++a<r;)i.push(s[a]);for(;null!=(t=n.pop());)e(t)}function or(t){return t.children}function lr(t){return t.value}function hr(t,e){return e.value-t.value}function cr(t){return oa.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function ur(t){return t.x}function dr(t){return t.y}function fr(t,e,i){t.y0=e,t.y=i}function pr(t){return oa.range(t.length)}function gr(t){for(var e=-1,i=t[0].length,n=[];++e<i;)n[e]=0;return n}function mr(t){for(var e,i=1,n=0,r=t[0][1],s=t.length;s>i;++i)(e=t[i][1])>r&&(n=i,r=e);return n}function vr(t){return t.reduce(yr,0)}function yr(t,e){return t+e[1]}function xr(t,e){return br(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function br(t,e){for(var i=-1,n=+t[0],r=(t[1]-n)/e,s=[];++i<=e;)s[i]=r*i+n;return s}function wr(t){return[oa.min(t),oa.max(t)]}function _r(t,e){return t.value-e.value}function kr(t,e){var i=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=i,i._pack_prev=e}function Cr(t,e){t._pack_next=e,e._pack_prev=t}function Mr(t,e){var i=e.x-t.x,n=e.y-t.y,r=t.r+e.r;return.999*r*r>i*i+n*n}function Sr(t){function e(t){c=Math.min(t.x-t.r,c),u=Math.max(t.x+t.r,u),d=Math.min(t.y-t.r,d),f=Math.max(t.y+t.r,f)}if((i=t.children)&&(h=i.length)){var i,n,r,s,a,o,l,h,c=1/0,u=-(1/0),d=1/0,f=-(1/0);if(i.forEach(Tr),n=i[0],n.x=-n.r,n.y=0,e(n),h>1&&(r=i[1],r.x=r.r,r.y=0,e(r),h>2))for(s=i[2],Er(n,r,s),e(s),kr(n,s),n._pack_prev=s,kr(s,r),r=n._pack_next,a=3;h>a;a++){Er(n,r,s=i[a]);var p=0,g=1,m=1;for(o=r._pack_next;o!==r;o=o._pack_next,g++)if(Mr(o,s)){p=1;break}if(1==p)for(l=n._pack_prev;l!==o._pack_prev&&!Mr(l,s);l=l._pack_prev,m++);p?(m>g||g==m&&r.r<n.r?Cr(n,r=o):Cr(n=l,r),a--):(kr(n,s),r=s,e(s))}var v=(c+u)/2,y=(d+f)/2,x=0;for(a=0;h>a;a++)s=i[a],s.x-=v,s.y-=y,x=Math.max(x,s.r+Math.sqrt(s.x*s.x+s.y*s.y));t.r=x,i.forEach(Dr)}}function Tr(t){t._pack_next=t._pack_prev=t}function Dr(t){delete t._pack_next,delete t._pack_prev}function Ar(t,e,i,n){var r=t.children;if(t.x=e+=n*t.x,t.y=i+=n*t.y,t.r*=n,r)for(var s=-1,a=r.length;++s<a;)Ar(r[s],e,i,n)}function Er(t,e,i){var n=t.r+i.r,r=e.x-t.x,s=e.y-t.y;if(n&&(r||s)){var a=e.r+i.r,o=r*r+s*s;a*=a,n*=n;var l=.5+(n-a)/(2*o),h=Math.sqrt(Math.max(0,2*a*(n+o)-(n-=o)*n-a*a))/(2*o);i.x=t.x+l*r+h*s,i.y=t.y+l*s-h*r}else i.x=t.x+n,i.y=t.y}function Pr(t,e){return t.parent==e.parent?1:2}function Lr(t){var e=t.children;return e.length?e[0]:t.t}function Fr(t){var e,i=t.children;return(e=i.length)?i[e-1]:t.t}function Ir(t,e,i){var n=i/(e.i-t.i);e.c-=n,e.s+=i,t.c+=n,e.z+=i,e.m+=i}function zr(t){for(var e,i=0,n=0,r=t.children,s=r.length;--s>=0;)e=r[s],e.z+=i,e.m+=i,i+=e.s+(n+=e.c)}function Rr(t,e,i){return t.a.parent===e.parent?t.a:i}function Or(t){return 1+oa.max(t,function(t){return t.y})}function Nr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Hr(t){var e=t.children;return e&&e.length?Hr(e[0]):t}function jr(t){var e,i=t.children;return i&&(e=i.length)?jr(i[e-1]):t}function Wr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Yr(t,e){var i=t.x+e[3],n=t.y+e[0],r=t.dx-e[1]-e[3],s=t.dy-e[0]-e[2];return 0>r&&(i+=r/2,r=0),0>s&&(n+=s/2,s=0),{x:i,y:n,dx:r,dy:s}}function $r(t){var e=t[0],i=t[t.length-1];return i>e?[e,i]:[i,e]}function Br(t){return t.rangeExtent?t.rangeExtent():$r(t.range())}function qr(t,e,i,n){var r=i(t[0],t[1]),s=n(e[0],e[1]);return function(t){return s(r(t))}}function Ur(t,e){var i,n=0,r=t.length-1,s=t[n],a=t[r];return s>a&&(i=n,n=r,r=i,i=s,s=a,a=i),t[n]=e.floor(s),t[r]=e.ceil(a),t}function Vr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:kl}function Xr(t,e,i,n){var r=[],s=[],a=0,o=Math.min(t.length,e.length)-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=o;)r.push(i(t[a-1],t[a])),s.push(n(e[a-1],e[a]));return function(e){var i=oa.bisect(t,e,1,o)-1;return s[i](r[i](e))}}function Gr(t,e,i,n){function r(){var r=Math.min(t.length,e.length)>2?Xr:qr,l=n?Gn:Xn;return a=r(t,e,l,i),o=r(e,t,l,xn),s}function s(t){return a(t)}var a,o;return s.invert=function(t){return o(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},s.range=function(t){return arguments.length?(e=t,r()):e},s.rangeRound=function(t){return s.range(t).interpolate(On)},s.clamp=function(t){return arguments.length?(n=t,r()):n},s.interpolate=function(t){return arguments.length?(i=t,r()):i},s.ticks=function(e){return Jr(t,e)},s.tickFormat=function(e,i){return ts(t,e,i)},s.nice=function(e){return Qr(t,e),r()},s.copy=function(){return Gr(t,e,i,n)},r()}function Zr(t,e){return oa.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Qr(t,e){return Ur(t,Vr(Kr(t,e)[2])),Ur(t,Vr(Kr(t,e)[2])),t}function Kr(t,e){null==e&&(e=10);var i=$r(t),n=i[1]-i[0],r=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),s=e/n*r;return.15>=s?r*=10:.35>=s?r*=5:.75>=s&&(r*=2),i[0]=Math.ceil(i[0]/r)*r,i[1]=Math.floor(i[1]/r)*r+.5*r,i[2]=r,i}function Jr(t,e){return oa.range.apply(oa,Kr(t,e))}function ts(t,e,i){var n=Kr(t,e);if(i){var r=co.exec(i);if(r.shift(),"s"===r[8]){var s=oa.formatPrefix(Math.max(xa(n[0]),xa(n[1])));return r[7]||(r[7]="."+es(s.scale(n[2]))),r[8]="f",i=oa.format(r.join("")),function(t){return i(s.scale(t))+s.symbol}}r[7]||(r[7]="."+is(r[8],n)),i=r.join("")}else i=",."+es(n[2])+"f";return oa.format(i)}function es(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function is(t,e){var i=es(e[2]);return t in Cl?Math.abs(i-es(Math.max(xa(e[0]),xa(e[1]))))+ +("e"!==t):i-2*("%"===t)}function ns(t,e,i,n){function r(t){return(i?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function s(t){return i?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(r(e))}return a.invert=function(e){return s(t.invert(e))},a.domain=function(e){return arguments.length?(i=e[0]>=0,t.domain((n=e.map(Number)).map(r)),a):n},a.base=function(i){return arguments.length?(e=+i,t.domain(n.map(r)),a):e},a.nice=function(){var e=Ur(n.map(r),i?Math:Sl);return t.domain(e),n=e.map(s),a},a.ticks=function(){var t=$r(n),a=[],o=t[0],l=t[1],h=Math.floor(r(o)),c=Math.ceil(r(l)),u=e%1?2:e;if(isFinite(c-h)){if(i){for(;c>h;h++)for(var d=1;u>d;d++)a.push(s(h)*d);a.push(s(h))}else for(a.push(s(h));h++<c;)for(var d=u-1;d>0;d--)a.push(s(h)*d);for(h=0;a[h]<o;h++);for(c=a.length;a[c-1]>l;c--);a=a.slice(h,c)}return a},a.tickFormat=function(t,i){if(!arguments.length)return Ml;arguments.length<2?i=Ml:"function"!=typeof i&&(i=oa.format(i));var n=Math.max(1,e*t/a.ticks().length);return function(t){var a=t/s(Math.round(r(t)));return e-.5>a*e&&(a*=e),n>=a?i(t):""}},a.copy=function(){return ns(t.copy(),e,i,n)},Zr(a,t)}function rs(t,e,i){function n(e){return t(r(e))}var r=ss(e),s=ss(1/e);return n.invert=function(e){return s(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain((i=e.map(Number)).map(r)),n):i},n.ticks=function(t){return Jr(i,t)},n.tickFormat=function(t,e){return ts(i,t,e)},n.nice=function(t){return n.domain(Qr(i,t))},n.exponent=function(a){return arguments.length?(r=ss(e=a),s=ss(1/e),t.domain(i.map(r)),n):e},n.copy=function(){return rs(t.copy(),e,i)},Zr(n,t)}function ss(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function as(t,e){function i(i){return s[((r.get(i)||("range"===e.t?r.set(i,t.push(i)):NaN))-1)%s.length]}function n(e,i){return oa.range(t.length).map(function(t){return e+i*t})}var r,s,a;return i.domain=function(n){if(!arguments.length)return t;t=[],r=new h;for(var s,a=-1,o=n.length;++a<o;)r.has(s=n[a])||r.set(s,t.push(s));return i[e.t].apply(i,e.a)},i.range=function(t){return arguments.length?(s=t,a=0,e={t:"range",a:arguments},i):s},i.rangePoints=function(r,o){arguments.length<2&&(o=0);var l=r[0],h=r[1],c=t.length<2?(l=(l+h)/2,0):(h-l)/(t.length-1+o);return s=n(l+c*o/2,c),a=0,e={t:"rangePoints",a:arguments},i},i.rangeRoundPoints=function(r,o){arguments.length<2&&(o=0);var l=r[0],h=r[1],c=t.length<2?(l=h=Math.round((l+h)/2),0):(h-l)/(t.length-1+o)|0;return s=n(l+Math.round(c*o/2+(h-l-(t.length-1+o)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},i},i.rangeBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var h=r[1]<r[0],c=r[h-0],u=r[1-h],d=(u-c)/(t.length-o+2*l);return s=n(c+d*l,d),h&&s.reverse(),a=d*(1-o),e={t:"rangeBands",a:arguments},i},i.rangeRoundBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var h=r[1]<r[0],c=r[h-0],u=r[1-h],d=Math.floor((u-c)/(t.length-o+2*l));return s=n(c+Math.round((u-c-(t.length-o)*d)/2),d),h&&s.reverse(),a=Math.round(d*(1-o)),e={t:"rangeRoundBands",a:arguments},i},i.rangeBand=function(){return a},i.rangeExtent=function(){return $r(e.a[0])},i.copy=function(){return as(t,e)},i.domain(t)}function os(t,e){function s(){var i=0,n=e.length;for(o=[];++i<n;)o[i-1]=oa.quantile(t,i/n);return a}function a(t){return isNaN(t=+t)?void 0:e[oa.bisect(o,t)]}var o;return a.domain=function(e){return arguments.length?(t=e.map(n).filter(r).sort(i),s()):t},a.range=function(t){return arguments.length?(e=t,s()):e},a.quantiles=function(){return o},a.invertExtent=function(i){return i=e.indexOf(i),0>i?[NaN,NaN]:[i>0?o[i-1]:t[0],i<o.length?o[i]:t[t.length-1]]},a.copy=function(){return os(t,e)},s()}function ls(t,e,i){function n(e){return i[Math.max(0,Math.min(a,Math.floor(s*(e-t))))]}function r(){return s=i.length/(e-t),a=i.length-1,n}var s,a;return n.domain=function(i){return arguments.length?(t=+i[0],e=+i[i.length-1],r()):[t,e]},n.range=function(t){return arguments.length?(i=t,r()):i},n.invertExtent=function(e){return e=i.indexOf(e),e=0>e?NaN:e/s+t,[e,e+1/s]},n.copy=function(){return ls(t,e,i)},r()}function hs(t,e){function i(i){return i>=i?e[oa.bisect(t,i)]:void 0}return i.domain=function(e){return arguments.length?(t=e,i):t},i.range=function(t){return arguments.length?(e=t,i):e},i.invertExtent=function(i){return i=e.indexOf(i),[t[i-1],t[i]]},i.copy=function(){return hs(t,e)},i}function cs(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(i){return arguments.length?(t=i.map(e),e):t},e.ticks=function(e){return Jr(t,e)},e.tickFormat=function(e,i){return ts(t,e,i)},e.copy=function(){return cs(t)},e}function us(){return 0}function ds(t){return t.innerRadius}function fs(t){return t.outerRadius}function ps(t){return t.startAngle}function gs(t){return t.endAngle}function ms(t){return t&&t.padAngle}function vs(t,e,i,n){return(t-i)*e-(e-n)*t>0?0:1}function ys(t,e,i,n,r){var s=t[0]-e[0],a=t[1]-e[1],o=(r?n:-n)/Math.sqrt(s*s+a*a),l=o*a,h=-o*s,c=t[0]+l,u=t[1]+h,d=e[0]+l,f=e[1]+h,p=(c+d)/2,g=(u+f)/2,m=d-c,v=f-u,y=m*m+v*v,x=i-n,b=c*f-d*u,w=(0>v?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),_=(b*v-m*w)/y,k=(-b*m-v*w)/y,C=(b*v+m*w)/y,M=(-b*m+v*w)/y,S=_-p,T=k-g,D=C-p,A=M-g;return S*S+T*T>D*D+A*A&&(_=C,k=M),[[_-l,k-h],[_*i/x,k*i/x]]}function xs(t){function e(e){function a(){h.push("M",s(t(c),o))}for(var l,h=[],c=[],u=-1,d=e.length,f=St(i),p=St(n);++u<d;)r.call(this,l=e[u],u)?c.push([+f.call(this,l,u),+p.call(this,l,u)]):c.length&&(a(),c=[]);return c.length&&a(),h.length?h.join(""):null}var i=Di,n=Ai,r=Ae,s=bs,a=s.key,o=.7;return e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?s=t:(s=Ll.get(t)||bs).key,e):a},e.tension=function(t){return arguments.length?(o=t,e):o},e}function bs(t){return t.length>1?t.join("L"):t+"Z"}function ws(t){return t.join("L")+"Z"}function _s(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);return i>1&&r.push("H",n[0]),r.join("")}function ks(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("V",(n=t[e])[1],"H",n[0]);return r.join("")}function Cs(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("H",(n=t[e])[0],"V",n[1]);return r.join("")}function Ms(t,e){return t.length<4?bs(t):t[1]+Ds(t.slice(1,-1),As(t,e))}function Ss(t,e){return t.length<3?ws(t):t[0]+Ds((t.push(t[0]),t),As([t[t.length-2]].concat(t,[t[1]]),e))}function Ts(t,e){return t.length<3?bs(t):t[0]+Ds(t,As(t,e))}function Ds(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return bs(t);var i=t.length!=e.length,n="",r=t[0],s=t[1],a=e[0],o=a,l=1;if(i&&(n+="Q"+(s[0]-2*a[0]/3)+","+(s[1]-2*a[1]/3)+","+s[0]+","+s[1],r=t[1],l=2),e.length>1){o=e[1],s=t[l],l++,n+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1];for(var h=2;h<e.length;h++,l++)s=t[l],o=e[h],n+="S"+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1]}if(i){var c=t[l];n+="Q"+(s[0]+2*o[0]/3)+","+(s[1]+2*o[1]/3)+","+c[0]+","+c[1]}return n}function As(t,e){for(var i,n=[],r=(1-e)/2,s=t[0],a=t[1],o=1,l=t.length;++o<l;)i=s,s=a,a=t[o],n.push([r*(a[0]-i[0]),r*(a[1]-i[1])]);return n}function Es(t){if(t.length<3)return bs(t);var e=1,i=t.length,n=t[0],r=n[0],s=n[1],a=[r,r,r,(n=t[1])[0]],o=[s,s,s,n[1]],l=[r,",",s,"L",Is(zl,a),",",Is(zl,o)];for(t.push(t[i-1]);++e<=i;)n=t[e],a.shift(),a.push(n[0]),o.shift(),o.push(n[1]),zs(l,a,o);return t.pop(),l.push("L",n),l.join("")}function Ps(t){if(t.length<4)return bs(t);for(var e,i=[],n=-1,r=t.length,s=[0],a=[0];++n<3;)e=t[n],s.push(e[0]),a.push(e[1]);for(i.push(Is(zl,s)+","+Is(zl,a)),--n;++n<r;)e=t[n],s.shift(),s.push(e[0]),a.shift(),a.push(e[1]),zs(i,s,a);return i.join("")}function Ls(t){for(var e,i,n=-1,r=t.length,s=r+4,a=[],o=[];++n<4;)i=t[n%r],a.push(i[0]),o.push(i[1]);for(e=[Is(zl,a),",",Is(zl,o)],--n;++n<s;)i=t[n%r],a.shift(),a.push(i[0]),o.shift(),o.push(i[1]),zs(e,a,o);return e.join("")}function Fs(t,e){var i=t.length-1;if(i)for(var n,r,s=t[0][0],a=t[0][1],o=t[i][0]-s,l=t[i][1]-a,h=-1;++h<=i;)n=t[h],r=h/i,n[0]=e*n[0]+(1-e)*(s+r*o),n[1]=e*n[1]+(1-e)*(a+r*l);return Es(t)}function Is(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function zs(t,e,i){t.push("C",Is(Fl,e),",",Is(Fl,i),",",Is(Il,e),",",Is(Il,i),",",Is(zl,e),",",Is(zl,i))}function Rs(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Os(t){for(var e=0,i=t.length-1,n=[],r=t[0],s=t[1],a=n[0]=Rs(r,s);++e<i;)n[e]=(a+(a=Rs(r=s,s=t[e+1])))/2;return n[e]=a,n}function Ns(t){for(var e,i,n,r,s=[],a=Os(t),o=-1,l=t.length-1;++o<l;)e=Rs(t[o],t[o+1]),xa(e)<za?a[o]=a[o+1]=0:(i=a[o]/e,n=a[o+1]/e,r=i*i+n*n,r>9&&(r=3*e/Math.sqrt(r),a[o]=r*i,a[o+1]=r*n));for(o=-1;++o<=l;)r=(t[Math.min(l,o+1)][0]-t[Math.max(0,o-1)][0])/(6*(1+a[o]*a[o])),s.push([r||0,a[o]*r||0]);return s}function Hs(t){return t.length<3?bs(t):t[0]+Ds(t,Ns(t))}function js(t){for(var e,i,n,r=-1,s=t.length;++r<s;)e=t[r],i=e[0],n=e[1]-ja,e[0]=i*Math.cos(n),e[1]=i*Math.sin(n);return t}function Ws(t){function e(e){function l(){g.push("M",o(t(v),u),c,h(t(m.reverse()),u),"Z")}for(var d,f,p,g=[],m=[],v=[],y=-1,x=e.length,b=St(i),w=St(r),_=i===n?function(){return f}:St(n),k=r===s?function(){return p}:St(s);++y<x;)a.call(this,d=e[y],y)?(m.push([f=+b.call(this,d,y),p=+w.call(this,d,y)]),v.push([+_.call(this,d,y),+k.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var i=Di,n=Di,r=0,s=Ai,a=Ae,o=bs,l=o.key,h=o,c="L",u=.7;return e.x=function(t){return arguments.length?(i=n=t,e):n},e.x0=function(t){return arguments.length?(i=t,e):i},e.x1=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=s=t,e):s},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(s=t,e):s},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?o=t:(o=Ll.get(t)||bs).key,h=o.reverse||o,c=o.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(u=t,e):u},e}function Ys(t){return t.radius}function $s(t){return[t.x,t.y]}function Bs(t){return function(){var e=t.apply(this,arguments),i=e[0],n=e[1]-ja;return[i*Math.cos(n),i*Math.sin(n)]}}function qs(){return 64}function Us(){return"circle";
}function Vs(t){var e=Math.sqrt(t/Oa);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Xs(t){return function(){var e,i,n;(e=this[t])&&(n=e[i=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[i]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Gs(t,e,i){return Ca(t,Yl),t.namespace=e,t.id=i,t}function Zs(t,e,i,n){var r=t.id,s=t.namespace;return $(t,"function"==typeof i?function(t,a,o){t[s][r].tween.set(e,n(i.call(t,t.__data__,a,o)))}:(i=n(i),function(t){t[s][r].tween.set(e,i)}))}function Qs(t){return null==t&&(t=""),function(){this.textContent=t}}function Ks(t){return null==t?"__transition__":"__transition_"+t+"__"}function Js(t,e,i,n,r){function s(t){var e=g.delay;return c.t=e+l,t>=e?a(t-e):void(c.c=a)}function a(i){var r=p.active,s=p[r];s&&(s.timer.c=null,s.timer.t=NaN,--p.count,delete p[r],s.event&&s.event.interrupt.call(t,t.__data__,s.index));for(var a in p)if(n>+a){var h=p[a];h.timer.c=null,h.timer.t=NaN,--p.count,delete p[a]}c.c=o,Pt(function(){return c.c&&o(i||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=n,g.event&&g.event.start.call(t,t.__data__,e),f=[],g.tween.forEach(function(i,n){(n=n.call(t,t.__data__,e))&&f.push(n)}),d=g.ease,u=g.duration}function o(r){for(var s=r/u,a=d(s),o=f.length;o>0;)f[--o].call(t,a);return s>=1?(g.event&&g.event.end.call(t,t.__data__,e),--p.count?delete p[n]:delete t[i],1):void 0}var l,c,u,d,f,p=t[i]||(t[i]={active:0,count:0}),g=p[n];g||(l=r.time,c=Pt(s,0,l),g=p[n]={tween:new h,time:l,timer:c,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++p.count)}function ta(t,e,i){t.attr("transform",function(t){var n=e(t);return"translate("+(isFinite(n)?n:i(t))+",0)"})}function ea(t,e,i){t.attr("transform",function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:i(t))+")"})}function ia(t){return t.toISOString()}function na(t,e,i){function n(e){return t(e)}function r(t,i){var n=t[1]-t[0],r=n/i,s=oa.bisect(Ql,r);return s==Ql.length?[e.year,Kr(t.map(function(t){return t/31536e6}),i)[2]]:s?e[r/Ql[s-1]<Ql[s]/r?s-1:s]:[th,Kr(t,i)[2]]}return n.invert=function(e){return ra(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e),n):t.domain().map(ra)},n.nice=function(t,e){function i(i){return!isNaN(i)&&!t.range(i,ra(+i+1),e).length}var s=n.domain(),a=$r(s),o=null==t?r(a,10):"number"==typeof t&&r(a,t);return o&&(t=o[0],e=o[1]),n.domain(Ur(s,e>1?{floor:function(e){for(;i(e=t.floor(e));)e=ra(e-1);return e},ceil:function(e){for(;i(e=t.ceil(e));)e=ra(+e+1);return e}}:t))},n.ticks=function(t,e){var i=$r(n.domain()),s=null==t?r(i,10):"number"==typeof t?r(i,t):!t.range&&[{range:t},e];return s&&(t=s[0],e=s[1]),t.range(i[0],ra(+i[1]+1),1>e?1:e)},n.tickFormat=function(){return i},n.copy=function(){return na(t.copy(),e,i)},Zr(n,t)}function ra(t){return new Date(t)}function sa(t){return JSON.parse(t.responseText)}function aa(t){var e=ca.createRange();return e.selectNode(ca.body),e.createContextualFragment(t.responseText)}var oa={version:"3.5.12"},la=[].slice,ha=function(t){return la.call(t)},ca=this.document;if(ca)try{ha(ca.documentElement.childNodes)[0].nodeType}catch(ua){ha=function(t){for(var e=t.length,i=new Array(e);e--;)i[e]=t[e];return i}}if(Date.now||(Date.now=function(){return+new Date}),ca)try{ca.createElement("DIV").style.setProperty("opacity",0,"")}catch(da){var fa=this.Element.prototype,pa=fa.setAttribute,ga=fa.setAttributeNS,ma=this.CSSStyleDeclaration.prototype,va=ma.setProperty;fa.setAttribute=function(t,e){pa.call(this,t,e+"")},fa.setAttributeNS=function(t,e,i){ga.call(this,t,e,i+"")},ma.setProperty=function(t,e,i){va.call(this,t,e+"",i)}}oa.ascending=i,oa.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},oa.min=function(t,e){var i,n,r=-1,s=t.length;if(1===arguments.length){for(;++r<s;)if(null!=(n=t[r])&&n>=n){i=n;break}for(;++r<s;)null!=(n=t[r])&&i>n&&(i=n)}else{for(;++r<s;)if(null!=(n=e.call(t,t[r],r))&&n>=n){i=n;break}for(;++r<s;)null!=(n=e.call(t,t[r],r))&&i>n&&(i=n)}return i},oa.max=function(t,e){var i,n,r=-1,s=t.length;if(1===arguments.length){for(;++r<s;)if(null!=(n=t[r])&&n>=n){i=n;break}for(;++r<s;)null!=(n=t[r])&&n>i&&(i=n)}else{for(;++r<s;)if(null!=(n=e.call(t,t[r],r))&&n>=n){i=n;break}for(;++r<s;)null!=(n=e.call(t,t[r],r))&&n>i&&(i=n)}return i},oa.extent=function(t,e){var i,n,r,s=-1,a=t.length;if(1===arguments.length){for(;++s<a;)if(null!=(n=t[s])&&n>=n){i=r=n;break}for(;++s<a;)null!=(n=t[s])&&(i>n&&(i=n),n>r&&(r=n))}else{for(;++s<a;)if(null!=(n=e.call(t,t[s],s))&&n>=n){i=r=n;break}for(;++s<a;)null!=(n=e.call(t,t[s],s))&&(i>n&&(i=n),n>r&&(r=n))}return[i,r]},oa.sum=function(t,e){var i,n=0,s=t.length,a=-1;if(1===arguments.length)for(;++a<s;)r(i=+t[a])&&(n+=i);else for(;++a<s;)r(i=+e.call(t,t[a],a))&&(n+=i);return n},oa.mean=function(t,e){var i,s=0,a=t.length,o=-1,l=a;if(1===arguments.length)for(;++o<a;)r(i=n(t[o]))?s+=i:--l;else for(;++o<a;)r(i=n(e.call(t,t[o],o)))?s+=i:--l;return l?s/l:void 0},oa.quantile=function(t,e){var i=(t.length-1)*e+1,n=Math.floor(i),r=+t[n-1],s=i-n;return s?r+s*(t[n]-r):r},oa.median=function(t,e){var s,a=[],o=t.length,l=-1;if(1===arguments.length)for(;++l<o;)r(s=n(t[l]))&&a.push(s);else for(;++l<o;)r(s=n(e.call(t,t[l],l)))&&a.push(s);return a.length?oa.quantile(a.sort(i),.5):void 0},oa.variance=function(t,e){var i,s,a=t.length,o=0,l=0,h=-1,c=0;if(1===arguments.length)for(;++h<a;)r(i=n(t[h]))&&(s=i-o,o+=s/++c,l+=s*(i-o));else for(;++h<a;)r(i=n(e.call(t,t[h],h)))&&(s=i-o,o+=s/++c,l+=s*(i-o));return c>1?l/(c-1):void 0},oa.deviation=function(){var t=oa.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ya=s(i);oa.bisectLeft=ya.left,oa.bisect=oa.bisectRight=ya.right,oa.bisector=function(t){return s(1===t.length?function(e,n){return i(t(e),n)}:t)},oa.shuffle=function(t,e,i){(s=arguments.length)<3&&(i=t.length,2>s&&(e=0));for(var n,r,s=i-e;s;)r=Math.random()*s--|0,n=t[s+e],t[s+e]=t[r+e],t[r+e]=n;return t},oa.permute=function(t,e){for(var i=e.length,n=new Array(i);i--;)n[i]=t[e[i]];return n},oa.pairs=function(t){for(var e,i=0,n=t.length-1,r=t[0],s=new Array(0>n?0:n);n>i;)s[i]=[e=r,r=t[++i]];return s},oa.zip=function(){if(!(n=arguments.length))return[];for(var t=-1,e=oa.min(arguments,a),i=new Array(e);++t<e;)for(var n,r=-1,s=i[t]=new Array(n);++r<n;)s[r]=arguments[r][t];return i},oa.transpose=function(t){return oa.zip.apply(oa,t)},oa.keys=function(t){var e=[];for(var i in t)e.push(i);return e},oa.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},oa.entries=function(t){var e=[];for(var i in t)e.push({key:i,value:t[i]});return e},oa.merge=function(t){for(var e,i,n,r=t.length,s=-1,a=0;++s<r;)a+=t[s].length;for(i=new Array(a);--r>=0;)for(n=t[r],e=n.length;--e>=0;)i[--a]=n[e];return i};var xa=Math.abs;oa.range=function(t,e,i){if(arguments.length<3&&(i=1,arguments.length<2&&(e=t,t=0)),(e-t)/i===1/0)throw new Error("infinite range");var n,r=[],s=o(xa(i)),a=-1;if(t*=s,e*=s,i*=s,0>i)for(;(n=t+i*++a)>e;)r.push(n/s);else for(;(n=t+i*++a)<e;)r.push(n/s);return r},oa.map=function(t,e){var i=new h;if(t instanceof h)t.forEach(function(t,e){i.set(t,e)});else if(Array.isArray(t)){var n,r=-1,s=t.length;if(1===arguments.length)for(;++r<s;)i.set(r,t[r]);else for(;++r<s;)i.set(e.call(t,n=t[r],r),n)}else for(var a in t)i.set(a,t[a]);return i};var ba="__proto__",wa="\x00";l(h,{has:d,get:function(t){return this._[c(t)]},set:function(t,e){return this._[c(t)]=e},remove:f,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:u(e),value:this._[e]});return t},size:g,empty:m,forEach:function(t){for(var e in this._)t.call(this,u(e),this._[e])}}),oa.nest=function(){function t(e,a,o){if(o>=s.length)return n?n.call(r,a):i?a.sort(i):a;for(var l,c,u,d,f=-1,p=a.length,g=s[o++],m=new h;++f<p;)(d=m.get(l=g(c=a[f])))?d.push(c):m.set(l,[c]);return e?(c=e(),u=function(i,n){c.set(i,t(e,n,o))}):(c={},u=function(i,n){c[i]=t(e,n,o)}),m.forEach(u),c}function e(t,i){if(i>=s.length)return t;var n=[],r=a[i++];return t.forEach(function(t,r){n.push({key:t,values:e(r,i)})}),r?n.sort(function(t,e){return r(t.key,e.key)}):n}var i,n,r={},s=[],a=[];return r.map=function(e,i){return t(i,e,0)},r.entries=function(i){return e(t(oa.map,i,0),0)},r.key=function(t){return s.push(t),r},r.sortKeys=function(t){return a[s.length-1]=t,r},r.sortValues=function(t){return i=t,r},r.rollup=function(t){return n=t,r},r},oa.set=function(t){var e=new v;if(t)for(var i=0,n=t.length;n>i;++i)e.add(t[i]);return e},l(v,{has:d,add:function(t){return this._[c(t+="")]=!0,t},remove:f,values:p,size:g,empty:m,forEach:function(t){for(var e in this._)t.call(this,u(e))}}),oa.behavior={},oa.rebind=function(t,e){for(var i,n=1,r=arguments.length;++n<r;)t[i=arguments[n]]=x(t,e,e[i]);return t};var _a=["webkit","ms","moz","Moz","o","O"];oa.dispatch=function(){for(var t=new _,e=-1,i=arguments.length;++e<i;)t[arguments[e]]=k(t);return t},_.prototype.on=function(t,e){var i=t.indexOf("."),n="";if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},oa.event=null,oa.requote=function(t){return t.replace(ka,"\\$&")};var ka=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ca={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)t[i]=e[i]},Ma=function(t,e){return e.querySelector(t)},Sa=function(t,e){return e.querySelectorAll(t)},Ta=function(t,e){var i=t.matches||t[b(t,"matchesSelector")];return(Ta=function(t,e){return i.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Ma=function(t,e){return Sizzle(t,e)[0]||null},Sa=Sizzle,Ta=Sizzle.matchesSelector),oa.selection=function(){return oa.select(ca.documentElement)};var Da=oa.selection.prototype=[];Da.select=function(t){var e,i,n,r,s=[];t=D(t);for(var a=-1,o=this.length;++a<o;){s.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var l=-1,h=n.length;++l<h;)(r=n[l])?(e.push(i=t.call(r,r.__data__,l,a)),i&&"__data__"in r&&(i.__data__=r.__data__)):e.push(null)}return T(s)},Da.selectAll=function(t){var e,i,n=[];t=A(t);for(var r=-1,s=this.length;++r<s;)for(var a=this[r],o=-1,l=a.length;++o<l;)(i=a[o])&&(n.push(e=ha(t.call(i,i.__data__,o,r))),e.parentNode=i);return T(n)};var Aa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};oa.ns={prefix:Aa,qualify:function(t){var e=t.indexOf(":"),i=t;return e>=0&&"xmlns"!==(i=t.slice(0,e))&&(t=t.slice(e+1)),Aa.hasOwnProperty(i)?{space:Aa[i],local:t}:t}},Da.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var i=this.node();return t=oa.ns.qualify(t),t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},Da.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var i=this.node(),n=(t=F(t)).length,r=-1;if(e=i.classList){for(;++r<n;)if(!e.contains(t[r]))return!1}else for(e=i.getAttribute("class");++r<n;)if(!L(t[r]).test(e))return!1;return!0}for(e in t)this.each(I(e,t[e]));return this}return this.each(I(t,e))},Da.style=function(t,i,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(i="");for(n in t)this.each(R(n,t[n],i));return this}if(2>r){var s=this.node();return e(s).getComputedStyle(s,null).getPropertyValue(t)}n=""}return this.each(R(t,i,n))},Da.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(O(e,t[e]));return this}return this.each(O(t,e))},Da.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Da.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Da.append=function(t){return t=N(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Da.insert=function(t,e){return t=N(t),e=D(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Da.remove=function(){return this.each(H)},Da.data=function(t,e){function i(t,i){var n,r,s,a=t.length,u=i.length,d=Math.min(a,u),f=new Array(u),p=new Array(u),g=new Array(a);if(e){var m,v=new h,y=new Array(a);for(n=-1;++n<a;)(r=t[n])&&(v.has(m=e.call(r,r.__data__,n))?g[n]=r:v.set(m,r),y[n]=m);for(n=-1;++n<u;)(r=v.get(m=e.call(i,s=i[n],n)))?r!==!0&&(f[n]=r,r.__data__=s):p[n]=j(s),v.set(m,!0);for(n=-1;++n<a;)n in y&&v.get(y[n])!==!0&&(g[n]=t[n])}else{for(n=-1;++n<d;)r=t[n],s=i[n],r?(r.__data__=s,f[n]=r):p[n]=j(s);for(;u>n;++n)p[n]=j(i[n]);for(;a>n;++n)g[n]=t[n]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,o.push(p),l.push(f),c.push(g)}var n,r,s=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++s<a;)(r=n[s])&&(t[s]=r.__data__);return t}var o=B([]),l=T([]),c=T([]);if("function"==typeof t)for(;++s<a;)i(n=this[s],t.call(n,n.parentNode.__data__,s));else for(;++s<a;)i(n=this[s],t);return l.enter=function(){return o},l.exit=function(){return c},l},Da.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Da.filter=function(t){var e,i,n,r=[];"function"!=typeof t&&(t=W(t));for(var s=0,a=this.length;a>s;s++){r.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var o=0,l=i.length;l>o;o++)(n=i[o])&&t.call(n,n.__data__,o,s)&&e.push(n)}return T(r)},Da.order=function(){for(var t=-1,e=this.length;++t<e;)for(var i,n=this[t],r=n.length-1,s=n[r];--r>=0;)(i=n[r])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},Da.sort=function(t){t=Y.apply(this,arguments);for(var e=-1,i=this.length;++e<i;)this[e].sort(t);return this.order()},Da.each=function(t){return $(this,function(e,i,n){t.call(e,e.__data__,i,n)})},Da.call=function(t){var e=ha(arguments);return t.apply(e[0]=this,e),this},Da.empty=function(){return!this.node()},Da.node=function(){for(var t=0,e=this.length;e>t;t++)for(var i=this[t],n=0,r=i.length;r>n;n++){var s=i[n];if(s)return s}return null},Da.size=function(){var t=0;return $(this,function(){++t}),t};var Ea=[];oa.selection.enter=B,oa.selection.enter.prototype=Ea,Ea.append=Da.append,Ea.empty=Da.empty,Ea.node=Da.node,Ea.call=Da.call,Ea.size=Da.size,Ea.select=function(t){for(var e,i,n,r,s,a=[],o=-1,l=this.length;++o<l;){n=(r=this[o]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var h=-1,c=r.length;++h<c;)(s=r[h])?(e.push(n[h]=i=t.call(r.parentNode,s.__data__,h,o)),i.__data__=s.__data__):e.push(null)}return T(a)},Ea.insert=function(t,e){return arguments.length<2&&(e=q(this)),Da.insert.call(this,t,e)},oa.select=function(e){var i;return"string"==typeof e?(i=[Ma(e,ca)],i.parentNode=ca.documentElement):(i=[e],i.parentNode=t(e)),T([i])},oa.selectAll=function(t){var e;return"string"==typeof t?(e=ha(Sa(t,ca)),e.parentNode=ca.documentElement):(e=ha(t),e.parentNode=null),T([e])},Da.on=function(t,e,i){var n=arguments.length;if(3>n){if("string"!=typeof t){2>n&&(e=!1);for(i in t)this.each(U(i,t[i],e));return this}if(2>n)return(n=this.node()["__on"+t])&&n._;i=!1}return this.each(U(t,e,i))};var Pa=oa.map({mouseenter:"mouseover",mouseleave:"mouseout"});ca&&Pa.forEach(function(t){"on"+t in ca&&Pa.remove(t)});var La,Fa=0;oa.mouse=function(t){return Z(t,M())};var Ia=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;oa.touch=function(t,e,i){if(arguments.length<3&&(i=e,e=M().changedTouches),e)for(var n,r=0,s=e.length;s>r;++r)if((n=e[r]).identifier===i)return Z(t,n)},oa.behavior.drag=function(){function t(){this.on("mousedown.drag",s).on("touchstart.drag",a)}function i(t,e,i,s,a){return function(){function o(){var t,i,n=e(d,g);n&&(t=n[0]-x[0],i=n[1]-x[1],p|=t|i,x=n,f({type:"drag",x:n[0]+h[0],y:n[1]+h[1],dx:t,dy:i}))}function l(){e(d,g)&&(v.on(s+m,null).on(a+m,null),y(p),f({type:"dragend"}))}var h,c=this,u=oa.event.target,d=c.parentNode,f=n.of(c,arguments),p=0,g=t(),m=".drag"+(null==g?"":"-"+g),v=oa.select(i(u)).on(s+m,o).on(a+m,l),y=G(u),x=e(d,g);r?(h=r.apply(c,arguments),h=[h.x-x[0],h.y-x[1]]):h=[0,0],f({type:"dragstart"})}}var n=S(t,"drag","dragstart","dragend"),r=null,s=i(w,oa.mouse,e,"mousemove","mouseup"),a=i(Q,oa.touch,y,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},oa.rebind(t,n,"on")},oa.touches=function(t,e){return arguments.length<2&&(e=M().touches),e?ha(e).map(function(e){var i=Z(t,e);return i.identifier=e.identifier,i}):[]};var za=1e-6,Ra=za*za,Oa=Math.PI,Na=2*Oa,Ha=Na-za,ja=Oa/2,Wa=Oa/180,Ya=180/Oa,$a=Math.SQRT2,Ba=2,qa=4;oa.interpolateZoom=function(t,e){var i,n,r=t[0],s=t[1],a=t[2],o=e[0],l=e[1],h=e[2],c=o-r,u=l-s,d=c*c+u*u;if(Ra>d)n=Math.log(h/a)/$a,i=function(t){return[r+t*c,s+t*u,a*Math.exp($a*t*n)]};else{var f=Math.sqrt(d),p=(h*h-a*a+qa*d)/(2*a*Ba*f),g=(h*h-a*a-qa*d)/(2*h*Ba*f),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);n=(v-m)/$a,i=function(t){var e=t*n,i=nt(m),o=a/(Ba*f)*(i*rt($a*e+m)-it(m));return[r+o*c,s+o*u,a*i/nt($a*e+m)]}}return i.duration=1e3*n,i},oa.behavior.zoom=function(){function t(t){t.on(P,u).on(Va+".zoom",f).on("dblclick.zoom",p).on(I,d)}function i(t){return[(t[0]-M.x)/M.k,(t[1]-M.y)/M.k]}function n(t){return[t[0]*M.k+M.x,t[1]*M.k+M.y]}function r(t){M.k=Math.max(D[0],Math.min(D[1],t))}function s(t,e){e=n(e),M.x+=t[0]-e[0],M.y+=t[1]-e[1]}function a(e,i,n,a){e.__chart__={x:M.x,y:M.y,k:M.k},r(Math.pow(2,a)),s(m=i,n),e=oa.select(e),A>0&&(e=e.transition().duration(A)),e.call(t.event)}function o(){w&&w.domain(b.range().map(function(t){return(t-M.x)/M.k}).map(b.invert)),k&&k.domain(_.range().map(function(t){return(t-M.y)/M.k}).map(_.invert))}function l(t){E++||t({type:"zoomstart"})}function h(t){o(),t({type:"zoom",scale:M.k,translate:[M.x,M.y]})}function c(t){--E||(t({type:"zoomend"}),m=null)}function u(){function t(){o=1,s(oa.mouse(r),d),h(a)}function n(){u.on(L,null).on(F,null),f(o),c(a)}var r=this,a=z.of(r,arguments),o=0,u=oa.select(e(r)).on(L,t).on(F,n),d=i(oa.mouse(r)),f=G(r);Wl.call(r),l(a)}function d(){function t(){var t=oa.touches(p);return f=M.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=i(t))}),t}function e(){var e=oa.event.target;oa.select(e).on(b,n).on(w,o),_.push(e);for(var i=oa.event.changedTouches,r=0,s=i.length;s>r;++r)m[i[r].identifier]=null;var l=t(),h=Date.now();if(1===l.length){if(500>h-x){var c=l[0];a(p,c,m[c.identifier],Math.floor(Math.log(M.k)/Math.LN2)+1),C()}x=h}else if(l.length>1){var c=l[0],u=l[1],d=c[0]-u[0],f=c[1]-u[1];v=d*d+f*f}}function n(){var t,e,i,n,a=oa.touches(p);Wl.call(p);for(var o=0,l=a.length;l>o;++o,n=null)if(i=a[o],n=m[i.identifier]){if(e)break;t=i,e=n}if(n){var c=(c=i[0]-t[0])*c+(c=i[1]-t[1])*c,u=v&&Math.sqrt(c/v);t=[(t[0]+i[0])/2,(t[1]+i[1])/2],e=[(e[0]+n[0])/2,(e[1]+n[1])/2],r(u*f)}x=null,s(t,e),h(g)}function o(){if(oa.event.touches.length){for(var e=oa.event.changedTouches,i=0,n=e.length;n>i;++i)delete m[e[i].identifier];for(var r in m)return void t()}oa.selectAll(_).on(y,null),k.on(P,u).on(I,d),S(),c(g)}var f,p=this,g=z.of(p,arguments),m={},v=0,y=".zoom-"+oa.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,_=[],k=oa.select(p),S=G(p);e(),l(g),k.on(P,null).on(I,e)}function f(){var t=z.of(this,arguments);y?clearTimeout(y):(Wl.call(this),g=i(m=v||oa.mouse(this)),l(t)),y=setTimeout(function(){y=null,c(t)},50),C(),r(Math.pow(2,.002*Ua())*M.k),s(m,g),h(t)}function p(){var t=oa.mouse(this),e=Math.log(M.k)/Math.LN2;a(this,t,i(t),oa.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,m,v,y,x,b,w,_,k,M={x:0,y:0,k:1},T=[960,500],D=Xa,A=250,E=0,P="mousedown.zoom",L="mousemove.zoom",F="mouseup.zoom",I="touchstart.zoom",z=S(t,"zoomstart","zoom","zoomend");return Va||(Va="onwheel"in ca?(Ua=function(){return-oa.event.deltaY*(oa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ca?(Ua=function(){return oa.event.wheelDelta},"mousewheel"):(Ua=function(){return-oa.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=z.of(this,arguments),e=M;Hl?oa.select(this).transition().each("start.zoom",function(){M=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var i=T[0],n=T[1],r=m?m[0]:i/2,s=m?m[1]:n/2,a=oa.interpolateZoom([(r-M.x)/M.k,(s-M.y)/M.k,i/M.k],[(r-e.x)/e.k,(s-e.y)/e.k,i/e.k]);return function(e){var n=a(e),o=i/n[2];this.__chart__=M={x:r-n[0]*o,y:s-n[1]*o,k:o},h(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=M,l(t),h(t),c(t))})},t.translate=function(e){return arguments.length?(M={x:+e[0],y:+e[1],k:M.k},o(),t):[M.x,M.y]},t.scale=function(e){return arguments.length?(M={x:M.x,y:M.y,k:null},r(+e),o(),t):M.k},t.scaleExtent=function(e){return arguments.length?(D=null==e?Xa:[+e[0],+e[1]],t):D},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(T=e&&[+e[0],+e[1]],t):T},t.duration=function(e){return arguments.length?(A=+e,t):A},t.x=function(e){return arguments.length?(w=e,b=e.copy(),M={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(k=e,_=e.copy(),M={x:0,y:0,k:1},t):k},oa.rebind(t,z,"on")};var Ua,Va,Xa=[0,1/0];oa.color=at,at.prototype.toString=function(){return this.rgb()+""},oa.hsl=ot;var Ga=ot.prototype=new at;Ga.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ot(this.h,this.s,this.l/t)},Ga.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ot(this.h,this.s,t*this.l)},Ga.rgb=function(){return lt(this.h,this.s,this.l)},oa.hcl=ht;var Za=ht.prototype=new at;Za.brighter=function(t){return new ht(this.h,this.c,Math.min(100,this.l+Qa*(arguments.length?t:1)))},Za.darker=function(t){return new ht(this.h,this.c,Math.max(0,this.l-Qa*(arguments.length?t:1)))},Za.rgb=function(){return ct(this.h,this.c,this.l).rgb()},oa.lab=ut;var Qa=18,Ka=.95047,Ja=1,to=1.08883,eo=ut.prototype=new at;eo.brighter=function(t){return new ut(Math.min(100,this.l+Qa*(arguments.length?t:1)),this.a,this.b)},eo.darker=function(t){return new ut(Math.max(0,this.l-Qa*(arguments.length?t:1)),this.a,this.b)},eo.rgb=function(){return dt(this.l,this.a,this.b)},oa.rgb=vt;var io=vt.prototype=new at;io.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,i=this.g,n=this.b,r=30;return e||i||n?(e&&r>e&&(e=r),i&&r>i&&(i=r),n&&r>n&&(n=r),new vt(Math.min(255,e/t),Math.min(255,i/t),Math.min(255,n/t))):new vt(r,r,r)},io.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new vt(t*this.r,t*this.g,t*this.b)},io.hsl=function(){return _t(this.r,this.g,this.b)},io.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var no=oa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});no.forEach(function(t,e){no.set(t,yt(e))}),oa.functor=St,oa.xhr=Tt(y),oa.dsv=function(t,e){function i(t,i,s){arguments.length<3&&(s=i,i=null);var a=Dt(t,e,null==i?n:r(i),s);return a.row=function(t){return arguments.length?a.response(null==(i=t)?n:r(t)):i},a}function n(t){return i.parse(t.responseText)}function r(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(a).join(t)}function a(t){return o.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var o=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return i.parse=function(t,e){var n;return i.parseRows(t,function(t,i){if(n)return n(t,i-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,i){return e(r(t),i)}:r})},i.parseRows=function(t,e){function i(){if(c>=h)return a;if(r)return r=!1,s;var e=c;if(34===t.charCodeAt(e)){for(var i=e;i++<h;)if(34===t.charCodeAt(i)){if(34!==t.charCodeAt(i+1))break;++i}c=i+2;var n=t.charCodeAt(i+1);return 13===n?(r=!0,10===t.charCodeAt(i+2)&&++c):10===n&&(r=!0),t.slice(e+1,i).replace(/""/g,'"')}for(;h>c;){var n=t.charCodeAt(c++),o=1;if(10===n)r=!0;else if(13===n)r=!0,10===t.charCodeAt(c)&&(++c,++o);else if(n!==l)continue;return t.slice(e,c-o)}return t.slice(e)}for(var n,r,s={},a={},o=[],h=t.length,c=0,u=0;(n=i())!==a;){for(var d=[];n!==s&&n!==a;)d.push(n),n=i();e&&null==(d=e(d,u++))||o.push(d)}return o},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new v,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(a).join(t)].concat(e.map(function(e){return r.map(function(t){return a(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},oa.csv=oa.dsv(",","text/csv"),oa.tsv=oa.dsv("	","text/tab-separated-values");var ro,so,ao,oo,lo=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};oa.timer=function(){Pt.apply(this,arguments)},oa.timer.flush=function(){Ft(),It()},oa.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ho=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Rt);oa.formatPrefix=function(t,e){var i=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=oa.round(t,zt(t,e))),i=1+Math.floor(1e-12+Math.log(t)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i-1)/3)))),ho[8+i/3]};var co=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,uo=oa.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=oa.round(t,zt(t,e))).toFixed(Math.max(0,Math.min(20,zt(t*(1+1e-15),e))))}}),fo=oa.time={},po=Date;Ht.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){go.setUTCDate.apply(this._,arguments)},setDay:function(){go.setUTCDay.apply(this._,arguments)},setFullYear:function(){go.setUTCFullYear.apply(this._,arguments)},setHours:function(){go.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){go.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){go.setUTCMinutes.apply(this._,arguments)},setMonth:function(){go.setUTCMonth.apply(this._,arguments)},setSeconds:function(){go.setUTCSeconds.apply(this._,arguments)},setTime:function(){go.setTime.apply(this._,arguments)}};var go=Date.prototype;fo.year=jt(function(t){return t=fo.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),fo.years=fo.year.range,fo.years.utc=fo.year.utc.range,fo.day=jt(function(t){var e=new po(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),fo.days=fo.day.range,fo.days.utc=fo.day.utc.range,fo.dayOfYear=function(t){var e=fo.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var i=fo[t]=jt(function(t){return(t=fo.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var i=fo.year(t).getDay();return Math.floor((fo.dayOfYear(t)+(i+e)%7)/7)-(i!==e)});fo[t+"s"]=i.range,fo[t+"s"].utc=i.utc.range,fo[t+"OfYear"]=function(t){var i=fo.year(t).getDay();return Math.floor((fo.dayOfYear(t)+(i+e)%7)/7)}}),fo.week=fo.sunday,fo.weeks=fo.sunday.range,fo.weeks.utc=fo.sunday.utc.range,fo.weekOfYear=fo.sundayOfYear;var mo={"-":"",_:" ",0:"0"},vo=/^\s*\d+/,yo=/^%/;oa.locale=function(t){return{numberFormat:Ot(t),timeFormat:Yt(t)}};var xo=oa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});oa.format=xo.numberFormat,oa.geo={},he.prototype={s:0,t:0,add:function(t){ce(t,this.t,bo),ce(bo.s,this.s,this),this.s?this.t+=bo.t:this.s=bo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bo=new he;oa.geo.stream=function(t,e){t&&wo.hasOwnProperty(t.type)?wo[t.type](t,e):ue(t,e)};var wo={Feature:function(t,e){ue(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,r=i.length;++n<r;)ue(i[n].geometry,e)}},_o={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){de(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)de(i[n],e,0)},Polygon:function(t,e){fe(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)fe(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,r=i.length;++n<r;)ue(i[n],e)}};oa.geo.area=function(t){return ko=0,oa.geo.stream(t,Mo),ko};var ko,Co=new he,Mo={sphere:function(){ko+=4*Oa},point:w,lineStart:w,lineEnd:w,polygonStart:function(){Co.reset(),Mo.lineStart=pe},polygonEnd:function(){var t=2*Co;ko+=0>t?4*Oa+t:t,Mo.lineStart=Mo.lineEnd=Mo.point=w}};oa.geo.bounds=function(){function t(t,e){x.push(b=[c=t,d=t]),u>e&&(u=e),e>f&&(f=e)}function e(e,i){var n=ge([e*Wa,i*Wa]);if(v){var r=ve(v,n),s=[r[1],-r[0],0],a=ve(s,r);be(a),a=we(a);var l=e-p,h=l>0?1:-1,g=a[0]*Ya*h,m=xa(l)>180;if(m^(g>h*p&&h*e>g)){var y=a[1]*Ya;y>f&&(f=y)}else if(g=(g+360)%360-180,
m^(g>h*p&&h*e>g)){var y=-a[1]*Ya;u>y&&(u=y)}else u>i&&(u=i),i>f&&(f=i);m?p>e?o(c,e)>o(c,d)&&(d=e):o(e,d)>o(c,d)&&(c=e):d>=c?(c>e&&(c=e),e>d&&(d=e)):e>p?o(c,e)>o(c,d)&&(d=e):o(e,d)>o(c,d)&&(c=e)}else t(e,i);v=n,p=e}function i(){w.point=e}function n(){b[0]=c,b[1]=d,w.point=t,v=null}function r(t,i){if(v){var n=t-p;y+=xa(n)>180?n+(n>0?360:-360):n}else g=t,m=i;Mo.point(t,i),e(t,i)}function s(){Mo.lineStart()}function a(){r(g,m),Mo.lineEnd(),xa(y)>za&&(c=-(d=180)),b[0]=c,b[1]=d,v=null}function o(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function h(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,u,d,f,p,g,m,v,y,x,b,w={point:t,lineStart:i,lineEnd:n,polygonStart:function(){w.point=r,w.lineStart=s,w.lineEnd=a,y=0,Mo.polygonStart()},polygonEnd:function(){Mo.polygonEnd(),w.point=t,w.lineStart=i,w.lineEnd=n,0>Co?(c=-(d=180),u=-(f=90)):y>za?f=90:-za>y&&(u=-90),b[0]=c,b[1]=d}};return function(t){f=d=-(c=u=1/0),x=[],oa.geo.stream(t,w);var e=x.length;if(e){x.sort(l);for(var i,n=1,r=x[0],s=[r];e>n;++n)i=x[n],h(i[0],r)||h(i[1],r)?(o(r[0],i[1])>o(r[0],r[1])&&(r[1]=i[1]),o(i[0],r[1])>o(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(var a,i,p=-(1/0),e=s.length-1,n=0,r=s[e];e>=n;r=i,++n)i=s[n],(a=o(r[1],i[0]))>p&&(p=a,c=i[0],d=r[1])}return x=b=null,c===1/0||u===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,u],[d,f]]}}(),oa.geo.centroid=function(t){So=To=Do=Ao=Eo=Po=Lo=Fo=Io=zo=Ro=0,oa.geo.stream(t,Oo);var e=Io,i=zo,n=Ro,r=e*e+i*i+n*n;return Ra>r&&(e=Po,i=Lo,n=Fo,za>To&&(e=Do,i=Ao,n=Eo),r=e*e+i*i+n*n,Ra>r)?[NaN,NaN]:[Math.atan2(i,e)*Ya,et(n/Math.sqrt(r))*Ya]};var So,To,Do,Ao,Eo,Po,Lo,Fo,Io,zo,Ro,Oo={sphere:w,point:ke,lineStart:Me,lineEnd:Se,polygonStart:function(){Oo.lineStart=Te},polygonEnd:function(){Oo.lineStart=Me}},No=Fe(Ae,Oe,He,[-Oa,-Oa/2]),Ho=1e9;oa.geo.clipExtent=function(){var t,e,i,n,r,s,a={stream:function(t){return r&&(r.valid=!1),r=s(t),r.valid=!0,r},extent:function(o){return arguments.length?(s=$e(t=+o[0][0],e=+o[0][1],i=+o[1][0],n=+o[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[i,n]]}};return a.extent([[0,0],[960,500]])},(oa.geo.conicEqualArea=function(){return Be(qe)}).raw=qe,oa.geo.albers=function(){return oa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},oa.geo.albersUsa=function(){function t(t){var s=t[0],a=t[1];return e=null,i(s,a),e||(n(s,a),e)||r(s,a),e}var e,i,n,r,s=oa.geo.albers(),a=oa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=oa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,i){e=[t,i]}};return t.invert=function(t){var e=s.scale(),i=s.translate(),n=(t[0]-i[0])/e,r=(t[1]-i[1])/e;return(r>=.12&&.234>r&&n>=-.425&&-.214>n?a:r>=.166&&.234>r&&n>=-.214&&-.115>n?o:s).invert(t)},t.stream=function(t){var e=s.stream(t),i=a.stream(t),n=o.stream(t);return{point:function(t,r){e.point(t,r),i.point(t,r),n.point(t,r)},sphere:function(){e.sphere(),i.sphere(),n.sphere()},lineStart:function(){e.lineStart(),i.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),i.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),i.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),i.polygonEnd(),n.polygonEnd()}}},t.precision=function(e){return arguments.length?(s.precision(e),a.precision(e),o.precision(e),t):s.precision()},t.scale=function(e){return arguments.length?(s.scale(e),a.scale(.35*e),o.scale(e),t.translate(s.translate())):s.scale()},t.translate=function(e){if(!arguments.length)return s.translate();var h=s.scale(),c=+e[0],u=+e[1];return i=s.translate(e).clipExtent([[c-.455*h,u-.238*h],[c+.455*h,u+.238*h]]).stream(l).point,n=a.translate([c-.307*h,u+.201*h]).clipExtent([[c-.425*h+za,u+.12*h+za],[c-.214*h-za,u+.234*h-za]]).stream(l).point,r=o.translate([c-.205*h,u+.212*h]).clipExtent([[c-.214*h+za,u+.166*h+za],[c-.115*h-za,u+.234*h-za]]).stream(l).point,t},t.scale(1070)};var jo,Wo,Yo,$o,Bo,qo,Uo={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Wo=0,Uo.lineStart=Ue},polygonEnd:function(){Uo.lineStart=Uo.lineEnd=Uo.point=w,jo+=xa(Wo/2)}},Vo={point:Ve,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Xo={point:Ze,lineStart:Qe,lineEnd:Ke,polygonStart:function(){Xo.lineStart=Je},polygonEnd:function(){Xo.point=Ze,Xo.lineStart=Qe,Xo.lineEnd=Ke}};oa.geo.path=function(){function t(t){return t&&("function"==typeof o&&s.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=r(s)),oa.geo.stream(t,a)),s.result()}function e(){return a=null,t}var i,n,r,s,a,o=4.5;return t.area=function(t){return jo=0,oa.geo.stream(t,r(Uo)),jo},t.centroid=function(t){return Do=Ao=Eo=Po=Lo=Fo=Io=zo=Ro=0,oa.geo.stream(t,r(Xo)),Ro?[Io/Ro,zo/Ro]:Fo?[Po/Fo,Lo/Fo]:Eo?[Do/Eo,Ao/Eo]:[NaN,NaN]},t.bounds=function(t){return Bo=qo=-(Yo=$o=1/0),oa.geo.stream(t,r(Vo)),[[Yo,$o],[Bo,qo]]},t.projection=function(t){return arguments.length?(r=(i=t)?t.stream||ii(t):y,e()):i},t.context=function(t){return arguments.length?(s=null==(n=t)?new Xe:new ti(t),"function"!=typeof o&&s.pointRadius(o),e()):n},t.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(s.pointRadius(+e),+e),t):o},t.projection(oa.geo.albersUsa()).context(null)},oa.geo.transform=function(t){return{stream:function(e){var i=new ni(e);for(var n in t)i[n]=t[n];return i}}},ni.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},oa.geo.projection=si,oa.geo.projectionMutator=ai,(oa.geo.equirectangular=function(){return si(li)}).raw=li.invert=li,oa.geo.rotation=function(t){function e(e){return e=t(e[0]*Wa,e[1]*Wa),e[0]*=Ya,e[1]*=Ya,e}return t=ci(t[0]%360*Wa,t[1]*Wa,t.length>2?t[2]*Wa:0),e.invert=function(e){return e=t.invert(e[0]*Wa,e[1]*Wa),e[0]*=Ya,e[1]*=Ya,e},e},hi.invert=li,oa.geo.circle=function(){function t(){var t="function"==typeof n?n.apply(this,arguments):n,e=ci(-t[0]*Wa,-t[1]*Wa,0).invert,r=[];return i(null,null,1,{point:function(t,i){r.push(t=e(t,i)),t[0]*=Ya,t[1]*=Ya}}),{type:"Polygon",coordinates:[r]}}var e,i,n=[0,0],r=6;return t.origin=function(e){return arguments.length?(n=e,t):n},t.angle=function(n){return arguments.length?(i=pi((e=+n)*Wa,r*Wa),t):e},t.precision=function(n){return arguments.length?(i=pi(e*Wa,(r=+n)*Wa),t):r},t.angle(90)},oa.geo.distance=function(t,e){var i,n=(e[0]-t[0])*Wa,r=t[1]*Wa,s=e[1]*Wa,a=Math.sin(n),o=Math.cos(n),l=Math.sin(r),h=Math.cos(r),c=Math.sin(s),u=Math.cos(s);return Math.atan2(Math.sqrt((i=u*a)*i+(i=h*c-l*u*o)*i),l*c+h*u*o)},oa.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return oa.range(Math.ceil(s/m)*m,r,m).map(d).concat(oa.range(Math.ceil(h/v)*v,l,v).map(f)).concat(oa.range(Math.ceil(n/p)*p,i,p).filter(function(t){return xa(t%m)>za}).map(c)).concat(oa.range(Math.ceil(o/g)*g,a,g).filter(function(t){return xa(t%v)>za}).map(u))}var i,n,r,s,a,o,l,h,c,u,d,f,p=10,g=p,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(s).concat(f(l).slice(1),d(r).reverse().slice(1),f(h).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(s=+e[0][0],r=+e[1][0],h=+e[0][1],l=+e[1][1],s>r&&(e=s,s=r,r=e),h>l&&(e=h,h=l,l=e),t.precision(y)):[[s,h],[r,l]]},t.minorExtent=function(e){return arguments.length?(n=+e[0][0],i=+e[1][0],o=+e[0][1],a=+e[1][1],n>i&&(e=n,n=i,i=e),o>a&&(e=o,o=a,a=e),t.precision(y)):[[n,o],[i,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=mi(o,a,90),u=vi(n,i,y),d=mi(h,l,90),f=vi(s,r,y),t):y},t.majorExtent([[-180,-90+za],[180,90-za]]).minorExtent([[-180,-80-za],[180,80+za]])},oa.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),i||r.apply(this,arguments)]}}var e,i,n=yi,r=xi;return t.distance=function(){return oa.geo.distance(e||n.apply(this,arguments),i||r.apply(this,arguments))},t.source=function(i){return arguments.length?(n=i,e="function"==typeof i?null:i,t):n},t.target=function(e){return arguments.length?(r=e,i="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},oa.geo.interpolate=function(t,e){return bi(t[0]*Wa,t[1]*Wa,e[0]*Wa,e[1]*Wa)},oa.geo.length=function(t){return Go=0,oa.geo.stream(t,Zo),Go};var Go,Zo={sphere:w,point:w,lineStart:wi,lineEnd:w,polygonStart:w,polygonEnd:w},Qo=_i(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(oa.geo.azimuthalEqualArea=function(){return si(Qo)}).raw=Qo;var Ko=_i(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},y);(oa.geo.azimuthalEquidistant=function(){return si(Ko)}).raw=Ko,(oa.geo.conicConformal=function(){return Be(ki)}).raw=ki,(oa.geo.conicEquidistant=function(){return Be(Ci)}).raw=Ci;var Jo=_i(function(t){return 1/t},Math.atan);(oa.geo.gnomonic=function(){return si(Jo)}).raw=Jo,Mi.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-ja]},(oa.geo.mercator=function(){return Si(Mi)}).raw=Mi;var tl=_i(function(){return 1},Math.asin);(oa.geo.orthographic=function(){return si(tl)}).raw=tl;var el=_i(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(oa.geo.stereographic=function(){return si(el)}).raw=el,Ti.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-ja]},(oa.geo.transverseMercator=function(){var t=Si(Ti),e=t.center,i=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?i([t[0],t[1],t.length>2?t[2]+90:90]):(t=i(),[t[0],t[1],t[2]-90])},i([0,0,90])}).raw=Ti,oa.geom={},oa.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=St(i),s=St(n),a=t.length,o=[],l=[];for(e=0;a>e;e++)o.push([+r.call(this,t[e],e),+s.call(this,t[e],e),e]);for(o.sort(Pi),e=0;a>e;e++)l.push([o[e][0],-o[e][1]]);var h=Ei(o),c=Ei(l),u=c[0]===h[0],d=c[c.length-1]===h[h.length-1],f=[];for(e=h.length-1;e>=0;--e)f.push(t[o[h[e]][2]]);for(e=+u;e<c.length-d;++e)f.push(t[o[c[e]][2]]);return f}var i=Di,n=Ai;return arguments.length?e(t):(e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e)},oa.geom.polygon=function(t){return Ca(t,il),t};var il=oa.geom.polygon.prototype=[];il.area=function(){for(var t,e=-1,i=this.length,n=this[i-1],r=0;++e<i;)t=n,n=this[e],r+=t[1]*n[0]-t[0]*n[1];return.5*r},il.centroid=function(t){var e,i,n=-1,r=this.length,s=0,a=0,o=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++n<r;)e=o,o=this[n],i=e[0]*o[1]-o[0]*e[1],s+=(e[0]+o[0])*i,a+=(e[1]+o[1])*i;return[s*t,a*t]},il.clip=function(t){for(var e,i,n,r,s,a,o=Ii(t),l=-1,h=this.length-Ii(this),c=this[h-1];++l<h;){for(e=t.slice(),t.length=0,r=this[l],s=e[(n=e.length-o)-1],i=-1;++i<n;)a=e[i],Li(a,c,r)?(Li(s,c,r)||t.push(Fi(s,a,c,r)),t.push(a)):Li(s,c,r)&&t.push(Fi(s,a,c,r)),s=a;o&&t.push(t[0]),c=r}return t};var nl,rl,sl,al,ol,ll=[],hl=[];Yi.prototype.prepare=function(){for(var t,e=this.edges,i=e.length;i--;)t=e[i].edge,t.b&&t.a||e.splice(i,1);return e.sort(Bi),e.length},tn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},en.prototype={insert:function(t,e){var i,n,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else this._?(t=an(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)n=i.U,i===n.L?(r=n.R,r&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.R&&(rn(this,i),t=i,i=t.U),i.C=!1,n.C=!0,sn(this,n))):(r=n.L,r&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.L&&(sn(this,i),t=i,i=t.U),i.C=!1,n.C=!0,rn(this,n))),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,n,r=t.U,s=t.L,a=t.R;if(i=s?a?an(a):s:a,r?r.L===t?r.L=i:r.R=i:this._=i,s&&a?(n=i.C,i.C=t.C,i.L=s,s.U=i,i!==a?(r=i.U,i.U=t.U,t=i.R,r.L=t,i.R=a,a.U=i):(i.U=r,r=i,t=i.R)):(n=t.C,t=i),t&&(t.U=r),!n){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,rn(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,sn(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,rn(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,sn(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,rn(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,sn(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},oa.geom.voronoi=function(t){function e(t){var e=new Array(t.length),n=o[0][0],r=o[0][1],s=o[1][0],a=o[1][1];return on(i(t),o).cells.forEach(function(i,o){var l=i.edges,h=i.site,c=e[o]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):h.x>=n&&h.x<=s&&h.y>=r&&h.y<=a?[[n,a],[s,a],[s,r],[n,r]]:[];c.point=t[o]}),e}function i(t){return t.map(function(t,e){return{x:Math.round(s(t,e)/za)*za,y:Math.round(a(t,e)/za)*za,i:e}})}var n=Di,r=Ai,s=n,a=r,o=cl;return t?e(t):(e.links=function(t){return on(i(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return on(i(t)).cells.forEach(function(i,n){for(var r,s,a=i.site,o=i.edges.sort(Bi),l=-1,h=o.length,c=o[h-1].edge,u=c.l===a?c.r:c.l;++l<h;)r=c,s=u,c=o[l].edge,u=c.l===a?c.r:c.l,n<s.i&&n<u.i&&hn(a,s,u)<0&&e.push([t[n],t[s.i],t[u.i]])}),e},e.x=function(t){return arguments.length?(s=St(n=t),e):n},e.y=function(t){return arguments.length?(a=St(r=t),e):r},e.clipExtent=function(t){return arguments.length?(o=null==t?cl:t,e):o===cl?null:o},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):o===cl?null:o&&o[1]},e)};var cl=[[-1e6,-1e6],[1e6,1e6]];oa.geom.delaunay=function(t){return oa.geom.voronoi().triangles(t)},oa.geom.quadtree=function(t,e,i,n,r){function s(t){function s(t,e,i,n,r,s,a,o){if(!isNaN(i)&&!isNaN(n))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(xa(l-i)+xa(c-n)<.01)h(t,e,i,n,r,s,a,o);else{var u=t.point;t.x=t.y=t.point=null,h(t,u,l,c,r,s,a,o),h(t,e,i,n,r,s,a,o)}else t.x=i,t.y=n,t.point=e}else h(t,e,i,n,r,s,a,o)}function h(t,e,i,n,r,a,o,l){var h=.5*(r+o),c=.5*(a+l),u=i>=h,d=n>=c,f=d<<1|u;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]=dn()),u?r=h:o=h,d?a=c:l=c,s(t,e,i,n,r,a,o,l)}var c,u,d,f,p,g,m,v,y,x=St(o),b=St(l);if(null!=e)g=e,m=i,v=n,y=r;else if(v=y=-(g=m=1/0),u=[],d=[],p=t.length,a)for(f=0;p>f;++f)c=t[f],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),u.push(c.x),d.push(c.y);else for(f=0;p>f;++f){var w=+x(c=t[f],f),_=+b(c,f);g>w&&(g=w),m>_&&(m=_),w>v&&(v=w),_>y&&(y=_),u.push(w),d.push(_)}var k=v-g,C=y-m;k>C?y=m+k:v=g+C;var M=dn();if(M.add=function(t){s(M,t,+x(t,++f),+b(t,f),g,m,v,y)},M.visit=function(t){fn(t,M,g,m,v,y)},M.find=function(t){return pn(M,t[0],t[1],g,m,v,y)},f=-1,null==e){for(;++f<p;)s(M,t[f],u[f],d[f],g,m,v,y);--f}else t.forEach(M.add);return u=d=t=c=null,M}var a,o=Di,l=Ai;return(a=arguments.length)?(o=cn,l=un,3===a&&(r=i,n=e,i=e=0),s(t)):(s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(l=t,s):l},s.extent=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=+t[0][0],i=+t[0][1],n=+t[1][0],r=+t[1][1]),s):null==e?null:[[e,i],[n,r]]},s.size=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=i=0,n=+t[0],r=+t[1]),s):null==e?null:[n-e,r-i]},s)},oa.interpolateRgb=gn,oa.interpolateObject=mn,oa.interpolateNumber=vn,oa.interpolateString=yn;var ul=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dl=new RegExp(ul.source,"g");oa.interpolate=xn,oa.interpolators=[function(t,e){var i=typeof e;return("string"===i?no.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?gn:yn:e instanceof at?gn:Array.isArray(e)?bn:"object"===i&&isNaN(e)?mn:vn)(t,e)}],oa.interpolateArray=bn;var fl=function(){return y},pl=oa.map({linear:fl,poly:Tn,quad:function(){return Cn},cubic:function(){return Mn},sin:function(){return Dn},exp:function(){return An},circle:function(){return En},elastic:Pn,back:Ln,bounce:function(){return Fn}}),gl=oa.map({"in":y,out:_n,"in-out":kn,"out-in":function(t){return kn(_n(t))}});oa.ease=function(t){var e=t.indexOf("-"),i=e>=0?t.slice(0,e):t,n=e>=0?t.slice(e+1):"in";return i=pl.get(i)||fl,n=gl.get(n)||y,wn(n(i.apply(null,la.call(arguments,1))))},oa.interpolateHcl=In,oa.interpolateHsl=zn,oa.interpolateLab=Rn,oa.interpolateRound=On,oa.transform=function(t){var e=ca.createElementNS(oa.ns.prefix.svg,"g");return(oa.transform=function(t){if(null!=t){e.setAttribute("transform",t);var i=e.transform.baseVal.consolidate()}return new Nn(i?i.matrix:ml)})(t)},Nn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ml={a:1,b:0,c:0,d:1,e:0,f:0};oa.interpolateTransform=Vn,oa.layout={},oa.layout.bundle=function(){return function(t){for(var e=[],i=-1,n=t.length;++i<n;)e.push(Zn(t[i]));return e}},oa.layout.chord=function(){function t(){var t,h,u,d,f,p={},g=[],m=oa.range(s),v=[];for(i=[],n=[],t=0,d=-1;++d<s;){for(h=0,f=-1;++f<s;)h+=r[d][f];g.push(h),v.push(oa.range(s)),t+=h}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),o&&v.forEach(function(t,e){t.sort(function(t,i){return o(r[e][t],r[e][i])})}),t=(Na-c*s)/t,h=0,d=-1;++d<s;){for(u=h,f=-1;++f<s;){var y=m[d],x=v[y][f],b=r[y][x],w=h,_=h+=b*t;p[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:_,value:b}}n[y]={index:y,startAngle:u,endAngle:h,value:g[y]},h+=c}for(d=-1;++d<s;)for(f=d-1;++f<s;){var k=p[d+"-"+f],C=p[f+"-"+d];(k.value||C.value)&&i.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){i.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var i,n,r,s,a,o,l,h={},c=0;return h.matrix=function(t){return arguments.length?(s=(r=t)&&r.length,i=n=null,h):r},h.padding=function(t){return arguments.length?(c=t,i=n=null,h):c},h.sortGroups=function(t){return arguments.length?(a=t,i=n=null,h):a},h.sortSubgroups=function(t){return arguments.length?(o=t,i=null,h):o},h.sortChords=function(t){return arguments.length?(l=t,i&&e(),h):l},h.chords=function(){return i||t(),i},h.groups=function(){return n||t(),n},h},oa.layout.force=function(){function t(t){return function(e,i,n,r){if(e.point!==t){var s=e.cx-t.x,a=e.cy-t.y,o=r-i,l=s*s+a*a;if(l>o*o/v){if(g>l){var h=e.charge/l;t.px-=s*h,t.py-=a*h}return!0}if(e.point&&l&&g>l){var h=e.pointCharge/l;t.px-=s*h,t.py-=a*h}}return!e.charge}}function e(t){t.px=oa.event.x,t.py=oa.event.y,l.resume()}var i,n,r,s,a,o,l={},h=oa.dispatch("start","tick","end"),c=[1,1],u=.9,d=vl,f=yl,p=-30,g=xl,m=.1,v=.64,x=[],b=[];return l.tick=function(){if((r*=.99)<.005)return i=null,h.end({type:"end",alpha:r=0}),!0;var e,n,l,d,f,g,v,y,w,_=x.length,k=b.length;for(n=0;k>n;++n)l=b[n],d=l.source,f=l.target,y=f.x-d.x,w=f.y-d.y,(g=y*y+w*w)&&(g=r*a[n]*((g=Math.sqrt(g))-s[n])/g,y*=g,w*=g,f.x-=y*(v=d.weight+f.weight?d.weight/(d.weight+f.weight):.5),f.y-=w*v,d.x+=y*(v=1-v),d.y+=w*v);if((v=r*m)&&(y=c[0]/2,w=c[1]/2,n=-1,v))for(;++n<_;)l=x[n],l.x+=(y-l.x)*v,l.y+=(w-l.y)*v;if(p)for(nr(e=oa.geom.quadtree(x),r,o),n=-1;++n<_;)(l=x[n]).fixed||e.visit(t(l));for(n=-1;++n<_;)l=x[n],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*u,l.y-=(l.py-(l.py=l.y))*u);h.tick({type:"tick",alpha:r})},l.nodes=function(t){return arguments.length?(x=t,l):x},l.links=function(t){return arguments.length?(b=t,l):b},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,l):f},l.friction=function(t){return arguments.length?(u=+t,l):u},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(m=+t,l):m},l.theta=function(t){return arguments.length?(v=t*t,l):Math.sqrt(v)},l.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(i.c=null,i.t=NaN,i=null,h.end({type:"end",alpha:r=0})):t>0&&(h.start({type:"start",alpha:r=t}),i=Pt(l.tick)),l):r},l.start=function(){function t(t,n){if(!i){for(i=new Array(r),l=0;r>l;++l)i[l]=[];for(l=0;h>l;++l){var s=b[l];i[s.source.index].push(s.target),i[s.target.index].push(s.source)}}for(var a,o=i[e],l=-1,c=o.length;++l<c;)if(!isNaN(a=o[l][t]))return a;return Math.random()*n}var e,i,n,r=x.length,h=b.length,u=c[0],g=c[1];for(e=0;r>e;++e)(n=x[e]).index=e,n.weight=0;for(e=0;h>e;++e)n=b[e],"number"==typeof n.source&&(n.source=x[n.source]),"number"==typeof n.target&&(n.target=x[n.target]),++n.source.weight,++n.target.weight;for(e=0;r>e;++e)n=x[e],isNaN(n.x)&&(n.x=t("x",u)),isNaN(n.y)&&(n.y=t("y",g)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(s=[],"function"==typeof d)for(e=0;h>e;++e)s[e]=+d.call(this,b[e],e);else for(e=0;h>e;++e)s[e]=d;if(a=[],"function"==typeof f)for(e=0;h>e;++e)a[e]=+f.call(this,b[e],e);else for(e=0;h>e;++e)a[e]=f;if(o=[],"function"==typeof p)for(e=0;r>e;++e)o[e]=+p.call(this,x[e],e);else for(e=0;r>e;++e)o[e]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return n||(n=oa.behavior.drag().origin(y).on("dragstart.force",Jn).on("drag.force",e).on("dragend.force",tr)),arguments.length?void this.on("mouseover.force",er).on("mouseout.force",ir).call(n):n},oa.rebind(l,h,"on")};var vl=20,yl=1,xl=1/0;oa.layout.hierarchy=function(){function t(r){var s,a=[r],o=[];for(r.depth=0;null!=(s=a.pop());)if(o.push(s),(h=i.call(t,s,s.depth))&&(l=h.length)){for(var l,h,c;--l>=0;)a.push(c=h[l]),c.parent=s,c.depth=s.depth+1;n&&(s.value=0),s.children=h}else n&&(s.value=+n.call(t,s,s.depth)||0),delete s.children;return ar(r,function(t){var i,r;e&&(i=t.children)&&i.sort(e),n&&(r=t.parent)&&(r.value+=t.value)}),o}var e=hr,i=or,n=lr;return t.sort=function(i){return arguments.length?(e=i,t):e},t.children=function(e){return arguments.length?(i=e,t):i},t.value=function(e){return arguments.length?(n=e,t):n},t.revalue=function(e){return n&&(sr(e,function(t){t.children&&(t.value=0)}),ar(e,function(e){var i;e.children||(e.value=+n.call(t,e,e.depth)||0),(i=e.parent)&&(i.value+=e.value)})),e},t},oa.layout.partition=function(){function t(e,i,n,r){var s=e.children;if(e.x=i,e.y=e.depth*r,e.dx=n,e.dy=r,s&&(a=s.length)){var a,o,l,h=-1;for(n=e.value?n/e.value:0;++h<a;)t(o=s[h],i,l=o.value*n,r),i+=l}}function e(t){var i=t.children,n=0;if(i&&(r=i.length))for(var r,s=-1;++s<r;)n=Math.max(n,e(i[s]));return 1+n}function i(i,s){var a=n.call(this,i,s);return t(a[0],0,r[0],r[1]/e(a[0])),a}var n=oa.layout.hierarchy(),r=[1,1];return i.size=function(t){return arguments.length?(r=t,i):r},rr(i,n)},oa.layout.pie=function(){function t(a){var o,l=a.length,h=a.map(function(i,n){return+e.call(t,i,n)}),c=+("function"==typeof n?n.apply(this,arguments):n),u=("function"==typeof r?r.apply(this,arguments):r)-c,d=Math.min(Math.abs(u)/l,+("function"==typeof s?s.apply(this,arguments):s)),f=d*(0>u?-1:1),p=oa.sum(h),g=p?(u-l*f)/p:0,m=oa.range(l),v=[];return null!=i&&m.sort(i===bl?function(t,e){return h[e]-h[t]}:function(t,e){return i(a[t],a[e])}),m.forEach(function(t){v[t]={data:a[t],value:o=h[t],startAngle:c,endAngle:c+=o*g+f,padAngle:d}}),v}var e=Number,i=bl,n=0,r=Na,s=0;return t.value=function(i){return arguments.length?(e=i,t):e},t.sort=function(e){return arguments.length?(i=e,t):i},t.startAngle=function(e){return arguments.length?(n=e,t):n},t.endAngle=function(e){return arguments.length?(r=e,t):r},t.padAngle=function(e){return arguments.length?(s=e,t):s},t};var bl={};oa.layout.stack=function(){function t(o,l){if(!(d=o.length))return o;var h=o.map(function(i,n){return e.call(t,i,n)}),c=h.map(function(e){return e.map(function(e,i){return[s.call(t,e,i),a.call(t,e,i)]})}),u=i.call(t,c,l);h=oa.permute(h,u),c=oa.permute(c,u);var d,f,p,g,m=n.call(t,c,l),v=h[0].length;for(p=0;v>p;++p)for(r.call(t,h[0][p],g=m[p],c[0][p][1]),f=1;d>f;++f)r.call(t,h[f][p],g+=c[f-1][p][1],c[f][p][1]);return o}var e=y,i=pr,n=gr,r=fr,s=ur,a=dr;return t.values=function(i){return arguments.length?(e=i,t):e},t.order=function(e){return arguments.length?(i="function"==typeof e?e:wl.get(e)||pr,t):i},t.offset=function(e){return arguments.length?(n="function"==typeof e?e:_l.get(e)||gr,t):n},t.x=function(e){return arguments.length?(s=e,t):s},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(r=e,t):r},t};var wl=oa.map({"inside-out":function(t){var e,i,n=t.length,r=t.map(mr),s=t.map(vr),a=oa.range(n).sort(function(t,e){return r[t]-r[e]}),o=0,l=0,h=[],c=[];for(e=0;n>e;++e)i=a[e],l>o?(o+=s[i],h.push(i)):(l+=s[i],c.push(i));return c.reverse().concat(h)},reverse:function(t){return oa.range(t.length).reverse()},"default":pr}),_l=oa.map({silhouette:function(t){var e,i,n,r=t.length,s=t[0].length,a=[],o=0,l=[];for(i=0;s>i;++i){for(e=0,n=0;r>e;e++)n+=t[e][i][1];n>o&&(o=n),a.push(n)}for(i=0;s>i;++i)l[i]=(o-a[i])/2;return l},wiggle:function(t){var e,i,n,r,s,a,o,l,h,c=t.length,u=t[0],d=u.length,f=[];for(f[0]=l=h=0,i=1;d>i;++i){for(e=0,r=0;c>e;++e)r+=t[e][i][1];for(e=0,s=0,o=u[i][0]-u[i-1][0];c>e;++e){for(n=0,a=(t[e][i][1]-t[e][i-1][1])/(2*o);e>n;++n)a+=(t[n][i][1]-t[n][i-1][1])/o;s+=a*t[e][i][1]}f[i]=l-=r?s/r*o:0,h>l&&(h=l)}for(i=0;d>i;++i)f[i]-=h;return f},expand:function(t){var e,i,n,r=t.length,s=t[0].length,a=1/r,o=[];for(i=0;s>i;++i){for(e=0,n=0;r>e;e++)n+=t[e][i][1];if(n)for(e=0;r>e;e++)t[e][i][1]/=n;else for(e=0;r>e;e++)t[e][i][1]=a}for(i=0;s>i;++i)o[i]=0;return o},zero:gr});oa.layout.histogram=function(){function t(t,s){for(var a,o,l=[],h=t.map(i,this),c=n.call(this,h,s),u=r.call(this,c,h,s),s=-1,d=h.length,f=u.length-1,p=e?1:1/d;++s<f;)a=l[s]=[],a.dx=u[s+1]-(a.x=u[s]),a.y=0;if(f>0)for(s=-1;++s<d;)o=h[s],o>=c[0]&&o<=c[1]&&(a=l[oa.bisect(u,o,1,f)-1],a.y+=p,a.push(t[s]));return l}var e=!0,i=Number,n=wr,r=xr;return t.value=function(e){return arguments.length?(i=e,t):i},t.range=function(e){return arguments.length?(n=St(e),t):n},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return br(t,e)}:St(e),t):r},t.frequency=function(i){return arguments.length?(e=!!i,t):e},t},oa.layout.pack=function(){function t(t,s){var a=i.call(this,t,s),o=a[0],l=r[0],h=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(o.x=o.y=0,ar(o,function(t){t.r=+c(t.value)}),ar(o,Sr),n){var u=n*(e?1:Math.max(2*o.r/l,2*o.r/h))/2;ar(o,function(t){t.r+=u}),ar(o,Sr),ar(o,function(t){t.r-=u})}return Ar(o,l/2,h/2,e?1:1/Math.max(2*o.r/l,2*o.r/h)),a}var e,i=oa.layout.hierarchy().sort(_r),n=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(i){return arguments.length?(e=null==i||"function"==typeof i?i:+i,t):e},t.padding=function(e){return arguments.length?(n=+e,t):n},rr(t,i)},oa.layout.tree=function(){function t(t,r){var c=a.call(this,t,r),u=c[0],d=e(u);if(ar(d,i),d.parent.m=-d.z,sr(d,n),h)sr(u,s);else{var f=u,p=u,g=u;sr(u,function(t){t.x<f.x&&(f=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var m=o(f,p)/2-f.x,v=l[0]/(p.x+o(p,f)/2+m),y=l[1]/(g.depth||1);sr(u,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return c}function e(t){for(var e,i={A:null,children:[t]},n=[i];null!=(e=n.pop());)for(var r,s=e.children,a=0,o=s.length;o>a;++a)n.push((s[a]=r={_:s[a],parent:e,children:(r=s[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return i.children[0]}function i(t){var e=t.children,i=t.parent.children,n=t.i?i[t.i-1]:null;if(e.length){zr(t);var s=(e[0].z+e[e.length-1].z)/2;n?(t.z=n.z+o(t._,n._),t.m=t.z-s):t.z=s}else n&&(t.z=n.z+o(t._,n._));t.parent.A=r(t,n,t.parent.A||i[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,i){if(e){for(var n,r=t,s=t,a=e,l=r.parent.children[0],h=r.m,c=s.m,u=a.m,d=l.m;a=Fr(a),r=Lr(r),a&&r;)l=Lr(l),s=Fr(s),s.a=t,n=a.z+u-r.z-h+o(a._,r._),n>0&&(Ir(Rr(a,t,i),t,n),h+=n,c+=n),u+=a.m,h+=r.m,d+=l.m,c+=s.m;a&&!Fr(s)&&(s.t=a,s.m+=u-c),r&&!Lr(l)&&(l.t=r,l.m+=h-d,i=t)}return i}function s(t){t.x*=l[0],t.y=t.depth*l[1]}var a=oa.layout.hierarchy().sort(null).value(null),o=Pr,l=[1,1],h=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(h=null==(l=e)?s:null,t):h?null:l},t.nodeSize=function(e){return arguments.length?(h=null==(l=e)?null:s,t):h?l:null},rr(t,a)},oa.layout.cluster=function(){function t(t,s){var a,o=e.call(this,t,s),l=o[0],h=0;ar(l,function(t){var e=t.children;e&&e.length?(t.x=Nr(e),t.y=Or(e)):(t.x=a?h+=i(t,a):0,t.y=0,a=t)});var c=Hr(l),u=jr(l),d=c.x-i(c,u)/2,f=u.x+i(u,c)/2;return ar(l,r?function(t){t.x=(t.x-l.x)*n[0],t.y=(l.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(f-d)*n[0],t.y=(1-(l.y?t.y/l.y:1))*n[1]}),o}var e=oa.layout.hierarchy().sort(null).value(null),i=Pr,n=[1,1],r=!1;return t.separation=function(e){return arguments.length?(i=e,t):i},t.size=function(e){return arguments.length?(r=null==(n=e),t):r?null:n},t.nodeSize=function(e){return arguments.length?(r=null!=(n=e),t):r?n:null},rr(t,e)},oa.layout.treemap=function(){function t(t,e){for(var i,n,r=-1,s=t.length;++r<s;)n=(i=t[r]).value*(0>e?0:e),i.area=isNaN(n)||0>=n?0:n}function e(i){var s=i.children;if(s&&s.length){var a,o,l,h=u(i),c=[],d=s.slice(),p=1/0,g="slice"===f?h.dx:"dice"===f?h.dy:"slice-dice"===f?1&i.depth?h.dy:h.dx:Math.min(h.dx,h.dy);for(t(d,h.dx*h.dy/i.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==f||(o=n(c,g))<=p?(d.pop(),p=o):(c.area-=c.pop().area,r(c,g,h,!1),g=Math.min(h.dx,h.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,g,h,!0),c.length=c.area=0),s.forEach(e)}}function i(e){var n=e.children;if(n&&n.length){var s,a=u(e),o=n.slice(),l=[];for(t(o,a.dx*a.dy/e.value),l.area=0;s=o.pop();)l.push(s),l.area+=s.area,null!=s.z&&(r(l,s.z?a.dx:a.dy,a,!o.length),l.length=l.area=0);n.forEach(i)}}function n(t,e){for(var i,n=t.area,r=0,s=1/0,a=-1,o=t.length;++a<o;)(i=t[a].area)&&(s>i&&(s=i),i>r&&(r=i));return n*=n,e*=e,n?Math.max(e*r*p/n,n/(e*s*p)):1/0}function r(t,e,i,n){var r,s=-1,a=t.length,o=i.x,h=i.y,c=e?l(t.area/e):0;if(e==i.dx){for((n||c>i.dy)&&(c=i.dy);++s<a;)r=t[s],r.x=o,r.y=h,r.dy=c,o+=r.dx=Math.min(i.x+i.dx-o,c?l(r.area/c):0);r.z=!0,r.dx+=i.x+i.dx-o,i.y+=c,i.dy-=c}else{for((n||c>i.dx)&&(c=i.dx);++s<a;)r=t[s],r.x=o,r.y=h,r.dx=c,h+=r.dy=Math.min(i.y+i.dy-h,c?l(r.area/c):0);r.z=!1,r.dy+=i.y+i.dy-h,i.x+=c,i.dx-=c}}function s(n){var r=a||o(n),s=r[0];return s.x=s.y=0,s.value?(s.dx=h[0],s.dy=h[1]):s.dx=s.dy=0,a&&o.revalue(s),t([s],s.dx*s.dy/s.value),(a?i:e)(s),d&&(a=r),r}var a,o=oa.layout.hierarchy(),l=Math.round,h=[1,1],c=null,u=Wr,d=!1,f="squarify",p=.5*(1+Math.sqrt(5));return s.size=function(t){return arguments.length?(h=t,s):h},s.padding=function(t){function e(e){var i=t.call(s,e,e.depth);return null==i?Wr(e):Yr(e,"number"==typeof i?[i,i,i,i]:i)}function i(e){return Yr(e,t)}if(!arguments.length)return c;var n;return u=null==(c=t)?Wr:"function"==(n=typeof t)?e:"number"===n?(t=[t,t,t,t],i):i,s},s.round=function(t){return arguments.length?(l=t?Math.round:Number,s):l!=Number},s.sticky=function(t){return arguments.length?(d=t,a=null,s):d},s.ratio=function(t){return arguments.length?(p=t,s):p},s.mode=function(t){return arguments.length?(f=t+"",s):f},rr(s,o)},oa.random={normal:function(t,e){var i=arguments.length;return 2>i&&(e=1),1>i&&(t=0),function(){var i,n,r;do i=2*Math.random()-1,n=2*Math.random()-1,r=i*i+n*n;while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=oa.random.normal.apply(oa,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=oa.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,i=0;t>i;i++)e+=Math.random();return e}}},oa.scale={};var kl={floor:y,ceil:y};oa.scale.linear=function(){return Gr([0,1],[0,1],xn,!1)};var Cl={s:1,g:1,p:1,r:1,e:1};oa.scale.log=function(){return ns(oa.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=oa.format(".0e"),Sl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};oa.scale.pow=function(){return rs(oa.scale.linear(),1,[0,1])},oa.scale.sqrt=function(){return oa.scale.pow().exponent(.5)},oa.scale.ordinal=function(){return as([],{t:"range",a:[[]]})},oa.scale.category10=function(){return oa.scale.ordinal().range(Tl)},oa.scale.category20=function(){return oa.scale.ordinal().range(Dl)},oa.scale.category20b=function(){return oa.scale.ordinal().range(Al)},oa.scale.category20c=function(){return oa.scale.ordinal().range(El)};var Tl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xt),Dl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xt),Al=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xt),El=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xt);
oa.scale.quantile=function(){return os([],[])},oa.scale.quantize=function(){return ls(0,1,[0,1])},oa.scale.threshold=function(){return hs([.5],[0,1])},oa.scale.identity=function(){return cs([0,1])},oa.svg={},oa.svg.arc=function(){function t(){var t=Math.max(0,+i.apply(this,arguments)),h=Math.max(0,+n.apply(this,arguments)),c=a.apply(this,arguments)-ja,u=o.apply(this,arguments)-ja,d=Math.abs(u-c),f=c>u?0:1;if(t>h&&(p=h,h=t,t=p),d>=Ha)return e(h,f)+(t?e(t,1-f):"")+"Z";var p,g,m,v,y,x,b,w,_,k,C,M,S=0,T=0,D=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=s===Pl?Math.sqrt(t*t+h*h):+s.apply(this,arguments),f||(T*=-1),h&&(T=et(m/h*Math.sin(v))),t&&(S=et(m/t*Math.sin(v)))),h){y=h*Math.cos(c+T),x=h*Math.sin(c+T),b=h*Math.cos(u-T),w=h*Math.sin(u-T);var A=Math.abs(u-c-2*T)<=Oa?0:1;if(T&&vs(y,x,b,w)===f^A){var E=(c+u)/2;y=h*Math.cos(E),x=h*Math.sin(E),b=w=null}}else y=x=0;if(t){_=t*Math.cos(u-S),k=t*Math.sin(u-S),C=t*Math.cos(c+S),M=t*Math.sin(c+S);var P=Math.abs(c-u+2*S)<=Oa?0:1;if(S&&vs(_,k,C,M)===1-f^P){var L=(c+u)/2;_=t*Math.cos(L),k=t*Math.sin(L),C=M=null}}else _=k=0;if(d>za&&(p=Math.min(Math.abs(h-t)/2,+r.apply(this,arguments)))>.001){g=h>t^f?0:1;var F=p,I=p;if(Oa>d){var z=null==C?[_,k]:null==b?[y,x]:Fi([y,x],[C,M],[b,w],[_,k]),R=y-z[0],O=x-z[1],N=b-z[0],H=w-z[1],j=1/Math.sin(Math.acos((R*N+O*H)/(Math.sqrt(R*R+O*O)*Math.sqrt(N*N+H*H)))/2),W=Math.sqrt(z[0]*z[0]+z[1]*z[1]);I=Math.min(p,(t-W)/(j-1)),F=Math.min(p,(h-W)/(j+1))}if(null!=b){var Y=ys(null==C?[_,k]:[C,M],[y,x],h,F,f),$=ys([b,w],[_,k],h,F,f);p===F?D.push("M",Y[0],"A",F,",",F," 0 0,",g," ",Y[1],"A",h,",",h," 0 ",1-f^vs(Y[1][0],Y[1][1],$[1][0],$[1][1]),",",f," ",$[1],"A",F,",",F," 0 0,",g," ",$[0]):D.push("M",Y[0],"A",F,",",F," 0 1,",g," ",$[0])}else D.push("M",y,",",x);if(null!=C){var B=ys([y,x],[C,M],t,-I,f),q=ys([_,k],null==b?[y,x]:[b,w],t,-I,f);p===I?D.push("L",q[0],"A",I,",",I," 0 0,",g," ",q[1],"A",t,",",t," 0 ",f^vs(q[1][0],q[1][1],B[1][0],B[1][1]),",",1-f," ",B[1],"A",I,",",I," 0 0,",g," ",B[0]):D.push("L",q[0],"A",I,",",I," 0 0,",g," ",B[0])}else D.push("L",_,",",k)}else D.push("M",y,",",x),null!=b&&D.push("A",h,",",h," 0 ",A,",",f," ",b,",",w),D.push("L",_,",",k),null!=C&&D.push("A",t,",",t," 0 ",P,",",1-f," ",C,",",M);return D.push("Z"),D.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var i=ds,n=fs,r=us,s=Pl,a=ps,o=gs,l=ms;return t.innerRadius=function(e){return arguments.length?(i=St(e),t):i},t.outerRadius=function(e){return arguments.length?(n=St(e),t):n},t.cornerRadius=function(e){return arguments.length?(r=St(e),t):r},t.padRadius=function(e){return arguments.length?(s=e==Pl?Pl:St(e),t):s},t.startAngle=function(e){return arguments.length?(a=St(e),t):a},t.endAngle=function(e){return arguments.length?(o=St(e),t):o},t.padAngle=function(e){return arguments.length?(l=St(e),t):l},t.centroid=function(){var t=(+i.apply(this,arguments)+ +n.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-ja;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Pl="auto";oa.svg.line=function(){return xs(y)};var Ll=oa.map({linear:bs,"linear-closed":ws,step:_s,"step-before":ks,"step-after":Cs,basis:Es,"basis-open":Ps,"basis-closed":Ls,bundle:Fs,cardinal:Ts,"cardinal-open":Ms,"cardinal-closed":Ss,monotone:Hs});Ll.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Fl=[0,2/3,1/3,0],Il=[0,1/3,2/3,0],zl=[0,1/6,2/3,1/6];oa.svg.line.radial=function(){var t=xs(js);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ks.reverse=Cs,Cs.reverse=ks,oa.svg.area=function(){return Ws(y)},oa.svg.area.radial=function(){var t=Ws(js);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},oa.svg.chord=function(){function t(t,o){var l=e(this,s,t,o),h=e(this,a,t,o);return"M"+l.p0+n(l.r,l.p1,l.a1-l.a0)+(i(l,h)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,h.r,h.p0)+n(h.r,h.p1,h.a1-h.a0)+r(h.r,h.p1,l.r,l.p0))+"Z"}function e(t,e,i,n){var r=e.call(t,i,n),s=o.call(t,r,n),a=l.call(t,r,n)-ja,c=h.call(t,r,n)-ja;return{r:s,a0:a,a1:c,p0:[s*Math.cos(a),s*Math.sin(a)],p1:[s*Math.cos(c),s*Math.sin(c)]}}function i(t,e){return t.a0==e.a0&&t.a1==e.a1}function n(t,e,i){return"A"+t+","+t+" 0 "+ +(i>Oa)+",1 "+e}function r(t,e,i,n){return"Q 0,0 "+n}var s=yi,a=xi,o=Ys,l=ps,h=gs;return t.radius=function(e){return arguments.length?(o=St(e),t):o},t.source=function(e){return arguments.length?(s=St(e),t):s},t.target=function(e){return arguments.length?(a=St(e),t):a},t.startAngle=function(e){return arguments.length?(l=St(e),t):l},t.endAngle=function(e){return arguments.length?(h=St(e),t):h},t},oa.svg.diagonal=function(){function t(t,r){var s=e.call(this,t,r),a=i.call(this,t,r),o=(s.y+a.y)/2,l=[s,{x:s.x,y:o},{x:a.x,y:o},a];return l=l.map(n),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=yi,i=xi,n=$s;return t.source=function(i){return arguments.length?(e=St(i),t):e},t.target=function(e){return arguments.length?(i=St(e),t):i},t.projection=function(e){return arguments.length?(n=e,t):n},t},oa.svg.diagonal.radial=function(){var t=oa.svg.diagonal(),e=$s,i=t.projection;return t.projection=function(t){return arguments.length?i(Bs(e=t)):e},t},oa.svg.symbol=function(){function t(t,n){return(Rl.get(e.call(this,t,n))||Vs)(i.call(this,t,n))}var e=Us,i=qs;return t.type=function(i){return arguments.length?(e=St(i),t):e},t.size=function(e){return arguments.length?(i=St(e),t):i},t};var Rl=oa.map({circle:Vs,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Nl)),i=e*Nl;return"M0,"+-e+"L"+i+",0 0,"+e+" "+-i+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ol),i=e*Ol/2;return"M0,"+i+"L"+e+","+-i+" "+-e+","+-i+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ol),i=e*Ol/2;return"M0,"+-i+"L"+e+","+i+" "+-e+","+i+"Z"}});oa.svg.symbolTypes=Rl.keys();var Ol=Math.sqrt(3),Nl=Math.tan(30*Wa);Da.transition=function(t){for(var e,i,n=Hl||++$l,r=Ks(t),s=[],a=jl||{time:Date.now(),ease:Sn,delay:0,duration:250},o=-1,l=this.length;++o<l;){s.push(e=[]);for(var h=this[o],c=-1,u=h.length;++c<u;)(i=h[c])&&Js(i,c,r,n,a),e.push(i)}return Gs(s,r,n)},Da.interrupt=function(t){return this.each(null==t?Wl:Xs(Ks(t)))};var Hl,jl,Wl=Xs(Ks()),Yl=[],$l=0;Yl.call=Da.call,Yl.empty=Da.empty,Yl.node=Da.node,Yl.size=Da.size,oa.transition=function(t,e){return t&&t.transition?Hl?t.transition(e):t:oa.selection().transition(t)},oa.transition.prototype=Yl,Yl.select=function(t){var e,i,n,r=this.id,s=this.namespace,a=[];t=D(t);for(var o=-1,l=this.length;++o<l;){a.push(e=[]);for(var h=this[o],c=-1,u=h.length;++c<u;)(n=h[c])&&(i=t.call(n,n.__data__,c,o))?("__data__"in n&&(i.__data__=n.__data__),Js(i,c,s,r,n[s][r]),e.push(i)):e.push(null)}return Gs(a,s,r)},Yl.selectAll=function(t){var e,i,n,r,s,a=this.id,o=this.namespace,l=[];t=A(t);for(var h=-1,c=this.length;++h<c;)for(var u=this[h],d=-1,f=u.length;++d<f;)if(n=u[d]){s=n[o][a],i=t.call(n,n.__data__,d,h),l.push(e=[]);for(var p=-1,g=i.length;++p<g;)(r=i[p])&&Js(r,p,o,a,s),e.push(r)}return Gs(l,o,a)},Yl.filter=function(t){var e,i,n,r=[];"function"!=typeof t&&(t=W(t));for(var s=0,a=this.length;a>s;s++){r.push(e=[]);for(var i=this[s],o=0,l=i.length;l>o;o++)(n=i[o])&&t.call(n,n.__data__,o,s)&&e.push(n)}return Gs(r,this.namespace,this.id)},Yl.tween=function(t,e){var i=this.id,n=this.namespace;return arguments.length<2?this.node()[n][i].tween.get(t):$(this,null==e?function(e){e[n][i].tween.remove(t)}:function(r){r[n][i].tween.set(t,e)})},Yl.attr=function(t,e){function i(){this.removeAttribute(o)}function n(){this.removeAttributeNS(o.space,o.local)}function r(t){return null==t?i:(t+="",function(){var e,i=this.getAttribute(o);return i!==t&&(e=a(i,t),function(t){this.setAttribute(o,e(t))})})}function s(t){return null==t?n:(t+="",function(){var e,i=this.getAttributeNS(o.space,o.local);return i!==t&&(e=a(i,t),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Vn:xn,o=oa.ns.qualify(t);return Zs(this,"attr."+t,e,o.local?s:r)},Yl.attrTween=function(t,e){function i(t,i){var n=e.call(this,t,i,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}}function n(t,i){var n=e.call(this,t,i,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}var r=oa.ns.qualify(t);return this.tween("attr."+t,r.local?n:i)},Yl.style=function(t,i,n){function r(){this.style.removeProperty(t)}function s(i){return null==i?r:(i+="",function(){var r,s=e(this).getComputedStyle(this,null).getPropertyValue(t);return s!==i&&(r=xn(s,i),function(e){this.style.setProperty(t,r(e),n)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(i="");for(n in t)this.style(n,t[n],i);return this}n=""}return Zs(this,"style."+t,i,s)},Yl.styleTween=function(t,i,n){function r(r,s){var a=i.call(this,r,s,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Yl.text=function(t){return Zs(this,"text",t,Qs)},Yl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Yl.ease=function(t){var e=this.id,i=this.namespace;return arguments.length<1?this.node()[i][e].ease:("function"!=typeof t&&(t=oa.ease.apply(oa,arguments)),$(this,function(n){n[i][e].ease=t}))},Yl.delay=function(t){var e=this.id,i=this.namespace;return arguments.length<1?this.node()[i][e].delay:$(this,"function"==typeof t?function(n,r,s){n[i][e].delay=+t.call(n,n.__data__,r,s)}:(t=+t,function(n){n[i][e].delay=t}))},Yl.duration=function(t){var e=this.id,i=this.namespace;return arguments.length<1?this.node()[i][e].duration:$(this,"function"==typeof t?function(n,r,s){n[i][e].duration=Math.max(1,t.call(n,n.__data__,r,s))}:(t=Math.max(1,t),function(n){n[i][e].duration=t}))},Yl.each=function(t,e){var i=this.id,n=this.namespace;if(arguments.length<2){var r=jl,s=Hl;try{Hl=i,$(this,function(e,r,s){jl=e[n][i],t.call(e,e.__data__,r,s)})}finally{jl=r,Hl=s}}else $(this,function(r){var s=r[n][i];(s.event||(s.event=oa.dispatch("start","end","interrupt"))).on(t,e)});return this},Yl.transition=function(){for(var t,e,i,n,r=this.id,s=++$l,a=this.namespace,o=[],l=0,h=this.length;h>l;l++){o.push(t=[]);for(var e=this[l],c=0,u=e.length;u>c;c++)(i=e[c])&&(n=i[a][r],Js(i,c,a,s,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),t.push(i)}return Gs(o,a,s)},oa.svg.axis=function(){function t(t){t.each(function(){var t,h=oa.select(this),c=this.__chart__||i,u=this.__chart__=i.copy(),d=null==l?u.ticks?u.ticks.apply(u,o):u.domain():l,f=null==e?u.tickFormat?u.tickFormat.apply(u,o):y:e,p=h.selectAll(".tick").data(d,u),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",za),m=oa.transition(p.exit()).style("opacity",za).remove(),v=oa.transition(p.order()).style("opacity",1),x=Math.max(r,0)+a,b=Br(u),w=h.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),oa.transition(w));g.append("line"),g.append("text");var k,C,M,S,T=g.select("line"),D=v.select("line"),A=p.select("text").text(f),E=g.select("text"),P=v.select("text"),L="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(t=ta,k="x",M="y",C="x2",S="y2",A.attr("dy",0>L?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+b[0]+","+L*s+"V0H"+b[1]+"V"+L*s)):(t=ea,k="y",M="x",C="y2",S="x2",A.attr("dy",".32em").style("text-anchor",0>L?"end":"start"),_.attr("d","M"+L*s+","+b[0]+"H0V"+b[1]+"H"+L*s)),T.attr(S,L*r),E.attr(M,L*x),D.attr(C,0).attr(S,L*r),P.attr(k,0).attr(M,L*x),u.rangeBand){var F=u,I=F.rangeBand()/2;c=u=function(t){return F(t)+I}}else c.rangeBand?c=u:m.call(t,u,c);g.call(t,c,u),v.call(t,u,u)})}var e,i=oa.scale.linear(),n=Bl,r=6,s=6,a=3,o=[10],l=null;return t.scale=function(e){return arguments.length?(i=e,t):i},t.orient=function(e){return arguments.length?(n=e in ql?e+"":Bl,t):n},t.ticks=function(){return arguments.length?(o=ha(arguments),t):o},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(i){return arguments.length?(e=i,t):e},t.tickSize=function(e){var i=arguments.length;return i?(r=+e,s=+arguments[i-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(s=+e,t):s},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Bl="bottom",ql={top:1,right:1,bottom:1,left:1};oa.svg.brush=function(){function t(e){e.each(function(){var e=oa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=e.selectAll(".resize").data(g,y);o.exit().remove(),o.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ul[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",t.empty()?"none":null);var l,u=oa.transition(e),d=oa.transition(a);h&&(l=Br(h),d.attr("x",l[0]).attr("width",l[1]-l[0]),n(u)),c&&(l=Br(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),r(u)),i(u)})}function i(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+u[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",u[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function r(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function s(){function s(){32==oa.event.keyCode&&(A||(x=null,P[0]-=u[1],P[1]-=d[1],A=2),C())}function g(){32==oa.event.keyCode&&2==A&&(P[0]+=u[1],P[1]+=d[1],A=0,C())}function m(){var t=oa.mouse(w),e=!1;b&&(t[0]+=b[0],t[1]+=b[1]),A||(oa.event.altKey?(x||(x=[(u[0]+u[1])/2,(d[0]+d[1])/2]),P[0]=u[+(t[0]<x[0])],P[1]=d[+(t[1]<x[1])]):x=null),T&&v(t,h,0)&&(n(M),e=!0),D&&v(t,c,1)&&(r(M),e=!0),e&&(i(M),k({type:"brush",mode:A?"move":"resize"}))}function v(t,e,i){var n,r,s=Br(e),l=s[0],h=s[1],c=P[i],g=i?d:u,m=g[1]-g[0];return A&&(l-=c,h-=m+c),n=(i?p:f)?Math.max(l,Math.min(h,t[i])):t[i],A?r=(n+=c)+m:(x&&(c=Math.max(l,Math.min(h,2*x[i]-n))),n>c?(r=n,n=c):r=c),g[0]!=n||g[1]!=r?(i?o=null:a=null,g[0]=n,g[1]=r,!0):void 0}function y(){m(),M.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),oa.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),k({type:"brushend"})}var x,b,w=this,_=oa.select(oa.event.target),k=l.of(w,arguments),M=oa.select(w),S=_.datum(),T=!/^(n|s)$/.test(S)&&h,D=!/^(e|w)$/.test(S)&&c,A=_.classed("extent"),E=G(w),P=oa.mouse(w),L=oa.select(e(w)).on("keydown.brush",s).on("keyup.brush",g);if(oa.event.changedTouches?L.on("touchmove.brush",m).on("touchend.brush",y):L.on("mousemove.brush",m).on("mouseup.brush",y),M.interrupt().selectAll("*").interrupt(),A)P[0]=u[0]-P[0],P[1]=d[0]-P[1];else if(S){var F=+/w$/.test(S),I=+/^n/.test(S);b=[u[1-F]-P[0],d[1-I]-P[1]],P[0]=u[F],P[1]=d[I]}else oa.event.altKey&&(x=P.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),oa.select("body").style("cursor",_.style("cursor")),k({type:"brushstart"}),m()}var a,o,l=S(t,"brushstart","brush","brushend"),h=null,c=null,u=[0,0],d=[0,0],f=!0,p=!0,g=Vl[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:u,y:d,i:a,j:o},i=this.__chart__||e;this.__chart__=e,Hl?oa.select(this).transition().each("start.brush",function(){a=i.i,o=i.j,u=i.x,d=i.y,t({type:"brushstart"})}).tween("brush:brush",function(){var i=bn(u,e.x),n=bn(d,e.y);return a=o=null,function(r){u=e.x=i(r),d=e.y=n(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,o=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(h=e,g=Vl[!h<<1|!c],t):h},t.y=function(e){return arguments.length?(c=e,g=Vl[!h<<1|!c],t):c},t.clamp=function(e){return arguments.length?(h&&c?(f=!!e[0],p=!!e[1]):h?f=!!e:c&&(p=!!e),t):h&&c?[f,p]:h?f:c?p:null},t.extent=function(e){var i,n,r,s,l;return arguments.length?(h&&(i=e[0],n=e[1],c&&(i=i[0],n=n[0]),a=[i,n],h.invert&&(i=h(i),n=h(n)),i>n&&(l=i,i=n,n=l),(i!=u[0]||n!=u[1])&&(u=[i,n])),c&&(r=e[0],s=e[1],h&&(r=r[1],s=s[1]),o=[r,s],c.invert&&(r=c(r),s=c(s)),r>s&&(l=r,r=s,s=l),(r!=d[0]||s!=d[1])&&(d=[r,s])),t):(h&&(a?(i=a[0],n=a[1]):(i=u[0],n=u[1],h.invert&&(i=h.invert(i),n=h.invert(n)),i>n&&(l=i,i=n,n=l))),c&&(o?(r=o[0],s=o[1]):(r=d[0],s=d[1],c.invert&&(r=c.invert(r),s=c.invert(s)),r>s&&(l=r,r=s,s=l))),h&&c?[[i,r],[n,s]]:h?[i,n]:c&&[r,s])},t.clear=function(){return t.empty()||(u=[0,0],d=[0,0],a=o=null),t},t.empty=function(){return!!h&&u[0]==u[1]||!!c&&d[0]==d[1]},oa.rebind(t,l,"on")};var Ul={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Xl=fo.format=xo.timeFormat,Gl=Xl.utc,Zl=Gl("%Y-%m-%dT%H:%M:%S.%LZ");Xl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ia:Zl,ia.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ia.toString=Zl.toString,fo.second=jt(function(t){return new po(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),fo.seconds=fo.second.range,fo.seconds.utc=fo.second.utc.range,fo.minute=jt(function(t){return new po(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),fo.minutes=fo.minute.range,fo.minutes.utc=fo.minute.utc.range,fo.hour=jt(function(t){var e=t.getTimezoneOffset()/60;return new po(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),fo.hours=fo.hour.range,fo.hours.utc=fo.hour.utc.range,fo.month=jt(function(t){return t=fo.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),fo.months=fo.month.range,fo.months.utc=fo.month.utc.range;var Ql=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Kl=[[fo.second,1],[fo.second,5],[fo.second,15],[fo.second,30],[fo.minute,1],[fo.minute,5],[fo.minute,15],[fo.minute,30],[fo.hour,1],[fo.hour,3],[fo.hour,6],[fo.hour,12],[fo.day,1],[fo.day,2],[fo.week,1],[fo.month,1],[fo.month,3],[fo.year,1]],Jl=Xl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Ae]]),th={range:function(t,e,i){return oa.range(Math.ceil(t/i)*i,+e,i).map(ra)},floor:y,ceil:y};Kl.year=fo.year,fo.scale=function(){return na(oa.scale.linear(),Kl,Jl)};var eh=Kl.map(function(t){return[t[0].utc,t[1]]}),ih=Gl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Ae]]);eh.year=fo.year.utc,fo.scale.utc=function(){return na(oa.scale.linear(),eh,ih)},oa.text=Tt(function(t){return t.responseText}),oa.json=function(t,e){return Dt(t,"application/json",sa,e)},oa.html=function(t,e){return Dt(t,"text/html",aa,e)},oa.xml=Tt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=oa,define(oa)):"object"==typeof module&&module.exports?module.exports=oa:this.d3=oa}(),!function(t){"use strict";function e(t){this.owner=t}function i(t,e){if(Object.create)e.prototype=Object.create(t.prototype);else{var i=function(){};i.prototype=t.prototype,e.prototype=new i}return e.prototype.constructor=e,e}function n(t){var e=this.internal=new r(this);e.loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function i(t,e,n){Object.keys(t).forEach(function(r){e[r]=t[r].bind(n),Object.keys(t[r]).length>0&&i(t[r],e[r],n)})}(o,this,this)}function r(e){var i=this;i.d3=t.d3?t.d3:"undefined"!=typeof require?require("d3"):void 0,i.api=e,i.config=i.getDefaultConfig(),i.data={},i.cache={},i.axes={}}function s(t){e.call(this,t)}function a(t,e){function i(t,e){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+b)+", 0)"})}function n(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})}function r(t){var e=t[0],i=t[t.length-1];return i>e?[e,i]:[i,e]}function s(t){var e,i,n=[];if(t.ticks)return t.ticks.apply(t,f);for(i=t.domain(),e=Math.ceil(i[0]);e<i[1];e++)n.push(e);return n.length>0&&n[0]>0&&n.unshift(n[0]-(n[1]-n[0])),n}function a(){var t,i=g.copy();return e.isCategory&&(t=g.domain(),i.domain([t[0],t[1]-1])),i}function o(t){var e=d?d(t):t;return"undefined"!=typeof e?e:""}function l(t){if(M)return M;var e={h:11.5,w:5.5};return t.select("text").text(o).each(function(t){var i=this.getBoundingClientRect(),n=o(t),r=i.height,s=n?i.width/n.length:void 0;r&&s&&(e.h=r,e.w=s)}).text(""),M=e,e}function h(i){return e.withoutTransition?i:t.transition(i)}function c(d){d.each(function(){function d(t,i){function n(t,e){s=void 0;for(var o=1;o<e.length;o++)if(" "===e.charAt(o)&&(s=o),r=e.substr(0,o+1),a=U.w*r.length,a>i)return n(t.concat(e.substr(0,s?s:o)),e.slice(s?s+1:o));return t.concat(e)}var r,s,a,l=o(t),h=[];return"[object Array]"===Object.prototype.toString.call(l)?l:((!i||0>=i)&&(i=G?95:e.isCategory?Math.ceil(P(L[1])-P(L[0]))-12:110),n(h,l+""))}function f(t,e){var i=U.h;return 0===e&&(i="left"===m||"right"===m?-((V[t.index]-1)*(U.h/2)-3):".71em"),i}function w(t){var e=g(t)+(p?0:b);return O[0]<e&&e<O[1]?v:0}function _(t){return t?t>0?"start":"end":"middle"}function k(t){return t?"rotate("+t+")":""}function C(t){return t?8*Math.sin(Math.PI*(t/180)):0}function M(t){return t?11.5-2.5*(t/15)*(t>0?1:-1):X}var S,T,D,A=c.g=t.select(this),E=this.__chart__||g,P=this.__chart__=a(),L=x?x:s(P),F=A.selectAll(".tick").data(L,P),I=F.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),z=F.exit().remove(),R=h(F).style("opacity",1),O=g.rangeExtent?g.rangeExtent():r(g.range()),N=A.selectAll(".domain").data([0]),H=(N.enter().append("path").attr("class","domain"),h(N));I.append("line"),I.append("text");var j=I.select("line"),W=R.select("line"),Y=I.select("text"),$=R.select("text");e.isCategory?(b=Math.ceil((P(1)-P(0))/2),T=p?0:b,D=p?b:0):b=T=0;var B,q,U=l(A.select(".tick")),V=[],X=Math.max(v,0)+y,G="left"===m||"right"===m;B=F.select("text"),q=B.selectAll("tspan").data(function(t,i){var n=e.tickMultiline?d(t,e.tickWidth):[].concat(o(t));return V[i]=n.length,n.map(function(t){return{index:i,splitted:t}})}),q.enter().append("tspan"),q.exit().remove(),q.text(function(t){return t.splitted});var Z=e.tickTextRotate;switch(m){case"bottom":S=i,j.attr("y2",v),Y.attr("y",X),W.attr("x1",T).attr("x2",T).attr("y2",w),$.attr("x",0).attr("y",M(Z)).style("text-anchor",_(Z)).attr("transform",k(Z)),q.attr("x",0).attr("dy",f).attr("dx",C(Z)),H.attr("d","M"+O[0]+","+u+"V0H"+O[1]+"V"+u);break;case"top":S=i,j.attr("y2",-v),Y.attr("y",-X),W.attr("x2",0).attr("y2",-v),$.attr("x",0).attr("y",-X),B.style("text-anchor","middle"),q.attr("x",0).attr("dy","0em"),H.attr("d","M"+O[0]+","+-u+"V0H"+O[1]+"V"+-u);break;case"left":S=n,j.attr("x2",-v),Y.attr("x",-X),W.attr("x2",-v).attr("y1",D).attr("y2",D),$.attr("x",-X).attr("y",b),B.style("text-anchor","end"),q.attr("x",-X).attr("dy",f),H.attr("d","M"+-u+","+O[0]+"H0V"+O[1]+"H"+-u);break;case"right":S=n,j.attr("x2",v),Y.attr("x",X),W.attr("x2",v).attr("y2",0),$.attr("x",X).attr("y",0),B.style("text-anchor","start"),q.attr("x",X).attr("dy",f),H.attr("d","M"+u+","+O[0]+"H0V"+O[1]+"H"+u)}if(P.rangeBand){var Q=P,K=Q.rangeBand()/2;E=P=function(t){return Q(t)+K}}else E.rangeBand?E=P:z.call(S,P);I.call(S,E),R.call(S,P)})}var u,d,f,p,g=t.scale.linear(),m="bottom",v=6,y=3,x=null,b=0,w=!0;return e=e||{},u=e.withOuterTick?6:0,c.scale=function(t){return arguments.length?(g=t,c):g},c.orient=function(t){return arguments.length?(m=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",c):m},c.tickFormat=function(t){return arguments.length?(d=t,c):d},c.tickCentered=function(t){return arguments.length?(p=t,c):p},c.tickOffset=function(){return b},c.tickInterval=function(){var t,i;return e.isCategory?t=2*b:(i=c.g.select("path.domain").node().getTotalLength()-2*u,t=i/c.g.selectAll("line").size()),t===1/0?0:t},c.ticks=function(){return arguments.length?(f=arguments,c):f},c.tickCulling=function(t){return arguments.length?(w=t,c):w},c.tickValues=function(t){if("function"==typeof t)x=function(){return t(g.domain())};else{if(!arguments.length)return x;x=t}return c},c}var o,l,h,c={version:"0.4.11-rc4"};c.generate=function(t){return new n(t)},c.chart={fn:n.prototype,internal:{fn:r.prototype,axis:{fn:s.prototype}}},o=c.chart.fn,l=c.chart.internal.fn,h=c.chart.internal.axis.fn,l.beforeInit=function(){},l.afterInit=function(){},l.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},l.initParams=function(){var t=this,e=t.d3,i=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeFormat=i.data_xLocaltime?e.time.format:e.time.format.utc,t.axisTimeFormat=i.axis_x_localtime?e.time.format:e.time.format.utc,t.defaultAxisTimeFormat=t.axisTimeFormat.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%-m/%-d",function(t){return t.getDay()&&1!==t.getDate()}],["%-m/%-d",function(t){return 1!==t.getDate()}],["%-m/%-d",function(t){return t.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=i.axis_rotated?"left":"bottom",t.yOrient=i.axis_rotated?i.axis_y_inner?"top":"bottom":i.axis_y_inner?"right":"left",t.y2Orient=i.axis_rotated?i.axis_y2_inner?"bottom":"top":i.axis_y2_inner?"left":"right",t.subXOrient=i.axis_rotated?"left":"bottom",t.isLegendRight="right"===i.legend_position,t.isLegendInset="inset"===i.legend_position,t.isLegendTop="top-left"===i.legend_inset_anchor||"top-right"===i.legend_inset_anchor,t.isLegendLeft="top-left"===i.legend_inset_anchor||"bottom-left"===i.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=i.axis_rotated&&!i.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},l.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},l.initWithData=function(t){var e,i,n=this,r=n.d3,a=n.config,o=!0;n.axis=new s(n),n.initPie&&n.initPie(),n.initBrush&&n.initBrush(),n.initZoom&&n.initZoom(),a.bindto?"function"==typeof a.bindto.node?n.selectChart=a.bindto:n.selectChart=r.select(a.bindto):n.selectChart=r.selectAll([]),n.selectChart.empty()&&(n.selectChart=r.select(document.createElement("div")).style("opacity",0),n.observeInserted(n.selectChart),o=!1),n.selectChart.html("").classed("c3",!0),n.data.xs={},n.data.targets=n.convertDataToTargets(t),a.data_filter&&(n.data.targets=n.data.targets.filter(a.data_filter)),a.data_hide&&n.addHiddenTargetIds(a.data_hide===!0?n.mapToIds(n.data.targets):a.data_hide),a.legend_hide&&n.addHiddenLegendIds(a.legend_hide===!0?n.mapToIds(n.data.targets):a.legend_hide),n.hasType("gauge")&&(a.legend_show=!1),n.updateSizes(),n.updateScales(),n.x.domain(r.extent(n.getXDomain(n.data.targets))),n.y.domain(n.getYDomain(n.data.targets,"y")),n.y2.domain(n.getYDomain(n.data.targets,"y2")),n.subX.domain(n.x.domain()),n.subY.domain(n.y.domain()),n.subY2.domain(n.y2.domain()),n.orgXDomain=n.x.domain(),n.brush&&n.brush.scale(n.subX),a.zoom_enabled&&n.zoom.scale(n.x),n.svg=n.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return a.onmouseover.call(n)}).on("mouseleave",function(){return a.onmouseout.call(n)}),n.config.svg_classname&&n.svg.attr("class",n.config.svg_classname),e=n.svg.append("defs"),n.clipChart=n.appendClip(e,n.clipId),n.clipXAxis=n.appendClip(e,n.clipIdForXAxis),n.clipYAxis=n.appendClip(e,n.clipIdForYAxis),n.clipGrid=n.appendClip(e,n.clipIdForGrid),n.clipSubchart=n.appendClip(e,n.clipIdForSubchart),n.updateSvgSize(),i=n.main=n.svg.append("g").attr("transform",n.getTranslate("main")),n.initSubchart&&n.initSubchart(),n.initTooltip&&n.initTooltip(),n.initLegend&&n.initLegend(),n.initTitle&&n.initTitle(),i.append("text").attr("class",u.text+" "+u.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),n.initRegion(),n.initGrid(),i.append("g").attr("clip-path",n.clipPath).attr("class",u.chart),a.grid_lines_front&&n.initGridLines(),n.initEventRect(),n.initChartElements(),i.insert("rect",a.zoom_privileged?null:"g."+u.regions).attr("class",u.zoomRect).attr("width",n.width).attr("height",n.height).style("opacity",0).on("dblclick.zoom",null),a.axis_x_extent&&n.brush.extent(n.getDefaultExtent()),n.axis.init(),n.updateTargets(n.data.targets),o&&(n.updateDimension(),n.config.oninit.call(n),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),n.bindResize(),n.api.element=n.selectChart.node()},l.smoothLines=function(t,e){var i=this;"grid"===e&&t.each(function(){var t=i.d3.select(this),e=t.attr("x1"),n=t.attr("x2"),r=t.attr("y1"),s=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(n),y1:Math.ceil(r),y2:Math.ceil(s)})})},l.updateSizes=function(){var t=this,e=t.config,i=t.legend?t.getLegendHeight():0,n=t.legend?t.getLegendWidth():0,r=t.isLegendRight||t.isLegendInset?0:i,s=t.hasArcType(),a=e.axis_rotated||s?0:t.getHorizontalAxisHeight("x"),o=e.subchart_show&&!s?e.subchart_size_height+a:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:s?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+r+t.getCurrentPaddingBottom(),left:o+(s?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:s?0:t.getCurrentPaddingRight(),bottom:a+o+r+t.getCurrentPaddingBottom(),left:s?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+r,left:t.rotated_padding_left}:{top:t.currentHeight-o-r,right:NaN,bottom:a+r,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(i,n),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?n+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),
t.hasType("gauge")&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&s&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},l.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},l.showTargets=function(){var t=this;t.svg.selectAll("."+u.target).filter(function(e){return t.isTargetToShow(e.id)}).transition().duration(t.config.transition_duration).style("opacity",1)},l.redraw=function(t,e){var i,n,r,s,a,o,l,h,c,d,f,p,g,m,v,y,x,b,w,k,C,M,S,T,D,A,E,P,L,F=this,I=F.main,z=F.d3,R=F.config,O=F.getShapeIndices(F.isAreaType),N=F.getShapeIndices(F.isBarType),H=F.getShapeIndices(F.isLineType),j=F.hasArcType(),W=F.filterTargetsToShow(F.data.targets),Y=F.xv.bind(F);if(t=t||{},i=_(t,"withY",!0),n=_(t,"withSubchart",!0),r=_(t,"withTransition",!0),o=_(t,"withTransform",!1),l=_(t,"withUpdateXDomain",!1),h=_(t,"withUpdateOrgXDomain",!1),c=_(t,"withTrimXDomain",!0),g=_(t,"withUpdateXAxis",l),d=_(t,"withLegend",!1),f=_(t,"withEventRect",!0),p=_(t,"withDimension",!0),s=_(t,"withTransitionForExit",r),a=_(t,"withTransitionForAxis",r),w=r?R.transition_duration:0,k=s?w:0,C=a?w:0,e=e||F.axis.generateTransitions(C),d&&R.legend_show?F.updateLegend(F.mapToIds(F.data.targets),t,e):p&&F.updateDimension(!0),F.isCategorized()&&0===W.length&&F.x.domain([0,F.axes.x.selectAll(".tick").size()]),W.length?(F.updateXDomain(W,l,h,c),R.axis_x_tick_values||(T=F.axis.updateXAxisTickValues(W))):(F.xAxis.tickValues([]),F.subXAxis.tickValues([])),R.zoom_rescale&&!t.flow&&(E=F.x.orgDomain()),F.y.domain(F.getYDomain(W,"y",E)),F.y2.domain(F.getYDomain(W,"y2",E)),!R.axis_y_tick_values&&R.axis_y_tick_count&&F.yAxis.tickValues(F.axis.generateTickValues(F.y.domain(),R.axis_y_tick_count)),!R.axis_y2_tick_values&&R.axis_y2_tick_count&&F.y2Axis.tickValues(F.axis.generateTickValues(F.y2.domain(),R.axis_y2_tick_count)),F.axis.redraw(e,j),F.axis.updateLabels(r),(l||g)&&W.length)if(R.axis_x_tick_culling&&T){for(D=1;D<T.length;D++)if(T.length/D<R.axis_x_tick_culling_max){A=D;break}F.svg.selectAll("."+u.axisX+" .tick text").each(function(t){var e=T.indexOf(t);e>=0&&z.select(this).style("display",e%A?"none":"block")})}else F.svg.selectAll("."+u.axisX+" .tick text").style("display","block");m=F.generateDrawArea?F.generateDrawArea(O,!1):void 0,v=F.generateDrawBar?F.generateDrawBar(N):void 0,y=F.generateDrawLine?F.generateDrawLine(H,!1):void 0,x=F.generateXYForText(O,N,H,!0),b=F.generateXYForText(O,N,H,!1),i&&(F.subY.domain(F.getYDomain(W,"y")),F.subY2.domain(F.getYDomain(W,"y2"))),F.updateXgridFocus(),I.select("text."+u.text+"."+u.empty).attr("x",F.width/2).attr("y",F.height/2).text(R.data_empty_label_text).transition().style("opacity",W.length?0:1),F.updateGrid(w),F.updateRegion(w),F.updateBar(k),F.updateLine(k),F.updateArea(k),F.updateCircle(),F.hasDataLabel()&&F.updateText(k),F.redrawTitle&&F.redrawTitle(),F.redrawArc&&F.redrawArc(w,k,o),F.redrawSubchart&&F.redrawSubchart(n,e,w,k,O,N,H),I.selectAll("."+u.selectedCircles).filter(F.isBarType.bind(F)).selectAll("circle").remove(),R.interaction_enabled&&!t.flow&&f&&(F.redrawEventRect(),F.updateZoom&&F.updateZoom()),F.updateCircleY(),P=(F.config.axis_rotated?F.circleY:F.circleX).bind(F),L=(F.config.axis_rotated?F.circleX:F.circleY).bind(F),t.flow&&(S=F.generateFlow({targets:W,flow:t.flow,duration:t.flow.duration,drawBar:v,drawLine:y,drawArea:m,cx:P,cy:L,xv:Y,xForText:x,yForText:b})),(w||S)&&F.isTabVisible()?z.transition().duration(w).each(function(){var e=[];[F.redrawBar(v,!0),F.redrawLine(y,!0),F.redrawArea(m,!0),F.redrawCircle(P,L,!0),F.redrawText(x,b,t.flow,!0),F.redrawRegion(!0),F.redrawGrid(!0)].forEach(function(t){t.forEach(function(t){e.push(t)})}),M=F.generateWait(),e.forEach(function(t){M.add(t)})}).call(M,function(){S&&S(),R.onrendered&&R.onrendered.call(F)}):(F.redrawBar(v),F.redrawLine(y),F.redrawArea(m),F.redrawCircle(P,L),F.redrawText(x,b,t.flow),F.redrawRegion(),F.redrawGrid(),R.onrendered&&R.onrendered.call(F)),F.mapToIds(F.data.targets).forEach(function(t){F.withoutFadeIn[t]=!0})},l.updateAndRedraw=function(t){var e,i=this,n=i.config;t=t||{},t.withTransition=_(t,"withTransition",!0),t.withTransform=_(t,"withTransform",!1),t.withLegend=_(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=_(t,"withTransitionForTransform",t.withTransition),i.updateSizes(),t.withLegend&&n.legend_show||(e=i.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0),i.updateScales(),i.updateSvgSize(),i.transformAll(t.withTransitionForTransform,e)),i.redraw(t,e)},l.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},l.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},l.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},l.isCustomX=function(){var t=this,e=t.config;return!t.isTimeSeries()&&(e.data_x||w(e.data_xs))},l.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},l.getTranslate=function(t){var e,i,n=this,r=n.config;return"main"===t?(e=y(n.margin.left),i=y(n.margin.top)):"context"===t?(e=y(n.margin2.left),i=y(n.margin2.top)):"legend"===t?(e=n.margin3.left,i=n.margin3.top):"x"===t?(e=0,i=r.axis_rotated?0:n.height):"y"===t?(e=0,i=r.axis_rotated?n.height:0):"y2"===t?(e=r.axis_rotated?0:n.width,i=r.axis_rotated?1:0):"subx"===t?(e=0,i=r.axis_rotated?0:n.height2):"arc"===t&&(e=n.arcWidth/2,i=n.arcHeight/2),"translate("+e+","+i+")"},l.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},l.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},l.opacityForCircle=function(t){var e=this.config.point_show?1:0;return d(t.value)?this.isScatterType(t)?.5:e:0},l.opacityForText=function(){return this.hasDataLabel()?1:0},l.xx=function(t){return t?this.x(t.x):null},l.xv=function(t){var e=this,i=t.value;return e.isTimeSeries()?i=e.parseDate(t.value):e.isCategorized()&&"string"==typeof t.value&&(i=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(i))},l.yv=function(t){var e=this,i=t.axis&&"y2"===t.axis?e.y2:e.y;return Math.ceil(i(t.value))},l.subxx=function(t){return t?this.subX(t.x):null},l.transformMain=function(t,e){var i,n,r,s=this;e&&e.axisX?i=e.axisX:(i=s.main.select("."+u.axisX),t&&(i=i.transition())),e&&e.axisY?n=e.axisY:(n=s.main.select("."+u.axisY),t&&(n=n.transition())),e&&e.axisY2?r=e.axisY2:(r=s.main.select("."+u.axisY2),t&&(r=r.transition())),(t?s.main.transition():s.main).attr("transform",s.getTranslate("main")),i.attr("transform",s.getTranslate("x")),n.attr("transform",s.getTranslate("y")),r.attr("transform",s.getTranslate("y2")),s.main.select("."+u.chartArcs).attr("transform",s.getTranslate("arc"))},l.transformAll=function(t,e){var i=this;i.transformMain(t,e),i.config.subchart_show&&i.transformContext(t,e),i.legend&&i.transformLegend(t)},l.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .background");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.svg.select("."+u.zoomRect).attr("width",t.width).attr("height",t.height),t.selectChart.style("max-height",t.currentHeight+"px")},l.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},l.observeInserted=function(e){var i,n=this;return"undefined"==typeof MutationObserver?void t.console.error("MutationObserver not defined."):(i=new MutationObserver(function(r){r.forEach(function(r){"childList"===r.type&&r.previousSibling&&(i.disconnect(),n.intervalForObserveInserted=t.setInterval(function(){e.node().parentNode&&(t.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})}),void i.observe(e.node(),{attributes:!0,childList:!0,characterData:!0}))},l.bindResize=function(){var e=this,i=e.config;if(e.resizeFunction=e.generateResize(),e.resizeFunction.add(function(){i.onresize.call(e)}),i.resize_auto&&e.resizeFunction.add(function(){void 0!==e.resizeTimeout&&t.clearTimeout(e.resizeTimeout),e.resizeTimeout=t.setTimeout(function(){delete e.resizeTimeout,e.api.flush()},100)}),e.resizeFunction.add(function(){i.onresized.call(e)}),t.attachEvent)t.attachEvent("onresize",e.resizeFunction);else if(t.addEventListener)t.addEventListener("resize",e.resizeFunction,!1);else{var n=t.onresize;n?n.add&&n.remove||(n=e.generateResize(),n.add(t.onresize)):n=e.generateResize(),n.add(e.resizeFunction),t.onresize=n}},l.generateResize=function(){function t(){e.forEach(function(t){t()})}var e=[];return t.add=function(t){e.push(t)},t.remove=function(t){for(var i=0;i<e.length;i++)if(e[i]===t){e.splice(i,1);break}},t},l.endall=function(t,e){var i=0;t.each(function(){++i}).each("end",function(){--i||e.apply(this,arguments)})},l.generateWait=function(){var t=[],e=function(e,i){var n=setInterval(function(){var e=0;t.forEach(function(t){if(t.empty())return void(e+=1);try{t.transition()}catch(i){e+=1}}),e===t.length&&(clearInterval(n),i&&i())},10)};return e.add=function(e){t.push(e)},e},l.parseDate=function(e){var i,n=this;return e instanceof Date?i=e:"string"==typeof e?i=n.dataTimeFormat(n.config.data_xFormat).parse(e):"number"!=typeof e||isNaN(e)||(i=new Date(+e)),(!i||isNaN(+i))&&t.console.error("Failed to parse x '"+e+"' to Date object"),i},l.isTabVisible=function(){var t;return"undefined"!=typeof document.hidden?t="hidden":"undefined"!=typeof document.mozHidden?t="mozHidden":"undefined"!=typeof document.msHidden?t="msHidden":"undefined"!=typeof document.webkitHidden&&(t="webkitHidden"),!document[t]},l.getDefaultConfig=function(){var t={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:{},pie_expand_duration:50,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,i,n){return this.getTooltipContent?this.getTooltipContent(t,e,i,n):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(e){t[e]=this.additionalConfig[e]},this),t},l.additionalConfig={},l.loadConfig=function(t){function e(){var t=n.shift();return t&&i&&"object"==typeof i&&t in i?(i=i[t],e()):t?void 0:i}var i,n,r,s=this.config;Object.keys(s).forEach(function(a){i=t,n=a.split("_"),r=e(),m(r)&&(s[a]=r)})},l.getScale=function(t,e,i){return(i?this.d3.time.scale():this.d3.scale.linear()).range([t,e])},l.getX=function(t,e,i,n){var r,s=this,a=s.getScale(t,e,s.isTimeSeries()),o=i?a.domain(i):a;s.isCategorized()?(n=n||function(){return 0},a=function(t,e){var i=o(t)+n(t);return e?i:Math.ceil(i)}):a=function(t,e){var i=o(t);return e?i:Math.ceil(i)};for(r in o)a[r]=o[r];return a.orgDomain=function(){return o.domain()},s.isCategorized()&&(a.domain=function(t){return arguments.length?(o.domain(t),a):(t=this.orgDomain(),[t[0],t[1]+1])}),a},l.getY=function(t,e,i){var n=this.getScale(t,e,this.isTimeSeriesY());return i&&n.domain(i),n},l.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},l.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},l.updateScales=function(){var t=this,e=t.config,i=!t.x;t.xMin=e.axis_rotated?1:0,t.xMax=e.axis_rotated?t.height:t.width,t.yMin=e.axis_rotated?0:t.height,t.yMax=e.axis_rotated?t.width:1,t.subXMin=t.xMin,t.subXMax=t.xMax,t.subYMin=e.axis_rotated?0:t.height2,t.subYMax=e.axis_rotated?t.width2:1,t.x=t.getX(t.xMin,t.xMax,i?void 0:t.x.orgDomain(),function(){return t.xAxis.tickOffset()}),t.y=t.getY(t.yMin,t.yMax,i?e.axis_y_default:t.y.domain()),t.y2=t.getY(t.yMin,t.yMax,i?e.axis_y2_default:t.y2.domain()),t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,function(e){return e%1?0:t.subXAxis.tickOffset()}),t.subY=t.getY(t.subYMin,t.subYMax,i?e.axis_y_default:t.subY.domain()),t.subY2=t.getY(t.subYMin,t.subYMax,i?e.axis_y2_default:t.subY2.domain()),t.xAxisTickFormat=t.axis.getXAxisTickFormat(),t.xAxisTickValues=t.axis.getXAxisTickValues(),t.yAxisTickValues=t.axis.getYAxisTickValues(),t.y2AxisTickValues=t.axis.getY2AxisTickValues(),t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.yAxis=t.axis.getYAxis(t.y,t.yOrient,e.axis_y_tick_format,t.yAxisTickValues,e.axis_y_tick_outer),t.y2Axis=t.axis.getYAxis(t.y2,t.y2Orient,e.axis_y2_tick_format,t.y2AxisTickValues,e.axis_y2_tick_outer),i||(t.brush&&t.brush.scale(t.subX),e.zoom_enabled&&t.zoom.scale(t.x)),t.updateArc&&t.updateArc()},l.getYDomainMin=function(t){var e,i,n,r,s,a,o=this,l=o.config,h=o.mapToIds(t),c=o.getValuesAsIdKeyed(t);if(l.data_groups.length>0)for(a=o.hasNegativeValueInTargets(t),e=0;e<l.data_groups.length;e++)if(r=l.data_groups[e].filter(function(t){return h.indexOf(t)>=0}),0!==r.length)for(n=r[0],a&&c[n]&&c[n].forEach(function(t,e){c[n][e]=0>t?t:0}),i=1;i<r.length;i++)s=r[i],c[s]&&c[s].forEach(function(t,e){o.axis.getId(s)!==o.axis.getId(n)||!c[n]||a&&+t>0||(c[n][e]+=+t)});return o.d3.min(Object.keys(c).map(function(t){return o.d3.min(c[t])}))},l.getYDomainMax=function(t){var e,i,n,r,s,a,o=this,l=o.config,h=o.mapToIds(t),c=o.getValuesAsIdKeyed(t);if(l.data_groups.length>0)for(a=o.hasPositiveValueInTargets(t),e=0;e<l.data_groups.length;e++)if(r=l.data_groups[e].filter(function(t){return h.indexOf(t)>=0}),0!==r.length)for(n=r[0],a&&c[n]&&c[n].forEach(function(t,e){c[n][e]=t>0?t:0}),i=1;i<r.length;i++)s=r[i],c[s]&&c[s].forEach(function(t,e){o.axis.getId(s)!==o.axis.getId(n)||!c[n]||a&&0>+t||(c[n][e]+=+t)});return o.d3.max(Object.keys(c).map(function(t){return o.d3.max(c[t])}))},l.getYDomain=function(t,e,i){var n,r,s,a,o,l,h,c,u,f,p,g=this,m=g.config,v=t.filter(function(t){return g.axis.getId(t.id)===e}),y=i?g.filterByXDomain(v,i):v,b="y2"===e?m.axis_y2_min:m.axis_y_min,_="y2"===e?m.axis_y2_max:m.axis_y_max,k=g.getYDomainMin(y),C=g.getYDomainMax(y),M="y2"===e?m.axis_y2_center:m.axis_y_center,S=g.hasType("bar",y)&&m.bar_zerobased||g.hasType("area",y)&&m.area_zerobased,T="y2"===e?m.axis_y2_inverted:m.axis_y_inverted,D=g.hasDataLabel()&&m.axis_rotated,A=g.hasDataLabel()&&!m.axis_rotated;return k=d(b)?b:d(_)?_>k?k:_-10:k,C=d(_)?_:d(b)?C>b?C:b+10:C,0===y.length?"y2"===e?g.y2.domain():g.y.domain():(isNaN(k)&&(k=0),isNaN(C)&&(C=k),k===C&&(0>k?C=0:k=0),f=k>=0&&C>=0,p=0>=k&&0>=C,(d(b)&&f||d(_)&&p)&&(S=!1),S&&(f&&(k=0),p&&(C=0)),r=Math.abs(C-k),s=a=o=.1*r,"undefined"!=typeof M&&(l=Math.max(Math.abs(k),Math.abs(C)),C=M+l,k=M-l),D?(h=g.getDataLabelLength(k,C,"width"),c=x(g.y.range()),u=[h[0]/c,h[1]/c],a+=r*(u[1]/(1-u[0]-u[1])),o+=r*(u[0]/(1-u[0]-u[1]))):A&&(h=g.getDataLabelLength(k,C,"height"),a+=g.axis.convertPixelsToAxisPadding(h[1],r),o+=g.axis.convertPixelsToAxisPadding(h[0],r)),"y"===e&&w(m.axis_y_padding)&&(a=g.axis.getPadding(m.axis_y_padding,"top",a,r),o=g.axis.getPadding(m.axis_y_padding,"bottom",o,r)),"y2"===e&&w(m.axis_y2_padding)&&(a=g.axis.getPadding(m.axis_y2_padding,"top",a,r),o=g.axis.getPadding(m.axis_y2_padding,"bottom",o,r)),S&&(f&&(o=k),p&&(a=-C)),n=[k-o,C+a],T?n.reverse():n)},l.getXDomainMin=function(t){var e=this,i=e.config;return m(i.axis_x_min)?e.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},l.getXDomainMax=function(t){var e=this,i=e.config;return m(i.axis_x_max)?e.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},l.getXDomainPadding=function(t){var e,i,n,r,s=this,a=s.config,o=t[1]-t[0];return s.isCategorized()?i=0:s.hasType("bar")?(e=s.getMaxDataCount(),i=e>1?o/(e-1)/2:.5):i=.01*o,"object"==typeof a.axis_x_padding&&w(a.axis_x_padding)?(n=d(a.axis_x_padding.left)?a.axis_x_padding.left:i,r=d(a.axis_x_padding.right)?a.axis_x_padding.right:i):n=r="number"==typeof a.axis_x_padding?a.axis_x_padding:i,{left:n,right:r}},l.getXDomain=function(t){var e=this,i=[e.getXDomainMin(t),e.getXDomainMax(t)],n=i[0],r=i[1],s=e.getXDomainPadding(i),a=0,o=0;return n-r!==0||e.isCategorized()||(e.isTimeSeries()?(n=new Date(.5*n.getTime()),r=new Date(1.5*r.getTime())):(n=0===n?1:.5*n,r=0===r?-1:1.5*r)),(n||0===n)&&(a=e.isTimeSeries()?new Date(n.getTime()-s.left):n-s.left),(r||0===r)&&(o=e.isTimeSeries()?new Date(r.getTime()+s.right):r+s.right),[a,o]},l.updateXDomain=function(t,e,i,n,r){var s=this,a=s.config;return i&&(s.x.domain(r?r:s.d3.extent(s.getXDomain(t))),s.orgXDomain=s.x.domain(),a.zoom_enabled&&s.zoom.scale(s.x).updateScaleExtent(),s.subX.domain(s.x.domain()),s.brush&&s.brush.scale(s.subX)),e&&(s.x.domain(r?r:!s.brush||s.brush.empty()?s.orgXDomain:s.brush.extent()),a.zoom_enabled&&s.zoom.scale(s.x).updateScaleExtent()),n&&s.x.domain(s.trimXDomain(s.x.orgDomain())),s.x.domain()},l.trimXDomain=function(t){var e=this.getZoomDomain(),i=e[0],n=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),n<=t[1]&&(t[0]=+t[0]-(t[1]-n),t[1]=n),t},l.isX=function(t){var e=this,i=e.config;return i.data_x&&t===i.data_x||w(i.data_xs)&&k(i.data_xs,t)},l.isNotX=function(t){return!this.isX(t)},l.getXKey=function(t){var e=this,i=e.config;return i.data_x?i.data_x:w(i.data_xs)?i.data_xs[t]:null},l.getXValuesOfXKey=function(t,e){var i,n=this,r=e&&w(e)?n.mapToIds(e):[];return r.forEach(function(e){n.getXKey(e)===t&&(i=n.data.xs[e])}),i},l.getIndexByX=function(t){var e=this,i=e.filterByX(e.data.targets,t);return i.length?i[0].index:null},l.getXValue=function(t,e){var i=this;return t in i.data.xs&&i.data.xs[t]&&d(i.data.xs[t][e])?i.data.xs[t][e]:e},l.getOtherTargetXs=function(){var t=this,e=Object.keys(t.data.xs);return e.length?t.data.xs[e[0]]:null},l.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},l.addXs=function(t){var e=this;Object.keys(t).forEach(function(i){e.config.data_xs[i]=t[i]})},l.hasMultipleX=function(t){return this.d3.set(Object.keys(t).map(function(e){return t[e]})).size()>1},l.isMultipleX=function(){return w(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},l.addName=function(t){var e,i=this;return t&&(e=i.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},l.getValueOnIndex=function(t,e){var i=t.filter(function(t){return t.index===e});return i.length?i[0]:null},l.updateTargetX=function(t,e){var i=this;t.forEach(function(t){t.values.forEach(function(n,r){n.x=i.generateTargetX(e[r],t.id,r)}),i.data.xs[t.id]=e})},l.updateTargetXs=function(t,e){var i=this;t.forEach(function(t){e[t.id]&&i.updateTargetX([t],e[t.id])})},l.generateTargetX=function(t,e,i){var n,r=this;return n=r.isTimeSeries()?t?r.parseDate(t):r.parseDate(r.getXValue(e,i)):r.isCustomX()&&!r.isCategorized()?d(t)?+t:r.getXValue(e,i):i},l.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},l.updateXs=function(){var t=this;t.data.targets.length&&(t.xs=[],t.data.targets[0].values.forEach(function(e){t.xs[e.index]=e.x}))},l.getPrevX=function(t){var e=this.xs[t-1];return"undefined"!=typeof e?e:null},l.getNextX=function(t){var e=this.xs[t+1];return"undefined"!=typeof e?e:null},l.getMaxDataCount=function(){var t=this;return t.d3.max(t.data.targets,function(t){return t.values.length})},l.getMaxDataCountTarget=function(t){var e,i=t.length,n=0;return i>1?t.forEach(function(t){t.values.length>n&&(e=t,n=t.values.length)}):e=i?t[0]:null,e},l.getEdgeX=function(t){var e=this;return t.length?[e.d3.min(t,function(t){return t.values[0].x}),e.d3.max(t,function(t){return t.values[t.values.length-1].x})]:[0,0]},l.mapToIds=function(t){return t.map(function(t){return t.id})},l.mapToTargetIds=function(t){var e=this;return t?[].concat(t):e.mapToIds(e.data.targets)},l.hasTarget=function(t,e){var i,n=this.mapToIds(t);for(i=0;i<n.length;i++)if(n[i]===e)return!0;return!1},l.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},l.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},l.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},l.mapTargetsToUniqueXs=function(t){var e=this,i=e.d3.set(e.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return i=e.isTimeSeries()?i.map(function(t){return new Date(+t)}):i.map(function(t){return+t}),i.sort(function(t,e){return e>t?-1:t>e?1:t>=e?0:NaN})},l.addHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},l.removeHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})},l.addHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},l.removeHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},l.getValuesAsIdKeyed=function(t){var e={};return t.forEach(function(t){e[t.id]=[],t.values.forEach(function(i){e[t.id].push(i.value)})}),e},l.checkValueInTargets=function(t,e){var i,n,r,s=Object.keys(t);for(i=0;i<s.length;i++)for(r=t[s[i]].values,n=0;n<r.length;n++)if(e(r[n].value))return!0;return!1},l.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return 0>t})},l.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t>0})},l.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},l.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},l.orderTargets=function(t){var e=this,i=e.config,n=e.isOrderAsc(),r=e.isOrderDesc();return n||r?t.sort(function(t,e){var i=function(t,e){return t+Math.abs(e.value)},r=t.values.reduce(i,0),s=e.values.reduce(i,0);return n?s-r:r-s}):f(i.data_order)&&t.sort(i.data_order),t},l.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e===0})},l.filterRemoveNull=function(t){return t.filter(function(t){return d(t.value)})},l.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},l.hasDataLabel=function(){var t=this.config;return"boolean"==typeof t.data_labels&&t.data_labels?!0:!("object"!=typeof t.data_labels||!w(t.data_labels))},l.getDataLabelLength=function(t,e,i){var n=this,r=[0,0],s=1.3;return n.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return n.dataLabelFormat(t.id)(t)}).each(function(t,e){r[e]=this.getBoundingClientRect()[i]*s}).remove(),r},l.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},l.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},l.findSameXOfValues=function(t,e){var i,n=t[e].x,r=[];for(i=e-1;i>=0&&n===t[i].x;i--)r.push(t[i]);for(i=e;i<t.length&&n===t[i].x;i++)r.push(t[i]);return r},l.findClosestFromTargets=function(t,e){var i,n=this;return i=t.map(function(t){return n.findClosest(t.values,e)}),n.findClosest(i,e)},l.findClosest=function(t,e){var i,n=this,r=n.config.point_sensitivity;return t.filter(function(t){return t&&n.isBarType(t.id)}).forEach(function(t){var e=n.main.select("."+u.bars+n.getTargetSelectorSuffix(t.id)+" ."+u.bar+"-"+t.index).node();!i&&n.isWithinBar(e)&&(i=t)}),t.filter(function(t){return t&&!n.isBarType(t.id)}).forEach(function(t){var s=n.dist(t,e);r>s&&(r=s,i=t)}),i},l.dist=function(t,e){var i=this,n=i.config,r=n.axis_rotated?1:0,s=n.axis_rotated?0:1,a=i.circleY(t,t.index),o=i.x(t.x);return Math.sqrt(Math.pow(o-e[r],2)+Math.pow(a-e[s],2))},l.convertValuesToStep=function(t){var e,i=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;e>0;e--)i[e]=i[e-1];return i[0]={x:i[0].x-1,value:i[0].value,id:i[0].id},i[t.length+1]={x:i[t.length].x+1,value:i[t.length].value,id:i[t.length].id},i},l.updateDataAttributes=function(t,e){var i=this,n=i.config,r=n["data_"+t];return"undefined"==typeof e?r:(Object.keys(e).forEach(function(t){r[t]=e[t]}),i.redraw({withLegend:!0}),r)},l.convertUrlToData=function(t,e,i,n){var r=this,s=e?e:"csv";r.d3.xhr(t,function(t,e){var a;if(!e)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");a="json"===s?r.convertJsonToData(JSON.parse(e.response),i):"tsv"===s?r.convertTsvToData(e.response):r.convertCsvToData(e.response),n.call(r,a)})},l.convertXsvToData=function(t,e){var i,n=e.parseRows(t);return 1===n.length?(i=[{}],n[0].forEach(function(t){i[0][t]=null})):i=e.parse(t),i},l.convertCsvToData=function(t){return this.convertXsvToData(t,this.d3.csv)},l.convertTsvToData=function(t){return this.convertXsvToData(t,this.d3.tsv)},l.convertJsonToData=function(t,e){var i,n,r=this,s=[];return e?(e.x?(i=e.value.concat(e.x),r.config.data_x=e.x):i=e.value,s.push(i),t.forEach(function(t){var e=[];i.forEach(function(i){var n=g(t[i])?null:t[i];e.push(n)}),s.push(e)}),n=r.convertRowsToData(s)):(Object.keys(t).forEach(function(e){s.push([e].concat(t[e]))}),n=r.convertColumnsToData(s)),n},l.convertRowsToData=function(t){var e,i,n=t[0],r={},s=[];for(e=1;e<t.length;e++){for(r={},i=0;i<t[e].length;i++){if(g(t[e][i]))throw new Error("Source data is missing a component at ("+e+","+i+")!");r[n[i]]=t[e][i]}s.push(r)}return s},l.convertColumnsToData=function(t){var e,i,n,r=[];for(e=0;e<t.length;e++)for(n=t[e][0],i=1;i<t[e].length;i++){if(g(r[i-1])&&(r[i-1]={}),g(t[e][i]))throw new Error("Source data is missing a component at ("+e+","+i+")!");r[i-1][n]=t[e][i]}return r},l.convertDataToTargets=function(t,e){var i,n=this,r=n.config,s=n.d3.keys(t[0]).filter(n.isNotX,n),a=n.d3.keys(t[0]).filter(n.isX,n);return s.forEach(function(i){var s=n.getXKey(i);n.isCustomX()||n.isTimeSeries()?a.indexOf(s)>=0?n.data.xs[i]=(e&&n.data.xs[i]?n.data.xs[i]:[]).concat(t.map(function(t){return t[s]}).filter(d).map(function(t,e){return n.generateTargetX(t,i,e)})):r.data_x?n.data.xs[i]=n.getOtherTargetXs():w(r.data_xs)&&(n.data.xs[i]=n.getXValuesOfXKey(s,n.data.targets)):n.data.xs[i]=t.map(function(t,e){return e})}),s.forEach(function(t){if(!n.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),i=s.map(function(e,i){var s=r.data_idConverter(e);return{id:s,id_org:e,values:t.map(function(t,a){var o=n.getXKey(e),l=t[o],h=n.generateTargetX(l,e,a),c=null===t[e]||isNaN(t[e])?null:+t[e];return n.isCustomX()&&n.isCategorized()&&0===i&&l&&(0===a&&(r.axis_x_categories=[]),r.axis_x_categories.push(l)),(g(t[e])||n.data.xs[e].length<=a)&&(h=void 0),{x:h,value:c,id:s}}).filter(function(t){return m(t.x)})}}),i.forEach(function(t){var e;r.data_xSort&&(t.values=t.values.sort(function(t,e){var i=t.x||0===t.x?t.x:1/0,n=e.x||0===e.x?e.x:1/0;return i-n})),e=0,t.values.forEach(function(t){t.index=e++}),n.data.xs[t.id].sort(function(t,e){return t-e})}),n.hasNegativeValue=n.hasNegativeValueInTargets(i),n.hasPositiveValue=n.hasPositiveValueInTargets(i),r.data_type&&n.setTargetType(n.mapToIds(i).filter(function(t){return!(t in r.data_types)}),r.data_type),i.forEach(function(t){n.addCache(t.id_org,t)}),i},l.load=function(t,e){var i=this;t&&(e.filter&&(t=t.filter(e.filter)),(e.type||e.types)&&t.forEach(function(t){var n=e.types&&e.types[t.id]?e.types[t.id]:e.type;i.setTargetType(t.id,n)}),i.data.targets.forEach(function(e){for(var i=0;i<t.length;i++)if(e.id===t[i].id){e.values=t[i].values,t.splice(i,1);break}}),i.data.targets=i.data.targets.concat(t)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},l.loadFromArgs=function(t){var e=this;t.data?e.load(e.convertDataToTargets(t.data),t):t.url?e.convertUrlToData(t.url,t.mimeType,t.keys,function(i){e.load(e.convertDataToTargets(i),t)}):t.json?e.load(e.convertDataToTargets(e.convertJsonToData(t.json,t.keys)),t):t.rows?e.load(e.convertDataToTargets(e.convertRowsToData(t.rows)),t):t.columns?e.load(e.convertDataToTargets(e.convertColumnsToData(t.columns)),t):e.load(null,t)},l.unload=function(t,e){var i=this;return e||(e=function(){}),
t=t.filter(function(t){return i.hasTarget(i.data.targets,t)}),t&&0!==t.length?(i.svg.selectAll(t.map(function(t){return i.selectorTarget(t)})).transition().style("opacity",0).remove().call(i.endall,e),void t.forEach(function(t){i.withoutFadeIn[t]=!1,i.legend&&i.legend.selectAll("."+u.legendItem+i.getTargetSelectorSuffix(t)).remove(),i.data.targets=i.data.targets.filter(function(e){return e.id!==t})})):void e()},l.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},l.initEventRect=function(){var t=this;t.main.select("."+u.chart).append("g").attr("class",u.eventRects).style("fill-opacity",0)},l.redrawEventRect=function(){var t,e,i=this,n=i.config,r=i.isMultipleX(),s=i.main.select("."+u.eventRects).style("cursor",n.zoom_enabled?n.axis_rotated?"ns-resize":"ew-resize":null).classed(u.eventRectsMultiple,r).classed(u.eventRectsSingle,!r);s.selectAll("."+u.eventRect).remove(),i.eventRect=s.selectAll("."+u.eventRect),r?(t=i.eventRect.data([0]),i.generateEventRectsForMultipleXs(t.enter()),i.updateEventRect(t)):(e=i.getMaxDataCountTarget(i.data.targets),s.datum(e?e.values:[]),i.eventRect=s.selectAll("."+u.eventRect),t=i.eventRect.data(function(t){return t}),i.generateEventRectsForSingleX(t.enter()),i.updateEventRect(t),t.exit().remove())},l.updateEventRect=function(t){var e,i,n,r,s,a,o=this,l=o.config;t=t||o.eventRect.data(function(t){return t}),o.isMultipleX()?(e=0,i=0,n=o.width,r=o.height):(!o.isCustomX()&&!o.isTimeSeries()||o.isCategorized()?(s=o.getEventRectWidth(),a=function(t){return o.x(t.x)-s/2}):(o.updateXs(),s=function(t){var e=o.getPrevX(t.index),i=o.getNextX(t.index);return null===e&&null===i?l.axis_rotated?o.height:o.width:(null===e&&(e=o.x.domain()[0]),null===i&&(i=o.x.domain()[1]),Math.max(0,(o.x(i)-o.x(e))/2))},a=function(t){var e=o.getPrevX(t.index),i=o.getNextX(t.index),n=o.data.xs[t.id][t.index];return null===e&&null===i?0:(null===e&&(e=o.x.domain()[0]),(o.x(n)+o.x(e))/2)}),e=l.axis_rotated?0:a,i=l.axis_rotated?a:0,n=l.axis_rotated?o.width:s,r=l.axis_rotated?s:o.height),t.attr("class",o.classEvent.bind(o)).attr("x",e).attr("y",i).attr("width",n).attr("height",r)},l.generateEventRectsForSingleX=function(t){var e=this,i=e.d3,n=e.config;t.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",n.data_selection_enabled&&n.data_selection_grouped?"pointer":null).on("mouseover",function(t){var i=t.index;e.dragging||e.flowing||e.hasArcType()||(n.point_focus_expand_enabled&&e.expandCircles(i,null,!0),e.expandBars(i,null,!0),e.main.selectAll("."+u.shape+"-"+i).each(function(t){n.data_onmouseover.call(e.api,t)}))}).on("mouseout",function(t){var i=t.index;e.config&&(e.hasArcType()||(e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars(),e.main.selectAll("."+u.shape+"-"+i).each(function(t){n.data_onmouseout.call(e.api,t)})))}).on("mousemove",function(t){var r,s=t.index,a=e.svg.select("."+u.eventRect+"-"+s);e.dragging||e.flowing||e.hasArcType()||(e.isStepType(t)&&"step-after"===e.config.line_step_type&&i.mouse(this)[0]<e.x(e.getXValue(t.id,s))&&(s-=1),r=e.filterTargetsToShow(e.data.targets).map(function(t){return e.addName(e.getValueOnIndex(t.values,s))}),n.tooltip_grouped&&(e.showTooltip(r,this),e.showXGridFocus(r)),(!n.tooltip_grouped||n.data_selection_enabled&&!n.data_selection_grouped)&&e.main.selectAll("."+u.shape+"-"+s).each(function(){i.select(this).classed(u.EXPANDED,!0),n.data_selection_enabled&&a.style("cursor",n.data_selection_grouped?"pointer":null),n.tooltip_grouped||(e.hideXGridFocus(),e.hideTooltip(),n.data_selection_grouped||(e.unexpandCircles(s),e.unexpandBars(s)))}).filter(function(t){return e.isWithinShape(this,t)}).each(function(t){n.data_selection_enabled&&(n.data_selection_grouped||n.data_selection_isselectable(t))&&a.style("cursor","pointer"),n.tooltip_grouped||(e.showTooltip([t],this),e.showXGridFocus([t]),n.point_focus_expand_enabled&&e.expandCircles(s,t.id,!0),e.expandBars(s,t.id,!0))}))}).on("click",function(t){var r=t.index;if(!e.hasArcType()&&e.toggleShape){if(e.cancelClick)return void(e.cancelClick=!1);e.isStepType(t)&&"step-after"===n.line_step_type&&i.mouse(this)[0]<e.x(e.getXValue(t.id,r))&&(r-=1),e.main.selectAll("."+u.shape+"-"+r).each(function(t){(n.data_selection_grouped||e.isWithinShape(this,t))&&(e.toggleShape(this,t,r),e.config.data_onclick.call(e.api,t,this))})}}).call(n.data_selection_draggable&&e.drag?i.behavior.drag().origin(Object).on("drag",function(){e.drag(i.mouse(this))}).on("dragstart",function(){e.dragstart(i.mouse(this))}).on("dragend",function(){e.dragend()}):function(){})},l.generateEventRectsForMultipleXs=function(t){function e(){i.svg.select("."+u.eventRect).style("cursor",null),i.hideXGridFocus(),i.hideTooltip(),i.unexpandCircles(),i.unexpandBars()}var i=this,n=i.d3,r=i.config;t.append("rect").attr("x",0).attr("y",0).attr("width",i.width).attr("height",i.height).attr("class",u.eventRect).on("mouseout",function(){i.config&&(i.hasArcType()||e())}).on("mousemove",function(){var t,s,a,o,l=i.filterTargetsToShow(i.data.targets);if(!i.dragging&&!i.hasArcType(l)){if(t=n.mouse(this),s=i.findClosestFromTargets(l,t),!i.mouseover||s&&s.id===i.mouseover.id||(r.data_onmouseout.call(i.api,i.mouseover),i.mouseover=void 0),!s)return void e();a=i.isScatterType(s)||!r.tooltip_grouped?[s]:i.filterByX(l,s.x),o=a.map(function(t){return i.addName(t)}),i.showTooltip(o,this),r.point_focus_expand_enabled&&i.expandCircles(s.index,s.id,!0),i.expandBars(s.index,s.id,!0),i.showXGridFocus(o),(i.isBarType(s.id)||i.dist(s,t)<r.point_sensitivity)&&(i.svg.select("."+u.eventRect).style("cursor","pointer"),i.mouseover||(r.data_onmouseover.call(i.api,s),i.mouseover=s))}}).on("click",function(){var t,e,s=i.filterTargetsToShow(i.data.targets);i.hasArcType(s)||(t=n.mouse(this),e=i.findClosestFromTargets(s,t),e&&(i.isBarType(e.id)||i.dist(e,t)<r.point_sensitivity)&&i.main.selectAll("."+u.shapes+i.getTargetSelectorSuffix(e.id)).selectAll("."+u.shape+"-"+e.index).each(function(){(r.data_selection_grouped||i.isWithinShape(this,e))&&(i.toggleShape(this,e,e.index),i.config.data_onclick.call(i.api,e,this))}))}).call(r.data_selection_draggable&&i.drag?n.behavior.drag().origin(Object).on("drag",function(){i.drag(n.mouse(this))}).on("dragstart",function(){i.dragstart(n.mouse(this))}).on("dragend",function(){i.dragend()}):function(){})},l.dispatchEvent=function(e,i,n){var r=this,s="."+u.eventRect+(r.isMultipleX()?"":"-"+i),a=r.main.select(s).node(),o=a.getBoundingClientRect(),l=o.left+(n?n[0]:0),h=o.top+(n?n[1]:0),c=document.createEvent("MouseEvents");c.initMouseEvent(e,!0,!0,t,0,l,h,l,h,!1,!1,!1,!1,0,null),a.dispatchEvent(c)},l.getCurrentWidth=function(){var t=this,e=t.config;return e.size_width?e.size_width:t.getParentWidth()},l.getCurrentHeight=function(){var t=this,e=t.config,i=e.size_height?e.size_height:t.getParentHeight();return i>0?i:320/(t.hasType("gauge")?2:1)},l.getCurrentPaddingTop=function(){var t=this,e=t.config,i=d(e.padding_top)?e.padding_top:0;return t.title&&t.title.node()&&(i+=t.getTitlePadding()),i},l.getCurrentPaddingBottom=function(){var t=this.config;return d(t.padding_bottom)?t.padding_bottom:0},l.getCurrentPaddingLeft=function(t){var e=this,i=e.config;return d(i.padding_left)?i.padding_left:i.axis_rotated?i.axis_x_show?Math.max(v(e.getAxisWidthByAxisId("x",t)),40):1:!i.axis_y_show||i.axis_y_inner?e.axis.getYAxisLabelPosition().isOuter?30:1:v(e.getAxisWidthByAxisId("y",t))},l.getCurrentPaddingRight=function(){var t=this,e=t.config,i=10,n=t.isLegendRight?t.getLegendWidth()+20:0;return d(e.padding_right)?e.padding_right+1:e.axis_rotated?i+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):v(t.getAxisWidthByAxisId("y2"))+n},l.getParentRectValue=function(t){for(var e,i=this.selectChart.node();i&&"BODY"!==i.tagName;){try{e=i.getBoundingClientRect()[t]}catch(n){"width"===t&&(e=i.offsetWidth)}if(e)break;i=i.parentNode}return e},l.getParentWidth=function(){return this.getParentRectValue("width")},l.getParentHeight=function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?+t.replace("px",""):0},l.getSvgLeft=function(t){var e=this,i=e.config,n=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,r=i.axis_rotated?u.axisX:u.axisY,s=e.main.select("."+r).node(),a=s&&n?s.getBoundingClientRect():{right:0},o=e.selectChart.node().getBoundingClientRect(),l=e.hasArcType(),h=a.right-o.left-(l?0:e.getCurrentPaddingLeft(t));return h>0?h:0},l.getAxisWidthByAxisId=function(t,e){var i=this,n=i.axis.getLabelPositionById(t);return i.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},l.getHorizontalAxisHeight=function(t){var e=this,i=e.config,n=30;return"x"!==t||i.axis_x_show?"x"===t&&i.axis_x_height?i.axis_x_height:"y"!==t||i.axis_y_show?"y2"!==t||i.axis_y2_show?("x"===t&&!i.axis_rotated&&i.axis_x_tick_rotate&&(n=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-i.axis_x_tick_rotate)/180)),n+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!i.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},l.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},l.getShapeIndices=function(t){var e,i,n=this,r=n.config,s={},a=0;return n.filterTargetsToShow(n.data.targets.filter(t,n)).forEach(function(t){for(e=0;e<r.data_groups.length;e++)if(!(r.data_groups[e].indexOf(t.id)<0))for(i=0;i<r.data_groups[e].length;i++)if(r.data_groups[e][i]in s){s[t.id]=s[r.data_groups[e][i]];break}g(s[t.id])&&(s[t.id]=a++)}),s.__max__=a-1,s},l.getShapeX=function(t,e,i,n){var r=this,s=n?r.subX:r.x;return function(n){var r=n.id in i?i[n.id]:0;return n.x||0===n.x?s(n.x)-t*(e/2-r):0}},l.getShapeY=function(t){var e=this;return function(i){var n=t?e.getSubYScale(i.id):e.getYScale(i.id);return n(i.value)}},l.getShapeOffset=function(t,e,i){var n=this,r=n.orderTargets(n.filterTargetsToShow(n.data.targets.filter(t,n))),s=r.map(function(t){return t.id});return function(t,a){var o=i?n.getSubYScale(t.id):n.getYScale(t.id),l=o(0),h=l;return r.forEach(function(i){var r=n.isStepType(t)?n.convertValuesToStep(i.values):i.values;i.id!==t.id&&e[i.id]===e[t.id]&&s.indexOf(i.id)<s.indexOf(t.id)&&(("undefined"==typeof r[a]||+r[a].x!==+t.x)&&(a=-1,r.forEach(function(e,i){e.x===t.x&&(a=i)})),a in r&&r[a].value*t.value>=0&&(h+=o(r[a].value)-l))}),h}},l.isWithinShape=function(t,e){var i,n=this,r=n.d3.select(t);return n.isTargetToShow(e.id)?"circle"===t.nodeName?i=n.isStepType(e)?n.isWithinStep(t,n.getYScale(e.id)(e.value)):n.isWithinCircle(t,1.5*n.pointSelectR(e)):"path"===t.nodeName&&(i=r.classed(u.bar)?n.isWithinBar(t):!0):i=!1,i},l.getInterpolate=function(t){var e=this,i=e.isInterpolationType(e.config.spline_interpolation_type)?e.config.spline_interpolation_type:"cardinal";return e.isSplineType(t)?i:e.isStepType(t)?e.config.line_step_type:"linear"},l.initLine=function(){var t=this;t.main.select("."+u.chart).append("g").attr("class",u.chartLines)},l.updateTargetsForLine=function(t){var e,i,n=this,r=n.config,s=n.classChartLine.bind(n),a=n.classLines.bind(n),o=n.classAreas.bind(n),l=n.classCircles.bind(n),h=n.classFocus.bind(n);e=n.main.select("."+u.chartLines).selectAll("."+u.chartLine).data(t).attr("class",function(t){return s(t)+h(t)}),i=e.enter().append("g").attr("class",s).style("opacity",0).style("pointer-events","none"),i.append("g").attr("class",a),i.append("g").attr("class",o),i.append("g").attr("class",function(t){return n.generateClass(u.selectedCircles,t.id)}),i.append("g").attr("class",l).style("cursor",function(t){return r.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(t){n.main.selectAll("."+u.selectedCircles+n.getTargetSelectorSuffix(t.id)).selectAll("."+u.selectedCircle).each(function(e){e.value=t.values[e.index].value})})},l.updateLine=function(t){var e=this;e.mainLine=e.main.selectAll("."+u.lines).selectAll("."+u.line).data(e.lineData.bind(e)),e.mainLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.mainLine.style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),e.mainLine.exit().transition().duration(t).style("opacity",0).remove()},l.redrawLine=function(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},l.generateDrawLine=function(t,e){var i=this,n=i.config,r=i.d3.svg.line(),s=i.generateGetLinePoints(t,e),a=e?i.getSubYScale:i.getYScale,o=function(t){return(e?i.subxx:i.xx).call(i,t)},l=function(t,e){return n.data_groups.length>0?s(t,e)[0][1]:a.call(i,t.id)(t.value)};return r=n.axis_rotated?r.x(l).y(o):r.x(o).y(l),n.line_connectNull||(r=r.defined(function(t){return null!=t.value})),function(t){var s,o=n.line_connectNull?i.filterRemoveNull(t.values):t.values,l=e?i.x:i.subX,h=a.call(i,t.id),c=0,u=0;return i.isLineType(t)?n.data_regions[t.id]?s=i.lineWithRegions(o,l,h,n.data_regions[t.id]):(i.isStepType(t)&&(o=i.convertValuesToStep(o)),s=r.interpolate(i.getInterpolate(t))(o)):(o[0]&&(c=l(o[0].x),u=h(o[0].value)),s=n.axis_rotated?"M "+u+" "+c:"M "+c+" "+u),s?s:"M 0 0"}},l.generateGetLinePoints=function(t,e){var i=this,n=i.config,r=t.__max__+1,s=i.getShapeX(0,r,t,!!e),a=i.getShapeY(!!e),o=i.getShapeOffset(i.isLineType,t,!!e),l=e?i.getSubYScale:i.getYScale;return function(t,e){var r=l.call(i,t.id)(0),h=o(t,e)||r,c=s(t),u=a(t);return n.axis_rotated&&(0<t.value&&r>u||t.value<0&&u>r)&&(u=r),[[c,u-(r-h)],[c,u-(r-h)],[c,u-(r-h)],[c,u-(r-h)]]}},l.lineWithRegions=function(t,e,i,n){function r(t,e){var i;for(i=0;i<e.length;i++)if(e[i].start<t&&t<=e[i].end)return!0;return!1}function s(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}var a,o,l,h,c,u,d,f,p,v,y,x,b=this,w=b.config,_=-1,k="M",C=b.isCategorized()?.5:0,M=[];if(m(n))for(a=0;a<n.length;a++)M[a]={},g(n[a].start)?M[a].start=t[0].x:M[a].start=b.isTimeSeries()?b.parseDate(n[a].start):n[a].start,g(n[a].end)?M[a].end=t[t.length-1].x:M[a].end=b.isTimeSeries()?b.parseDate(n[a].end):n[a].end;for(y=w.axis_rotated?function(t){return i(t.value)}:function(t){return e(t.x)},x=w.axis_rotated?function(t){return e(t.x)}:function(t){return i(t.value)},l=b.isTimeSeries()?function(t,n,r,a){var o,l=t.x.getTime(),h=n.x-t.x,u=new Date(l+h*r),d=new Date(l+h*(r+a));return o=w.axis_rotated?[[i(c(r)),e(u)],[i(c(r+a)),e(d)]]:[[e(u),i(c(r))],[e(d),i(c(r+a))]],s(o)}:function(t,n,r,a){var o;return o=w.axis_rotated?[[i(c(r),!0),e(h(r))],[i(c(r+a),!0),e(h(r+a))]]:[[e(h(r),!0),i(c(r))],[e(h(r+a),!0),i(c(r+a))]],s(o)},a=0;a<t.length;a++){if(g(M)||!r(t[a].x,M))k+=" "+y(t[a])+" "+x(t[a]);else for(h=b.getScale(t[a-1].x+C,t[a].x+C,b.isTimeSeries()),c=b.getScale(t[a-1].value,t[a].value),u=e(t[a].x)-e(t[a-1].x),d=i(t[a].value)-i(t[a-1].value),f=Math.sqrt(Math.pow(u,2)+Math.pow(d,2)),p=2/f,v=2*p,o=p;1>=o;o+=v)k+=l(t[a-1],t[a],o,p);_=t[a].x}return k},l.updateArea=function(t){var e=this,i=e.d3;e.mainArea=e.main.selectAll("."+u.areas).selectAll("."+u.area).data(e.lineData.bind(e)),e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0}),e.mainArea.style("opacity",e.orgAreaOpacity),e.mainArea.exit().transition().duration(t).style("opacity",0).remove()},l.redrawArea=function(t,e){return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},l.generateDrawArea=function(t,e){var i=this,n=i.config,r=i.d3.svg.area(),s=i.generateGetAreaPoints(t,e),a=e?i.getSubYScale:i.getYScale,o=function(t){return(e?i.subxx:i.xx).call(i,t)},l=function(t,e){return n.data_groups.length>0?s(t,e)[0][1]:a.call(i,t.id)(i.getAreaBaseValue(t.id))},h=function(t,e){return n.data_groups.length>0?s(t,e)[1][1]:a.call(i,t.id)(t.value)};return r=n.axis_rotated?r.x0(l).x1(h).y(o):r.x(o).y0(l).y1(h),n.line_connectNull||(r=r.defined(function(t){return null!==t.value})),function(t){var e,s=n.line_connectNull?i.filterRemoveNull(t.values):t.values,a=0,o=0;return i.isAreaType(t)?(i.isStepType(t)&&(s=i.convertValuesToStep(s)),e=r.interpolate(i.getInterpolate(t))(s)):(s[0]&&(a=i.x(s[0].x),o=i.getYScale(t.id)(s[0].value)),e=n.axis_rotated?"M "+o+" "+a:"M "+a+" "+o),e?e:"M 0 0"}},l.getAreaBaseValue=function(){return 0},l.generateGetAreaPoints=function(t,e){var i=this,n=i.config,r=t.__max__+1,s=i.getShapeX(0,r,t,!!e),a=i.getShapeY(!!e),o=i.getShapeOffset(i.isAreaType,t,!!e),l=e?i.getSubYScale:i.getYScale;return function(t,e){var r=l.call(i,t.id)(0),h=o(t,e)||r,c=s(t),u=a(t);return n.axis_rotated&&(0<t.value&&r>u||t.value<0&&u>r)&&(u=r),[[c,h],[c,u-(r-h)],[c,u-(r-h)],[c,h]]}},l.updateCircle=function(){var t=this;t.mainCircle=t.main.selectAll("."+u.circles).selectAll("."+u.circle).data(t.lineOrScatterData.bind(t)),t.mainCircle.enter().append("circle").attr("class",t.classCircle.bind(t)).attr("r",t.pointR.bind(t)).style("fill",t.color),t.mainCircle.style("opacity",t.initialOpacityForCircle.bind(t)),t.mainCircle.exit().remove()},l.redrawCircle=function(t,e,i){var n=this.main.selectAll("."+u.selectedCircle);return[(i?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",t).attr("cy",e),(i?n.transition(Math.random().toString()):n).attr("cx",t).attr("cy",e)]},l.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},l.updateCircleY=function(){var t,e,i=this;i.config.data_groups.length>0?(t=i.getShapeIndices(i.isLineType),e=i.generateGetLinePoints(t),i.circleY=function(t,i){return e(t,i)[0][1]}):i.circleY=function(t){return i.getYScale(t.id)(t.value)}},l.getCircles=function(t,e){var i=this;return(e?i.main.selectAll("."+u.circles+i.getTargetSelectorSuffix(e)):i.main).selectAll("."+u.circle+(d(t)?"-"+t:""))},l.expandCircles=function(t,e,i){var n=this,r=n.pointExpandedR.bind(n);i&&n.unexpandCircles(),n.getCircles(t,e).classed(u.EXPANDED,!0).attr("r",r)},l.unexpandCircles=function(t){var e=this,i=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(u.EXPANDED)}).classed(u.EXPANDED,!1).attr("r",i)},l.pointR=function(t){var e=this,i=e.config;return e.isStepType(t)?0:f(i.point_r)?i.point_r(t):i.point_r},l.pointExpandedR=function(t){var e=this,i=e.config;return i.point_focus_expand_enabled?i.point_focus_expand_r?i.point_focus_expand_r:1.75*e.pointR(t):e.pointR(t)},l.pointSelectR=function(t){var e=this,i=e.config;return i.point_select_r?i.point_select_r:4*e.pointR(t)},l.isWithinCircle=function(t,e){var i=this.d3,n=i.mouse(t),r=i.select(t),s=+r.attr("cx"),a=+r.attr("cy");return Math.sqrt(Math.pow(s-n[0],2)+Math.pow(a-n[1],2))<e},l.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},l.initBar=function(){var t=this;t.main.select("."+u.chart).append("g").attr("class",u.chartBars)},l.updateTargetsForBar=function(t){var e,i,n=this,r=n.config,s=n.classChartBar.bind(n),a=n.classBars.bind(n),o=n.classFocus.bind(n);e=n.main.select("."+u.chartBars).selectAll("."+u.chartBar).data(t).attr("class",function(t){return s(t)+o(t)}),i=e.enter().append("g").attr("class",s).style("opacity",0).style("pointer-events","none"),i.append("g").attr("class",a).style("cursor",function(t){return r.data_selection_isselectable(t)?"pointer":null})},l.updateBar=function(t){var e=this,i=e.barData.bind(e),n=e.classBar.bind(e),r=e.initialOpacity.bind(e),s=function(t){return e.color(t.id)};e.mainBar=e.main.selectAll("."+u.bars).selectAll("."+u.bar).data(i),e.mainBar.enter().append("path").attr("class",n).style("stroke",s).style("fill",s),e.mainBar.style("opacity",r),e.mainBar.exit().transition().duration(t).style("opacity",0).remove()},l.redrawBar=function(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity",1)]},l.getBarW=function(t,e){var i=this,n=i.config,r="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&r>n.bar_width_max?n.bar_width_max:r},l.getBars=function(t,e){var i=this;return(e?i.main.selectAll("."+u.bars+i.getTargetSelectorSuffix(e)):i.main).selectAll("."+u.bar+(d(t)?"-"+t:""))},l.expandBars=function(t,e,i){var n=this;i&&n.unexpandBars(),n.getBars(t,e).classed(u.EXPANDED,!0)},l.unexpandBars=function(t){var e=this;e.getBars(t).classed(u.EXPANDED,!1)},l.generateDrawBar=function(t,e){var i=this,n=i.config,r=i.generateGetBarPoints(t,e);return function(t,e){var i=r(t,e),s=n.axis_rotated?1:0,a=n.axis_rotated?0:1,o="M "+i[0][s]+","+i[0][a]+" L"+i[1][s]+","+i[1][a]+" L"+i[2][s]+","+i[2][a]+" L"+i[3][s]+","+i[3][a]+" z";return o}},l.generateGetBarPoints=function(t,e){var i=this,n=e?i.subXAxis:i.xAxis,r=t.__max__+1,s=i.getBarW(n,r),a=i.getShapeX(s,r,t,!!e),o=i.getShapeY(!!e),l=i.getShapeOffset(i.isBarType,t,!!e),h=e?i.getSubYScale:i.getYScale;return function(t,e){var n=h.call(i,t.id)(0),r=l(t,e)||n,c=a(t),u=o(t);return i.config.axis_rotated&&(0<t.value&&n>u||t.value<0&&u>n)&&(u=n),[[c,r],[c,u-(n-r)],[c+s,u-(n-r)],[c+s,r]]}},l.isWithinBar=function(t){var e=this.d3.mouse(t),i=t.getBoundingClientRect(),n=t.pathSegList.getItem(0),r=t.pathSegList.getItem(1),s=Math.min(n.x,r.x),a=Math.min(n.y,r.y),o=i.width,l=i.height,h=2,c=s-h,u=s+o+h,d=a+l+h,f=a-h;return c<e[0]&&e[0]<u&&f<e[1]&&e[1]<d},l.initText=function(){var t=this;t.main.select("."+u.chart).append("g").attr("class",u.chartTexts),t.mainText=t.d3.selectAll([])},l.updateTargetsForText=function(t){var e,i,n=this,r=n.classChartText.bind(n),s=n.classTexts.bind(n),a=n.classFocus.bind(n);e=n.main.select("."+u.chartTexts).selectAll("."+u.chartText).data(t).attr("class",function(t){return r(t)+a(t)}),i=e.enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none"),i.append("g").attr("class",s)},l.updateText=function(t){var e=this,i=e.config,n=e.barOrLineData.bind(e),r=e.classText.bind(e);e.mainText=e.main.selectAll("."+u.texts).selectAll("."+u.text).data(n),e.mainText.enter().append("text").attr("class",r).attr("text-anchor",function(t){return i.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return e.color(t)}).style("fill-opacity",0),e.mainText.text(function(t,i,n){return e.dataLabelFormat(t.id)(t.value,t.id,i,n)}),e.mainText.exit().transition().duration(t).style("fill-opacity",0).remove()},l.redrawText=function(t,e,i,n){return[(n?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]},l.getTextRect=function(t,e,i){var n,r=this.d3.select("body").append("div").classed("c3",!0),s=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),a=this.d3.select(i).style("font");return s.selectAll(".dummy").data([t]).enter().append("text").classed(e?e:"",!0).style("font",a).text(t).each(function(){n=this.getBoundingClientRect()}),r.remove(),n},l.generateXYForText=function(t,e,i,n){var r=this,s=r.generateGetAreaPoints(t,!1),a=r.generateGetBarPoints(e,!1),o=r.generateGetLinePoints(i,!1),l=n?r.getXForText:r.getYForText;return function(t,e){var i=r.isAreaType(t)?s:r.isBarType(t)?a:o;return l.call(r,i(t,e),t,this)}},l.getXForText=function(t,e,i){var n,r,s=this,a=i.getBoundingClientRect();return s.config.axis_rotated?(r=s.isBarType(e)?4:6,n=t[2][1]+r*(e.value<0?-1:1)):n=s.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(n>s.width?n=s.width-a.width:0>n&&(n=4)),n},l.getYForText=function(t,e,i){var n,r=this,s=i.getBoundingClientRect();return r.config.axis_rotated?n=(t[0][0]+t[2][0]+.6*s.height)/2:(n=t[2][1],e.value<0||0===e.value&&!r.hasPositiveValue?(n+=s.height,r.isBarType(e)&&r.isSafari()?n-=3:!r.isBarType(e)&&r.isChrome()&&(n+=3)):n+=r.isBarType(e)?-3:-6),null!==e.value||r.config.axis_rotated||(n<s.height?n=s.height:n>this.height&&(n=this.height-4)),n},l.setTargetType=function(t,e){var i=this,n=i.config;i.mapToTargetIds(t).forEach(function(t){i.withoutFadeIn[t]=e===n.data_types[t],n.data_types[t]=e}),t||(n.data_type=e)},l.hasType=function(t,e){var i=this,n=i.config.data_types,r=!1;return e=e||i.data.targets,e&&e.length?e.forEach(function(e){var i=n[e.id];(i&&i.indexOf(t)>=0||!i&&"line"===t)&&(r=!0)}):Object.keys(n).length?Object.keys(n).forEach(function(e){n[e]===t&&(r=!0)}):r=i.config.data_type===t,r},l.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},l.isLineType=function(t){var e=this.config,i=p(t)?t:t.id;return!e.data_types[i]||["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[i])>=0},l.isStepType=function(t){var e=p(t)?t:t.id;return["step","area-step"].indexOf(this.config.data_types[e])>=0},l.isSplineType=function(t){var e=p(t)?t:t.id;return["spline","area-spline"].indexOf(this.config.data_types[e])>=0},l.isAreaType=function(t){var e=p(t)?t:t.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[e])>=0},l.isBarType=function(t){var e=p(t)?t:t.id;return"bar"===this.config.data_types[e]},l.isScatterType=function(t){var e=p(t)?t:t.id;return"scatter"===this.config.data_types[e]},l.isPieType=function(t){var e=p(t)?t:t.id;return"pie"===this.config.data_types[e]},l.isGaugeType=function(t){var e=p(t)?t:t.id;return"gauge"===this.config.data_types[e]},l.isDonutType=function(t){var e=p(t)?t:t.id;return"donut"===this.config.data_types[e]},l.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},l.lineData=function(t){return this.isLineType(t)?[t]:[]},l.arcData=function(t){return this.isArcType(t.data)?[t]:[]},l.barData=function(t){return this.isBarType(t)?t.values:[]},l.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},l.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},l.isInterpolationType=function(t){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(t)>=0},l.initGrid=function(){var t=this,e=t.config,i=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",u.grid),e.grid_x_show&&t.grid.append("g").attr("class",u.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",u.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",u.xgridFocus).append("line").attr("class",u.xgridFocus),t.xgrid=i.selectAll([]),e.grid_lines_front||t.initGridLines()},l.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",u.grid+" "+u.gridLines),t.gridLines.append("g").attr("class",u.xgridLines),t.gridLines.append("g").attr("class",u.ygridLines),t.xgridLines=e.selectAll([])},l.updateXGrid=function(t){var e=this,i=e.config,n=e.d3,r=e.generateGridData(i.grid_x_type,e.x),s=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=i.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-s},y2:function(t){return e.x(t)-s}}:{x1:function(t){return e.x(t)+s},x2:function(t){return e.x(t)+s},y1:0,y2:e.height},e.xgrid=e.main.select("."+u.xgrids).selectAll("."+u.xgrid).data(r),e.xgrid.enter().append("line").attr("class",u.xgrid),t||e.xgrid.attr(e.xgridAttr).style("opacity",function(){return+n.select(this).attr(i.axis_rotated?"y1":"x1")===(i.axis_rotated?e.height:0)?0:1}),e.xgrid.exit().remove()},l.updateYGrid=function(){var t=this,e=t.config,i=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select("."+u.ygrids).selectAll("."+u.ygrid).data(i),t.ygrid.enter().append("line").attr("class",u.ygrid),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),t.ygrid.exit().remove(),t.smoothLines(t.ygrid,"grid")},l.gridTextAnchor=function(t){return t.position?t.position:"end"},l.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},l.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},l.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},l.updateGrid=function(t){var e,i,n,r=this,s=r.main,a=r.config;r.grid.style("visibility",r.hasArcType()?"hidden":"visible"),s.select("line."+u.xgridFocus).style("visibility","hidden"),a.grid_x_show&&r.updateXGrid(),r.xgridLines=s.select("."+u.xgridLines).selectAll("."+u.xgridLine).data(a.grid_x_lines),e=r.xgridLines.enter().append("g").attr("class",function(t){return u.xgridLine+(t["class"]?" "+t["class"]:"")}),e.append("line").style("opacity",0),e.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",a.axis_rotated?"":"rotate(-90)").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),r.xgridLines.exit().transition().duration(t).style("opacity",0).remove(),a.grid_y_show&&r.updateYGrid(),r.ygridLines=s.select("."+u.ygridLines).selectAll("."+u.ygridLine).data(a.grid_y_lines),i=r.ygridLines.enter().append("g").attr("class",function(t){return u.ygridLine+(t["class"]?" "+t["class"]:"")}),i.append("line").style("opacity",0),i.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",a.axis_rotated?"rotate(-90)":"").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),n=r.yv.bind(r),r.ygridLines.select("line").transition().duration(t).attr("x1",a.axis_rotated?n:0).attr("x2",a.axis_rotated?n:r.width).attr("y1",a.axis_rotated?0:n).attr("y2",a.axis_rotated?r.height:n).style("opacity",1),r.ygridLines.select("text").transition().duration(t).attr("x",a.axis_rotated?r.xGridTextX.bind(r):r.yGridTextX.bind(r)).attr("y",n).text(function(t){return t.text}).style("opacity",1),r.ygridLines.exit().transition().duration(t).style("opacity",0).remove()},l.redrawGrid=function(t){var e=this,i=e.config,n=e.xv.bind(e),r=e.xgridLines.select("line"),s=e.xgridLines.select("text");return[(t?r.transition():r).attr("x1",i.axis_rotated?0:n).attr("x2",i.axis_rotated?e.width:n).attr("y1",i.axis_rotated?n:0).attr("y2",i.axis_rotated?n:e.height).style("opacity",1),(t?s.transition():s).attr("x",i.axis_rotated?e.yGridTextX.bind(e):e.xGridTextX.bind(e)).attr("y",n).text(function(t){return t.text}).style("opacity",1)]},l.showXGridFocus=function(t){var e=this,i=e.config,n=t.filter(function(t){return t&&d(t.value)}),r=e.main.selectAll("line."+u.xgridFocus),s=e.xx.bind(e);i.tooltip_show&&(e.hasType("scatter")||e.hasArcType()||(r.style("visibility","visible").data([n[0]]).attr(i.axis_rotated?"y1":"x1",s).attr(i.axis_rotated?"y2":"x2",s),e.smoothLines(r,"grid")))},l.hideXGridFocus=function(){this.main.select("line."+u.xgridFocus).style("visibility","hidden")},l.updateXgridFocus=function(){var t=this,e=t.config;t.main.select("line."+u.xgridFocus).attr("x1",e.axis_rotated?0:-10).attr("x2",e.axis_rotated?t.width:-10).attr("y1",e.axis_rotated?-10:0).attr("y2",e.axis_rotated?-10:t.height)},l.generateGridData=function(t,e){var i,n,r,s,a=this,o=[],l=a.main.select("."+u.axisX).selectAll(".tick").size();if("year"===t)for(i=a.getXDomain(),n=i[0].getFullYear(),r=i[1].getFullYear(),s=n;r>=s;s++)o.push(new Date(s+"-01-01 00:00:00"));else o=e.ticks(10),o.length>l&&(o=o.filter(function(t){return(""+t).indexOf(".")<0}));return o},l.getGridFilterToRemove=function(t){return t?function(e){var i=!1;return[].concat(t).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e["class"]===t["class"])&&(i=!0)}),i}:function(){return!0}},l.removeGridLines=function(t,e){var i=this,n=i.config,r=i.getGridFilterToRemove(t),s=function(t){return!r(t)},a=e?u.xgridLines:u.ygridLines,o=e?u.xgridLine:u.ygridLine;i.main.select("."+a).selectAll("."+o).filter(r).transition().duration(n.transition_duration).style("opacity",0).remove(),e?n.grid_x_lines=n.grid_x_lines.filter(s):n.grid_y_lines=n.grid_y_lines.filter(s)},l.initTooltip=function(){var t,e=this,i=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",u.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),i.tooltip_init_show){if(e.isTimeSeries()&&p(i.tooltip_init_x)){for(i.tooltip_init_x=e.parseDate(i.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-i.tooltip_init_x!==0;t++);i.tooltip_init_x=t}e.tooltip.html(i.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[i.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display","block")}},l.getTooltipContent=function(t,e,i,n){var r,s,a,o,l,h,c=this,u=c.config,d=u.tooltip_format_title||e,f=u.tooltip_format_name||function(t){return t},p=u.tooltip_format_value||i,g=c.isOrderAsc();if(0===u.data_groups.length)t.sort(function(t,e){return g?t.value-e.value:e.value-t.value});else{var m=c.orderTargets(c.data.targets).map(function(t){
return t.id});t.sort(function(t,e){return t.value>0&&e.value>0?g?m.indexOf(t.id)-m.indexOf(e.id):m.indexOf(e.id)-m.indexOf(t.id):g?t.value-e.value:e.value-t.value})}for(s=0;s<t.length;s++)if(t[s]&&(t[s].value||0===t[s].value)&&(r||(a=d?d(t[s].x):t[s].x,r="<table class='"+c.CLASS.tooltip+"'>"+(a||0===a?"<tr><th colspan='2'>"+a+"</th></tr>":"")),o=p(t[s].value,t[s].ratio,t[s].id,t[s].index),void 0!==o)){if(null===t[s].name)continue;l=f(t[s].name,t[s].ratio,t[s].id,t[s].index),h=c.levelColor?c.levelColor(t[s].value):n(t[s].id),r+="<tr class='"+c.CLASS.tooltipName+"-"+c.getTargetSelectorSuffix(t[s].id)+"'>",r+="<td class='name'><span style='background-color:"+h+"'></span>"+l+"</td>",r+="<td class='value'>"+o+"</td>",r+="</tr>"}return r+"</table>"},l.tooltipPosition=function(t,e,i,n){var r,s,a,o,l,h=this,c=h.config,u=h.d3,d=h.hasArcType(),f=u.mouse(n);return d?(s=(h.width-(h.isLegendRight?h.getLegendWidth():0))/2+f[0],o=h.height/2+f[1]+20):(r=h.getSvgLeft(!0),c.axis_rotated?(s=r+f[0]+100,a=s+e,l=h.currentWidth-h.getCurrentPaddingRight(),o=h.x(t[0].x)+20):(s=r+h.getCurrentPaddingLeft(!0)+h.x(t[0].x)+20,a=s+e,l=r+h.currentWidth-h.getCurrentPaddingRight(),o=f[1]+15),a>l&&(s-=a-l+20),o+i>h.currentHeight&&(o-=i+30)),0>o&&(o=0),{top:o,left:s}},l.showTooltip=function(t,e){var i,n,r,s=this,a=s.config,o=s.hasArcType(),h=t.filter(function(t){return t&&d(t.value)}),c=a.tooltip_position||l.tooltipPosition;0!==h.length&&a.tooltip_show&&(s.tooltip.html(a.tooltip_contents.call(s,t,s.axis.getXAxisTickFormat(),s.getYFormat(o),s.color)).style("display","block"),i=s.tooltip.property("offsetWidth"),n=s.tooltip.property("offsetHeight"),r=c.call(this,h,i,n,e),s.tooltip.style("top",r.top+"px").style("left",r.left+"px"))},l.hideTooltip=function(){this.tooltip.style("display","none")},l.initLegend=function(){var t=this;return t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),t.config.legend_show?void t.updateLegendWithDefaults():(t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets)))},l.updateLegendWithDefaults=function(){var t=this;t.updateLegend(t.mapToIds(t.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},l.updateSizeForLegend=function(t,e){var i=this,n=i.config,r={top:i.isLegendTop?i.getCurrentPaddingTop()+n.legend_inset_y+5.5:i.currentHeight-t-i.getCurrentPaddingBottom()-n.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+n.legend_inset_x+.5:i.currentWidth-e-i.getCurrentPaddingRight()-n.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?r.top:i.currentHeight-t,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-e:i.isLegendInset?r.left:0}},l.transformLegend=function(t){var e=this;(t?e.legend.transition():e.legend).attr("transform",e.getTranslate("legend"))},l.updateLegendStep=function(t){this.legendStep=t},l.updateLegendItemWidth=function(t){this.legendItemWidth=t},l.updateLegendItemHeight=function(t){this.legendItemHeight=t},l.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},l.getLegendHeight=function(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},l.opacityForLegend=function(t){return t.classed(u.legendItemHidden)?null:1},l.opacityForUnfocusedLegend=function(t){return t.classed(u.legendItemHidden)?null:.3},l.toggleFocusLegend=function(t,e){var i=this;t=i.mapToTargetIds(t),i.legend.selectAll("."+u.legendItem).filter(function(e){return t.indexOf(e)>=0}).classed(u.legendItemFocused,e).transition().duration(100).style("opacity",function(){var t=e?i.opacityForLegend:i.opacityForUnfocusedLegend;return t.call(i,i.d3.select(this))})},l.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+u.legendItem).classed(u.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},l.showLegend=function(t){var e=this,i=e.config;i.legend_show||(i.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},l.hideLegend=function(t){var e=this,i=e.config;i.legend_show&&b(t)&&(i.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},l.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},l.updateLegend=function(t,e,i){function n(t,e){return C.legendItemTextBox[e]||(C.legendItemTextBox[e]=C.getTextRect(t.textContent,u.legendItem,t)),C.legendItemTextBox[e]}function r(e,i,r){function s(t,e){e||(a=(p-L-f)/2,E>a&&(a=(p-f)/2,L=0,N++)),O[t]=N,R[N]=C.isLegendInset?10:a,F[t]=L,L+=f}var a,o,l=0===r,h=r===t.length-1,c=n(e,i),u=c.width+P+(!h||C.isLegendRight||C.isLegendInset?T:0)+M.legend_padding,d=c.height+S,f=C.isLegendRight||C.isLegendInset?d:u,p=C.isLegendRight||C.isLegendInset?C.getLegendHeight():C.getLegendWidth();return l&&(L=0,N=0,D=0,A=0),M.legend_show&&!C.isLegendToShow(i)?void(I[i]=z[i]=O[i]=F[i]=0):(I[i]=u,z[i]=d,(!D||u>=D)&&(D=u),(!A||d>=A)&&(A=d),o=C.isLegendRight||C.isLegendInset?A:D,void(M.legend_equally?(Object.keys(I).forEach(function(t){I[t]=D}),Object.keys(z).forEach(function(t){z[t]=A}),a=(p-o*t.length)/2,E>a?(L=0,N=0,t.forEach(function(t){s(t)})):s(i,!0)):s(i)))}var s,a,o,l,h,c,d,f,p,g,v,y,x,b,w,k,C=this,M=C.config,S=4,T=10,D=0,A=0,E=10,P=M.legend_item_tile_width+5,L=0,F={},I={},z={},R=[0],O={},N=0;t=t.filter(function(t){return!m(M.data_names[t])||null!==M.data_names[t]}),e=e||{},v=_(e,"withTransition",!0),y=_(e,"withTransitionForTransform",!0),C.isLegendInset&&(N=M.legend_inset_step?M.legend_inset_step:t.length,C.updateLegendStep(N)),C.isLegendRight?(s=function(t){return D*O[t]},l=function(t){return R[O[t]]+F[t]}):C.isLegendInset?(s=function(t){return D*O[t]+10},l=function(t){return R[O[t]]+F[t]}):(s=function(t){return R[O[t]]+F[t]},l=function(t){return A*O[t]}),a=function(t,e){return s(t,e)+4+M.legend_item_tile_width},h=function(t,e){return l(t,e)+9},o=function(t,e){return s(t,e)},c=function(t,e){return l(t,e)-5},d=function(t,e){return s(t,e)-2},f=function(t,e){return s(t,e)-2+M.legend_item_tile_width},p=function(t,e){return l(t,e)+4},g=C.legend.selectAll("."+u.legendItem).data(t).enter().append("g").attr("class",function(t){return C.generateClass(u.legendItem,t)}).style("visibility",function(t){return C.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){M.legend_item_onclick?M.legend_item_onclick.call(C,t):C.d3.event.altKey?(C.api.hide(),C.api.show(t)):(C.api.toggle(t),C.isTargetToShow(t)?C.api.focus(t):C.api.revert())}).on("mouseover",function(t){M.legend_item_onmouseover?M.legend_item_onmouseover.call(C,t):(C.d3.select(this).classed(u.legendItemFocused,!0),!C.transiting&&C.isTargetToShow(t)&&C.api.focus(t))}).on("mouseout",function(t){M.legend_item_onmouseout?M.legend_item_onmouseout.call(C,t):(C.d3.select(this).classed(u.legendItemFocused,!1),C.api.revert())}),g.append("text").text(function(t){return m(M.data_names[t])?M.data_names[t]:t}).each(function(t,e){r(this,t,e)}).style("pointer-events","none").attr("x",C.isLegendRight||C.isLegendInset?a:-200).attr("y",C.isLegendRight||C.isLegendInset?-200:h),g.append("rect").attr("class",u.legendItemEvent).style("fill-opacity",0).attr("x",C.isLegendRight||C.isLegendInset?o:-200).attr("y",C.isLegendRight||C.isLegendInset?-200:c),g.append("line").attr("class",u.legendItemTile).style("stroke",C.color).style("pointer-events","none").attr("x1",C.isLegendRight||C.isLegendInset?d:-200).attr("y1",C.isLegendRight||C.isLegendInset?-200:p).attr("x2",C.isLegendRight||C.isLegendInset?f:-200).attr("y2",C.isLegendRight||C.isLegendInset?-200:p).attr("stroke-width",M.legend_item_tile_height),k=C.legend.select("."+u.legendBackground+" rect"),C.isLegendInset&&D>0&&0===k.size()&&(k=C.legend.insert("g","."+u.legendItem).attr("class",u.legendBackground).append("rect")),x=C.legend.selectAll("text").data(t).text(function(t){return m(M.data_names[t])?M.data_names[t]:t}).each(function(t,e){r(this,t,e)}),(v?x.transition():x).attr("x",a).attr("y",h),b=C.legend.selectAll("rect."+u.legendItemEvent).data(t),(v?b.transition():b).attr("width",function(t){return I[t]}).attr("height",function(t){return z[t]}).attr("x",o).attr("y",c),w=C.legend.selectAll("line."+u.legendItemTile).data(t),(v?w.transition():w).style("stroke",C.color).attr("x1",d).attr("y1",p).attr("x2",f).attr("y2",p),k&&(v?k.transition():k).attr("height",C.getLegendHeight()-12).attr("width",D*(N+1)+10),C.legend.selectAll("."+u.legendItem).classed(u.legendItemHidden,function(t){return!C.isTargetToShow(t)}),C.updateLegendItemWidth(D),C.updateLegendItemHeight(A),C.updateLegendStep(N),C.updateSizes(),C.updateScales(),C.updateSvgSize(),C.transformAll(y,i),C.legendHasRendered=!0},l.initTitle=function(){var t=this;t.title=t.svg.append("text").text(t.config.title_text).attr("class",t.CLASS.title)},l.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},l.xForTitle=function(){var t,e=this,i=e.config,n=i.title_position||"left";return t=n.indexOf("right")>=0?e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-i.title_padding.right:n.indexOf("center")>=0?(e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2:i.title_padding.left},l.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},l.getTitlePadding=function(){var t=this;return t.yForTitle()+t.config.title_padding.bottom},i(e,s),s.prototype.init=function(){var t=this.owner,e=t.config,i=t.main;t.axes.x=i.append("g").attr("class",u.axis+" "+u.axisX).attr("clip-path",t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",u.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=i.append("g").attr("class",u.axis+" "+u.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",u.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=i.append("g").attr("class",u.axis+" "+u.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",u.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},s.prototype.getXAxis=function(t,e,i,n,r,s,o){var l=this.owner,h=l.config,c={isCategory:l.isCategorized(),withOuterTick:r,tickMultiline:h.axis_x_tick_multiline,tickWidth:h.axis_x_tick_width,tickTextRotate:o?0:h.axis_x_tick_rotate,withoutTransition:s},u=a(l.d3,c).scale(t).orient(e);return l.isTimeSeries()&&n&&"function"!=typeof n&&(n=n.map(function(t){return l.parseDate(t)})),u.tickFormat(i).tickValues(n),l.isCategorized()&&(u.tickCentered(h.axis_x_tick_centered),b(h.axis_x_tick_culling)&&(h.axis_x_tick_culling=!1)),u},s.prototype.updateXAxisTickValues=function(t,e){var i,n=this.owner,r=n.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(i=this.generateTickValues(n.mapTargetsToUniqueXs(t),r.axis_x_tick_count,n.isTimeSeries())),e?e.tickValues(i):(n.xAxis.tickValues(i),n.subXAxis.tickValues(i)),i},s.prototype.getYAxis=function(t,e,i,n,r,s){var o={withOuterTick:r,withoutTransition:s},l=this.owner,h=l.d3,c=l.config,u=a(h,o).scale(t).orient(e).tickFormat(i);return l.isTimeSeriesY()?u.ticks(h.time[c.axis_y_tick_time_value],c.axis_y_tick_time_interval):u.tickValues(n),u},s.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},s.prototype.getXAxisTickFormat=function(){var t=this.owner,e=t.config,i=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(t){return 0>t?t.toFixed(0):t};return e.axis_x_tick_format&&(f(e.axis_x_tick_format)?i=e.axis_x_tick_format:t.isTimeSeries()&&(i=function(i){return i?t.axisTimeFormat(e.axis_x_tick_format)(i):""})),f(i)?function(e){return i.call(t,e)}:i},s.prototype.getTickValues=function(t,e){return t?t:e?e.tickValues():void 0},s.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},s.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},s.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},s.prototype.getLabelOptionByAxisId=function(t){var e,i=this.owner,n=i.config;return"y"===t?e=n.axis_y_label:"y2"===t?e=n.axis_y2_label:"x"===t&&(e=n.axis_x_label),e},s.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return p(e)?e:e?e.text:null},s.prototype.setLabelText=function(t,e){var i=this.owner,n=i.config,r=this.getLabelOptionByAxisId(t);p(r)?"y"===t?n.axis_y_label=e:"y2"===t?n.axis_y2_label=e:"x"===t&&(n.axis_x_label=e):r&&(r.text=e)},s.prototype.getLabelPosition=function(t,e){var i=this.getLabelOptionByAxisId(t),n=i&&"object"==typeof i&&i.position?i.position:e;return{isInner:n.indexOf("inner")>=0,isOuter:n.indexOf("outer")>=0,isLeft:n.indexOf("left")>=0,isCenter:n.indexOf("center")>=0,isRight:n.indexOf("right")>=0,isTop:n.indexOf("top")>=0,isMiddle:n.indexOf("middle")>=0,isBottom:n.indexOf("bottom")>=0}},s.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},s.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},s.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},s.prototype.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},s.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},s.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},s.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},s.prototype.xForAxisLabel=function(t,e){var i=this.owner;return t?e.isLeft?0:e.isCenter?i.width/2:i.width:e.isBottom?-i.height:e.isMiddle?-i.height/2:0},s.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},s.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},s.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},s.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},s.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},s.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},s.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},s.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},s.prototype.dyForXAxisLabel=function(){var t=this.owner,e=t.config,i=this.getXAxisLabelPosition();return e.axis_rotated?i.isInner?"1.2em":-25-this.getMaxTickWidth("x"):i.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},s.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},s.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},s.prototype.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},s.prototype.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},s.prototype.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},s.prototype.getMaxTickWidth=function(t,e){var i,n,r,s,a,o=this.owner,l=o.config,h=0;return e&&o.currentMaxTickWidths[t]?o.currentMaxTickWidths[t]:(o.svg&&(i=o.filterTargetsToShow(o.data.targets),"y"===t?(n=o.y.copy().domain(o.getYDomain(i,"y")),r=this.getYAxis(n,o.yOrient,l.axis_y_tick_format,o.yAxisTickValues,!1,!0)):"y2"===t?(n=o.y2.copy().domain(o.getYDomain(i,"y2")),r=this.getYAxis(n,o.y2Orient,l.axis_y2_tick_format,o.y2AxisTickValues,!1,!0)):(n=o.x.copy().domain(o.getXDomain(i)),r=this.getXAxis(n,o.xOrient,o.xAxisTickFormat,o.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(i,r)),s=o.d3.select("body").append("div").classed("c3",!0),a=s.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),a.append("g").call(r).each(function(){o.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();h<t.width&&(h=t.width)}),s.remove()})),o.currentMaxTickWidths[t]=0>=h?o.currentMaxTickWidths[t]:h,o.currentMaxTickWidths[t])},s.prototype.updateLabels=function(t){var e=this.owner,i=e.main.select("."+u.axisX+" ."+u.axisXLabel),n=e.main.select("."+u.axisY+" ."+u.axisYLabel),r=e.main.select("."+u.axisY2+" ."+u.axisY2Label);(t?i.transition():i).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?n.transition():n).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},s.prototype.getPadding=function(t,e,i,n){var r="number"==typeof t?t:t[e];return d(r)?"ratio"===t.unit?t[e]*n:this.convertPixelsToAxisPadding(r,n):i},s.prototype.convertPixelsToAxisPadding=function(t,e){var i=this.owner,n=i.config.axis_rotated?i.width:i.height;return e*(t/n)},s.prototype.generateTickValues=function(t,e,i){var n,r,s,a,o,l,h,c=t;if(e)if(n=f(e)?e():e,1===n)c=[t[0]];else if(2===n)c=[t[0],t[t.length-1]];else if(n>2){for(a=n-2,r=t[0],s=t[t.length-1],o=(s-r)/(a+1),c=[r],l=0;a>l;l++)h=+r+o*(l+1),c.push(i?new Date(h):h);c.push(s)}return i||(c=c.sort(function(t,e){return t-e})),c},s.prototype.generateTransitions=function(t){var e=this.owner,i=e.axes;return{axisX:t?i.x.transition().duration(t):i.x,axisY:t?i.y.transition().duration(t):i.y,axisY2:t?i.y2.transition().duration(t):i.y2,axisSubX:t?i.subx.transition().duration(t):i.subx}},s.prototype.redraw=function(t,e){var i=this.owner;i.axes.x.style("opacity",e?0:1),i.axes.y.style("opacity",e?0:1),i.axes.y2.style("opacity",e?0:1),i.axes.subx.style("opacity",e?0:1),t.axisX.call(i.xAxis),t.axisY.call(i.yAxis),t.axisY2.call(i.y2Axis),t.axisSubX.call(i.subXAxis)},l.getClipPath=function(e){var i=t.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(i?"":document.URL.split("#")[0])+"#"+e+")"},l.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},l.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},l.getAxisClipY=function(t){return t?-20:-this.margin.top},l.getXAxisClipX=function(){var t=this;return t.getAxisClipX(!t.config.axis_rotated)},l.getXAxisClipY=function(){var t=this;return t.getAxisClipY(!t.config.axis_rotated)},l.getYAxisClipX=function(){var t=this;return t.config.axis_y_inner?-1:t.getAxisClipX(t.config.axis_rotated)},l.getYAxisClipY=function(){var t=this;return t.getAxisClipY(t.config.axis_rotated)},l.getAxisClipWidth=function(t){var e=this,i=Math.max(30,e.margin.left),n=Math.max(30,e.margin.right);return t?e.width+2+i+n:e.margin.left+20},l.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},l.getXAxisClipWidth=function(){var t=this;return t.getAxisClipWidth(!t.config.axis_rotated)},l.getXAxisClipHeight=function(){var t=this;return t.getAxisClipHeight(!t.config.axis_rotated)},l.getYAxisClipWidth=function(){var t=this;return t.getAxisClipWidth(t.config.axis_rotated)+(t.config.axis_y_inner?20:0)},l.getYAxisClipHeight=function(){var t=this;return t.getAxisClipHeight(t.config.axis_rotated)},l.initPie=function(){var t=this,e=t.d3,i=t.config;t.pie=e.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}),i.data_order||t.pie.sort(null)},l.updateRadius=function(){var t=this,e=t.config,i=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=i?(t.radius-i)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0},l.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},l.updateAngle=function(t){var e,i,n,r,s=this,a=s.config,o=!1,l=0;return a?(s.pie(s.filterTargetsToShow(s.data.targets)).forEach(function(e){o||e.data.id!==t.data.id||(o=!0,t=e,t.index=l),l++}),isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=t.startAngle),s.isGaugeType(t.data)&&(e=a.gauge_min,i=a.gauge_max,n=Math.PI/(i-e),r=t.value<e?0:t.value<i?t.value-e:i-e,t.startAngle=-1*(Math.PI/2),t.endAngle=t.startAngle+n*r),o?t:null):null},l.getSvgArc=function(){var t=this,e=t.d3.svg.arc().outerRadius(t.radius).innerRadius(t.innerRadius),i=function(i,n){var r;return n?e(i):(r=t.updateAngle(i),r?e(r):"M 0 0")};return i.centroid=e.centroid,i},l.getSvgArcExpanded=function(t){var e=this,i=e.d3.svg.arc().outerRadius(e.radiusExpanded*(t?t:1)).innerRadius(e.innerRadius);return function(t){var n=e.updateAngle(t);return n?i(n):"M 0 0"}},l.getArc=function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},l.transformForArcLabel=function(t){var e,i,n,r,s,a=this,o=a.updateAngle(t),l="";return o&&!a.hasType("gauge")&&(e=this.svgArc.centroid(o),i=isNaN(e[0])?0:e[0],n=isNaN(e[1])?0:e[1],r=Math.sqrt(i*i+n*n),s=a.radius&&r?(36/a.radius>.375?1.175-36/a.radius:.8)*a.radius/r:0,l="translate("+i*s+","+n*s+")"),l},l.getArcRatio=function(t){var e=this,i=e.hasType("gauge")?Math.PI:2*Math.PI;return t?(t.endAngle-t.startAngle)/i:null},l.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},l.textForArcLabel=function(t){var e,i,n,r,s,a=this;return a.shouldShowArcLabel()?(e=a.updateAngle(t),i=e?e.value:null,n=a.getArcRatio(e),r=t.data.id,a.hasType("gauge")||a.meetsArcLabelThreshold(n)?(s=a.getArcLabelFormat(),s?s(i,n,r):a.defaultArcValueFormat(i,n)):""):""},l.expandArc=function(e){var i,n=this;return n.transiting?void(i=t.setInterval(function(){n.transiting||(t.clearInterval(i),n.legend.selectAll(".c3-legend-item-focused").size()>0&&n.expandArc(e))},10)):(e=n.mapToTargetIds(e),void n.svg.selectAll(n.selectorTargets(e,"."+u.chartArc)).each(function(t){n.shouldExpand(t.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(t.data.id)).attr("d",n.svgArcExpandedSub).each(function(t){n.isDonutType(t.data)})}))},l.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+u.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+u.arc).style("opacity",1))},l.expandDuration=function(t){var e=this,i=e.config;return e.isDonutType(t)?i.donut_expand_duration:e.isGaugeType(t)?i.gauge_expand_duration:e.isPieType(t)?i.pie_expand_duration:50},l.shouldExpand=function(t){var e=this,i=e.config;return e.isDonutType(t)&&i.donut_expand||e.isGaugeType(t)&&i.gauge_expand||e.isPieType(t)&&i.pie_expand},l.shouldShowArcLabel=function(){var t=this,e=t.config,i=!0;return t.hasType("donut")?i=e.donut_label_show:t.hasType("pie")&&(i=e.pie_label_show),i},l.meetsArcLabelThreshold=function(t){var e=this,i=e.config,n=e.hasType("donut")?i.donut_label_threshold:i.pie_label_threshold;return t>=n},l.getArcLabelFormat=function(){var t=this,e=t.config,i=e.pie_label_format;return t.hasType("gauge")?i=e.gauge_label_format:t.hasType("donut")&&(i=e.donut_label_format),i},l.getArcTitle=function(){var t=this;return t.hasType("donut")?t.config.donut_title:""},l.updateTargetsForArc=function(t){var e,i,n=this,r=n.main,s=n.classChartArc.bind(n),a=n.classArcs.bind(n),o=n.classFocus.bind(n);e=r.select("."+u.chartArcs).selectAll("."+u.chartArc).data(n.pie(t)).attr("class",function(t){return s(t)+o(t.data)}),i=e.enter().append("g").attr("class",s),i.append("g").attr("class",a),i.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},l.initArc=function(){var t=this;t.arcs=t.main.select("."+u.chart).append("g").attr("class",u.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",u.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},l.redrawArc=function(t,e,i){var n,r=this,s=r.d3,a=r.config,o=r.main;n=o.selectAll("."+u.arcs).selectAll("."+u.arc).data(r.arcData.bind(r)),n.enter().append("path").attr("class",r.classArc.bind(r)).style("fill",function(t){return r.color(t.data)}).style("cursor",function(t){return a.interaction_enabled&&a.data_selection_isselectable(t)?"pointer":null}).style("opacity",0).each(function(t){r.isGaugeType(t.data)&&(t.startAngle=t.endAngle=-1*(Math.PI/2)),this._current=t}),n.attr("transform",function(t){return!r.isGaugeType(t.data)&&i?"scale(0)":""}).style("opacity",function(t){return t===this._current?0:1}).on("mouseover",a.interaction_enabled?function(t){var e,i;r.transiting||(e=r.updateAngle(t),e&&(i=r.convertToArcData(e),r.expandArc(e.data.id),r.api.focus(e.data.id),r.toggleFocusLegend(e.data.id,!0),r.config.data_onmouseover(i,this)))}:null).on("mousemove",a.interaction_enabled?function(t){var e,i,n=r.updateAngle(t);n&&(e=r.convertToArcData(n),i=[e],r.showTooltip(i,this))}:null).on("mouseout",a.interaction_enabled?function(t){var e,i;r.transiting||(e=r.updateAngle(t),e&&(i=r.convertToArcData(e),r.unexpandArc(e.data.id),r.api.revert(),r.revertLegend(),r.hideTooltip(),r.config.data_onmouseout(i,this)))}:null).on("click",a.interaction_enabled?function(t,e){var i,n=r.updateAngle(t);n&&(i=r.convertToArcData(n),r.toggleShape&&r.toggleShape(this,i,e),r.config.data_onclick.call(r.api,i,this))}:null).each(function(){r.transiting=!0}).transition().duration(t).attrTween("d",function(t){var e,i=r.updateAngle(t);return i?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),e=s.interpolate(this._current,i),this._current=e(0),function(i){var n=e(i);return n.data=t.data,r.getArc(n,!0)}):function(){return"M 0 0"}}).attr("transform",i?"scale(1)":"").style("fill",function(t){return r.levelColor?r.levelColor(t.data.values[0].value):r.color(t.data.id)}).style("opacity",1).call(r.endall,function(){r.transiting=!1}),n.exit().transition().duration(e).style("opacity",0).remove(),o.selectAll("."+u.chartArc).select("text").style("opacity",0).attr("class",function(t){return r.isGaugeType(t.data)?u.gaugeValue:""}).text(r.textForArcLabel.bind(r)).attr("transform",r.transformForArcLabel.bind(r)).style("font-size",function(t){return r.isGaugeType(t.data)?Math.round(r.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return r.isTargetToShow(t.data.id)&&r.isArcType(t.data)?1:0}),o.select("."+u.chartArcsTitle).style("opacity",r.hasType("donut")||r.hasType("gauge")?1:0),r.hasType("gauge")&&(r.arcs.select("."+u.chartArcsBackground).attr("d",function(){var t={data:[{value:a.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return r.getArc(t,!0,!0)}),r.arcs.select("."+u.chartArcsGaugeUnit).attr("dy",".75em").text(a.gauge_label_show?a.gauge_units:""),r.arcs.select("."+u.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/2)+"px").attr("dy","1.2em").text(a.gauge_label_show?a.gauge_min:""),r.arcs.select("."+u.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/2+"px").attr("dy","1.2em").text(a.gauge_label_show?a.gauge_max:""))},l.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("path").attr("class",u.chartArcsBackground),t.append("text").attr("class",u.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",u.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",u.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},l.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},l.initRegion=function(){var t=this;t.region=t.main.append("g").attr("clip-path",t.clipPath).attr("class",u.regions)},l.updateRegion=function(t){var e=this,i=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select("."+u.regions).selectAll("."+u.region).data(i.regions),e.mainRegion.enter().append("g").attr("class",e.classRegion.bind(e)).append("rect").style("fill-opacity",0),e.mainRegion.exit().transition().duration(t).style("opacity",0).remove()},l.redrawRegion=function(t){var e=this,i=e.mainRegion.selectAll("rect"),n=e.regionX.bind(e),r=e.regionY.bind(e),s=e.regionWidth.bind(e),a=e.regionHeight.bind(e);return[(t?i.transition():i).attr("x",n).attr("y",r).attr("width",s).attr("height",a).style("fill-opacity",function(t){return d(t.opacity)?t.opacity:.1})]},l.regionX=function(t){var e,i=this,n=i.config,r="y"===t.axis?i.y:i.y2;return e="y"===t.axis||"y2"===t.axis?n.axis_rotated&&"start"in t?r(t.start):0:n.axis_rotated?0:"start"in t?i.x(i.isTimeSeries()?i.parseDate(t.start):t.start):0},l.regionY=function(t){var e,i=this,n=i.config,r="y"===t.axis?i.y:i.y2;return e="y"===t.axis||"y2"===t.axis?n.axis_rotated?0:"end"in t?r(t.end):0:n.axis_rotated&&"start"in t?i.x(i.isTimeSeries()?i.parseDate(t.start):t.start):0},l.regionWidth=function(t){var e,i=this,n=i.config,r=i.regionX(t),s="y"===t.axis?i.y:i.y2;return e="y"===t.axis||"y2"===t.axis?n.axis_rotated&&"end"in t?s(t.end):i.width:n.axis_rotated?i.width:"end"in t?i.x(i.isTimeSeries()?i.parseDate(t.end):t.end):i.width,r>e?0:e-r},l.regionHeight=function(t){var e,i=this,n=i.config,r=this.regionY(t),s="y"===t.axis?i.y:i.y2;return e="y"===t.axis||"y2"===t.axis?n.axis_rotated?i.height:"start"in t?s(t.start):i.height:n.axis_rotated&&"end"in t?i.x(i.isTimeSeries()?i.parseDate(t.end):t.end):i.height,r>e?0:e-r},l.isRegionOnX=function(t){return!t.axis||"x"===t.axis},l.drag=function(t){var e,i,n,r,s,a,o,l,h=this,c=h.config,d=h.main,f=h.d3;h.hasArcType()||c.data_selection_enabled&&(!c.zoom_enabled||h.zoom.altDomain)&&c.data_selection_multiple&&(e=h.dragStart[0],i=h.dragStart[1],n=t[0],r=t[1],s=Math.min(e,n),a=Math.max(e,n),o=c.data_selection_grouped?h.margin.top:Math.min(i,r),l=c.data_selection_grouped?h.height:Math.max(i,r),d.select("."+u.dragarea).attr("x",s).attr("y",o).attr("width",a-s).attr("height",l-o),d.selectAll("."+u.shapes).selectAll("."+u.shape).filter(function(t){return c.data_selection_isselectable(t)}).each(function(t,e){var i,n,r,c,d,p,g=f.select(this),m=g.classed(u.SELECTED),v=g.classed(u.INCLUDED),y=!1;if(g.classed(u.circle))i=1*g.attr("cx"),n=1*g.attr("cy"),d=h.togglePoint,y=i>s&&a>i&&n>o&&l>n;else{if(!g.classed(u.bar))return;p=C(this),i=p.x,n=p.y,r=p.width,c=p.height,d=h.togglePath,y=!(i>a||s>i+r||n>l||o>n+c)}y^v&&(g.classed(u.INCLUDED,!v),g.classed(u.SELECTED,!m),d.call(h,!m,g,t,e))}))},l.dragstart=function(t){var e=this,i=e.config;e.hasArcType()||i.data_selection_enabled&&(e.dragStart=t,e.main.select("."+u.chart).append("rect").attr("class",u.dragarea).style("opacity",.1),
e.dragging=!0)},l.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+u.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+u.shape).classed(u.INCLUDED,!1),t.dragging=!1)},l.selectPoint=function(t,e,i){var n=this,r=n.config,s=(r.axis_rotated?n.circleY:n.circleX).bind(n),a=(r.axis_rotated?n.circleX:n.circleY).bind(n),o=n.pointSelectR.bind(n);r.data_onselected.call(n.api,e,t.node()),n.main.select("."+u.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+u.selectedCircle+"-"+i).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(u.selectedCircle,i)}).attr("cx",s).attr("cy",a).attr("stroke",function(){return n.color(e)}).attr("r",function(t){return 1.4*n.pointSelectR(t)}).transition().duration(100).attr("r",o)},l.unselectPoint=function(t,e,i){var n=this;n.config.data_onunselected.call(n.api,e,t.node()),n.main.select("."+u.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+u.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},l.togglePoint=function(t,e,i,n){t?this.selectPoint(e,i,n):this.unselectPoint(e,i,n)},l.selectPath=function(t,e){var i=this;i.config.data_onselected.call(i,e,t.node()),t.transition().duration(100).style("fill",function(){return i.d3.rgb(i.color(e)).brighter(.75)})},l.unselectPath=function(t,e){var i=this;i.config.data_onunselected.call(i,e,t.node()),t.transition().duration(100).style("fill",function(){return i.color(e)})},l.togglePath=function(t,e,i,n){t?this.selectPath(e,i,n):this.unselectPath(e,i,n)},l.getToggle=function(t,e){var i,n=this;return"circle"===t.nodeName?i=n.isStepType(e)?function(){}:n.togglePoint:"path"===t.nodeName&&(i=n.togglePath),i},l.toggleShape=function(t,e,i){var n=this,r=n.d3,s=n.config,a=r.select(t),o=a.classed(u.SELECTED),l=n.getToggle(t,e).bind(n);s.data_selection_enabled&&s.data_selection_isselectable(e)&&(s.data_selection_multiple||n.main.selectAll("."+u.shapes+(s.data_selection_grouped?n.getTargetSelectorSuffix(e.id):"")).selectAll("."+u.shape).each(function(t,e){var i=r.select(this);i.classed(u.SELECTED)&&l(!1,i.classed(u.SELECTED,!1),t,e)}),a.classed(u.SELECTED,!o),l(!o,a,e,i))},l.initBrush=function(){var t=this,e=t.d3;t.brush=e.svg.brush().on("brush",function(){t.redrawForBrush()}),t.brush.update=function(){return t.context&&t.context.select("."+u.brush).call(this),this},t.brush.scale=function(e){return t.config.axis_rotated?this.y(e):this.x(e)}},l.initSubchart=function(){var t=this,e=t.config,i=t.context=t.svg.append("g").attr("transform",t.getTranslate("context")),n=e.subchart_show?"visible":"hidden";i.style("visibility",n),i.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",u.chart),i.select("."+u.chart).append("g").attr("class",u.chartBars),i.select("."+u.chart).append("g").attr("class",u.chartLines),i.append("g").attr("clip-path",t.clipPath).attr("class",u.brush).call(t.brush),t.axes.subx=i.append("g").attr("class",u.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?n:"hidden")},l.updateTargetsForSubchart=function(t){var e,i,n,r,s=this,a=s.context,o=s.config,l=s.classChartBar.bind(s),h=s.classBars.bind(s),c=s.classChartLine.bind(s),d=s.classLines.bind(s),f=s.classAreas.bind(s);o.subchart_show&&(r=a.select("."+u.chartBars).selectAll("."+u.chartBar).data(t).attr("class",l),n=r.enter().append("g").style("opacity",0).attr("class",l),n.append("g").attr("class",h),i=a.select("."+u.chartLines).selectAll("."+u.chartLine).data(t).attr("class",c),e=i.enter().append("g").style("opacity",0).attr("class",c),e.append("g").attr("class",d),e.append("g").attr("class",f),a.selectAll("."+u.brush+" rect").attr(o.axis_rotated?"width":"height",o.axis_rotated?s.width2:s.height2))},l.updateBarForSubchart=function(t){var e=this;e.contextBar=e.context.selectAll("."+u.bars).selectAll("."+u.bar).data(e.barData.bind(e)),e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color),e.contextBar.style("opacity",e.initialOpacity.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity",0).remove()},l.redrawBarForSubchart=function(t,e,i){(e?this.contextBar.transition(Math.random().toString()).duration(i):this.contextBar).attr("d",t).style("opacity",1)},l.updateLineForSubchart=function(t){var e=this;e.contextLine=e.context.selectAll("."+u.lines).selectAll("."+u.line).data(e.lineData.bind(e)),e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.contextLine.style("opacity",e.initialOpacity.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity",0).remove()},l.redrawLineForSubchart=function(t,e,i){(e?this.contextLine.transition(Math.random().toString()).duration(i):this.contextLine).attr("d",t).style("opacity",1)},l.updateAreaForSubchart=function(t){var e=this,i=e.d3;e.contextArea=e.context.selectAll("."+u.areas).selectAll("."+u.area).data(e.lineData.bind(e)),e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0}),e.contextArea.style("opacity",0),e.contextArea.exit().transition().duration(t).style("opacity",0).remove()},l.redrawAreaForSubchart=function(t,e,i){(e?this.contextArea.transition(Math.random().toString()).duration(i):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},l.redrawSubchart=function(t,e,i,n,r,s,a){var o,l,h,c=this,u=c.d3,d=c.config;c.context.style("visibility",d.subchart_show?"visible":"hidden"),d.subchart_show&&(u.event&&"zoom"===u.event.type&&c.brush.extent(c.x.orgDomain()).update(),t&&(c.brush.empty()||c.brush.extent(c.x.orgDomain()).update(),o=c.generateDrawArea(r,!0),l=c.generateDrawBar(s,!0),h=c.generateDrawLine(a,!0),c.updateBarForSubchart(i),c.updateLineForSubchart(i),c.updateAreaForSubchart(i),c.redrawBarForSubchart(l,i,i),c.redrawLineForSubchart(h,i,i),c.redrawAreaForSubchart(o,i,i)))},l.redrawForBrush=function(){var t=this,e=t.x;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,e.orgDomain())},l.transformContext=function(t,e){var i,n=this;e&&e.axisSubX?i=e.axisSubX:(i=n.context.select("."+u.axisX),t&&(i=i.transition())),n.context.attr("transform",n.getTranslate("context")),i.attr("transform",n.getTranslate("subx"))},l.getDefaultExtent=function(){var t=this,e=t.config,i=f(e.axis_x_extent)?e.axis_x_extent(t.getXDomain(t.data.targets)):e.axis_x_extent;return t.isTimeSeries()&&(i=[t.parseDate(i[0]),t.parseDate(i[1])]),i},l.initZoom=function(){var t,e=this,i=e.d3,n=e.config;e.zoom=i.behavior.zoom().on("zoomstart",function(){t=i.event.sourceEvent,e.zoom.altDomain=i.event.sourceEvent.altKey?e.x.orgDomain():null,n.zoom_onzoomstart.call(e.api,i.event.sourceEvent)}).on("zoom",function(){e.redrawForZoom.call(e)}).on("zoomend",function(){var r=i.event.sourceEvent;r&&t.clientX===r.clientX&&t.clientY===r.clientY||(e.redrawEventRect(),e.updateZoom(),n.zoom_onzoomend.call(e.api,e.x.orgDomain()))}),e.zoom.scale=function(t){return n.axis_rotated?this.y(t):this.x(t)},e.zoom.orgScaleExtent=function(){var t=n.zoom_extent?n.zoom_extent:[1,10];return[t[0],Math.max(e.getMaxDataCount()/t[1],t[1])]},e.zoom.updateScaleExtent=function(){var t=x(e.x.orgDomain())/x(e.getZoomDomain()),i=this.orgScaleExtent();return this.scaleExtent([i[0]*t,i[1]*t]),this}},l.getZoomDomain=function(){var t=this,e=t.config,i=t.d3,n=i.min([t.orgXDomain[0],e.zoom_x_min]),r=i.max([t.orgXDomain[1],e.zoom_x_max]);return[n,r]},l.updateZoom=function(){var t=this,e=t.config.zoom_enabled?t.zoom:function(){};t.main.select("."+u.zoomRect).call(e).on("dblclick.zoom",null),t.main.selectAll("."+u.eventRect).call(e).on("dblclick.zoom",null)},l.redrawForZoom=function(){var t=this,e=t.d3,i=t.config,n=t.zoom,r=t.x;if(i.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length){if("mousemove"===e.event.sourceEvent.type&&n.altDomain)return r.domain(n.altDomain),void n.scale(r).updateScaleExtent();t.isCategorized()&&r.orgDomain()[0]===t.orgXDomain[0]&&r.domain([t.orgXDomain[0]-1e-10,r.orgDomain()[1]]),t.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0),i.zoom_onzoom.call(t.api,r.orgDomain())}},l.generateColor=function(){var t=this,e=t.config,i=t.d3,n=e.data_colors,r=w(e.color_pattern)?e.color_pattern:i.scale.category10().range(),s=e.data_color,a=[];return function(t){var e,i=t.id||t.data&&t.data.id||t;return n[i]instanceof Function?e=n[i](t):n[i]?e=n[i]:(a.indexOf(i)<0&&a.push(i),e=r[a.indexOf(i)%r.length],n[i]=e),s instanceof Function?s(e,t):e}},l.generateLevelColor=function(){var t=this,e=t.config,i=e.color_pattern,n=e.color_threshold,r="value"===n.unit,s=n.values&&n.values.length?n.values:[],a=n.max||100;return w(e.color_threshold)?function(t){var e,n,o=i[i.length-1];for(e=0;e<s.length;e++)if(n=r?t:100*t/a,n<s[e]){o=i[e];break}return o}:null},l.getYFormat=function(t){var e=this,i=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,n=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(t,r,s){var a="y2"===e.axis.getId(s)?n:i;return a.call(e,t,r)}},l.yFormat=function(t){var e=this,i=e.config,n=i.axis_y_tick_format?i.axis_y_tick_format:e.defaultValueFormat;return n(t)},l.y2Format=function(t){var e=this,i=e.config,n=i.axis_y2_tick_format?i.axis_y2_tick_format:e.defaultValueFormat;return n(t)},l.defaultValueFormat=function(t){return d(t)?+t:""},l.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},l.dataLabelFormat=function(t){var e,i=this,n=i.config.data_labels,r=function(t){return d(t)?+t:""};return e="function"==typeof n.format?n.format:"object"==typeof n.format?n.format[t]?n.format[t]===!0?r:n.format[t]:function(){return""}:r},l.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},l.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},l.getCaches=function(t){var e,i=[];for(e=0;e<t.length;e++)t[e]in this.cache&&i.push(this.cloneTarget(this.cache[t[e]]));return i};var u=l.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};l.generateClass=function(t,e){return" "+t+" "+t+this.getTargetSelectorSuffix(e)},l.classText=function(t){return this.generateClass(u.text,t.index)},l.classTexts=function(t){return this.generateClass(u.texts,t.id)},l.classShape=function(t){return this.generateClass(u.shape,t.index)},l.classShapes=function(t){return this.generateClass(u.shapes,t.id)},l.classLine=function(t){return this.classShape(t)+this.generateClass(u.line,t.id)},l.classLines=function(t){return this.classShapes(t)+this.generateClass(u.lines,t.id)},l.classCircle=function(t){return this.classShape(t)+this.generateClass(u.circle,t.index)},l.classCircles=function(t){return this.classShapes(t)+this.generateClass(u.circles,t.id)},l.classBar=function(t){return this.classShape(t)+this.generateClass(u.bar,t.index)},l.classBars=function(t){return this.classShapes(t)+this.generateClass(u.bars,t.id)},l.classArc=function(t){return this.classShape(t.data)+this.generateClass(u.arc,t.data.id)},l.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(u.arcs,t.data.id)},l.classArea=function(t){return this.classShape(t)+this.generateClass(u.area,t.id)},l.classAreas=function(t){return this.classShapes(t)+this.generateClass(u.areas,t.id)},l.classRegion=function(t,e){return this.generateClass(u.region,e)+" "+("class"in t?t["class"]:"")},l.classEvent=function(t){return this.generateClass(u.eventRect,t.index)},l.classTarget=function(t){var e=this,i=e.config.data_classes[t],n="";return i&&(n=" "+u.target+"-"+i),e.generateClass(u.target,t)+n},l.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},l.classFocused=function(t){return" "+(this.focusedTargetIds.indexOf(t.id)>=0?u.focused:"")},l.classDefocused=function(t){return" "+(this.defocusedTargetIds.indexOf(t.id)>=0?u.defocused:"")},l.classChartText=function(t){return u.chartText+this.classTarget(t.id)},l.classChartLine=function(t){return u.chartLine+this.classTarget(t.id)},l.classChartBar=function(t){return u.chartBar+this.classTarget(t.id)},l.classChartArc=function(t){return u.chartArc+this.classTarget(t.data.id)},l.getTargetSelectorSuffix=function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},l.selectorTarget=function(t,e){return(e||"")+"."+u.target+this.getTargetSelectorSuffix(t)},l.selectorTargets=function(t,e){var i=this;return t=t||[],t.length?t.map(function(t){return i.selectorTarget(t,e)}):null},l.selectorLegend=function(t){return"."+u.legendItem+this.getTargetSelectorSuffix(t)},l.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null};var d=l.isValue=function(t){return t||0===t},f=l.isFunction=function(t){return"function"==typeof t},p=l.isString=function(t){return"string"==typeof t},g=l.isUndefined=function(t){return"undefined"==typeof t},m=l.isDefined=function(t){return"undefined"!=typeof t},v=l.ceil10=function(t){return 10*Math.ceil(t/10)},y=l.asHalfPixel=function(t){return Math.ceil(t)+.5},x=l.diffDomain=function(t){return t[1]-t[0]},b=l.isEmpty=function(t){return"undefined"==typeof t||null===t||p(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length},w=l.notEmpty=function(t){return!l.isEmpty(t)},_=l.getOption=function(t,e,i){return m(t[e])?t[e]:i},k=l.hasValue=function(t,e){var i=!1;return Object.keys(t).forEach(function(n){t[n]===e&&(i=!0)}),i},C=l.getPathBox=function(t){var e=t.getBoundingClientRect(),i=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)],n=i[0].x,r=Math.min(i[0].y,i[1].y);return{x:n,y:r,width:e.width,height:e.height}};o.focus=function(t){var e,i=this.internal;t=i.mapToTargetIds(t),e=i.svg.selectAll(i.selectorTargets(t.filter(i.isTargetToShow,i))),this.revert(),this.defocus(),e.classed(u.focused,!0).classed(u.defocused,!1),i.hasArcType()&&i.expandArc(t),i.toggleFocusLegend(t,!0),i.focusedTargetIds=t,i.defocusedTargetIds=i.defocusedTargetIds.filter(function(e){return t.indexOf(e)<0})},o.defocus=function(t){var e,i=this.internal;t=i.mapToTargetIds(t),e=i.svg.selectAll(i.selectorTargets(t.filter(i.isTargetToShow,i))),e.classed(u.focused,!1).classed(u.defocused,!0),i.hasArcType()&&i.unexpandArc(t),i.toggleFocusLegend(t,!1),i.focusedTargetIds=i.focusedTargetIds.filter(function(e){return t.indexOf(e)<0}),i.defocusedTargetIds=t},o.revert=function(t){var e,i=this.internal;t=i.mapToTargetIds(t),e=i.svg.selectAll(i.selectorTargets(t)),e.classed(u.focused,!1).classed(u.defocused,!1),i.hasArcType()&&i.unexpandArc(t),i.config.legend_show&&(i.showLegend(t.filter(i.isLegendToShow.bind(i))),i.legend.selectAll(i.selectorLegends(t)).filter(function(){return i.d3.select(this).classed(u.legendItemFocused)}).classed(u.legendItemFocused,!1)),i.focusedTargetIds=[],i.defocusedTargetIds=[]},o.show=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.removeHiddenTargetIds(t),i=n.svg.selectAll(n.selectorTargets(t)),i.transition().style("opacity",1,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",1)}),e.withLegend&&n.showLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},o.hide=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.addHiddenTargetIds(t),i=n.svg.selectAll(n.selectorTargets(t)),i.transition().style("opacity",0,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",0)}),e.withLegend&&n.hideLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},o.toggle=function(t,e){var i=this,n=this.internal;n.mapToTargetIds(t).forEach(function(t){n.isTargetToShow(t)?i.hide(t,e):i.show(t,e)})},o.zoom=function(t){var e=this.internal;return t&&(e.isTimeSeries()&&(t=t.map(function(t){return e.parseDate(t)})),e.brush.extent(t),e.redraw({withUpdateXDomain:!0,withY:e.config.zoom_rescale}),e.config.zoom_onzoom.call(this,e.x.orgDomain())),e.brush.extent()},o.zoom.enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},o.unzoom=function(){var t=this.internal;t.brush.clear().update(),t.redraw({withUpdateXDomain:!0})},o.zoom.max=function(t){var e=this.internal,i=e.config,n=e.d3;return 0===t||t?void(i.zoom_x_max=n.max([e.orgXDomain[1],t])):i.zoom_x_max},o.zoom.min=function(t){var e=this.internal,i=e.config,n=e.d3;return 0===t||t?void(i.zoom_x_min=n.min([e.orgXDomain[0],t])):i.zoom_x_min},o.zoom.range=function(t){return arguments.length?(m(t.max)&&this.domain.max(t.max),void(m(t.min)&&this.domain.min(t.min))):{max:this.domain.max(),min:this.domain.min()}},o.load=function(t){var e=this.internal,i=e.config;return t.xs&&e.addXs(t.xs),"classes"in t&&Object.keys(t.classes).forEach(function(e){i.data_classes[e]=t.classes[e]}),"categories"in t&&e.isCategorized()&&(i.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(e){i.data_axes[e]=t.axes[e]}),"colors"in t&&Object.keys(t.colors).forEach(function(e){i.data_colors[e]=t.colors[e]}),"cacheIds"in t&&e.hasCaches(t.cacheIds)?void e.load(e.getCaches(t.cacheIds),t.done):void("unload"in t?e.unload(e.mapToTargetIds("boolean"==typeof t.unload&&t.unload?null:t.unload),function(){e.loadFromArgs(t)}):e.loadFromArgs(t))},o.unload=function(t){var e=this.internal;t=t||{},t instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},o.flow=function(t){var e,i,n,r,s,a,o,l,h=this.internal,c=[],u=h.getMaxDataCount(),f=0,p=0;if(t.json)i=h.convertJsonToData(t.json,t.keys);else if(t.rows)i=h.convertRowsToData(t.rows);else{if(!t.columns)return;i=h.convertColumnsToData(t.columns)}e=h.convertDataToTargets(i,!0),h.data.targets.forEach(function(t){var i,n,r=!1;for(i=0;i<e.length;i++)if(t.id===e[i].id){for(r=!0,t.values[t.values.length-1]&&(p=t.values[t.values.length-1].index+1),f=e[i].values.length,n=0;f>n;n++)e[i].values[n].index=p+n,h.isTimeSeries()||(e[i].values[n].x=p+n);t.values=t.values.concat(e[i].values),e.splice(i,1);break}r||c.push(t.id)}),h.data.targets.forEach(function(t){var e,i;for(e=0;e<c.length;e++)if(t.id===c[e])for(p=t.values[t.values.length-1].index+1,i=0;f>i;i++)t.values.push({id:t.id,index:p+i,x:h.isTimeSeries()?h.getOtherTargetX(p+i):p+i,value:null})}),h.data.targets.length&&e.forEach(function(t){var e,i=[];for(e=h.data.targets[0].values[0].index;p>e;e++)i.push({id:t.id,index:e,x:h.isTimeSeries()?h.getOtherTargetX(e):e,value:null});t.values.forEach(function(t){t.index+=p,h.isTimeSeries()||(t.x+=p)}),t.values=i.concat(t.values)}),h.data.targets=h.data.targets.concat(e),n=h.getMaxDataCount(),s=h.data.targets[0],a=s.values[0],m(t.to)?(f=0,l=h.isTimeSeries()?h.parseDate(t.to):t.to,s.values.forEach(function(t){t.x<l&&f++})):m(t.length)&&(f=t.length),u?1===u&&h.isTimeSeries()&&(o=(s.values[s.values.length-1].x-a.x)/2,r=[new Date(+a.x-o),new Date(+a.x+o)],h.updateXDomain(null,!0,!0,!1,r)):(o=h.isTimeSeries()?s.values.length>1?s.values[s.values.length-1].x-a.x:a.x-h.getXDomain(h.data.targets)[0]:1,r=[a.x-o,a.x],h.updateXDomain(null,!0,!0,!1,r)),h.updateTargets(h.data.targets),h.redraw({flow:{index:a.index,length:f,duration:d(t.duration)?t.duration:h.config.transition_duration,done:t.done,orgDataCount:u},withLegend:!0,withTransition:u>1,withTrimXDomain:!1,withUpdateXAxis:!0})},l.generateFlow=function(t){var e=this,i=e.config,n=e.d3;return function(){var r,s,a,o=t.targets,l=t.flow,h=t.drawBar,c=t.drawLine,d=t.drawArea,f=t.cx,p=t.cy,g=t.xv,m=t.xForText,v=t.yForText,y=t.duration,b=1,w=l.index,_=l.length,k=e.getValueOnIndex(e.data.targets[0].values,w),C=e.getValueOnIndex(e.data.targets[0].values,w+_),M=e.x.domain(),S=l.duration||y,T=l.done||function(){},D=e.generateWait(),A=e.xgrid||n.selectAll([]),E=e.xgridLines||n.selectAll([]),P=e.mainRegion||n.selectAll([]),L=e.mainText||n.selectAll([]),F=e.mainBar||n.selectAll([]),I=e.mainLine||n.selectAll([]),z=e.mainArea||n.selectAll([]),R=e.mainCircle||n.selectAll([]);e.flowing=!0,e.data.targets.forEach(function(t){t.values.splice(0,_)}),a=e.updateXDomain(o,!0,!0),e.updateXGrid&&e.updateXGrid(!0),l.orgDataCount?r=1===l.orgDataCount||k.x===C.x?e.x(M[0])-e.x(a[0]):e.isTimeSeries()?e.x(M[0])-e.x(a[0]):e.x(k.x)-e.x(C.x):1!==e.data.targets[0].values.length?r=e.x(M[0])-e.x(a[0]):e.isTimeSeries()?(k=e.getValueOnIndex(e.data.targets[0].values,0),C=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),r=e.x(k.x)-e.x(C.x)):r=x(a)/2,b=x(M)/x(a),s="translate("+r+",0) scale("+b+",1)",e.hideXGridFocus(),n.transition().ease("linear").duration(S).each(function(){D.add(e.axes.x.transition().call(e.xAxis)),D.add(F.transition().attr("transform",s)),D.add(I.transition().attr("transform",s)),D.add(z.transition().attr("transform",s)),D.add(R.transition().attr("transform",s)),D.add(L.transition().attr("transform",s)),D.add(P.filter(e.isRegionOnX).transition().attr("transform",s)),D.add(A.transition().attr("transform",s)),D.add(E.transition().attr("transform",s))}).call(D,function(){var t,n=[],r=[],s=[];if(_){for(t=0;_>t;t++)n.push("."+u.shape+"-"+(w+t)),r.push("."+u.text+"-"+(w+t)),s.push("."+u.eventRect+"-"+(w+t));e.svg.selectAll("."+u.shapes).selectAll(n).remove(),e.svg.selectAll("."+u.texts).selectAll(r).remove(),e.svg.selectAll("."+u.eventRects).selectAll(s).remove(),e.svg.select("."+u.xgrid).remove()}A.attr("transform",null).attr(e.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",i.axis_rotated?0:g).attr("x2",i.axis_rotated?e.width:g),E.select("text").attr("x",i.axis_rotated?e.width:0).attr("y",g),F.attr("transform",null).attr("d",h),I.attr("transform",null).attr("d",c),z.attr("transform",null).attr("d",d),R.attr("transform",null).attr("cx",f).attr("cy",p),L.attr("transform",null).attr("x",m).attr("y",v).style("fill-opacity",e.opacityForText.bind(e)),P.attr("transform",null),P.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),i.interaction_enabled&&e.redrawEventRect(),T(),e.flowing=!1})}},o.selected=function(t){var e=this.internal,i=e.d3;return i.merge(e.main.selectAll("."+u.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+u.shape).filter(function(){return i.select(this).classed(u.SELECTED)}).map(function(t){return t.map(function(t){var e=t.__data__;return e.data?e.data:e})}))},o.select=function(t,e,i){var n=this.internal,r=n.d3,s=n.config;s.data_selection_enabled&&n.main.selectAll("."+u.shapes).selectAll("."+u.shape).each(function(a,o){var l=r.select(this),h=a.data?a.data.id:a.id,c=n.getToggle(this,a).bind(n),d=s.data_selection_grouped||!t||t.indexOf(h)>=0,f=!e||e.indexOf(o)>=0,p=l.classed(u.SELECTED);l.classed(u.line)||l.classed(u.area)||(d&&f?s.data_selection_isselectable(a)&&!p&&c(!0,l.classed(u.SELECTED,!0),a,o):m(i)&&i&&p&&c(!1,l.classed(u.SELECTED,!1),a,o))})},o.unselect=function(t,e){var i=this.internal,n=i.d3,r=i.config;r.data_selection_enabled&&i.main.selectAll("."+u.shapes).selectAll("."+u.shape).each(function(s,a){var o=n.select(this),l=s.data?s.data.id:s.id,h=i.getToggle(this,s).bind(i),c=r.data_selection_grouped||!t||t.indexOf(l)>=0,d=!e||e.indexOf(a)>=0,f=o.classed(u.SELECTED);o.classed(u.line)||o.classed(u.area)||c&&d&&r.data_selection_isselectable(s)&&f&&h(!1,o.classed(u.SELECTED,!1),s,a)})},o.transform=function(t,e){var i=this.internal,n=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;i.transformTo(e,t,n)},l.transformTo=function(t,e,i){var n=this,r=!n.hasArcType(),s=i||{withTransitionForAxis:r};s.withTransitionForTransform=!1,n.transiting=!1,n.setTargetType(t,e),n.updateTargets(n.data.targets),n.updateAndRedraw(s)},o.groups=function(t){var e=this.internal,i=e.config;return g(t)?i.data_groups:(i.data_groups=t,e.redraw(),i.data_groups)},o.xgrids=function(t){var e=this.internal,i=e.config;return t?(i.grid_x_lines=t,e.redrawWithoutRescale(),i.grid_x_lines):i.grid_x_lines},o.xgrids.add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t?t:[]))},o.xgrids.remove=function(t){var e=this.internal;e.removeGridLines(t,!0)},o.ygrids=function(t){var e=this.internal,i=e.config;return t?(i.grid_y_lines=t,e.redrawWithoutRescale(),i.grid_y_lines):i.grid_y_lines},o.ygrids.add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t?t:[]))},o.ygrids.remove=function(t){var e=this.internal;e.removeGridLines(t,!1)},o.regions=function(t){var e=this.internal,i=e.config;return t?(i.regions=t,e.redrawWithoutRescale(),i.regions):i.regions},o.regions.add=function(t){var e=this.internal,i=e.config;return t?(i.regions=i.regions.concat(t),e.redrawWithoutRescale(),i.regions):i.regions},o.regions.remove=function(t){var e,i,n,r=this.internal,s=r.config;return t=t||{},e=r.getOption(t,"duration",s.transition_duration),i=r.getOption(t,"classes",[u.region]),n=r.main.select("."+u.regions).selectAll(i.map(function(t){return"."+t})),(e?n.transition().duration(e):n).style("opacity",0).remove(),s.regions=s.regions.filter(function(t){var e=!1;return t["class"]?(t["class"].split(" ").forEach(function(t){i.indexOf(t)>=0&&(e=!0)}),!e):!0}),s.regions},o.data=function(t){var e=this.internal.data.targets;return"undefined"==typeof t?e:e.filter(function(e){return[].concat(t).indexOf(e.id)>=0})},o.data.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},o.data.values=function(t){var e,i=null;return t&&(e=this.data(t),i=e[0]?e[0].values.map(function(t){return t.value}):null),i},o.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},o.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},o.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},o.category=function(t,e){var i=this.internal,n=i.config;return arguments.length>1&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},o.categories=function(t){var e=this.internal,i=e.config;return arguments.length?(i.axis_x_categories=t,e.redraw(),i.axis_x_categories):i.axis_x_categories},o.color=function(t){var e=this.internal;return e.color(t)},o.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},o.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},o.axis=function(){},o.axis.labels=function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach(function(i){e.axis.setLabelText(i,t[i])}),e.axis.updateLabels())},o.axis.max=function(t){var e=this.internal,i=e.config;return arguments.length?("object"==typeof t?(d(t.x)&&(i.axis_x_max=t.x),d(t.y)&&(i.axis_y_max=t.y),d(t.y2)&&(i.axis_y2_max=t.y2)):i.axis_y_max=i.axis_y2_max=t,void e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:i.axis_x_max,y:i.axis_y_max,y2:i.axis_y2_max}},o.axis.min=function(t){var e=this.internal,i=e.config;return arguments.length?("object"==typeof t?(d(t.x)&&(i.axis_x_min=t.x),d(t.y)&&(i.axis_y_min=t.y),d(t.y2)&&(i.axis_y2_min=t.y2)):i.axis_y_min=i.axis_y2_min=t,void e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:i.axis_x_min,y:i.axis_y_min,y2:i.axis_y2_min}},o.axis.range=function(t){return arguments.length?(m(t.max)&&this.axis.max(t.max),void(m(t.min)&&this.axis.min(t.min))):{max:this.axis.max(),min:this.axis.min()}},o.legend=function(){},o.legend.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},o.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},o.resize=function(t){var e=this.internal,i=e.config;i.size_width=t?t.width:null,i.size_height=t?t.height:null,this.flush()},o.flush=function(){var t=this.internal;t.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},o.destroy=function(){var e=this.internal;if(t.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&t.clearTimeout(e.resizeTimeout),t.detachEvent)t.detachEvent("onresize",e.resizeFunction);else if(t.removeEventListener)t.removeEventListener("resize",e.resizeFunction);else{var i=t.onresize;i&&i.add&&i.remove&&i.remove(e.resizeFunction)}return e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},o.tooltip=function(){},o.tooltip.show=function(t){var e,i,n=this.internal;t.mouse&&(i=t.mouse),t.data?n.isMultipleX()?(i=[n.x(t.data.x),n.getYScale(t.data.id)(t.data.value)],e=null):e=d(t.data.index)?t.data.index:n.getIndexByX(t.data.x):"undefined"!=typeof t.x?e=n.getIndexByX(t.x):"undefined"!=typeof t.index&&(e=t.index),n.dispatchEvent("mouseover",e,i),n.dispatchEvent("mousemove",e,i),n.config.tooltip_onshow.call(n,t.data)},o.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var M;l.isSafari=function(){var e=t.navigator.userAgent;return e.indexOf("Safari")>=0&&e.indexOf("Chrome")<0},l.isChrome=function(){var e=t.navigator.userAgent;return e.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return c}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=c:t.c3=c}(window);