d3=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function i(t){for(var e=1;t*e%1;)e*=10;return e}function n(t,e){try{for(var i in e)Object.defineProperty(t.prototype,i,{value:e[i],enumerable:!1})}catch(n){t.prototype=e}}function r(){}function s(){}function a(t,e,i){return function(){var n=i.apply(e,arguments);return n===e?t:n}}function o(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var i=0,n=As.length;n>i;++i){var r=As[i]+e;if(r in t)return r}}function l(){}function h(){}function u(t){function e(){for(var e,n=i,r=-1,s=n.length;++r<s;)(e=n[r].on)&&e.apply(this,arguments);return t}var i=[],n=new r;return e.on=function(e,r){var s,a=n.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,i=i.slice(0,s=i.indexOf(a)).concat(i.slice(s+1)),n.remove(e)),r&&i.push(n.set(e,{on:r})),t)},e}function c(){vs.event.preventDefault()}function d(){for(var t,e=vs.event;t=e.sourceEvent;)e=t;return e}function f(t){for(var e=new h,i=0,n=arguments.length;++i<n;)e[arguments[i]]=u(e);return e.of=function(i,n){return function(r){try{var s=r.sourceEvent=vs.event;r.target=t,vs.event=r,e[r.type].apply(i,n)}finally{vs.event=s}}},e}function p(t){return zs(t,Ls),t}function g(t){return"function"==typeof t?t:function(){return Ns(t,this)}}function m(t){return"function"==typeof t?t:function(){return Fs(t,this)}}function v(t,e){function i(){this.removeAttribute(t)}function n(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function s(){this.setAttributeNS(t.space,t.local,e)}function a(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}function o(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}return t=vs.ns.qualify(t),null==e?t.local?n:i:"function"==typeof e?t.local?o:a:t.local?s:r}function y(t){return t.trim().replace(/\s+/g," ")}function _(t){return new RegExp("(?:^|\\s+)"+vs.requote(t)+"(?:\\s+|$)","g")}function b(t,e){function i(){for(var i=-1;++i<r;)t[i](this,e)}function n(){for(var i=-1,n=e.apply(this,arguments);++i<r;)t[i](this,n)}t=t.trim().split(/\s+/).map(w);var r=t.length;return"function"==typeof e?n:i}function w(t){var e=_(t);return function(i,n){if(r=i.classList)return n?r.add(t):r.remove(t);var r=i.getAttribute("class")||"";n?(e.lastIndex=0,e.test(r)||i.setAttribute("class",y(r+" "+t))):i.setAttribute("class",y(r.replace(e," ")))}}function x(t,e,i){function n(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,i)}function s(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}return null==e?n:"function"==typeof e?s:r}function k(t,e){function i(){delete this[t]}function n(){this[t]=e}function r(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}return null==e?i:"function"==typeof e?r:n}function M(t){return"function"==typeof t?t:(t=vs.ns.qualify(t)).local?function(){return bs.createElementNS(t.space,t.local)}:function(){return bs.createElementNS(this.namespaceURI,t)}}function C(t){return{__data__:t}}function D(t){return function(){return Ws(this,t)}}function S(t){return arguments.length||(t=vs.ascending),function(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}}function T(t,e){for(var i=0,n=t.length;n>i;i++)for(var r,s=t[i],a=0,o=s.length;o>a;a++)(r=s[a])&&e(r,a,i);return t}function E(t){return zs(t,js),t}function H(t){var e,i;return function(n,r,s){var a,o=t[s].update,l=o.length;for(s!=i&&(i=s,e=0),r>=e&&(e=r+1);!(a=o[e])&&++e<l;);return a}}function P(){var t=this.__transition__;t&&++t.active}function I(t,e,i){function n(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){var r=h(e,_s(arguments));n.call(this),this.addEventListener(t,this[a]=r,r.$=i),r._=e}function s(){var e,i=new RegExp("^__on([^.]+)"+vs.requote(t)+"$");for(var n in this)if(e=n.match(i)){var r=this[n];this.removeEventListener(e[1],r,r.$),delete this[n]}}var a="__on"+t,o=t.indexOf("."),h=A;o>0&&(t=t.substring(0,o));var u=qs.get(t);return u&&(t=u,h=R),o?e?r:n:e?l:s}function A(t,e){return function(i){var n=vs.event;vs.event=i,e[0]=this.__data__;try{t.apply(this,e)}finally{vs.event=n}}}function R(t,e){var i=A(t,e);return function(t){var e=this,n=t.relatedTarget;n&&(n===e||8&n.compareDocumentPosition(e))||i.call(e,t)}}function z(){var t=".dragsuppress-"+ ++Us,e="touchmove"+t,i="selectstart"+t,n="dragstart"+t,r="click"+t,s=vs.select(xs).on(e,c).on(i,c).on(n,c),a=ws.style,o=a[Gs];return a[Gs]="none",function(e){function i(){s.on(r,null)}s.on(t,null),a[Gs]=o,e&&(s.on(r,function(){c(),i()},!0),setTimeout(i,0))}}function N(t,e){e.changedTouches&&(e=e.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var n=i.createSVGPoint();if(0>Vs&&(xs.scrollX||xs.scrollY)){i=vs.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=i[0][0].getScreenCTM();Vs=!(r.f||r.e),i.remove()}return Vs?(n.x=e.pageX,n.y=e.pageY):(n.x=e.clientX,n.y=e.clientY),n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function F(t){return t>0?1:0>t?-1:0}function O(t){return t>1?0:-1>t?Xs:Math.acos(t)}function W(t){return t>1?$s:-1>t?-$s:Math.asin(t)}function L(t){return((t=Math.exp(t))-1/t)/2}function Y(t){return((t=Math.exp(t))+1/t)/2}function j(t){return((t=Math.exp(2*t))-1)/(t+1)}function B(t){return(t=Math.sin(t/2))*t}function q(){}function G(t,e,i){return new U(t,e,i)}function U(t,e,i){this.h=t,this.s=e,this.l=i}function V(t,e,i){function n(t){return t>360?t-=360:0>t&&(t+=360),60>t?s+(a-s)*t/60:180>t?a:240>t?s+(a-s)*(240-t)/60:s}function r(t){return Math.round(255*n(t))}var s,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,i=0>i?0:i>1?1:i,a=.5>=i?i*(1+e):i+e-i*e,s=2*i-a,at(r(t+120),r(t),r(t-120))}function X(t,e,i){return new Z(t,e,i)}function Z(t,e,i){this.h=t,this.c=e,this.l=i}function $(t,e,i){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),K(i,Math.cos(t*=Js)*e,Math.sin(t)*e)}function K(t,e,i){return new Q(t,e,i)}function Q(t,e,i){this.l=t,this.a=e,this.b=i}function J(t,e,i){var n=(t+16)/116,r=n+e/500,s=n-i/200;return r=et(r)*ua,n=et(n)*ca,s=et(s)*da,at(nt(3.2404542*r-1.5371385*n-.4985314*s),nt(-.969266*r+1.8760108*n+.041556*s),nt(.0556434*r-.2040259*n+1.0572252*s))}function tt(t,e,i){return t>0?X(Math.atan2(i,e)*ta,Math.sqrt(e*e+i*i),t):X(NaN,NaN,t)}function et(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function it(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function nt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function rt(t){return at(t>>16,255&t>>8,255&t)}function st(t){return rt(t)+""}function at(t,e,i){return new ot(t,e,i)}function ot(t,e,i){this.r=t,this.g=e,this.b=i}function lt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ht(t,e,i){var n,r,s,a=0,o=0,l=0;if(n=/([a-z]+)\((.*)\)/i.exec(t))switch(r=n[2].split(","),n[1]){case"hsl":return i(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(ft(r[0]),ft(r[1]),ft(r[2]))}return(s=ga.get(t))?e(s.r,s.g,s.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(a=t.charAt(1),a+=a,o=t.charAt(2),o+=o,l=t.charAt(3),l+=l):7===t.length&&(a=t.substring(1,3),o=t.substring(3,5),l=t.substring(5,7)),a=parseInt(a,16),o=parseInt(o,16),l=parseInt(l,16)),e(a,o,l))}function ut(t,e,i){var n,r,s=Math.min(t/=255,e/=255,i/=255),a=Math.max(t,e,i),o=a-s,l=(a+s)/2;return o?(r=.5>l?o/(a+s):o/(2-a-s),n=t==a?(e-i)/o+(i>e?6:0):e==a?(i-t)/o+2:(t-e)/o+4,n*=60):(n=NaN,r=l>0&&1>l?0:n),G(n,r,l)}function ct(t,e,i){t=dt(t),e=dt(e),i=dt(i);var n=it((.4124564*t+.3575761*e+.1804375*i)/ua),r=it((.2126729*t+.7151522*e+.072175*i)/ca),s=it((.0193339*t+.119192*e+.9503041*i)/da);return K(116*r-16,500*(n-r),200*(r-s))}function dt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ft(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function pt(t){return"function"==typeof t?t:function(){return t}}function gt(t){return t}function mt(t){return function(e,i,n){return 2===arguments.length&&"function"==typeof i&&(n=i,i=null),vt(e,i,t,n)}}function vt(t,e,i,n){function r(){var t,e=l.status;if(!e&&l.responseText||e>=200&&300>e||304===e){try{t=i.call(s,l)}catch(n){return void a.error.call(s,n)}a.load.call(s,t)}else a.error.call(s,l)}var s={},a=vs.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,h=null;return!xs.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=vs.event;vs.event=t;try{a.progress.call(s,l)}finally{vs.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?o[t]:(null==e?delete o[t]:o[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",s):e},s.responseType=function(t){return arguments.length?(h=t,s):h},s.response=function(t){return i=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(_s(arguments)))}}),s.send=function(i,n,r){if(2===arguments.length&&"function"==typeof n&&(r=n,n=null),l.open(i,t,!0),null==e||"accept"in o||(o.accept=e+",*/*"),l.setRequestHeader)for(var u in o)l.setRequestHeader(u,o[u]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=h&&(l.responseType=h),null!=r&&s.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(s,l),l.send(null==n?null:n),s},s.abort=function(){return l.abort(),s},vs.rebind(s,a,"on"),null==n?s:s.get(yt(n))}function yt(t){return 1===t.length?function(e,i){t(null==e?i:null)}:t}function _t(){var t=wt(),e=xt()-t;e>24?(isFinite(e)&&(clearTimeout(_a),_a=setTimeout(_t,e)),ya=0):(ya=1,wa(_t))}function bt(t,e,i){var n=arguments.length;2>n&&(e=0),3>n&&(i=Date.now()),ba.callback=t,ba.time=i+e}function wt(){var t=Date.now();for(ba=ma;ba;)t>=ba.time&&(ba.flush=ba.callback(t-ba.time)),ba=ba.next;return t}function xt(){for(var t,e=ma,i=1/0;e;)e.flush?e=t?t.next=e.next:ma=e.next:(e.time<i&&(i=e.time),e=(t=e).next);return va=t,i}function kt(t,e){var i=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/i}:function(t){return t*i},symbol:t}}function Mt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Ct(t){return t+""}function Dt(){}function St(t,e,i){var n=i.s=t+e,r=n-t,s=n-r;i.t=t-s+(e-r)}function Tt(t,e){t&&Aa.hasOwnProperty(t.type)&&Aa[t.type](t,e)}function Et(t,e,i){var n,r=-1,s=t.length-i;for(e.lineStart();++r<s;)n=t[r],e.point(n[0],n[1],n[2]);e.lineEnd()}function Ht(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)Et(t[i],e,1);e.polygonEnd()}function Pt(){function t(t,e){t*=Js,e=e*Js/2+Xs/4;var i=t-n,a=Math.cos(e),o=Math.sin(e),l=s*o,h=r*a+l*Math.cos(i),u=l*Math.sin(i);za.add(Math.atan2(u,h)),n=t,r=a,s=o}var e,i,n,r,s;Na.point=function(a,o){Na.point=t,n=(e=a)*Js,r=Math.cos(o=(i=o)*Js/2+Xs/4),s=Math.sin(o)},Na.lineEnd=function(){t(e,i)}}function It(t){var e=t[0],i=t[1],n=Math.cos(i);return[n*Math.cos(e),n*Math.sin(e),Math.sin(i)]}function At(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function zt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Nt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ft(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ot(t){return[Math.atan2(t[1],t[0]),W(t[2])]}function Wt(t,e){return Math.abs(t[0]-e[0])<Ks&&Math.abs(t[1]-e[1])<Ks}function Lt(t,e){t*=Js;var i=Math.cos(e*=Js);Yt(i*Math.cos(t),i*Math.sin(t),Math.sin(e))}function Yt(t,e,i){++Fa,Wa+=(t-Wa)/Fa,La+=(e-La)/Fa,Ya+=(i-Ya)/Fa}function jt(){function t(t,r){t*=Js;var s=Math.cos(r*=Js),a=s*Math.cos(t),o=s*Math.sin(t),l=Math.sin(r),h=Math.atan2(Math.sqrt((h=i*l-n*o)*h+(h=n*a-e*l)*h+(h=e*o-i*a)*h),e*a+i*o+n*l);Oa+=h,ja+=h*(e+(e=a)),Ba+=h*(i+(i=o)),qa+=h*(n+(n=l)),Yt(e,i,n)}var e,i,n;Xa.point=function(r,s){r*=Js;var a=Math.cos(s*=Js);e=a*Math.cos(r),i=a*Math.sin(r),n=Math.sin(s),Xa.point=t,Yt(e,i,n)}}function Bt(){Xa.point=Lt}function qt(){function t(t,e){t*=Js;var i=Math.cos(e*=Js),a=i*Math.cos(t),o=i*Math.sin(t),l=Math.sin(e),h=r*l-s*o,u=s*a-n*l,c=n*o-r*a,d=Math.sqrt(h*h+u*u+c*c),f=n*a+r*o+s*l,p=d&&-O(f)/d,g=Math.atan2(d,f);Ga+=p*h,Ua+=p*u,Va+=p*c,Oa+=g,ja+=g*(n+(n=a)),Ba+=g*(r+(r=o)),qa+=g*(s+(s=l)),Yt(n,r,s)}var e,i,n,r,s;Xa.point=function(a,o){e=a,i=o,Xa.point=t,a*=Js;var l=Math.cos(o*=Js);n=l*Math.cos(a),r=l*Math.sin(a),s=Math.sin(o),Yt(n,r,s)},Xa.lineEnd=function(){t(e,i),Xa.lineEnd=Bt,Xa.point=Lt}}function Gt(){return!0}function Ut(t,e,i,n,r){var s=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,i=t[0],n=t[e];if(Wt(i,n)){r.lineStart();for(var o=0;e>o;++o)r.point((i=t[o])[0],i[1]);return void r.lineEnd()}var l={point:i,points:t,other:null,visited:!1,entry:!0,subject:!0},h={point:i,points:[i],other:l,visited:!1,entry:!1,subject:!1};l.other=h,s.push(l),a.push(h),l={point:n,points:[n],other:null,visited:!1,entry:!1,subject:!0},h={point:n,points:[n],other:l,visited:!1,entry:!0,subject:!1},l.other=h,s.push(l),a.push(h)}}),a.sort(e),Vt(s),Vt(a),s.length){for(var o=0,l=i,h=a.length;h>o;++o)a[o].entry=l=!l;for(var u,c,d,f=s[0];;){for(u=f;u.visited;)if((u=u.next)===f)return;c=u.points,r.lineStart();do{if(u.visited=u.other.visited=!0,u.entry){if(u.subject)for(var o=0;o<c.length;o++)r.point((d=c[o])[0],d[1]);else n(u.point,u.next.point,1,r);u=u.next}else{if(u.subject){c=u.prev.points;for(var o=c.length;--o>=0;)r.point((d=c[o])[0],d[1])}else n(u.point,u.prev.point,-1,r);u=u.prev}u=u.other,c=u.points}while(!u.visited);r.lineEnd()}}}function Vt(t){if(e=t.length){for(var e,i,n=0,r=t[0];++n<e;)r.next=i=t[n],i.prev=r,r=i;r.next=i=t[0],i.prev=r}}function Xt(t,e,i,n){return function(r,s){function a(e,i){var n=r(e,i);t(e=n[0],i=n[1])&&s.point(e,i)}function o(t,e){var i=r(t,e);m.point(i[0],i[1])}function l(){y.point=o,m.lineStart()}function h(){y.point=a,m.lineEnd()}function u(t,e){g.push([t,e]);var i=r(t,e);b.point(i[0],i[1])}function c(){b.lineStart(),g=[]}function d(){u(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),i=_.buffer(),n=i.length;if(g.pop(),p.push(g),g=null,n){if(1&e){t=i[0];var r,n=t.length-1,a=-1;for(s.lineStart();++a<n;)s.point((r=t[a])[0],r[1]);return void s.lineEnd()}n>1&&2&e&&i.push(i.pop().concat(i.shift())),f.push(i.filter(Zt))}}var f,p,g,m=e(s),v=r.invert(n[0],n[1]),y={point:a,lineStart:l,lineEnd:h,polygonStart:function(){y.point=u,y.lineStart=c,y.lineEnd=d,f=[],p=[],s.polygonStart()},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=h,f=vs.merge(f);var t=Qt(v,p);f.length?Ut(f,Kt,t,i,s):t&&(s.lineStart(),i(null,null,1,s),s.lineEnd()),s.polygonEnd(),f=p=null},sphere:function(){s.polygonStart(),s.lineStart(),i(null,null,1,s),s.lineEnd(),s.polygonEnd()}},_=$t(),b=e(_);return y}}function Zt(t){return t.length>1}function $t(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,i){t.push([e,i])},lineEnd:l,buffer:function(){var i=e;return e=[],t=null,i},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Kt(t,e){return((t=t.point)[0]<0?t[1]-$s-Ks:$s-t[1])-((e=e.point)[0]<0?e[1]-$s-Ks:$s-e[1])}function Qt(t,e){var i=t[0],n=t[1],r=[Math.sin(i),-Math.cos(i),0],s=0,a=0;za.reset();for(var o=0,l=e.length;l>o;++o){var h=e[o],u=h.length;if(u)for(var c=h[0],d=c[0],f=c[1]/2+Xs/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===u&&(m=0),t=h[m];var v=t[0],y=t[1]/2+Xs/4,_=Math.sin(y),b=Math.cos(y),w=v-d,x=Math.abs(w)>Xs,k=p*_;if(za.add(Math.atan2(k*Math.sin(w),g*b+k*Math.cos(w))),s+=x?w+(w>=0?2:-2)*Xs:w,x^d>=i^v>=i){var M=Rt(It(c),It(t));Ft(M);var C=Rt(r,M);Ft(C);var D=(x^w>=0?-1:1)*W(C[2]);(n>D||n===D&&(M[0]||M[1]))&&(a+=x^w>=0?1:-1)}if(!m++)break;d=v,p=_,g=b,c=t}}return(-Ks>s||Ks>s&&0>za)^1&a}function Jt(t){var e,i=NaN,n=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,a){var o=s>0?Xs:-Xs,l=Math.abs(s-i);Math.abs(l-Xs)<Ks?(t.point(i,n=(n+a)/2>0?$s:-$s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),t.point(s,n),e=0):r!==o&&l>=Xs&&(Math.abs(i-r)<Ks&&(i-=r*Ks),Math.abs(s-o)<Ks&&(s-=o*Ks),n=te(i,n,s,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),e=0),t.point(i=s,n=a),r=o},lineEnd:function(){t.lineEnd(),i=n=NaN},clean:function(){return 2-e}}}function te(t,e,i,n){var r,s,a=Math.sin(t-i);return Math.abs(a)>Ks?Math.atan((Math.sin(e)*(s=Math.cos(n))*Math.sin(i)-Math.sin(n)*(r=Math.cos(e))*Math.sin(t))/(r*s*a)):(e+n)/2}function ee(t,e,i,n){var r;if(null==t)r=i*$s,n.point(-Xs,r),n.point(0,r),n.point(Xs,r),n.point(Xs,0),n.point(Xs,-r),n.point(0,-r),n.point(-Xs,-r),n.point(-Xs,0),n.point(-Xs,r);else if(Math.abs(t[0]-e[0])>Ks){var s=(t[0]<e[0]?1:-1)*Xs;r=i*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function ie(t){function e(t,e){return Math.cos(t)*Math.cos(e)>s}function i(t){var i,s,l,h,u;return{lineStart:function(){h=l=!1,u=1},point:function(c,d){var f,p=[c,d],g=e(c,d),m=a?g?0:r(c,d):g?r(c+(0>c?Xs:-Xs),d):0;if(!i&&(h=l=g)&&t.lineStart(),g!==l&&(f=n(i,p),(Wt(i,f)||Wt(p,f))&&(p[0]+=Ks,p[1]+=Ks,g=e(p[0],p[1]))),g!==l)u=0,g?(t.lineStart(),f=n(p,i),t.point(f[0],f[1])):(f=n(i,p),t.point(f[0],f[1]),t.lineEnd()),i=f;else if(o&&i&&a^g){var v;m&s||!(v=n(p,i,!0))||(u=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||i&&Wt(i,p)||t.point(p[0],p[1]),i=p,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),i=null},clean:function(){return u|(h&&l)<<1}}}function n(t,e,i){var n=It(t),r=It(e),a=[1,0,0],o=Rt(n,r),l=At(o,o),h=o[0],u=l-h*h;if(!u)return!i&&t;var c=s*l/u,d=-s*h/u,f=Rt(a,o),p=Nt(a,c),g=Nt(o,d);zt(p,g);var m=f,v=At(p,m),y=At(m,m),_=v*v-y*(At(p,p)-1);if(!(0>_)){var b=Math.sqrt(_),w=Nt(m,(-v-b)/y);if(zt(w,p),w=Ot(w),!i)return w;var x,k=t[0],M=e[0],C=t[1],D=e[1];k>M&&(x=k,k=M,M=x);var S=M-k,T=Math.abs(S-Xs)<Ks,E=T||Ks>S;if(!T&&C>D&&(x=C,C=D,D=x),E?T?C+D>0^w[1]<(Math.abs(w[0]-k)<Ks?C:D):C<=w[1]&&w[1]<=D:S>Xs^(k<=w[0]&&w[0]<=M)){var H=Nt(m,(-v+b)/y);return zt(H,p),[w,Ot(H)]}}}function r(e,i){var n=a?t:Xs-t,r=0;return-n>e?r|=1:e>n&&(r|=2),-n>i?r|=4:i>n&&(r|=8),r}var s=Math.cos(t),a=s>0,o=Math.abs(s)>Ks,l=Ee(t,6*Js);return Xt(e,i,l,a?[0,-t]:[-Xs,t-Xs])}function ne(t,e,i,n){function r(n,r){return Math.abs(n[0]-t)<Ks?r>0?0:3:Math.abs(n[0]-i)<Ks?r>0?2:1:Math.abs(n[1]-e)<Ks?r>0?1:0:r>0?3:2}function s(t,e){return a(t.point,e.point)}function a(t,e){var i=r(t,1),n=r(e,1);return i!==n?i-n:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}function o(r,s){var a=s[0]-r[0],o=s[1]-r[1],l=[0,1];return Math.abs(a)<Ks&&Math.abs(o)<Ks?t<=r[0]&&r[0]<=i&&e<=r[1]&&r[1]<=n:re(t-r[0],a,l)&&re(r[0]-i,-a,l)&&re(e-r[1],o,l)&&re(r[1]-n,-o,l)?(l[1]<1&&(s[0]=r[0]+l[1]*a,s[1]=r[1]+l[1]*o),l[0]>0&&(r[0]+=l[0]*a,r[1]+=l[0]*o),!0):!1}return function(l){function h(t){for(var e=0,i=y.length,n=t[1],r=0;i>r;++r)for(var s,a=1,o=y[r],l=o.length,h=o[0];l>a;++a)s=o[a],h[1]<=n?s[1]>n&&u(h,s,t)>0&&++e:s[1]<=n&&u(h,s,t)<0&&--e,h=s;return 0!==e}function u(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function c(s,o,l,h){var u=0,c=0;if(null==s||(u=r(s,l))!==(c=r(o,l))||a(s,o)<0^l>0){do h.point(0===u||3===u?t:i,u>1?n:e);while((u=(u+l+4)%4)!==c)}else h.point(o[0],o[1])}function d(r,s){return r>=t&&i>=r&&s>=e&&n>=s}function f(t,e){d(t,e)&&l.point(t,e)}function p(){H.point=m,y&&y.push(_=[]),D=!0,C=!1,k=M=NaN}function g(){v&&(m(b,w),x&&C&&E.rejoin(),v.push(E.buffer())),H.point=f,C&&l.lineEnd()}function m(t,e){t=Math.max(-$a,Math.min($a,t)),e=Math.max(-$a,Math.min($a,e));var i=d(t,e);if(y&&_.push([t,e]),D)b=t,w=e,x=i,D=!1,i&&(l.lineStart(),l.point(t,e));else if(i&&C)l.point(t,e);else{var n=[k,M],r=[t,e];o(n,r)?(C||(l.lineStart(),l.point(n[0],n[1])),l.point(r[0],r[1]),i||l.lineEnd(),S=!1):i&&(l.lineStart(),l.point(t,e),S=!1)}k=t,M=e,C=i}var v,y,_,b,w,x,k,M,C,D,S,T=l,E=$t(),H={point:f,lineStart:p,lineEnd:g,polygonStart:function(){l=E,v=[],y=[],S=!0},polygonEnd:function(){l=T,v=vs.merge(v);var e=h([t,n]),i=S&&e,r=v.length;(i||r)&&(l.polygonStart(),i&&(l.lineStart(),c(null,null,1,l),l.lineEnd()),r&&Ut(v,s,e,c,l),l.polygonEnd()),v=y=_=null}};return H}}function re(t,e,i){if(Math.abs(e)<Ks)return 0>=t;var n=t/e;if(e>0){if(n>i[1])return!1;n>i[0]&&(i[0]=n)}else{if(n<i[0])return!1;n<i[1]&&(i[1]=n)}return!0}function se(t,e){function i(i,n){return i=t(i,n),e(i[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,n){return i=e.invert(i,n),i&&t.invert(i[0],i[1])}),i}function ae(t){var e=0,i=Xs/3,n=we(t),r=n(e,i);return r.parallels=function(t){return arguments.length?n(e=t[0]*Xs/180,i=t[1]*Xs/180):[180*(e/Xs),180*(i/Xs)]},r}function oe(t,e){function i(t,e){var i=Math.sqrt(s-2*r*Math.sin(e))/r;return[i*Math.sin(t*=r),a-i*Math.cos(t)]}var n=Math.sin(t),r=(n+Math.sin(e))/2,s=1+n*(2*r-n),a=Math.sqrt(s)/r;return i.invert=function(t,e){var i=a-e;return[Math.atan2(t,i)/r,W((s-(t*t+i*i)*r*r)/(2*r))]},i}function le(){function t(t,e){Qa+=r*t-n*e,n=t,r=e}var e,i,n,r;no.point=function(s,a){no.point=t,e=n=s,i=r=a},no.lineEnd=function(){t(e,i)}}function he(t,e){Ja>t&&(Ja=t),t>eo&&(eo=t),to>e&&(to=e),e>io&&(io=e)}function ue(){function t(t,e){a.push("M",t,",",e,s)}function e(t,e){a.push("M",t,",",e),o.point=i}function i(t,e){a.push("L",t,",",e)}function n(){o.point=t}function r(){a.push("Z")}var s=ce(4.5),a=[],o={point:t,lineStart:function(){o.point=e},lineEnd:n,polygonStart:function(){o.lineEnd=r},polygonEnd:function(){o.lineEnd=n,o.point=t},pointRadius:function(t){return s=ce(t),o},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return o}function ce(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function de(t,e){Wa+=t,La+=e,++Ya}function fe(){function t(t,n){var r=t-e,s=n-i,a=Math.sqrt(r*r+s*s);ja+=a*(e+t)/2,Ba+=a*(i+n)/2,qa+=a,de(e=t,i=n)}var e,i;so.point=function(n,r){so.point=t,de(e=n,i=r)}}function pe(){so.point=de}function ge(){function t(t,e){var i=t-n,s=e-r,a=Math.sqrt(i*i+s*s);ja+=a*(n+t)/2,Ba+=a*(r+e)/2,qa+=a,a=r*t-n*e,Ga+=a*(n+t),Ua+=a*(r+e),Va+=3*a,de(n=t,r=e)}var e,i,n,r;so.point=function(s,a){so.point=t,de(e=n=s,i=r=a)},so.lineEnd=function(){t(e,i)}}function me(t){function e(e,i){t.moveTo(e,i),t.arc(e,i,a,0,Zs)}function i(e,i){t.moveTo(e,i),o.point=n}function n(e,i){t.lineTo(e,i)}function r(){o.point=e}function s(){t.closePath()}var a=4.5,o={point:e,lineStart:function(){o.point=i},lineEnd:r,polygonStart:function(){o.lineEnd=s},polygonEnd:function(){o.lineEnd=r,o.point=e},pointRadius:function(t){return a=t,o},result:l};return o}function ve(t){function e(e){function n(i,n){i=t(i,n),e.point(i[0],i[1])}function r(){_=NaN,M.point=a,e.lineStart()}function a(n,r){var a=It([n,r]),o=t(n,r);i(_,b,y,w,x,k,_=o[0],b=o[1],y=n,w=a[0],x=a[1],k=a[2],s,e),e.point(_,b)}function o(){M.point=n,e.lineEnd()}function l(){r(),M.point=h,M.lineEnd=u}function h(t,e){a(c=t,d=e),f=_,p=b,g=w,m=x,v=k,M.point=a}function u(){i(_,b,y,w,x,k,f,p,c,g,m,v,s,e),M.lineEnd=o,o()}var c,d,f,p,g,m,v,y,_,b,w,x,k,M={point:n,lineStart:r,lineEnd:o,polygonStart:function(){e.polygonStart(),M.lineStart=l},polygonEnd:function(){e.polygonEnd(),M.lineStart=r}};return M}function i(e,s,a,o,l,h,u,c,d,f,p,g,m,v){var y=u-e,_=c-s,b=y*y+_*_;if(b>4*n&&m--){var w=o+f,x=l+p,k=h+g,M=Math.sqrt(w*w+x*x+k*k),C=Math.asin(k/=M),D=Math.abs(Math.abs(k)-1)<Ks?(a+d)/2:Math.atan2(x,w),S=t(D,C),T=S[0],E=S[1],H=T-e,P=E-s,I=_*H-y*P;(I*I/b>n||Math.abs((y*H+_*P)/b-.5)>.3||r>o*f+l*p+h*g)&&(i(e,s,a,o,l,h,T,E,D,w/=M,x/=M,k,m,v),v.point(T,E),i(T,E,D,w,x,k,u,c,d,f,p,g,m,v))}}var n=.5,r=Math.cos(30*Js),s=16;return e.precision=function(t){return arguments.length?(s=(n=t*t)>0&&16,e):Math.sqrt(n)},e}function ye(t){this.stream=t}function _e(t){var e=ve(function(e,i){return t([e*ta,i*ta])});return function(t){var i=new ye(t=e(t));return i.point=function(e,i){t.point(e*Js,i*Js)},i}}function be(t){return we(function(){return t})()}function we(t){function e(t){return t=o(t[0]*Js,t[1]*Js),[t[0]*d+l,h-t[1]*d]}function i(t){return t=o.invert((t[0]-l)/d,(h-t[1])/d),t&&[t[0]*ta,t[1]*ta]}function n(){o=se(a=Ce(v,y,_),s);var t=s(g,m);return l=f-t[0]*d,h=p+t[1]*d,r()}function r(){return u&&(u.valid=!1,u=null),e}var s,a,o,l,h,u,c=ve(function(t,e){return t=s(t,e),[t[0]*d+l,h-t[1]*d]}),d=150,f=480,p=250,g=0,m=0,v=0,y=0,_=0,b=Za,w=gt,x=null,k=null;return e.stream=function(t){return u&&(u.valid=!1),u=xe(b(a,c(w(t)))),u.valid=!0,u},e.clipAngle=function(t){return arguments.length?(b=null==t?(x=t,Za):ie((x=+t)*Js),r()):x},e.clipExtent=function(t){return arguments.length?(k=t,w=t?ne(t[0][0],t[0][1],t[1][0],t[1][1]):gt,r()):k},e.scale=function(t){return arguments.length?(d=+t,n()):d},e.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],n()):[f,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Js,m=t[1]%360*Js,n()):[g*ta,m*ta]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Js,y=t[1]%360*Js,_=t.length>2?t[2]%360*Js:0,n()):[v*ta,y*ta,_*ta]},vs.rebind(e,c,"precision"),function(){return s=t.apply(this,arguments),e.invert=s.invert&&i,n()}}function xe(t){var e=new ye(t);return e.point=function(e,i){t.point(e*Js,i*Js)},e}function ke(t,e){return[t,e]}function Me(t,e){return[t>Xs?t-Zs:-Xs>t?t+Zs:t,e]}function Ce(t,e,i){return t?e||i?se(Se(t),Te(e,i)):Se(t):e||i?Te(e,i):Me}function De(t){return function(e,i){return e+=t,[e>Xs?e-Zs:-Xs>e?e+Zs:e,i]}}function Se(t){var e=De(t);return e.invert=De(-t),e}function Te(t,e){function i(t,e){var i=Math.cos(e),o=Math.cos(t)*i,l=Math.sin(t)*i,h=Math.sin(e),u=h*n+o*r;return[Math.atan2(l*s-u*a,o*n-h*r),W(u*s+l*a)]}var n=Math.cos(t),r=Math.sin(t),s=Math.cos(e),a=Math.sin(e);return i.invert=function(t,e){var i=Math.cos(e),o=Math.cos(t)*i,l=Math.sin(t)*i,h=Math.sin(e),u=h*s-l*a;return[Math.atan2(l*s+h*a,o*n+u*r),W(u*n-o*r)]},i}function Ee(t,e){var i=Math.cos(t),n=Math.sin(t);return function(r,s,a,o){var l=a*e;null!=r?(r=He(i,r),s=He(i,s),(a>0?s>r:r>s)&&(r+=a*Zs)):(r=t+a*Zs,s=t-.5*l);for(var h,u=r;a>0?u>s:s>u;u-=l)o.point((h=Ot([i,-n*Math.cos(u),-n*Math.sin(u)]))[0],h[1])}}function He(t,e){var i=It(e);i[0]-=t,Ft(i);var n=O(-i[1]);return((-i[2]<0?-n:n)+2*Math.PI-Ks)%(2*Math.PI)}function Pe(t,e,i){var n=vs.range(t,e-Ks,i).concat(e);return function(t){return n.map(function(e){return[t,e]})}}function Ie(t,e,i){var n=vs.range(t,e-Ks,i).concat(e);return function(t){return n.map(function(e){return[e,t]})}}function Ae(t){return t.source}function Re(t){return t.target}function ze(t,e,i,n){var r=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=r*Math.cos(t),h=r*Math.sin(t),u=a*Math.cos(i),c=a*Math.sin(i),d=2*Math.asin(Math.sqrt(B(n-e)+r*a*B(i-t))),f=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*f,i=Math.sin(d-t)*f,n=i*l+e*u,r=i*h+e*c,a=i*s+e*o;return[Math.atan2(r,n)*ta,Math.atan2(a,Math.sqrt(n*n+r*r))*ta]}:function(){return[t*ta,e*ta]};return p.distance=d,p}function Ne(){function t(t,r){var s=Math.sin(r*=Js),a=Math.cos(r),o=Math.abs((t*=Js)-e),l=Math.cos(o);ao+=Math.atan2(Math.sqrt((o=a*Math.sin(o))*o+(o=n*s-i*a*l)*o),i*s+n*a*l),e=t,i=s,n=a}var e,i,n;oo.point=function(r,s){e=r*Js,i=Math.sin(s*=Js),n=Math.cos(s),oo.point=t},oo.lineEnd=function(){oo.point=oo.lineEnd=l}}function Fe(t,e){function i(e,i){var n=Math.cos(e),r=Math.cos(i),s=t(n*r);return[s*r*Math.sin(e),s*Math.sin(i)]}return i.invert=function(t,i){var n=Math.sqrt(t*t+i*i),r=e(n),s=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*s,n*a),Math.asin(n&&i*s/n)]},i}function Oe(t,e){function i(t,e){var i=Math.abs(Math.abs(e)-$s)<Ks?0:a/Math.pow(r(e),s);return[i*Math.sin(s*t),a-i*Math.cos(s*t)]}var n=Math.cos(t),r=function(t){return Math.tan(Xs/4+t/2)},s=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),a=n*Math.pow(r(t),s)/s;return s?(i.invert=function(t,e){var i=a-e,n=F(s)*Math.sqrt(t*t+i*i);return[Math.atan2(t,i)/s,2*Math.atan(Math.pow(a/n,1/s))-$s]},i):Le}function We(t,e){function i(t,e){var i=s-e;return[i*Math.sin(r*t),s-i*Math.cos(r*t)]}var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),s=n/r+t;return Math.abs(r)<Ks?ke:(i.invert=function(t,e){var i=s-e;return[Math.atan2(t,i)/r,s-F(r)*Math.sqrt(t*t+i*i)]},i)}function Le(t,e){return[t,Math.log(Math.tan(Xs/4+e/2))]}function Ye(t){var e,i=be(t),n=i.scale,r=i.translate,s=i.clipExtent;return i.scale=function(){var t=n.apply(i,arguments);return t===i?e?i.clipExtent(null):i:t},i.translate=function(){var t=r.apply(i,arguments);return t===i?e?i.clipExtent(null):i:t},i.clipExtent=function(t){var a=s.apply(i,arguments);if(a===i){if(e=null==t){var o=Xs*n(),l=r();s([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else e&&(a=null);return a},i.clipExtent(null)}function je(t,e){var i=Math.cos(e)*Math.sin(t);return[Math.log((1+i)/(1-i))/2,Math.atan2(Math.tan(e),Math.cos(t))]}function Be(t){function e(e){function a(){h.push("M",s(t(u),o))}for(var l,h=[],u=[],c=-1,d=e.length,f=pt(i),p=pt(n);++c<d;)r.call(this,l=e[c],c)?u.push([+f.call(this,l,c),+p.call(this,l,c)]):u.length&&(a(),u=[]);return u.length&&a(),h.length?h.join(""):null}var i=qe,n=Ge,r=Gt,s=Ue,a=s.key,o=.7;return e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?s=t:(s=po.get(t)||Ue).key,e):a},e.tension=function(t){return arguments.length?(o=t,e):o},e}function qe(t){return t[0]}function Ge(t){return t[1]}function Ue(t){return t.join("L")}function Ve(t){return Ue(t)+"Z"}function Xe(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);return i>1&&r.push("H",n[0]),r.join("")}function Ze(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("V",(n=t[e])[1],"H",n[0]);return r.join("")}function $e(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("H",(n=t[e])[0],"V",n[1]);return r.join("")}function Ke(t,e){return t.length<4?Ue(t):t[1]+ti(t.slice(1,t.length-1),ei(t,e))}function Qe(t,e){return t.length<3?Ue(t):t[0]+ti((t.push(t[0]),t),ei([t[t.length-2]].concat(t,[t[1]]),e))}function Je(t,e){return t.length<3?Ue(t):t[0]+ti(t,ei(t,e))}function ti(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ue(t);var i=t.length!=e.length,n="",r=t[0],s=t[1],a=e[0],o=a,l=1;if(i&&(n+="Q"+(s[0]-2*a[0]/3)+","+(s[1]-2*a[1]/3)+","+s[0]+","+s[1],r=t[1],l=2),e.length>1){o=e[1],s=t[l],l++,n+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1];for(var h=2;h<e.length;h++,l++)s=t[l],o=e[h],n+="S"+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1]}if(i){var u=t[l];n+="Q"+(s[0]+2*o[0]/3)+","+(s[1]+2*o[1]/3)+","+u[0]+","+u[1]}return n}function ei(t,e){for(var i,n=[],r=(1-e)/2,s=t[0],a=t[1],o=1,l=t.length;++o<l;)i=s,s=a,a=t[o],n.push([r*(a[0]-i[0]),r*(a[1]-i[1])]);return n}function ii(t){if(t.length<3)return Ue(t);var e=1,i=t.length,n=t[0],r=n[0],s=n[1],a=[r,r,r,(n=t[1])[0]],o=[s,s,s,n[1]],l=[r,",",s,"L",ai(vo,a),",",ai(vo,o)];for(t.push(t[i-1]);++e<=i;)n=t[e],a.shift(),a.push(n[0]),o.shift(),o.push(n[1]),oi(l,a,o);return t.pop(),l.push("L",n),l.join("")}function ni(t){if(t.length<4)return Ue(t);for(var e,i=[],n=-1,r=t.length,s=[0],a=[0];++n<3;)e=t[n],s.push(e[0]),a.push(e[1]);for(i.push(ai(vo,s)+","+ai(vo,a)),--n;++n<r;)e=t[n],s.shift(),s.push(e[0]),a.shift(),a.push(e[1]),oi(i,s,a);return i.join("")}function ri(t){for(var e,i,n=-1,r=t.length,s=r+4,a=[],o=[];++n<4;)i=t[n%r],a.push(i[0]),o.push(i[1]);for(e=[ai(vo,a),",",ai(vo,o)],--n;++n<s;)i=t[n%r],a.shift(),a.push(i[0]),o.shift(),o.push(i[1]),oi(e,a,o);return e.join("")}function si(t,e){var i=t.length-1;if(i)for(var n,r,s=t[0][0],a=t[0][1],o=t[i][0]-s,l=t[i][1]-a,h=-1;++h<=i;)n=t[h],r=h/i,n[0]=e*n[0]+(1-e)*(s+r*o),n[1]=e*n[1]+(1-e)*(a+r*l);return ii(t)}function ai(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function oi(t,e,i){t.push("C",ai(go,e),",",ai(go,i),",",ai(mo,e),",",ai(mo,i),",",ai(vo,e),",",ai(vo,i))}function li(t,e){return(e[1]-t[1])/(e[0]-t[0])}function hi(t){for(var e=0,i=t.length-1,n=[],r=t[0],s=t[1],a=n[0]=li(r,s);++e<i;)n[e]=(a+(a=li(r=s,s=t[e+1])))/2;return n[e]=a,n}function ui(t){for(var e,i,n,r,s=[],a=hi(t),o=-1,l=t.length-1;++o<l;)e=li(t[o],t[o+1]),Math.abs(e)<Ks?a[o]=a[o+1]=0:(i=a[o]/e,n=a[o+1]/e,r=i*i+n*n,r>9&&(r=3*e/Math.sqrt(r),a[o]=r*i,a[o+1]=r*n));for(o=-1;++o<=l;)r=(t[Math.min(l,o+1)][0]-t[Math.max(0,o-1)][0])/(6*(1+a[o]*a[o])),s.push([r||0,a[o]*r||0]);return s}function ci(t){return t.length<3?Ue(t):t[0]+ti(t,ui(t))}function di(t,e,i,n){var r,s,a,o,l,h,u;return r=n[t],s=r[0],a=r[1],r=n[e],o=r[0],l=r[1],r=n[i],h=r[0],u=r[1],(u-a)*(o-s)-(l-a)*(h-s)>0}function fi(t,e,i){return(i[0]-e[0])*(t[1]-e[1])<(i[1]-e[1])*(t[0]-e[0])}function pi(t,e,i,n){var r=t[0],s=i[0],a=e[0]-r,o=n[0]-s,l=t[1],h=i[1],u=e[1]-l,c=n[1]-h,d=(o*(l-h)-c*(r-s))/(c*a-o*u);return[r+d*a,l+d*u]}function gi(t){var e=t[0],i=t[t.length-1];return!(e[0]-i[0]||e[1]-i[1]);
}function mi(t,e){var i={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},n={list:[],leftEnd:null,rightEnd:null,init:function(){n.leftEnd=n.createHalfEdge(null,"l"),n.rightEnd=n.createHalfEdge(null,"l"),n.leftEnd.r=n.rightEnd,n.rightEnd.l=n.leftEnd,n.list.unshift(n.leftEnd,n.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=n.leftEnd;do e=e.r;while(e!=n.rightEnd&&r.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?i.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?i.bottomSite:t.edge.region[_o[t.side]]}},r={bisect:function(t,e){var i={region:{l:t,r:e},ep:{l:null,r:null}},n=e.x-t.x,r=e.y-t.y,s=n>0?n:-n,a=r>0?r:-r;return i.c=t.x*n+t.y*r+.5*(n*n+r*r),s>a?(i.a=1,i.b=r/n,i.c/=n):(i.b=1,i.a=n/r,i.c/=r),i},intersect:function(t,e){var i=t.edge,n=e.edge;if(!i||!n||i.region.r==n.region.r)return null;var r=i.a*n.b-i.b*n.a;if(Math.abs(r)<1e-10)return null;var s,a,o=(i.c*n.b-n.c*i.b)/r,l=(n.c*i.a-i.c*n.a)/r,h=i.region.r,u=n.region.r;h.y<u.y||h.y==u.y&&h.x<u.x?(s=t,a=i):(s=e,a=n);var c=o>=a.region.r.x;return c&&"l"===s.side||!c&&"r"===s.side?null:{x:o,y:l}},rightOf:function(t,e){var i=t.edge,n=i.region.r,r=e.x>n.x;if(r&&"l"===t.side)return 1;if(!r&&"r"===t.side)return 0;if(1===i.a){var s=e.y-n.y,a=e.x-n.x,o=0,l=0;if(!r&&i.b<0||r&&i.b>=0?l=o=s>=i.b*a:(l=e.x+e.y*i.b>i.c,i.b<0&&(l=!l),l||(o=1)),!o){var h=n.x-i.region.l.x;l=i.b*(a*a-s*s)<h*s*(1+2*a/h+i.b*i.b),i.b<0&&(l=!l)}}else{var u=i.c-i.a*e.x,c=e.y-u,d=e.x-n.x,f=u-n.y;l=c*c>d*d+f*f}return"l"===t.side?l:!l},endPoint:function(t,i,n){t.ep[i]=n,t.ep[_o[i]]&&e(t)},distance:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}},s={list:[],insert:function(t,e,i){t.vertex=e,t.ystar=e.y+i;for(var n=0,r=s.list,a=r.length;a>n;n++){var o=r[n];if(!(t.ystar>o.ystar||t.ystar==o.ystar&&e.x>o.vertex.x))break}r.splice(n,0,t)},del:function(t){for(var e=0,i=s.list,n=i.length;n>e&&i[e]!=t;++e);i.splice(e,1)},empty:function(){return 0===s.list.length},nextEvent:function(t){for(var e=0,i=s.list,n=i.length;n>e;++e)if(i[e]==t)return i[e+1];return null},min:function(){var t=s.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return s.list.shift()}};n.init(),i.bottomSite=i.list.shift();for(var a,o,l,h,u,c,d,f,p,g,m,v,y,_=i.list.shift();;)if(s.empty()||(a=s.min()),_&&(s.empty()||_.y<a.y||_.y==a.y&&_.x<a.x))o=n.leftBound(_),l=n.right(o),d=n.rightRegion(o),v=r.bisect(d,_),c=n.createHalfEdge(v,"l"),n.insert(o,c),g=r.intersect(o,c),g&&(s.del(o),s.insert(o,g,r.distance(g,_))),o=c,c=n.createHalfEdge(v,"r"),n.insert(o,c),g=r.intersect(c,l),g&&s.insert(c,g,r.distance(g,_)),_=i.list.shift();else{if(s.empty())break;o=s.extractMin(),h=n.left(o),l=n.right(o),u=n.right(l),d=n.leftRegion(o),f=n.rightRegion(l),m=o.vertex,r.endPoint(o.edge,o.side,m),r.endPoint(l.edge,l.side,m),n.del(o),s.del(l),n.del(l),y="l",d.y>f.y&&(p=d,d=f,f=p,y="r"),v=r.bisect(d,f),c=n.createHalfEdge(v,y),n.insert(h,c),r.endPoint(v,_o[y],m),g=r.intersect(h,c),g&&(s.del(h),s.insert(h,g,r.distance(g,d))),g=r.intersect(c,u),g&&s.insert(c,g,r.distance(g,d))}for(o=n.right(n.leftEnd);o!=n.rightEnd;o=n.right(o))e(o.edge)}function vi(t){return t.x}function yi(t){return t.y}function _i(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function bi(t,e,i,n,r,s){if(!t(e,i,n,r,s)){var a=.5*(i+r),o=.5*(n+s),l=e.nodes;l[0]&&bi(t,l[0],i,n,a,o),l[1]&&bi(t,l[1],a,n,r,o),l[2]&&bi(t,l[2],i,o,a,s),l[3]&&bi(t,l[3],a,o,r,s)}}function wi(t,e){t=vs.rgb(t),e=vs.rgb(e);var i=t.r,n=t.g,r=t.b,s=e.r-i,a=e.g-n,o=e.b-r;return function(t){return"#"+lt(Math.round(i+s*t))+lt(Math.round(n+a*t))+lt(Math.round(r+o*t))}}function xi(t,e){var i,n={},r={};for(i in t)i in e?n[i]=Ci(t[i],e[i]):r[i]=t[i];for(i in e)i in t||(r[i]=e[i]);return function(t){for(i in n)r[i]=n[i](t);return r}}function ki(t,e){return e-=t=+t,function(i){return t+e*i}}function Mi(t,e){var i,n,r,s,a,o=0,l=0,h=[],u=[];for(t+="",e+="",bo.lastIndex=0,n=0;i=bo.exec(e);++n)i.index&&h.push(e.substring(o,l=i.index)),u.push({i:h.length,x:i[0]}),h.push(null),o=bo.lastIndex;for(o<e.length&&h.push(e.substring(o)),n=0,s=u.length;(i=bo.exec(t))&&s>n;++n)if(a=u[n],a.x==i[0]){if(a.i)if(null==h[a.i+1])for(h[a.i-1]+=a.x,h.splice(a.i,1),r=n+1;s>r;++r)u[r].i--;else for(h[a.i-1]+=a.x+h[a.i+1],h.splice(a.i,2),r=n+1;s>r;++r)u[r].i-=2;else if(null==h[a.i+1])h[a.i]=a.x;else for(h[a.i]=a.x+h[a.i+1],h.splice(a.i+1,1),r=n+1;s>r;++r)u[r].i--;u.splice(n,1),s--,n--}else a.x=ki(parseFloat(i[0]),parseFloat(a.x));for(;s>n;)a=u.pop(),null==h[a.i+1]?h[a.i]=a.x:(h[a.i]=a.x+h[a.i+1],h.splice(a.i+1,1)),s--;return 1===h.length?null==h[0]?(a=u[0].x,function(t){return a(t)+""}):function(){return e}:function(t){for(n=0;s>n;++n)h[(a=u[n]).i]=a.x(t);return h.join("")}}function Ci(t,e){for(var i,n=vs.interpolators.length;--n>=0&&!(i=vs.interpolators[n](t,e)););return i}function Di(t,e){var i,n=[],r=[],s=t.length,a=e.length,o=Math.min(t.length,e.length);for(i=0;o>i;++i)n.push(Ci(t[i],e[i]));for(;s>i;++i)r[i]=t[i];for(;a>i;++i)r[i]=e[i];return function(t){for(i=0;o>i;++i)r[i]=n[i](t);return r}}function Si(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Ti(t){return function(e){return 1-t(1-e)}}function Ei(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Hi(t){return t*t}function Pi(t){return t*t*t}function Ii(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(.5>t?i:3*(t-e)+i-.75)}function Ai(t){return function(e){return Math.pow(e,t)}}function Ri(t){return 1-Math.cos(t*$s)}function zi(t){return Math.pow(2,10*(t-1))}function Ni(t){return 1-Math.sqrt(1-t*t)}function Fi(t,e){var i;return arguments.length<2&&(e=.45),arguments.length?i=e/Zs*Math.asin(1/t):(t=1,i=e/4),function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-i)*Zs/e)}}function Oi(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Wi(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Li(t,e){t=vs.hcl(t),e=vs.hcl(e);var i=t.h,n=t.c,r=t.l,s=e.h-i,a=e.c-n,o=e.l-r;return isNaN(a)&&(a=0,n=isNaN(n)?e.c:n),isNaN(s)?(s=0,i=isNaN(i)?e.h:i):s>180?s-=360:-180>s&&(s+=360),function(t){return $(i+s*t,n+a*t,r+o*t)+""}}function Yi(t,e){t=vs.hsl(t),e=vs.hsl(e);var i=t.h,n=t.s,r=t.l,s=e.h-i,a=e.s-n,o=e.l-r;return isNaN(a)&&(a=0,n=isNaN(n)?e.s:n),isNaN(s)?(s=0,i=isNaN(i)?e.h:i):s>180?s-=360:-180>s&&(s+=360),function(t){return V(i+s*t,n+a*t,r+o*t)+""}}function ji(t,e){t=vs.lab(t),e=vs.lab(e);var i=t.l,n=t.a,r=t.b,s=e.l-i,a=e.a-n,o=e.b-r;return function(t){return J(i+s*t,n+a*t,r+o*t)+""}}function Bi(t,e){return e-=t,function(i){return Math.round(t+e*i)}}function qi(t){var e=[t.a,t.b],i=[t.c,t.d],n=Ui(e),r=Gi(e,i),s=Ui(Vi(i,e,-r))||0;e[0]*i[1]<i[0]*e[1]&&(e[0]*=-1,e[1]*=-1,n*=-1,r*=-1),this.rotate=(n?Math.atan2(e[1],e[0]):Math.atan2(-i[0],i[1]))*ta,this.translate=[t.e,t.f],this.scale=[n,s],this.skew=s?Math.atan2(r,s)*ta:0}function Gi(t,e){return t[0]*e[0]+t[1]*e[1]}function Ui(t){var e=Math.sqrt(Gi(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Vi(t,e,i){return t[0]+=i*e[0],t[1]+=i*e[1],t}function Xi(t,e){var i,n=[],r=[],s=vs.transform(t),a=vs.transform(e),o=s.translate,l=a.translate,h=s.rotate,u=a.rotate,c=s.skew,d=a.skew,f=s.scale,p=a.scale;return o[0]!=l[0]||o[1]!=l[1]?(n.push("translate(",null,",",null,")"),r.push({i:1,x:ki(o[0],l[0])},{i:3,x:ki(o[1],l[1])})):l[0]||l[1]?n.push("translate("+l+")"):n.push(""),h!=u?(h-u>180?u+=360:u-h>180&&(h+=360),r.push({i:n.push(n.pop()+"rotate(",null,")")-2,x:ki(h,u)})):u&&n.push(n.pop()+"rotate("+u+")"),c!=d?r.push({i:n.push(n.pop()+"skewX(",null,")")-2,x:ki(c,d)}):d&&n.push(n.pop()+"skewX("+d+")"),f[0]!=p[0]||f[1]!=p[1]?(i=n.push(n.pop()+"scale(",null,",",null,")"),r.push({i:i-4,x:ki(f[0],p[0])},{i:i-2,x:ki(f[1],p[1])})):(1!=p[0]||1!=p[1])&&n.push(n.pop()+"scale("+p+")"),i=r.length,function(t){for(var e,s=-1;++s<i;)n[(e=r[s]).i]=e.x(t);return n.join("")}}function Zi(t,e){return e=e-(t=+t)?1/(e-t):0,function(i){return(i-t)*e}}function $i(t,e){return e=e-(t=+t)?1/(e-t):0,function(i){return Math.max(0,Math.min(1,(i-t)*e))}}function Ki(t){for(var e=t.source,i=t.target,n=Ji(e,i),r=[e];e!==n;)e=e.parent,r.push(e);for(var s=r.length;i!==n;)r.splice(s,0,i),i=i.parent;return r}function Qi(t){for(var e=[],i=t.parent;null!=i;)e.push(t),t=i,i=i.parent;return e.push(t),e}function Ji(t,e){if(t===e)return t;for(var i=Qi(t),n=Qi(e),r=i.pop(),s=n.pop(),a=null;r===s;)a=r,r=i.pop(),s=n.pop();return a}function tn(t){t.fixed|=2}function en(t){t.fixed&=-7}function nn(t){t.fixed|=4,t.px=t.x,t.py=t.y}function rn(t){t.fixed&=-5}function sn(t,e,i){var n=0,r=0;if(t.charge=0,!t.leaf)for(var s,a=t.nodes,o=a.length,l=-1;++l<o;)s=a[l],null!=s&&(sn(s,e,i),t.charge+=s.charge,n+=s.charge*s.cx,r+=s.charge*s.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var h=e*i[t.point.index];t.charge+=t.pointCharge=h,n+=h*t.point.x,r+=h*t.point.y}t.cx=n/t.charge,t.cy=r/t.charge}function an(t,e){return vs.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=un,t}function on(t){return t.children}function ln(t){return t.value}function hn(t,e){return e.value-t.value}function un(t){return vs.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function cn(t){return t.x}function dn(t){return t.y}function fn(t,e,i){t.y0=e,t.y=i}function pn(t){return vs.range(t.length)}function gn(t){for(var e=-1,i=t[0].length,n=[];++e<i;)n[e]=0;return n}function mn(t){for(var e,i=1,n=0,r=t[0][1],s=t.length;s>i;++i)(e=t[i][1])>r&&(n=i,r=e);return n}function vn(t){return t.reduce(yn,0)}function yn(t,e){return t+e[1]}function _n(t,e){return bn(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function bn(t,e){for(var i=-1,n=+t[0],r=(t[1]-n)/e,s=[];++i<=e;)s[i]=r*i+n;return s}function wn(t){return[vs.min(t),vs.max(t)]}function xn(t,e){return t.parent==e.parent?1:2}function kn(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function Mn(t){var e,i=t.children;return i&&(e=i.length)?i[e-1]:t._tree.thread}function Cn(t,e){var i=t.children;if(i&&(r=i.length))for(var n,r,s=-1;++s<r;)e(n=Cn(i[s],e),t)>0&&(t=n);return t}function Dn(t,e){return t.x-e.x}function Sn(t,e){return e.x-t.x}function Tn(t,e){return t.depth-e.depth}function En(t,e){function i(t,n){var r=t.children;if(r&&(a=r.length))for(var s,a,o=null,l=-1;++l<a;)s=r[l],i(s,o),o=s;e(t,n)}i(t,null)}function Hn(t){for(var e,i=0,n=0,r=t.children,s=r.length;--s>=0;)e=r[s]._tree,e.prelim+=i,e.mod+=i,i+=e.shift+(n+=e.change)}function Pn(t,e,i){t=t._tree,e=e._tree;var n=i/(e.number-t.number);t.change+=n,e.change-=n,e.shift+=i,e.prelim+=i,e.mod+=i}function In(t,e,i){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:i}function An(t,e){return t.value-e.value}function Rn(t,e){var i=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=i,i._pack_prev=e}function zn(t,e){t._pack_next=e,e._pack_prev=t}function Nn(t,e){var i=e.x-t.x,n=e.y-t.y,r=t.r+e.r;return.999*r*r>i*i+n*n}function Fn(t){function e(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),d=Math.min(t.y-t.r,d),f=Math.max(t.y+t.r,f)}if((i=t.children)&&(h=i.length)){var i,n,r,s,a,o,l,h,u=1/0,c=-1/0,d=1/0,f=-1/0;if(i.forEach(On),n=i[0],n.x=-n.r,n.y=0,e(n),h>1&&(r=i[1],r.x=r.r,r.y=0,e(r),h>2))for(s=i[2],Yn(n,r,s),e(s),Rn(n,s),n._pack_prev=s,Rn(s,r),r=n._pack_next,a=3;h>a;a++){Yn(n,r,s=i[a]);var p=0,g=1,m=1;for(o=r._pack_next;o!==r;o=o._pack_next,g++)if(Nn(o,s)){p=1;break}if(1==p)for(l=n._pack_prev;l!==o._pack_prev&&!Nn(l,s);l=l._pack_prev,m++);p?(m>g||g==m&&r.r<n.r?zn(n,r=o):zn(n=l,r),a--):(Rn(n,s),r=s,e(s))}var v=(u+c)/2,y=(d+f)/2,_=0;for(a=0;h>a;a++)s=i[a],s.x-=v,s.y-=y,_=Math.max(_,s.r+Math.sqrt(s.x*s.x+s.y*s.y));t.r=_,i.forEach(Wn)}}function On(t){t._pack_next=t._pack_prev=t}function Wn(t){delete t._pack_next,delete t._pack_prev}function Ln(t,e,i,n){var r=t.children;if(t.x=e+=n*t.x,t.y=i+=n*t.y,t.r*=n,r)for(var s=-1,a=r.length;++s<a;)Ln(r[s],e,i,n)}function Yn(t,e,i){var n=t.r+i.r,r=e.x-t.x,s=e.y-t.y;if(n&&(r||s)){var a=e.r+i.r,o=r*r+s*s;a*=a,n*=n;var l=.5+(n-a)/(2*o),h=Math.sqrt(Math.max(0,2*a*(n+o)-(n-=o)*n-a*a))/(2*o);i.x=t.x+l*r+h*s,i.y=t.y+l*s-h*r}else i.x=t.x+n,i.y=t.y}function jn(t){return 1+vs.max(t,function(t){return t.y})}function Bn(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function qn(t){var e=t.children;return e&&e.length?qn(e[0]):t}function Gn(t){var e,i=t.children;return i&&(e=i.length)?Gn(i[e-1]):t}function Un(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Vn(t,e){var i=t.x+e[3],n=t.y+e[0],r=t.dx-e[1]-e[3],s=t.dy-e[0]-e[2];return 0>r&&(i+=r/2,r=0),0>s&&(n+=s/2,s=0),{x:i,y:n,dx:r,dy:s}}function Xn(t){var e=t[0],i=t[t.length-1];return i>e?[e,i]:[i,e]}function Zn(t){return t.rangeExtent?t.rangeExtent():Xn(t.range())}function $n(t,e,i,n){var r=i(t[0],t[1]),s=n(e[0],e[1]);return function(t){return s(r(t))}}function Kn(t,e){var i,n=0,r=t.length-1,s=t[n],a=t[r];return s>a&&(i=n,n=r,r=i,i=s,s=a,a=i),t[n]=e.floor(s),t[r]=e.ceil(a),t}function Qn(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Ho}function Jn(t,e,i,n){var r=[],s=[],a=0,o=Math.min(t.length,e.length)-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=o;)r.push(i(t[a-1],t[a])),s.push(n(e[a-1],e[a]));return function(e){var i=vs.bisect(t,e,1,o)-1;return s[i](r[i](e))}}function tr(t,e,i,n){function r(){var r=Math.min(t.length,e.length)>2?Jn:$n,l=n?$i:Zi;return a=r(t,e,l,i),o=r(e,t,l,Ci),s}function s(t){return a(t)}var a,o;return s.invert=function(t){return o(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},s.range=function(t){return arguments.length?(e=t,r()):e},s.rangeRound=function(t){return s.range(t).interpolate(Bi)},s.clamp=function(t){return arguments.length?(n=t,r()):n},s.interpolate=function(t){return arguments.length?(i=t,r()):i},s.ticks=function(e){return rr(t,e)},s.tickFormat=function(e,i){return sr(t,e,i)},s.nice=function(e){return ir(t,e),r()},s.copy=function(){return tr(t,e,i,n)},r()}function er(t,e){return vs.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ir(t,e){return Kn(t,Qn(nr(t,e)[2]))}function nr(t,e){null==e&&(e=10);var i=Xn(t),n=i[1]-i[0],r=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),s=e/n*r;return.15>=s?r*=10:.35>=s?r*=5:.75>=s&&(r*=2),i[0]=Math.ceil(i[0]/r)*r,i[1]=Math.floor(i[1]/r)*r+.5*r,i[2]=r,i}function rr(t,e){return vs.range.apply(vs,nr(t,e))}function sr(t,e,i){var n=-Math.floor(Math.log(nr(t,e)[2])/Math.LN10+.01);return vs.format(i?i.replace(Sa,function(t,e,i,r,s,a,o,l,h,u){return[e,i,r,s,a,o,l,h||"."+(n-2*("%"===u)),u].join("")}):",."+n+"f")}function ar(t,e,i,n){function r(t){return(i?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function s(t){return i?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(r(e))}return a.invert=function(e){return s(t.invert(e))},a.domain=function(e){return arguments.length?(i=e[0]>=0,t.domain((n=e.map(Number)).map(r)),a):n},a.base=function(i){return arguments.length?(e=+i,t.domain(n.map(r)),a):e},a.nice=function(){var e=Kn(n.map(r),i?Math:Io);return t.domain(e),n=e.map(s),a},a.ticks=function(){var t=Xn(n),a=[],o=t[0],l=t[1],h=Math.floor(r(o)),u=Math.ceil(r(l)),c=e%1?2:e;if(isFinite(u-h)){if(i){for(;u>h;h++)for(var d=1;c>d;d++)a.push(s(h)*d);a.push(s(h))}else for(a.push(s(h));h++<u;)for(var d=c-1;d>0;d--)a.push(s(h)*d);for(h=0;a[h]<o;h++);for(u=a.length;a[u-1]>l;u--);a=a.slice(h,u)}return a},a.tickFormat=function(t,e){if(!arguments.length)return Po;arguments.length<2?e=Po:"function"!=typeof e&&(e=vs.format(e));var n,o=Math.max(.1,t/a.ticks().length),l=i?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/s(l(r(t)+n))<=o?e(t):""}},a.copy=function(){return ar(t.copy(),e,i,n)},er(a,t)}function or(t,e,i){function n(e){return t(r(e))}var r=lr(e),s=lr(1/e);return n.invert=function(e){return s(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain((i=e.map(Number)).map(r)),n):i},n.ticks=function(t){return rr(i,t)},n.tickFormat=function(t,e){return sr(i,t,e)},n.nice=function(t){return n.domain(ir(i,t))},n.exponent=function(a){return arguments.length?(r=lr(e=a),s=lr(1/e),t.domain(i.map(r)),n):e},n.copy=function(){return or(t.copy(),e,i)},er(n,t)}function lr(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function hr(t,e){function i(i){return a[((s.get(i)||"range"===e.t&&s.set(i,t.push(i)))-1)%a.length]}function n(e,i){return vs.range(t.length).map(function(t){return e+i*t})}var s,a,o;return i.domain=function(n){if(!arguments.length)return t;t=[],s=new r;for(var a,o=-1,l=n.length;++o<l;)s.has(a=n[o])||s.set(a,t.push(a));return i[e.t].apply(i,e.a)},i.range=function(t){return arguments.length?(a=t,o=0,e={t:"range",a:arguments},i):a},i.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],h=r[1],u=(h-l)/(Math.max(1,t.length-1)+s);return a=n(t.length<2?(l+h)/2:l+u*s/2,u),o=0,e={t:"rangePoints",a:arguments},i},i.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var h=r[1]<r[0],u=r[h-0],c=r[1-h],d=(c-u)/(t.length-s+2*l);return a=n(u+d*l,d),h&&a.reverse(),o=d*(1-s),e={t:"rangeBands",a:arguments},i},i.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var h=r[1]<r[0],u=r[h-0],c=r[1-h],d=Math.floor((c-u)/(t.length-s+2*l)),f=c-u-(t.length-s)*d;return a=n(u+Math.round(f/2),d),h&&a.reverse(),o=Math.round(d*(1-s)),e={t:"rangeRoundBands",a:arguments},i},i.rangeBand=function(){return o},i.rangeExtent=function(){return Xn(e.a[0])},i.copy=function(){return hr(t,e)},i.domain(t)}function ur(t,e){function i(){var i=0,s=e.length;for(r=[];++i<s;)r[i-1]=vs.quantile(t,i/s);return n}function n(t){return isNaN(t=+t)?void 0:e[vs.bisect(r,t)]}var r;return n.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(vs.ascending),i()):t},n.range=function(t){return arguments.length?(e=t,i()):e},n.quantiles=function(){return r},n.invertExtent=function(i){return i=e.indexOf(i),0>i?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},n.copy=function(){return ur(t,e)},i()}function cr(t,e,i){function n(e){return i[Math.max(0,Math.min(a,Math.floor(s*(e-t))))]}function r(){return s=i.length/(e-t),a=i.length-1,n}var s,a;return n.domain=function(i){return arguments.length?(t=+i[0],e=+i[i.length-1],r()):[t,e]},n.range=function(t){return arguments.length?(i=t,r()):i},n.invertExtent=function(e){return e=i.indexOf(e),e=0>e?NaN:e/s+t,[e,e+1/s]},n.copy=function(){return cr(t,e,i)},r()}function dr(t,e){function i(i){return i>=i?e[vs.bisect(t,i)]:void 0}return i.domain=function(e){return arguments.length?(t=e,i):t},i.range=function(t){return arguments.length?(e=t,i):e},i.invertExtent=function(i){return i=e.indexOf(i),[t[i-1],t[i]]},i.copy=function(){return dr(t,e)},i}function fr(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(i){return arguments.length?(t=i.map(e),e):t},e.ticks=function(e){return rr(t,e)},e.tickFormat=function(e,i){return sr(t,e,i)},e.copy=function(){return fr(t)},e}function pr(t){return t.innerRadius}function gr(t){return t.outerRadius}function mr(t){return t.startAngle}function vr(t){return t.endAngle}function yr(t){for(var e,i,n,r=-1,s=t.length;++r<s;)e=t[r],i=e[0],n=e[1]+Fo,e[0]=i*Math.cos(n),e[1]=i*Math.sin(n);return t}function _r(t){function e(e){function l(){g.push("M",o(t(v),c),u,h(t(m.reverse()),c),"Z")}for(var d,f,p,g=[],m=[],v=[],y=-1,_=e.length,b=pt(i),w=pt(r),x=i===n?function(){return f}:pt(n),k=r===s?function(){return p}:pt(s);++y<_;)a.call(this,d=e[y],y)?(m.push([f=+b.call(this,d,y),p=+w.call(this,d,y)]),v.push([+x.call(this,d,y),+k.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var i=qe,n=qe,r=0,s=Ge,a=Gt,o=Ue,l=o.key,h=o,u="L",c=.7;return e.x=function(t){return arguments.length?(i=n=t,e):n},e.x0=function(t){return arguments.length?(i=t,e):i},e.x1=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=s=t,e):s},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(s=t,e):s},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?o=t:(o=po.get(t)||Ue).key,h=o.reverse||o,u=o.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(c=t,e):c},e}function br(t){return t.radius}function wr(t){return[t.x,t.y]}function xr(t){return function(){var e=t.apply(this,arguments),i=e[0],n=e[1]+Fo;return[i*Math.cos(n),i*Math.sin(n)]}}function kr(){return 64}function Mr(){return"circle"}function Cr(t){var e=Math.sqrt(t/Xs);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Dr(t,e){return zs(t,qo),t.id=e,t}function Sr(t,e,i,n){var r=t.id;return T(t,"function"==typeof i?function(t,s,a){t.__transition__[r].tween.set(e,n(i.call(t,t.__data__,s,a)))}:(i=n(i),function(t){t.__transition__[r].tween.set(e,i)}))}function Tr(t){return null==t&&(t=""),function(){this.textContent=t}}function Er(t,e,i,n){var s=t.__transition__||(t.__transition__={active:0,count:0}),a=s[i];if(!a){var o=n.time;a=s[i]={tween:new r,time:o,ease:n.ease,delay:n.delay,duration:n.duration},++s.count,vs.timer(function(n){function r(n){return s.active>i?h():(s.active=i,a.event&&a.event.start.call(t,u,e),a.tween.forEach(function(i,n){(n=n.call(t,u,e))&&p.push(n)}),l(n||1)?1:void bt(l,d,o))}function l(n){if(s.active!==i)return h();for(var r=n/f,o=c(r),l=p.length;l>0;)p[--l].call(t,o);return r>=1?(a.event&&a.event.end.call(t,u,e),h()):void 0}function h(){return--s.count?delete s[i]:delete t.__transition__,1}var u=t.__data__,c=a.ease,d=a.delay,f=a.duration,p=[];return n>=d?r(n-d):void bt(r,d,o)},0,o)}}function Hr(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Pr(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Ir(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ar(t,e,i){function n(e){var i=t(e),n=s(i,1);return n-e>e-i?i:n}function r(i){return e(i=t(new Ko(i-1)),1),i}function s(t,i){return e(t=new Ko(+t),i),t}function a(t,n,s){var a=r(t),o=[];if(s>1)for(;n>a;)i(a)%s||o.push(new Date(+a)),e(a,1);else for(;n>a;)o.push(new Date(+a)),e(a,1);return o}function o(t,e,i){try{Ko=Ir;var n=new Ir;return n._=t,a(n,e,i)}finally{Ko=Date}}t.floor=t,t.round=n,t.ceil=r,t.offset=s,t.range=a;var l=t.utc=Rr(t);return l.floor=l,l.round=Rr(n),l.ceil=Rr(r),l.offset=Rr(s),l.range=o,t}function Rr(t){return function(e,i){try{Ko=Ir;var n=new Ir;return n._=e,t(n,i)._}finally{Ko=Date}}}function zr(t){function e(e){for(var n,r,s,a=[],o=-1,l=0;++o<i;)37===t.charCodeAt(o)&&(a.push(t.substring(l,o)),null!=(r=ml[n=t.charAt(++o)])&&(n=t.charAt(++o)),(s=vl[n])&&(n=s(e,null==r?"e"===n?" ":"0":r)),a.push(n),l=o+1);return a.push(t.substring(l,o)),a.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},n=Nr(i,t,e,0);if(n!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var r=null!=i.Z&&Ko!==Ir,s=new(r?Ir:Ko);return"j"in i?s.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(s.setFullYear(i.y,0,1),s.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(s.getDay()+5)%7:i.w+7*i.U-(s.getDay()+6)%7)):s.setFullYear(i.y,i.m,i.d),s.setHours(i.H+Math.floor(i.Z/100),i.M+i.Z%100,i.S,i.L),r?s._:s},e.toString=function(){return t},e}function Nr(t,e,i,n){for(var r,s,a,o=0,l=e.length,h=i.length;l>o;){if(n>=h)return-1;if(r=e.charCodeAt(o++),37===r){if(a=e.charAt(o++),s=yl[a in ml?e.charAt(o++):a],!s||(n=s(t,i,n))<0)return-1}else if(r!=i.charCodeAt(n++))return-1}return n}function Fr(t){return new RegExp("^(?:"+t.map(vs.requote).join("|")+")","i")}function Or(t){for(var e=new r,i=-1,n=t.length;++i<n;)e.set(t[i].toLowerCase(),i);return e}function Wr(t,e,i){var n=0>t?"-":"",r=(n?-t:t)+"",s=r.length;return n+(i>s?new Array(i-s+1).join(e)+r:r)}function Lr(t,e,i){hl.lastIndex=0;var n=hl.exec(e.substring(i));return n?(t.w=ul.get(n[0].toLowerCase()),i+n[0].length):-1}function Yr(t,e,i){ol.lastIndex=0;var n=ol.exec(e.substring(i));return n?(t.w=ll.get(n[0].toLowerCase()),i+n[0].length):-1}function jr(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function Br(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i));return n?(t.U=+n[0],i+n[0].length):-1}function qr(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i));return n?(t.W=+n[0],i+n[0].length):-1}function Gr(t,e,i){fl.lastIndex=0;var n=fl.exec(e.substring(i));return n?(t.m=pl.get(n[0].toLowerCase()),i+n[0].length):-1}function Ur(t,e,i){cl.lastIndex=0;var n=cl.exec(e.substring(i));return n?(t.m=dl.get(n[0].toLowerCase()),i+n[0].length):-1}function Vr(t,e,i){return Nr(t,vl.c.toString(),e,i)}function Xr(t,e,i){return Nr(t,vl.x.toString(),e,i)}function Zr(t,e,i){return Nr(t,vl.X.toString(),e,i)}function $r(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function Kr(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+2));return n?(t.y=Jr(+n[0]),i+n[0].length):-1}function Qr(t,e,i){return/^[+-]\d{4}$/.test(e=e.substring(i,i+5))?(t.Z=+e,i+5):-1}function Jr(t){return t+(t>68?1900:2e3)}function ts(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function es(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function is(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+3));return n?(t.j=+n[0],i+n[0].length):-1}function ns(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function rs(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function ss(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function as(t,e,i){_l.lastIndex=0;var n=_l.exec(e.substring(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function os(t,e,i){var n=bl.get(e.substring(i,i+=2).toLowerCase());return null==n?-1:(t.p=n,i)}function ls(t){var e=t.getTimezoneOffset(),i=e>0?"-":"+",n=~~(Math.abs(e)/60),r=Math.abs(e)%60;return i+Wr(n,"0",2)+Wr(r,"0",2)}function hs(t,e,i){gl.lastIndex=0;var n=gl.exec(e.substring(i,i+1));return n?i+n[0].length:-1}function us(t){function e(t){try{Ko=Ir;var e=new Ko;return e._=t,i(e)}finally{Ko=Date}}var i=zr(t);return e.parse=function(t){try{Ko=Ir;var e=i.parse(t);return e&&e._}finally{Ko=Date}},e.toString=i.toString,e}function cs(t){return t.toISOString()}function ds(t,e,i){function n(e){return t(e)}function r(t,i){var n=t[1]-t[0],r=n/i,s=vs.bisect(xl,r);return s==xl.length?[e.year,nr(t.map(function(t){return t/31536e6}),i)[2]]:s?e[r/xl[s-1]<xl[s]/r?s-1:s]:[Dl,nr(t,i)[2]]}return n.invert=function(e){return fs(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e),n):t.domain().map(fs)},n.nice=function(t,e){function i(i){return!isNaN(i)&&!t.range(i,fs(+i+1),e).length}var s=n.domain(),a=Xn(s),o=null==t?r(a,10):"number"==typeof t&&r(a,t);return o&&(t=o[0],e=o[1]),n.domain(Kn(s,e>1?{floor:function(e){for(;i(e=t.floor(e));)e=fs(e-1);return e},ceil:function(e){for(;i(e=t.ceil(e));)e=fs(+e+1);return e}}:t))},n.ticks=function(t,e){var i=Xn(n.domain()),s=null==t?r(i,10):"number"==typeof t?r(i,t):!t.range&&[{range:t},e];return s&&(t=s[0],e=s[1]),t.range(i[0],fs(+i[1]+1),1>e?1:e)},n.tickFormat=function(){return i},n.copy=function(){return ds(t.copy(),e,i)},er(n,t)}function fs(t){return new Date(t)}function ps(t){return function(e){for(var i=t.length-1,n=t[i];!n[1](e);)n=t[--i];return n[0](e)}}function gs(t){return JSON.parse(t.responseText)}function ms(t){var e=bs.createRange();return e.selectNode(bs.body),e.createContextualFragment(t.responseText)}var vs={version:"3.3.6"};Date.now||(Date.now=function(){return+new Date});var ys=[].slice,_s=function(t){return ys.call(t)},bs=document,ws=bs.documentElement,xs=window;try{_s(ws.childNodes)[0].nodeType}catch(ks){_s=function(t){for(var e=t.length,i=new Array(e);e--;)i[e]=t[e];return i}}try{bs.createElement("div").style.setProperty("opacity",0,"")}catch(Ms){var Cs=xs.Element.prototype,Ds=Cs.setAttribute,Ss=Cs.setAttributeNS,Ts=xs.CSSStyleDeclaration.prototype,Es=Ts.setProperty;Cs.setAttribute=function(t,e){Ds.call(this,t,e+"")},Cs.setAttributeNS=function(t,e,i){Ss.call(this,t,e,i+"")},Ts.setProperty=function(t,e,i){Es.call(this,t,e+"",i)}}vs.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:NaN},vs.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},vs.min=function(t,e){var i,n,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&!(null!=(i=t[r])&&i>=i);)i=void 0;for(;++r<s;)null!=(n=t[r])&&i>n&&(i=n)}else{for(;++r<s&&!(null!=(i=e.call(t,t[r],r))&&i>=i);)i=void 0;for(;++r<s;)null!=(n=e.call(t,t[r],r))&&i>n&&(i=n)}return i},vs.max=function(t,e){var i,n,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&!(null!=(i=t[r])&&i>=i);)i=void 0;for(;++r<s;)null!=(n=t[r])&&n>i&&(i=n)}else{for(;++r<s&&!(null!=(i=e.call(t,t[r],r))&&i>=i);)i=void 0;for(;++r<s;)null!=(n=e.call(t,t[r],r))&&n>i&&(i=n)}return i},vs.extent=function(t,e){var i,n,r,s=-1,a=t.length;if(1===arguments.length){for(;++s<a&&!(null!=(i=r=t[s])&&i>=i);)i=r=void 0;for(;++s<a;)null!=(n=t[s])&&(i>n&&(i=n),n>r&&(r=n))}else{for(;++s<a&&!(null!=(i=r=e.call(t,t[s],s))&&i>=i);)i=void 0;for(;++s<a;)null!=(n=e.call(t,t[s],s))&&(i>n&&(i=n),n>r&&(r=n))}return[i,r]},vs.sum=function(t,e){var i,n=0,r=t.length,s=-1;if(1===arguments.length)for(;++s<r;)isNaN(i=+t[s])||(n+=i);else for(;++s<r;)isNaN(i=+e.call(t,t[s],s))||(n+=i);return n},vs.mean=function(e,i){var n,r=e.length,s=0,a=-1,o=0;if(1===arguments.length)for(;++a<r;)t(n=e[a])&&(s+=(n-s)/++o);else for(;++a<r;)t(n=i.call(e,e[a],a))&&(s+=(n-s)/++o);return o?s:void 0},vs.quantile=function(t,e){var i=(t.length-1)*e+1,n=Math.floor(i),r=+t[n-1],s=i-n;return s?r+s*(t[n]-r):r},vs.median=function(e,i){return arguments.length>1&&(e=e.map(i)),e=e.filter(t),e.length?vs.quantile(e.sort(vs.ascending),.5):void 0},vs.bisector=function(t){return{left:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);r>n;){var s=n+r>>>1;t.call(e,e[s],s)<i?n=s+1:r=s}return n},right:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);r>n;){var s=n+r>>>1;i<t.call(e,e[s],s)?r=s:n=s+1}return n}}};var Hs=vs.bisector(function(t){return t});vs.bisectLeft=Hs.left,vs.bisect=vs.bisectRight=Hs.right,vs.shuffle=function(t){for(var e,i,n=t.length;n;)i=0|Math.random()*n--,e=t[n],t[n]=t[i],t[i]=e;return t},vs.permute=function(t,e){for(var i=e.length,n=new Array(i);i--;)n[i]=t[e[i]];return n},vs.pairs=function(t){for(var e,i=0,n=t.length-1,r=t[0],s=new Array(0>n?0:n);n>i;)s[i]=[e=r,r=t[++i]];return s},vs.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,i=vs.min(arguments,e),n=new Array(i);++t<i;)for(var r,s=-1,a=n[t]=new Array(r);++s<r;)a[s]=arguments[s][t];return n},vs.transpose=function(t){return vs.zip.apply(vs,t)},vs.keys=function(t){var e=[];for(var i in t)e.push(i);return e},vs.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},vs.entries=function(t){var e=[];for(var i in t)e.push({key:i,value:t[i]});return e},vs.merge=function(t){return Array.prototype.concat.apply([],t)},vs.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),1/0===(e-t)/n)throw new Error("infinite range");var r,s=[],a=i(Math.abs(n)),o=-1;if(t*=a,e*=a,n*=a,0>n)for(;(r=t+n*++o)>e;)s.push(r/a);else for(;(r=t+n*++o)<e;)s.push(r/a);return s},vs.map=function(t){var e=new r;if(t instanceof r)t.forEach(function(t,i){e.set(t,i)});else for(var i in t)e.set(i,t[i]);return e},n(r,{has:function(t){return Ps+t in this},get:function(t){return this[Ps+t]},set:function(t,e){return this[Ps+t]=e},remove:function(t){return t=Ps+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,i){t.push(i)}),t},entries:function(){var t=[];return this.forEach(function(e,i){t.push({key:e,value:i})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Is&&t.call(this,e.substring(1),this[e])}});var Ps="\x00",Is=Ps.charCodeAt(0);vs.nest=function(){function t(e,o,l){if(l>=a.length)return n?n.call(s,o):i?o.sort(i):o;for(var h,u,c,d,f=-1,p=o.length,g=a[l++],m=new r;++f<p;)(d=m.get(h=g(u=o[f])))?d.push(u):m.set(h,[u]);return e?(u=e(),c=function(i,n){u.set(i,t(e,n,l))}):(u={},c=function(i,n){u[i]=t(e,n,l)}),m.forEach(c),u}function e(t,i){if(i>=a.length)return t;var n=[],r=o[i++];return t.forEach(function(t,r){n.push({key:t,values:e(r,i)})}),r?n.sort(function(t,e){return r(t.key,e.key)}):n}var i,n,s={},a=[],o=[];return s.map=function(e,i){
return t(i,e,0)},s.entries=function(i){return e(t(vs.map,i,0),0)},s.key=function(t){return a.push(t),s},s.sortKeys=function(t){return o[a.length-1]=t,s},s.sortValues=function(t){return i=t,s},s.rollup=function(t){return n=t,s},s},vs.set=function(t){var e=new s;if(t)for(var i=0,n=t.length;n>i;++i)e.add(t[i]);return e},n(s,{has:function(t){return Ps+t in this},add:function(t){return this[Ps+t]=!0,t},remove:function(t){return t=Ps+t,t in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Is&&t.call(this,e.substring(1))}}),vs.behavior={},vs.rebind=function(t,e){for(var i,n=1,r=arguments.length;++n<r;)t[i=arguments[n]]=a(t,e,e[i]);return t};var As=["webkit","ms","moz","Moz","o","O"];vs.dispatch=function(){for(var t=new h,e=-1,i=arguments.length;++e<i;)t[arguments[e]]=u(t);return t},h.prototype.on=function(t,e){var i=t.indexOf("."),n="";if(i>=0&&(n=t.substring(i+1),t=t.substring(0,i)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},vs.event=null,vs.requote=function(t){return t.replace(Rs,"\\$&")};var Rs=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,zs={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)t[i]=e[i]},Ns=function(t,e){return e.querySelector(t)},Fs=function(t,e){return e.querySelectorAll(t)},Os=ws[o(ws,"matchesSelector")],Ws=function(t,e){return Os.call(t,e)};"function"==typeof Sizzle&&(Ns=function(t,e){return Sizzle(t,e)[0]||null},Fs=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},Ws=Sizzle.matchesSelector),vs.selection=function(){return Bs};var Ls=vs.selection.prototype=[];Ls.select=function(t){var e,i,n,r,s=[];t=g(t);for(var a=-1,o=this.length;++a<o;){s.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var l=-1,h=n.length;++l<h;)(r=n[l])?(e.push(i=t.call(r,r.__data__,l,a)),i&&"__data__"in r&&(i.__data__=r.__data__)):e.push(null)}return p(s)},Ls.selectAll=function(t){var e,i,n=[];t=m(t);for(var r=-1,s=this.length;++r<s;)for(var a=this[r],o=-1,l=a.length;++o<l;)(i=a[o])&&(n.push(e=_s(t.call(i,i.__data__,o,r))),e.parentNode=i);return p(n)};var Ys={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};vs.ns={prefix:Ys,qualify:function(t){var e=t.indexOf(":"),i=t;return e>=0&&(i=t.substring(0,e),t=t.substring(e+1)),Ys.hasOwnProperty(i)?{space:Ys[i],local:t}:t}},Ls.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var i=this.node();return t=vs.ns.qualify(t),t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}for(e in t)this.each(v(e,t[e]));return this}return this.each(v(t,e))},Ls.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var i=this.node(),n=(t=t.trim().split(/^|\s+/g)).length,r=-1;if(e=i.classList){for(;++r<n;)if(!e.contains(t[r]))return!1}else for(e=i.getAttribute("class");++r<n;)if(!_(t[r]).test(e))return!1;return!0}for(e in t)this.each(b(e,t[e]));return this}return this.each(b(t,e))},Ls.style=function(t,e,i){var n=arguments.length;if(3>n){if("string"!=typeof t){2>n&&(e="");for(i in t)this.each(x(i,t[i],e));return this}if(2>n)return xs.getComputedStyle(this.node(),null).getPropertyValue(t);i=""}return this.each(x(t,e,i))},Ls.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(k(e,t[e]));return this}return this.each(k(t,e))},Ls.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ls.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ls.append=function(t){return t=M(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ls.insert=function(t,e){return t=M(t),e=g(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments))})},Ls.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Ls.data=function(t,e){function i(t,i){var n,s,a,o=t.length,c=i.length,d=Math.min(o,c),f=new Array(c),p=new Array(c),g=new Array(o);if(e){var m,v=new r,y=new r,_=[];for(n=-1;++n<o;)m=e.call(s=t[n],s.__data__,n),v.has(m)?g[n]=s:v.set(m,s),_.push(m);for(n=-1;++n<c;)m=e.call(i,a=i[n],n),(s=v.get(m))?(f[n]=s,s.__data__=a):y.has(m)||(p[n]=C(a)),y.set(m,a),v.remove(m);for(n=-1;++n<o;)v.has(_[n])&&(g[n]=t[n])}else{for(n=-1;++n<d;)s=t[n],a=i[n],s?(s.__data__=a,f[n]=s):p[n]=C(a);for(;c>n;++n)p[n]=C(i[n]);for(;o>n;++n)g[n]=t[n]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,l.push(p),h.push(f),u.push(g)}var n,s,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++a<o;)(s=n[a])&&(t[a]=s.__data__);return t}var l=E([]),h=p([]),u=p([]);if("function"==typeof t)for(;++a<o;)i(n=this[a],t.call(n,n.parentNode.__data__,a));else for(;++a<o;)i(n=this[a],t);return h.enter=function(){return l},h.exit=function(){return u},h},Ls.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ls.filter=function(t){var e,i,n,r=[];"function"!=typeof t&&(t=D(t));for(var s=0,a=this.length;a>s;s++){r.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var o=0,l=i.length;l>o;o++)(n=i[o])&&t.call(n,n.__data__,o)&&e.push(n)}return p(r)},Ls.order=function(){for(var t=-1,e=this.length;++t<e;)for(var i,n=this[t],r=n.length-1,s=n[r];--r>=0;)(i=n[r])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},Ls.sort=function(t){t=S.apply(this,arguments);for(var e=-1,i=this.length;++e<i;)this[e].sort(t);return this.order()},Ls.each=function(t){return T(this,function(e,i,n){t.call(e,e.__data__,i,n)})},Ls.call=function(t){var e=_s(arguments);return t.apply(e[0]=this,e),this},Ls.empty=function(){return!this.node()},Ls.node=function(){for(var t=0,e=this.length;e>t;t++)for(var i=this[t],n=0,r=i.length;r>n;n++){var s=i[n];if(s)return s}return null},Ls.size=function(){var t=0;return this.each(function(){++t}),t};var js=[];vs.selection.enter=E,vs.selection.enter.prototype=js,js.append=Ls.append,js.empty=Ls.empty,js.node=Ls.node,js.call=Ls.call,js.size=Ls.size,js.select=function(t){for(var e,i,n,r,s,a=[],o=-1,l=this.length;++o<l;){n=(r=this[o]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var h=-1,u=r.length;++h<u;)(s=r[h])?(e.push(n[h]=i=t.call(r.parentNode,s.__data__,h,o)),i.__data__=s.__data__):e.push(null)}return p(a)},js.insert=function(t,e){return arguments.length<2&&(e=H(this)),Ls.insert.call(this,t,e)},Ls.transition=function(){for(var t,e,i=Lo||++Go,n=[],r=Yo||{time:Date.now(),ease:Ii,delay:0,duration:250},s=-1,a=this.length;++s<a;){n.push(t=[]);for(var o=this[s],l=-1,h=o.length;++l<h;)(e=o[l])&&Er(e,l,i,r),t.push(e)}return Dr(n,i)},Ls.interrupt=function(){return this.each(P)},vs.select=function(t){var e=["string"==typeof t?Ns(t,bs):t];return e.parentNode=ws,p([e])},vs.selectAll=function(t){var e=_s("string"==typeof t?Fs(t,bs):t);return e.parentNode=ws,p([e])};var Bs=vs.select(ws);Ls.on=function(t,e,i){var n=arguments.length;if(3>n){if("string"!=typeof t){2>n&&(e=!1);for(i in t)this.each(I(i,t[i],e));return this}if(2>n)return(n=this.node()["__on"+t])&&n._;i=!1}return this.each(I(t,e,i))};var qs=vs.map({mouseenter:"mouseover",mouseleave:"mouseout"});qs.forEach(function(t){"on"+t in bs&&qs.remove(t)});var Gs=o(ws.style,"userSelect"),Us=0;vs.mouse=function(t){return N(t,d())};var Vs=/WebKit/.test(xs.navigator.userAgent)?-1:0;vs.touches=function(t,e){return arguments.length<2&&(e=d().touches),e?_s(e).map(function(e){var i=N(t,e);return i.identifier=e.identifier,i}):[]},vs.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function e(){return vs.event.changedTouches[0].identifier}function i(t,e){return vs.touches(t).filter(function(t){return t.identifier===e})[0]}function n(t,e,i,n){return function(){function a(){var t=e(u,f),i=t[0]-g[0],n=t[1]-g[1];m|=i|n,g=t,c({type:"drag",x:t[0]+l[0],y:t[1]+l[1],dx:i,dy:n})}function o(){v.on(i+"."+p,null).on(n+"."+p,null),y(m&&vs.event.target===d),c({type:"dragend"})}var l,h=this,u=h.parentNode,c=r.of(h,arguments),d=vs.event.target,f=t(),p=null==f?"drag":"drag-"+f,g=e(u,f),m=0,v=vs.select(xs).on(i+"."+p,a).on(n+"."+p,o),y=z();s?(l=s.apply(h,arguments),l=[l.x-g[0],l.y-g[1]]):l=[0,0],c({type:"dragstart"})}}var r=f(t,"drag","dragstart","dragend"),s=null,a=n(l,vs.mouse,"mousemove","mouseup"),o=n(e,i,"touchmove","touchend");return t.origin=function(e){return arguments.length?(s=e,t):s},vs.rebind(t,r,"on")};var Xs=Math.PI,Zs=2*Xs,$s=Xs/2,Ks=1e-6,Qs=Ks*Ks,Js=Xs/180,ta=180/Xs,ea=Math.SQRT2,ia=2,na=4;vs.interpolateZoom=function(t,e){function i(t){var e=t*y;if(v){var i=Y(g),a=s/(ia*d)*(i*j(ea*e+g)-L(g));return[n+a*h,r+a*u,s*i/Y(ea*e+g)]}return[n+t*h,r+t*u,s*Math.exp(ea*e)]}var n=t[0],r=t[1],s=t[2],a=e[0],o=e[1],l=e[2],h=a-n,u=o-r,c=h*h+u*u,d=Math.sqrt(c),f=(l*l-s*s+na*c)/(2*s*ia*d),p=(l*l-s*s-na*c)/(2*l*ia*d),g=Math.log(Math.sqrt(f*f+1)-f),m=Math.log(Math.sqrt(p*p+1)-p),v=m-g,y=(v||Math.log(l/s))/ea;return i.duration=1e3*y,i},vs.behavior.zoom=function(){function t(t){t.on(S,h).on(aa+".zoom",d).on(T,p).on("dblclick.zoom",g).on(H,u)}function e(t){return[(t[0]-M.x)/M.k,(t[1]-M.y)/M.k]}function i(t){return[t[0]*M.k+M.x,t[1]*M.k+M.y]}function n(t){M.k=Math.max(D[0],Math.min(D[1],t))}function r(t,e){e=i(e),M.x+=t[0]-e[0],M.y+=t[1]-e[1]}function s(){w&&w.domain(b.range().map(function(t){return(t-M.x)/M.k}).map(b.invert)),k&&k.domain(x.range().map(function(t){return(t-M.y)/M.k}).map(x.invert))}function a(t){t({type:"zoomstart"})}function o(t){s(),t({type:"zoom",scale:M.k,translate:[M.x,M.y]})}function l(t){t({type:"zoomend"})}function h(){function t(){u=1,r(vs.mouse(n),d),o(s)}function i(){c.on(T,xs===n?p:null).on(E,null),f(u&&vs.event.target===h),l(s)}var n=this,s=I.of(n,arguments),h=vs.event.target,u=0,c=vs.select(xs).on(T,t).on(E,i),d=e(vs.mouse(n)),f=z();P.call(n),a(s)}function u(){function t(){var t=vs.touches(p);return f=M.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function i(){for(var e=vs.event.changedTouches,i=0,s=e.length;s>i;++i)m[e[i].identifier]=null;var a=t(),l=Date.now();if(1===a.length){if(500>l-_){var h=a[0],u=m[h.identifier];n(2*M.k),r(h,u),c(),o(g)}_=l}else if(a.length>1){var h=a[0],d=a[1],f=h[0]-d[0],p=h[1]-d[1];v=f*f+p*p}}function s(){for(var t,e,i,s,a=vs.touches(p),l=0,h=a.length;h>l;++l,s=null)if(i=a[l],s=m[i.identifier]){if(e)break;t=i,e=s}if(s){var u=(u=i[0]-t[0])*u+(u=i[1]-t[1])*u,c=v&&Math.sqrt(u/v);t=[(t[0]+i[0])/2,(t[1]+i[1])/2],e=[(e[0]+s[0])/2,(e[1]+s[1])/2],n(c*f)}_=null,r(t,e),o(g)}function d(){if(vs.event.touches.length){for(var e=vs.event.changedTouches,i=0,n=e.length;n>i;++i)delete m[e[i].identifier];for(var r in m)return void t()}x.on(b,null).on(w,null),k.on(S,h).on(H,u),C(),l(g)}var f,p=this,g=I.of(p,arguments),m={},v=0,y=vs.event.changedTouches[0].identifier,b="touchmove.zoom-"+y,w="touchend.zoom-"+y,x=vs.select(xs).on(b,s).on(w,d),k=vs.select(p).on(S,null).on(H,i),C=z();P.call(p),i(),a(g)}function d(){var t=I.of(this,arguments);y?clearTimeout(y):(P.call(this),a(t)),y=setTimeout(function(){y=null,l(t)},50),c();var i=v||vs.mouse(this);m||(m=e(i)),n(Math.pow(2,.002*ra())*M.k),r(i,m),o(t)}function p(){m=null}function g(){var t=I.of(this,arguments),i=vs.mouse(this),s=e(i),h=Math.log(M.k)/Math.LN2;a(t),n(Math.pow(2,vs.event.shiftKey?Math.ceil(h)-1:Math.floor(h)+1)),r(i,s),o(t),l(t)}var m,v,y,_,b,w,x,k,M={x:0,y:0,k:1},C=[960,500],D=sa,S="mousedown.zoom",T="mousemove.zoom",E="mouseup.zoom",H="touchstart.zoom",I=f(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=I.of(this,arguments),e=M;Lo?vs.select(this).transition().each("start.zoom",function(){M=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var i=C[0],n=C[1],r=i/2,s=n/2,a=vs.interpolateZoom([(r-M.x)/M.k,(s-M.y)/M.k,i/M.k],[(r-e.x)/e.k,(s-e.y)/e.k,i/e.k]);return function(e){var n=a(e),l=i/n[2];this.__chart__=M={x:r-n[0]*l,y:s-n[1]*l,k:l},o(t)}}).each("end.zoom",function(){l(t)}):(this.__chart__=M,a(t),o(t),l(t))})},t.translate=function(e){return arguments.length?(M={x:+e[0],y:+e[1],k:M.k},s(),t):[M.x,M.y]},t.scale=function(e){return arguments.length?(M={x:M.x,y:M.y,k:+e},s(),t):M.k},t.scaleExtent=function(e){return arguments.length?(D=null==e?sa:[+e[0],+e[1]],t):D},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(C=e&&[+e[0],+e[1]],t):C},t.x=function(e){return arguments.length?(w=e,b=e.copy(),M={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(k=e,x=e.copy(),M={x:0,y:0,k:1},t):k},vs.rebind(t,I,"on")};var ra,sa=[0,1/0],aa="onwheel"in bs?(ra=function(){return-vs.event.deltaY*(vs.event.deltaMode?120:1)},"wheel"):"onmousewheel"in bs?(ra=function(){return vs.event.wheelDelta},"mousewheel"):(ra=function(){return-vs.event.detail},"MozMousePixelScroll");q.prototype.toString=function(){return this.rgb()+""},vs.hsl=function(t,e,i){return 1===arguments.length?t instanceof U?G(t.h,t.s,t.l):ht(""+t,ut,G):G(+t,+e,+i)};var oa=U.prototype=new q;oa.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),G(this.h,this.s,this.l/t)},oa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),G(this.h,this.s,t*this.l)},oa.rgb=function(){return V(this.h,this.s,this.l)},vs.hcl=function(t,e,i){return 1===arguments.length?t instanceof Z?X(t.h,t.c,t.l):t instanceof Q?tt(t.l,t.a,t.b):tt((t=ct((t=vs.rgb(t)).r,t.g,t.b)).l,t.a,t.b):X(+t,+e,+i)};var la=Z.prototype=new q;la.brighter=function(t){return X(this.h,this.c,Math.min(100,this.l+ha*(arguments.length?t:1)))},la.darker=function(t){return X(this.h,this.c,Math.max(0,this.l-ha*(arguments.length?t:1)))},la.rgb=function(){return $(this.h,this.c,this.l).rgb()},vs.lab=function(t,e,i){return 1===arguments.length?t instanceof Q?K(t.l,t.a,t.b):t instanceof Z?$(t.l,t.c,t.h):ct((t=vs.rgb(t)).r,t.g,t.b):K(+t,+e,+i)};var ha=18,ua=.95047,ca=1,da=1.08883,fa=Q.prototype=new q;fa.brighter=function(t){return K(Math.min(100,this.l+ha*(arguments.length?t:1)),this.a,this.b)},fa.darker=function(t){return K(Math.max(0,this.l-ha*(arguments.length?t:1)),this.a,this.b)},fa.rgb=function(){return J(this.l,this.a,this.b)},vs.rgb=function(t,e,i){return 1===arguments.length?t instanceof ot?at(t.r,t.g,t.b):ht(""+t,at,V):at(~~t,~~e,~~i)};var pa=ot.prototype=new q;pa.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,i=this.g,n=this.b,r=30;return e||i||n?(e&&r>e&&(e=r),i&&r>i&&(i=r),n&&r>n&&(n=r),at(Math.min(255,~~(e/t)),Math.min(255,~~(i/t)),Math.min(255,~~(n/t)))):at(r,r,r)},pa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),at(~~(t*this.r),~~(t*this.g),~~(t*this.b))},pa.hsl=function(){return ut(this.r,this.g,this.b)},pa.toString=function(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)};var ga=vs.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ga.forEach(function(t,e){ga.set(t,rt(e))}),vs.functor=pt,vs.xhr=mt(gt),vs.dsv=function(t,e){function i(t,i,s){arguments.length<3&&(s=i,i=null);var a=vs.xhr(t,e,s);return a.row=function(t){return arguments.length?a.response(null==(i=t)?n:r(t)):i},a.row(i)}function n(t){return i.parse(t.responseText)}function r(t){return function(e){return i.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=new RegExp('["'+t+"\n]"),h=t.charCodeAt(0);return i.parse=function(t,e){var n;return i.parseRows(t,function(t,i){if(n)return n(t,i-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,i){return e(r(t),i)}:r})},i.parseRows=function(t,e){function i(){if(u>=l)return a;if(r)return r=!1,s;var e=u;if(34===t.charCodeAt(e)){for(var i=e;i++<l;)if(34===t.charCodeAt(i)){if(34!==t.charCodeAt(i+1))break;++i}u=i+2;var n=t.charCodeAt(i+1);return 13===n?(r=!0,10===t.charCodeAt(i+2)&&++u):10===n&&(r=!0),t.substring(e+1,i).replace(/""/g,'"')}for(;l>u;){var n=t.charCodeAt(u++),o=1;if(10===n)r=!0;else if(13===n)r=!0,10===t.charCodeAt(u)&&(++u,++o);else if(n!==h)continue;return t.substring(e,u-o)}return t.substring(e)}for(var n,r,s={},a={},o=[],l=t.length,u=0,c=0;(n=i())!==a;){for(var d=[];n!==s&&n!==a;)d.push(n),n=i();(!e||(d=e(d,c++)))&&o.push(d)}return o},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new s,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(o).join(t)].concat(e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(a).join("\n")},i},vs.csv=vs.dsv(",","text/csv"),vs.tsv=vs.dsv("	","text/tab-separated-values");var ma,va,ya,_a,ba,wa=xs[o(xs,"requestAnimationFrame")]||function(t){setTimeout(t,17)};vs.timer=function(t,e,i){var n=arguments.length;2>n&&(e=0),3>n&&(i=Date.now());var r=i+e,s={callback:t,time:r,next:null};va?va.next=s:ma=s,va=s,ya||(_a=clearTimeout(_a),ya=1,wa(_t))},vs.timer.flush=function(){wt(),xt()};var xa=".",ka=",",Ma=[3,3],Ca="$",Da=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(kt);vs.formatPrefix=function(t,e){var i=0;return t&&(0>t&&(t*=-1),e&&(t=vs.round(t,Mt(t,e))),i=1+Math.floor(1e-12+Math.log(t)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((0>=i?i+1:i-1)/3)))),Da[8+i/3]},vs.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},vs.format=function(t){var e=Sa.exec(t),i=e[1]||" ",n=e[2]||">",r=e[3]||"",s=e[4]||"",a=e[5],o=+e[6],l=e[7],h=e[8],u=e[9],c=1,d="",f=!1;switch(h&&(h=+h.substring(1)),(a||"0"===i&&"="===n)&&(a=i="0",n="=",l&&(o-=Math.floor((o-1)/4))),u){case"n":l=!0,u="g";break;case"%":c=100,d="%",u="f";break;case"p":c=100,d="%",u="r";break;case"b":case"o":case"x":case"X":"#"===s&&(s="0"+u.toLowerCase());case"c":case"d":f=!0,h=0;break;case"s":c=-1,u="r"}"#"===s?s="":"$"===s&&(s=Ca),"r"!=u||h||(u="g"),null!=h&&("g"==u?h=Math.max(1,Math.min(21,h)):("e"==u||"f"==u)&&(h=Math.max(0,Math.min(20,h)))),u=Ta.get(u)||Ct;var p=a&&l;return function(t){if(f&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):r;if(0>c){var g=vs.formatPrefix(t,h);t=g.scale(t),d=g.symbol}else t*=c;t=u(t,h);var m=t.lastIndexOf("."),v=0>m?t:t.substring(0,m),y=0>m?"":xa+t.substring(m+1);!a&&l&&(v=Ea(v));var _=s.length+v.length+y.length+(p?0:e.length),b=o>_?new Array(_=o-_+1).join(i):"";return p&&(v=Ea(b+v)),e+=s,t=v+y,("<"===n?e+t+b:">"===n?b+e+t:"^"===n?b.substring(0,_>>=1)+e+t+b.substring(_):e+(p?t:b+t))+d}};var Sa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ta=vs.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=vs.round(t,Mt(t,e))).toFixed(Math.max(0,Math.min(20,Mt(t*(1+1e-15),e))))}}),Ea=gt;if(Ma){var Ha=Ma.length;Ea=function(t){for(var e=t.length,i=[],n=0,r=Ma[0];e>0&&r>0;)i.push(t.substring(e-=r,e+r)),r=Ma[n=(n+1)%Ha];return i.reverse().join(ka)}}vs.geo={},Dt.prototype={s:0,t:0,add:function(t){St(t,this.t,Pa),St(Pa.s,this.s,this),this.s?this.t+=Pa.t:this.s=Pa.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Pa=new Dt;vs.geo.stream=function(t,e){t&&Ia.hasOwnProperty(t.type)?Ia[t.type](t,e):Tt(t,e)};var Ia={Feature:function(t,e){Tt(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,r=i.length;++n<r;)Tt(i[n].geometry,e)}},Aa={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){Et(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)Et(i[n],e,0)},Polygon:function(t,e){Ht(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)Ht(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,r=i.length;++n<r;)Tt(i[n],e)}};vs.geo.area=function(t){return Ra=0,vs.geo.stream(t,Na),Ra};var Ra,za=new Dt,Na={sphere:function(){Ra+=4*Xs},point:l,lineStart:l,lineEnd:l,polygonStart:function(){za.reset(),Na.lineStart=Pt},polygonEnd:function(){var t=2*za;Ra+=0>t?4*Xs+t:t,Na.lineStart=Na.lineEnd=Na.point=l}};vs.geo.bounds=function(){function t(t,e){_.push(b=[u=t,d=t]),c>e&&(c=e),e>f&&(f=e)}function e(e,i){var n=It([e*Js,i*Js]);if(v){var r=Rt(v,n),s=[r[1],-r[0],0],a=Rt(s,r);Ft(a),a=Ot(a);var l=e-p,h=l>0?1:-1,g=a[0]*ta*h,m=Math.abs(l)>180;if(m^(g>h*p&&h*e>g)){var y=a[1]*ta;y>f&&(f=y)}else if(g=(g+360)%360-180,m^(g>h*p&&h*e>g)){var y=-a[1]*ta;c>y&&(c=y)}else c>i&&(c=i),i>f&&(f=i);m?p>e?o(u,e)>o(u,d)&&(d=e):o(e,d)>o(u,d)&&(u=e):d>=u?(u>e&&(u=e),e>d&&(d=e)):e>p?o(u,e)>o(u,d)&&(d=e):o(e,d)>o(u,d)&&(u=e)}else t(e,i);v=n,p=e}function i(){w.point=e}function n(){b[0]=u,b[1]=d,w.point=t,v=null}function r(t,i){if(v){var n=t-p;y+=Math.abs(n)>180?n+(n>0?360:-360):n}else g=t,m=i;Na.point(t,i),e(t,i)}function s(){Na.lineStart()}function a(){r(g,m),Na.lineEnd(),Math.abs(y)>Ks&&(u=-(d=180)),b[0]=u,b[1]=d,v=null}function o(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function h(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var u,c,d,f,p,g,m,v,y,_,b,w={point:t,lineStart:i,lineEnd:n,polygonStart:function(){w.point=r,w.lineStart=s,w.lineEnd=a,y=0,Na.polygonStart()},polygonEnd:function(){Na.polygonEnd(),w.point=t,w.lineStart=i,w.lineEnd=n,0>za?(u=-(d=180),c=-(f=90)):y>Ks?f=90:-Ks>y&&(c=-90),b[0]=u,b[1]=d}};return function(t){f=d=-(u=c=1/0),_=[],vs.geo.stream(t,w);var e=_.length;if(e){_.sort(l);for(var i,n=1,r=_[0],s=[r];e>n;++n)i=_[n],h(i[0],r)||h(i[1],r)?(o(r[0],i[1])>o(r[0],r[1])&&(r[1]=i[1]),o(i[0],r[1])>o(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(var a,i,p=-1/0,e=s.length-1,n=0,r=s[e];e>=n;r=i,++n)i=s[n],(a=o(r[1],i[0]))>p&&(p=a,u=i[0],d=r[1])}return _=b=null,1/0===u||1/0===c?[[NaN,NaN],[NaN,NaN]]:[[u,c],[d,f]]}}(),vs.geo.centroid=function(t){Fa=Oa=Wa=La=Ya=ja=Ba=qa=Ga=Ua=Va=0,vs.geo.stream(t,Xa);var e=Ga,i=Ua,n=Va,r=e*e+i*i+n*n;return Qs>r&&(e=ja,i=Ba,n=qa,Ks>Oa&&(e=Wa,i=La,n=Ya),r=e*e+i*i+n*n,Qs>r)?[NaN,NaN]:[Math.atan2(i,e)*ta,W(n/Math.sqrt(r))*ta]};var Fa,Oa,Wa,La,Ya,ja,Ba,qa,Ga,Ua,Va,Xa={sphere:l,point:Lt,lineStart:jt,lineEnd:Bt,polygonStart:function(){Xa.lineStart=qt},polygonEnd:function(){Xa.lineStart=jt}},Za=Xt(Gt,Jt,ee,[-Xs,-Xs/2]),$a=1e9;vs.geo.clipExtent=function(){var t,e,i,n,r,s,a={stream:function(t){return r&&(r.valid=!1),r=s(t),r.valid=!0,r},extent:function(o){return arguments.length?(s=ne(t=+o[0][0],e=+o[0][1],i=+o[1][0],n=+o[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[i,n]]}};return a.extent([[0,0],[960,500]])},(vs.geo.conicEqualArea=function(){return ae(oe)}).raw=oe,vs.geo.albers=function(){return vs.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},vs.geo.albersUsa=function(){function t(t){var s=t[0],a=t[1];return e=null,i(s,a),e||(n(s,a),e)||r(s,a),e}var e,i,n,r,s=vs.geo.albers(),a=vs.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=vs.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,i){e=[t,i]}};return t.invert=function(t){var e=s.scale(),i=s.translate(),n=(t[0]-i[0])/e,r=(t[1]-i[1])/e;return(r>=.12&&.234>r&&n>=-.425&&-.214>n?a:r>=.166&&.234>r&&n>=-.214&&-.115>n?o:s).invert(t)},t.stream=function(t){var e=s.stream(t),i=a.stream(t),n=o.stream(t);return{point:function(t,r){e.point(t,r),i.point(t,r),n.point(t,r)},sphere:function(){e.sphere(),i.sphere(),n.sphere()},lineStart:function(){e.lineStart(),i.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),i.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),i.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),i.polygonEnd(),n.polygonEnd()}}},t.precision=function(e){return arguments.length?(s.precision(e),a.precision(e),o.precision(e),t):s.precision()},t.scale=function(e){return arguments.length?(s.scale(e),a.scale(.35*e),o.scale(e),t.translate(s.translate())):s.scale()},t.translate=function(e){if(!arguments.length)return s.translate();var h=s.scale(),u=+e[0],c=+e[1];return i=s.translate(e).clipExtent([[u-.455*h,c-.238*h],[u+.455*h,c+.238*h]]).stream(l).point,n=a.translate([u-.307*h,c+.201*h]).clipExtent([[u-.425*h+Ks,c+.12*h+Ks],[u-.214*h-Ks,c+.234*h-Ks]]).stream(l).point,r=o.translate([u-.205*h,c+.212*h]).clipExtent([[u-.214*h+Ks,c+.166*h+Ks],[u-.115*h-Ks,c+.234*h-Ks]]).stream(l).point,t},t.scale(1070)};var Ka,Qa,Ja,to,eo,io,no={point:l,lineStart:l,lineEnd:l,polygonStart:function(){Qa=0,no.lineStart=le},polygonEnd:function(){no.lineStart=no.lineEnd=no.point=l,Ka+=Math.abs(Qa/2)}},ro={point:he,lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l},so={point:de,lineStart:fe,lineEnd:pe,polygonStart:function(){so.lineStart=ge},polygonEnd:function(){so.point=de,so.lineStart=fe,so.lineEnd=pe}};vs.geo.transform=function(t){return{stream:function(e){var i=new ye(e);for(var n in t)i[n]=t[n];return i}}},ye.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},vs.geo.path=function(){function t(t){return t&&("function"==typeof o&&s.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=r(s)),vs.geo.stream(t,a)),s.result()}function e(){return a=null,t}var i,n,r,s,a,o=4.5;return t.area=function(t){return Ka=0,vs.geo.stream(t,r(no)),Ka},t.centroid=function(t){return Wa=La=Ya=ja=Ba=qa=Ga=Ua=Va=0,vs.geo.stream(t,r(so)),Va?[Ga/Va,Ua/Va]:qa?[ja/qa,Ba/qa]:Ya?[Wa/Ya,La/Ya]:[NaN,NaN]},t.bounds=function(t){return eo=io=-(Ja=to=1/0),vs.geo.stream(t,r(ro)),[[Ja,to],[eo,io]]},t.projection=function(t){return arguments.length?(r=(i=t)?t.stream||_e(t):gt,e()):i},t.context=function(t){return arguments.length?(s=null==(n=t)?new ue:new me(t),"function"!=typeof o&&s.pointRadius(o),e()):n},t.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(s.pointRadius(+e),+e),t):o},t.projection(vs.geo.albersUsa()).context(null)},vs.geo.projection=be,vs.geo.projectionMutator=we,(vs.geo.equirectangular=function(){return be(ke)}).raw=ke.invert=ke,vs.geo.rotation=function(t){function e(e){return e=t(e[0]*Js,e[1]*Js),e[0]*=ta,e[1]*=ta,e}return t=Ce(t[0]%360*Js,t[1]*Js,t.length>2?t[2]*Js:0),e.invert=function(e){return e=t.invert(e[0]*Js,e[1]*Js),e[0]*=ta,e[1]*=ta,e},e},Me.invert=ke,vs.geo.circle=function(){function t(){var t="function"==typeof n?n.apply(this,arguments):n,e=Ce(-t[0]*Js,-t[1]*Js,0).invert,r=[];return i(null,null,1,{point:function(t,i){r.push(t=e(t,i)),t[0]*=ta,t[1]*=ta}}),{type:"Polygon",coordinates:[r]}}var e,i,n=[0,0],r=6;return t.origin=function(e){return arguments.length?(n=e,t):n},t.angle=function(n){return arguments.length?(i=Ee((e=+n)*Js,r*Js),t):e},t.precision=function(n){return arguments.length?(i=Ee(e*Js,(r=+n)*Js),t):r},t.angle(90)},vs.geo.distance=function(t,e){var i,n=(e[0]-t[0])*Js,r=t[1]*Js,s=e[1]*Js,a=Math.sin(n),o=Math.cos(n),l=Math.sin(r),h=Math.cos(r),u=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((i=c*a)*i+(i=h*u-l*c*o)*i),l*u+h*c*o)},vs.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return vs.range(Math.ceil(s/m)*m,r,m).map(d).concat(vs.range(Math.ceil(h/v)*v,l,v).map(f)).concat(vs.range(Math.ceil(n/p)*p,i,p).filter(function(t){return Math.abs(t%m)>Ks}).map(u)).concat(vs.range(Math.ceil(o/g)*g,a,g).filter(function(t){return Math.abs(t%v)>Ks}).map(c))}var i,n,r,s,a,o,l,h,u,c,d,f,p=10,g=p,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(s).concat(f(l).slice(1),d(r).reverse().slice(1),f(h).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(s=+e[0][0],r=+e[1][0],h=+e[0][1],l=+e[1][1],s>r&&(e=s,s=r,r=e),h>l&&(e=h,h=l,l=e),t.precision(y)):[[s,h],[r,l]]},t.minorExtent=function(e){return arguments.length?(n=+e[0][0],i=+e[1][0],o=+e[0][1],a=+e[1][1],n>i&&(e=n,n=i,i=e),o>a&&(e=o,o=a,a=e),t.precision(y)):[[n,o],[i,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,u=Pe(o,a,90),c=Ie(n,i,y),d=Pe(h,l,90),f=Ie(s,r,y),t):y},t.majorExtent([[-180,-90+Ks],[180,90-Ks]]).minorExtent([[-180,-80-Ks],[180,80+Ks]])},vs.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),i||r.apply(this,arguments)]}}var e,i,n=Ae,r=Re;return t.distance=function(){return vs.geo.distance(e||n.apply(this,arguments),i||r.apply(this,arguments))},t.source=function(i){return arguments.length?(n=i,e="function"==typeof i?null:i,t):n},t.target=function(e){return arguments.length?(r=e,i="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},vs.geo.interpolate=function(t,e){return ze(t[0]*Js,t[1]*Js,e[0]*Js,e[1]*Js)},vs.geo.length=function(t){return ao=0,vs.geo.stream(t,oo),ao};var ao,oo={sphere:l,point:l,lineStart:Ne,lineEnd:l,polygonStart:l,polygonEnd:l},lo=Fe(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(vs.geo.azimuthalEqualArea=function(){return be(lo)}).raw=lo;var ho=Fe(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},gt);(vs.geo.azimuthalEquidistant=function(){return be(ho);
}).raw=ho,(vs.geo.conicConformal=function(){return ae(Oe)}).raw=Oe,(vs.geo.conicEquidistant=function(){return ae(We)}).raw=We;var uo=Fe(function(t){return 1/t},Math.atan);(vs.geo.gnomonic=function(){return be(uo)}).raw=uo,Le.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-$s]},(vs.geo.mercator=function(){return Ye(Le)}).raw=Le;var co=Fe(function(){return 1},Math.asin);(vs.geo.orthographic=function(){return be(co)}).raw=co;var fo=Fe(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(vs.geo.stereographic=function(){return be(fo)}).raw=fo,je.invert=function(t,e){return[Math.atan2(L(t),Math.cos(e)),W(Math.sin(e)/Y(t))]},(vs.geo.transverseMercator=function(){return Ye(je)}).raw=je,vs.geom={},vs.svg={},vs.svg.line=function(){return Be(gt)};var po=vs.map({linear:Ue,"linear-closed":Ve,step:Xe,"step-before":Ze,"step-after":$e,basis:ii,"basis-open":ni,"basis-closed":ri,bundle:si,cardinal:Je,"cardinal-open":Ke,"cardinal-closed":Qe,monotone:ci});po.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var go=[0,2/3,1/3,0],mo=[0,1/3,2/3,0],vo=[0,1/6,2/3,1/6];vs.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r,s,a,o,l,h,u,c,d,f,p,g=pt(i),m=pt(n),v=t.length,y=v-1,_=[],b=[],w=0;if(g===qe&&n===Ge)e=t;else for(s=0,e=[];v>s;++s)e.push([+g.call(this,r=t[s],s),+m.call(this,r,s)]);for(s=1;v>s;++s)(e[s][1]<e[w][1]||e[s][1]==e[w][1]&&e[s][0]<e[w][0])&&(w=s);for(s=0;v>s;++s)s!==w&&(l=e[s][1]-e[w][1],o=e[s][0]-e[w][0],_.push({angle:Math.atan2(l,o),index:s}));for(_.sort(function(t,e){return t.angle-e.angle}),f=_[0].angle,d=_[0].index,c=0,s=1;y>s;++s){if(a=_[s].index,f==_[s].angle){if(o=e[d][0]-e[w][0],l=e[d][1]-e[w][1],h=e[a][0]-e[w][0],u=e[a][1]-e[w][1],o*o+l*l>=h*h+u*u){_[s].index=-1;continue}_[c].index=-1}f=_[s].angle,c=s,d=a}for(b.push(w),s=0,a=0;2>s;++a)_[a].index>-1&&(b.push(_[a].index),s++);for(p=b.length;y>a;++a)if(!(_[a].index<0)){for(;!di(b[p-2],b[p-1],_[a].index,e);)--p;b[p++]=_[a].index}var x=[];for(s=p-1;s>=0;--s)x.push(t[b[s]]);return x}var i=qe,n=Ge;return arguments.length?e(t):(e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e)},vs.geom.polygon=function(t){return zs(t,yo),t};var yo=vs.geom.polygon.prototype=[];yo.area=function(){for(var t,e=-1,i=this.length,n=this[i-1],r=0;++e<i;)t=n,n=this[e],r+=t[1]*n[0]-t[0]*n[1];return.5*r},yo.centroid=function(t){var e,i,n=-1,r=this.length,s=0,a=0,o=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++n<r;)e=o,o=this[n],i=e[0]*o[1]-o[0]*e[1],s+=(e[0]+o[0])*i,a+=(e[1]+o[1])*i;return[s*t,a*t]},yo.clip=function(t){for(var e,i,n,r,s,a,o=gi(t),l=-1,h=this.length-gi(this),u=this[h-1];++l<h;){for(e=t.slice(),t.length=0,r=this[l],s=e[(n=e.length-o)-1],i=-1;++i<n;)a=e[i],fi(a,u,r)?(fi(s,u,r)||t.push(pi(s,a,u,r)),t.push(a)):fi(s,u,r)&&t.push(pi(s,a,u,r)),s=a;o&&t.push(t[0]),u=r}return t},vs.geom.delaunay=function(t){var e=t.map(function(){return[]}),i=[];return mi(t,function(i){e[i.region.l.index].push(t[i.region.r.index])}),e.forEach(function(e,n){var r=t[n],s=r[0],a=r[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-s,t[1]-a)}),e.sort(function(t,e){return t.angle-e.angle});for(var o=0,l=e.length-1;l>o;o++)i.push([r,e[o],e[o+1]])}),i},vs.geom.voronoi=function(t){function e(t){var e,s,a,o=t.map(function(){return[]}),l=pt(i),h=pt(n),u=t.length,c=1e6;if(l===qe&&h===Ge)e=t;else for(e=new Array(u),a=0;u>a;++a)e[a]=[+l.call(this,s=t[a],a),+h.call(this,s,a)];if(mi(e,function(t){var e,i,n,r,s,a;1===t.a&&t.b>=0?(e=t.ep.r,i=t.ep.l):(e=t.ep.l,i=t.ep.r),1===t.a?(s=e?e.y:-c,n=t.c-t.b*s,a=i?i.y:c,r=t.c-t.b*a):(n=e?e.x:-c,s=t.c-t.a*n,r=i?i.x:c,a=t.c-t.a*r);var l=[n,s],h=[r,a];o[t.region.l.index].push(l,h),o[t.region.r.index].push(l,h)}),o=o.map(function(t,i){var n=e[i][0],r=e[i][1],s=t.map(function(t){return Math.atan2(t[0]-n,t[1]-r)}),a=vs.range(t.length).sort(function(t,e){return s[t]-s[e]});return a.filter(function(t,e){return!e||s[t]-s[a[e-1]]>Ks}).map(function(e){return t[e]})}),o.forEach(function(t,i){var n=t.length;if(!n)return t.push([-c,-c],[-c,c],[c,c],[c,-c]);if(!(n>2)){var r=e[i],s=t[0],a=t[1],o=r[0],l=r[1],h=s[0],u=s[1],d=a[0],f=a[1],p=Math.abs(d-h),g=f-u;if(Math.abs(g)<Ks){var m=u>l?-c:c;t.push([-c,m],[c,m])}else if(Ks>p){var v=h>o?-c:c;t.push([v,-c],[v,c])}else{var m=(h-o)*(f-u)>(d-h)*(u-l)?c:-c,y=Math.abs(g)-p;Math.abs(y)<Ks?t.push([0>g?m:-m,m]):(y>0&&(m*=-1),t.push([-c,m],[c,m]))}}}),r)for(a=0;u>a;++a)r.clip(o[a]);for(a=0;u>a;++a)o[a].point=t[a];return o}var i=qe,n=Ge,r=null;return arguments.length?e(t):(e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e.clipExtent=function(t){if(!arguments.length)return r&&[r[0],r[2]];if(null==t)r=null;else{var i=+t[0][0],n=+t[0][1],s=+t[1][0],a=+t[1][1];r=vs.geom.polygon([[i,n],[i,a],[s,a],[s,n]])}return e},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):r&&r[2]},e.links=function(t){var e,r,s,a=t.map(function(){return[]}),o=[],l=pt(i),h=pt(n),u=t.length;if(l===qe&&h===Ge)e=t;else for(e=new Array(u),s=0;u>s;++s)e[s]=[+l.call(this,r=t[s],s),+h.call(this,r,s)];return mi(e,function(e){var i=e.region.l.index,n=e.region.r.index;a[i][n]||(a[i][n]=a[n][i]=!0,o.push({source:t[i],target:t[n]}))}),o},e.triangles=function(t){if(i===qe&&n===Ge)return vs.geom.delaunay(t);for(var e,r=new Array(l),s=pt(i),a=pt(n),o=-1,l=t.length;++o<l;)(r[o]=[+s.call(this,e=t[o],o),+a.call(this,e,o)]).data=e;return vs.geom.delaunay(r).map(function(t){return t.map(function(t){return t.data})})},e)};var _o={l:"r",r:"l"};vs.geom.quadtree=function(t,e,i,n,r){function s(t){function s(t,e,i,n,r,s,a,o){if(!isNaN(i)&&!isNaN(n))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(Math.abs(l-i)+Math.abs(u-n)<.01)h(t,e,i,n,r,s,a,o);else{var c=t.point;t.x=t.y=t.point=null,h(t,c,l,u,r,s,a,o),h(t,e,i,n,r,s,a,o)}else t.x=i,t.y=n,t.point=e}else h(t,e,i,n,r,s,a,o)}function h(t,e,i,n,r,a,o,l){var h=.5*(r+o),u=.5*(a+l),c=i>=h,d=n>=u,f=(d<<1)+c;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]=_i()),c?r=h:o=h,d?a=u:l=u,s(t,e,i,n,r,a,o,l)}var u,c,d,f,p,g,m,v,y,_=pt(o),b=pt(l);if(null!=e)g=e,m=i,v=n,y=r;else if(v=y=-(g=m=1/0),c=[],d=[],p=t.length,a)for(f=0;p>f;++f)u=t[f],u.x<g&&(g=u.x),u.y<m&&(m=u.y),u.x>v&&(v=u.x),u.y>y&&(y=u.y),c.push(u.x),d.push(u.y);else for(f=0;p>f;++f){var w=+_(u=t[f],f),x=+b(u,f);g>w&&(g=w),m>x&&(m=x),w>v&&(v=w),x>y&&(y=x),c.push(w),d.push(x)}var k=v-g,M=y-m;k>M?y=m+k:v=g+M;var C=_i();if(C.add=function(t){s(C,t,+_(t,++f),+b(t,f),g,m,v,y)},C.visit=function(t){bi(t,C,g,m,v,y)},f=-1,null==e){for(;++f<p;)s(C,t[f],c[f],d[f],g,m,v,y);--f}else t.forEach(C.add);return c=d=t=u=null,C}var a,o=qe,l=Ge;return(a=arguments.length)?(o=vi,l=yi,3===a&&(r=i,n=e,i=e=0),s(t)):(s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(l=t,s):l},s.extent=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=+t[0][0],i=+t[0][1],n=+t[1][0],r=+t[1][1]),s):null==e?null:[[e,i],[n,r]]},s.size=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=i=0,n=+t[0],r=+t[1]),s):null==e?null:[n-e,r-i]},s)},vs.interpolateRgb=wi,vs.interpolateObject=xi,vs.interpolateNumber=ki,vs.interpolateString=Mi;var bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;vs.interpolate=Ci,vs.interpolators=[function(t,e){var i=typeof e;return("string"===i?ga.has(e)||/^(#|rgb\(|hsl\()/.test(e)?wi:Mi:e instanceof q?wi:"object"===i?Array.isArray(e)?Di:xi:ki)(t,e)}],vs.interpolateArray=Di;var wo=function(){return gt},xo=vs.map({linear:wo,poly:Ai,quad:function(){return Hi},cubic:function(){return Pi},sin:function(){return Ri},exp:function(){return zi},circle:function(){return Ni},elastic:Fi,back:Oi,bounce:function(){return Wi}}),ko=vs.map({"in":gt,out:Ti,"in-out":Ei,"out-in":function(t){return Ei(Ti(t))}});vs.ease=function(t){var e=t.indexOf("-"),i=e>=0?t.substring(0,e):t,n=e>=0?t.substring(e+1):"in";return i=xo.get(i)||wo,n=ko.get(n)||gt,Si(n(i.apply(null,Array.prototype.slice.call(arguments,1))))},vs.interpolateHcl=Li,vs.interpolateHsl=Yi,vs.interpolateLab=ji,vs.interpolateRound=Bi,vs.transform=function(t){var e=bs.createElementNS(vs.ns.prefix.svg,"g");return(vs.transform=function(t){if(null!=t){e.setAttribute("transform",t);var i=e.transform.baseVal.consolidate()}return new qi(i?i.matrix:Mo)})(t)},qi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Mo={a:1,b:0,c:0,d:1,e:0,f:0};vs.interpolateTransform=Xi,vs.layout={},vs.layout.bundle=function(){return function(t){for(var e=[],i=-1,n=t.length;++i<n;)e.push(Ki(t[i]));return e}},vs.layout.chord=function(){function t(){var t,h,c,d,f,p={},g=[],m=vs.range(s),v=[];for(i=[],n=[],t=0,d=-1;++d<s;){for(h=0,f=-1;++f<s;)h+=r[d][f];g.push(h),v.push(vs.range(s)),t+=h}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),o&&v.forEach(function(t,e){t.sort(function(t,i){return o(r[e][t],r[e][i])})}),t=(Zs-u*s)/t,h=0,d=-1;++d<s;){for(c=h,f=-1;++f<s;){var y=m[d],_=v[y][f],b=r[y][_],w=h,x=h+=b*t;p[y+"-"+_]={index:y,subindex:_,startAngle:w,endAngle:x,value:b}}n[y]={index:y,startAngle:c,endAngle:h,value:(h-c)/t},h+=u}for(d=-1;++d<s;)for(f=d-1;++f<s;){var k=p[d+"-"+f],M=p[f+"-"+d];(k.value||M.value)&&i.push(k.value<M.value?{source:M,target:k}:{source:k,target:M})}l&&e()}function e(){i.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var i,n,r,s,a,o,l,h={},u=0;return h.matrix=function(t){return arguments.length?(s=(r=t)&&r.length,i=n=null,h):r},h.padding=function(t){return arguments.length?(u=t,i=n=null,h):u},h.sortGroups=function(t){return arguments.length?(a=t,i=n=null,h):a},h.sortSubgroups=function(t){return arguments.length?(o=t,i=null,h):o},h.sortChords=function(t){return arguments.length?(l=t,i&&e(),h):l},h.chords=function(){return i||t(),i},h.groups=function(){return n||t(),n},h},vs.layout.force=function(){function t(t){return function(e,i,n,r){if(e.point!==t){var s=e.cx-t.x,a=e.cy-t.y,o=1/Math.sqrt(s*s+a*a);if(g>(r-i)*o){var l=e.charge*o*o;return t.px-=s*l,t.py-=a*l,!0}if(e.point&&isFinite(o)){var l=e.pointCharge*o*o;t.px-=s*l,t.py-=a*l}}return!e.charge}}function e(t){t.px=vs.event.x,t.py=vs.event.y,o.resume()}var i,n,r,s,a,o={},l=vs.dispatch("start","tick","end"),h=[1,1],u=.9,c=Co,d=Do,f=-30,p=.1,g=.8,m=[],v=[];return o.tick=function(){if((n*=.99)<.005)return l.end({type:"end",alpha:n=0}),!0;var e,i,o,c,d,g,y,_,b,w=m.length,x=v.length;for(i=0;x>i;++i)o=v[i],c=o.source,d=o.target,_=d.x-c.x,b=d.y-c.y,(g=_*_+b*b)&&(g=n*s[i]*((g=Math.sqrt(g))-r[i])/g,_*=g,b*=g,d.x-=_*(y=c.weight/(d.weight+c.weight)),d.y-=b*y,c.x+=_*(y=1-y),c.y+=b*y);if((y=n*p)&&(_=h[0]/2,b=h[1]/2,i=-1,y))for(;++i<w;)o=m[i],o.x+=(_-o.x)*y,o.y+=(b-o.y)*y;if(f)for(sn(e=vs.geom.quadtree(m),n,a),i=-1;++i<w;)(o=m[i]).fixed||e.visit(t(o));for(i=-1;++i<w;)o=m[i],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*u,o.y-=(o.py-(o.py=o.y))*u);l.tick({type:"tick",alpha:n})},o.nodes=function(t){return arguments.length?(m=t,o):m},o.links=function(t){return arguments.length?(v=t,o):v},o.size=function(t){return arguments.length?(h=t,o):h},o.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,o):c},o.distance=o.linkDistance,o.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,o):d},o.friction=function(t){return arguments.length?(u=+t,o):u},o.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,o):f},o.gravity=function(t){return arguments.length?(p=+t,o):p},o.theta=function(t){return arguments.length?(g=+t,o):g},o.alpha=function(t){return arguments.length?(t=+t,n?n=t>0?t:0:t>0&&(l.start({type:"start",alpha:n=t}),vs.timer(o.tick)),o):n},o.start=function(){function t(t,n){for(var r,s=e(i),a=-1,o=s.length;++a<o;)if(!isNaN(r=s[a][t]))return r;return Math.random()*n}function e(){if(!l){for(l=[],n=0;p>n;++n)l[n]=[];for(n=0;g>n;++n){var t=v[n];l[t.source.index].push(t.target),l[t.target.index].push(t.source)}}return l[i]}var i,n,l,u,p=m.length,g=v.length,y=h[0],_=h[1];for(i=0;p>i;++i)(u=m[i]).index=i,u.weight=0;for(i=0;g>i;++i)u=v[i],"number"==typeof u.source&&(u.source=m[u.source]),"number"==typeof u.target&&(u.target=m[u.target]),++u.source.weight,++u.target.weight;for(i=0;p>i;++i)u=m[i],isNaN(u.x)&&(u.x=t("x",y)),isNaN(u.y)&&(u.y=t("y",_)),isNaN(u.px)&&(u.px=u.x),isNaN(u.py)&&(u.py=u.y);if(r=[],"function"==typeof c)for(i=0;g>i;++i)r[i]=+c.call(this,v[i],i);else for(i=0;g>i;++i)r[i]=c;if(s=[],"function"==typeof d)for(i=0;g>i;++i)s[i]=+d.call(this,v[i],i);else for(i=0;g>i;++i)s[i]=d;if(a=[],"function"==typeof f)for(i=0;p>i;++i)a[i]=+f.call(this,m[i],i);else for(i=0;p>i;++i)a[i]=f;return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){return i||(i=vs.behavior.drag().origin(gt).on("dragstart.force",tn).on("drag.force",e).on("dragend.force",en)),arguments.length?void this.on("mouseover.force",nn).on("mouseout.force",rn).call(i):i},vs.rebind(o,l,"on")};var Co=20,Do=1;vs.layout.hierarchy=function(){function t(e,a,o){var l=r.call(i,e,a);if(e.depth=a,o.push(e),l&&(h=l.length)){for(var h,u,c=-1,d=e.children=[],f=0,p=a+1;++c<h;)u=t(l[c],p,o),u.parent=e,d.push(u),f+=u.value;n&&d.sort(n),s&&(e.value=f)}else s&&(e.value=+s.call(i,e,a)||0);return e}function e(t,n){var r=t.children,a=0;if(r&&(o=r.length))for(var o,l=-1,h=n+1;++l<o;)a+=e(r[l],h);else s&&(a=+s.call(i,t,n)||0);return s&&(t.value=a),a}function i(e){var i=[];return t(e,0,i),i}var n=hn,r=on,s=ln;return i.sort=function(t){return arguments.length?(n=t,i):n},i.children=function(t){return arguments.length?(r=t,i):r},i.value=function(t){return arguments.length?(s=t,i):s},i.revalue=function(t){return e(t,0),t},i},vs.layout.partition=function(){function t(e,i,n,r){var s=e.children;if(e.x=i,e.y=e.depth*r,e.dx=n,e.dy=r,s&&(a=s.length)){var a,o,l,h=-1;for(n=e.value?n/e.value:0;++h<a;)t(o=s[h],i,l=o.value*n,r),i+=l}}function e(t){var i=t.children,n=0;if(i&&(r=i.length))for(var r,s=-1;++s<r;)n=Math.max(n,e(i[s]));return 1+n}function i(i,s){var a=n.call(this,i,s);return t(a[0],0,r[0],r[1]/e(a[0])),a}var n=vs.layout.hierarchy(),r=[1,1];return i.size=function(t){return arguments.length?(r=t,i):r},an(i,n)},vs.layout.pie=function(){function t(s){var a=s.map(function(i,n){return+e.call(t,i,n)}),o=+("function"==typeof n?n.apply(this,arguments):n),l=(("function"==typeof r?r.apply(this,arguments):r)-o)/vs.sum(a),h=vs.range(s.length);null!=i&&h.sort(i===So?function(t,e){return a[e]-a[t]}:function(t,e){return i(s[t],s[e])});var u=[];return h.forEach(function(t){var e;u[t]={data:s[t],value:e=a[t],startAngle:o,endAngle:o+=e*l}}),u}var e=Number,i=So,n=0,r=Zs;return t.value=function(i){return arguments.length?(e=i,t):e},t.sort=function(e){return arguments.length?(i=e,t):i},t.startAngle=function(e){return arguments.length?(n=e,t):n},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var So={};vs.layout.stack=function(){function t(o,l){var h=o.map(function(i,n){return e.call(t,i,n)}),u=h.map(function(e){return e.map(function(e,i){return[s.call(t,e,i),a.call(t,e,i)]})}),c=i.call(t,u,l);h=vs.permute(h,c),u=vs.permute(u,c);var d,f,p,g=n.call(t,u,l),m=h.length,v=h[0].length;for(f=0;v>f;++f)for(r.call(t,h[0][f],p=g[f],u[0][f][1]),d=1;m>d;++d)r.call(t,h[d][f],p+=u[d-1][f][1],u[d][f][1]);return o}var e=gt,i=pn,n=gn,r=fn,s=cn,a=dn;return t.values=function(i){return arguments.length?(e=i,t):e},t.order=function(e){return arguments.length?(i="function"==typeof e?e:To.get(e)||pn,t):i},t.offset=function(e){return arguments.length?(n="function"==typeof e?e:Eo.get(e)||gn,t):n},t.x=function(e){return arguments.length?(s=e,t):s},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(r=e,t):r},t};var To=vs.map({"inside-out":function(t){var e,i,n=t.length,r=t.map(mn),s=t.map(vn),a=vs.range(n).sort(function(t,e){return r[t]-r[e]}),o=0,l=0,h=[],u=[];for(e=0;n>e;++e)i=a[e],l>o?(o+=s[i],h.push(i)):(l+=s[i],u.push(i));return u.reverse().concat(h)},reverse:function(t){return vs.range(t.length).reverse()},"default":pn}),Eo=vs.map({silhouette:function(t){var e,i,n,r=t.length,s=t[0].length,a=[],o=0,l=[];for(i=0;s>i;++i){for(e=0,n=0;r>e;e++)n+=t[e][i][1];n>o&&(o=n),a.push(n)}for(i=0;s>i;++i)l[i]=(o-a[i])/2;return l},wiggle:function(t){var e,i,n,r,s,a,o,l,h,u=t.length,c=t[0],d=c.length,f=[];for(f[0]=l=h=0,i=1;d>i;++i){for(e=0,r=0;u>e;++e)r+=t[e][i][1];for(e=0,s=0,o=c[i][0]-c[i-1][0];u>e;++e){for(n=0,a=(t[e][i][1]-t[e][i-1][1])/(2*o);e>n;++n)a+=(t[n][i][1]-t[n][i-1][1])/o;s+=a*t[e][i][1]}f[i]=l-=r?s/r*o:0,h>l&&(h=l)}for(i=0;d>i;++i)f[i]-=h;return f},expand:function(t){var e,i,n,r=t.length,s=t[0].length,a=1/r,o=[];for(i=0;s>i;++i){for(e=0,n=0;r>e;e++)n+=t[e][i][1];if(n)for(e=0;r>e;e++)t[e][i][1]/=n;else for(e=0;r>e;e++)t[e][i][1]=a}for(i=0;s>i;++i)o[i]=0;return o},zero:gn});vs.layout.histogram=function(){function t(t,s){for(var a,o,l=[],h=t.map(i,this),u=n.call(this,h,s),c=r.call(this,u,h,s),s=-1,d=h.length,f=c.length-1,p=e?1:1/d;++s<f;)a=l[s]=[],a.dx=c[s+1]-(a.x=c[s]),a.y=0;if(f>0)for(s=-1;++s<d;)o=h[s],o>=u[0]&&o<=u[1]&&(a=l[vs.bisect(c,o,1,f)-1],a.y+=p,a.push(t[s]));return l}var e=!0,i=Number,n=wn,r=_n;return t.value=function(e){return arguments.length?(i=e,t):i},t.range=function(e){return arguments.length?(n=pt(e),t):n},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return bn(t,e)}:pt(e),t):r},t.frequency=function(i){return arguments.length?(e=!!i,t):e},t},vs.layout.tree=function(){function t(t,s){function a(t,e){var n=t.children,r=t._tree;if(n&&(s=n.length)){for(var s,o,h,u=n[0],c=u,d=-1;++d<s;)h=n[d],a(h,o),c=l(h,o,c),o=h;Hn(t);var f=.5*(u._tree.prelim+h._tree.prelim);e?(r.prelim=e._tree.prelim+i(t,e),r.mod=r.prelim-f):r.prelim=f}else e&&(r.prelim=e._tree.prelim+i(t,e))}function o(t,e){t.x=t._tree.prelim+e;var i=t.children;if(i&&(n=i.length)){var n,r=-1;for(e+=t._tree.mod;++r<n;)o(i[r],e)}}function l(t,e,n){if(e){for(var r,s=t,a=t,o=e,l=t.parent.children[0],h=s._tree.mod,u=a._tree.mod,c=o._tree.mod,d=l._tree.mod;o=Mn(o),s=kn(s),o&&s;)l=kn(l),a=Mn(a),a._tree.ancestor=t,r=o._tree.prelim+c-s._tree.prelim-h+i(o,s),r>0&&(Pn(In(o,t,n),t,r),h+=r,u+=r),c+=o._tree.mod,h+=s._tree.mod,d+=l._tree.mod,u+=a._tree.mod;o&&!Mn(a)&&(a._tree.thread=o,a._tree.mod+=c-u),s&&!kn(l)&&(l._tree.thread=s,l._tree.mod+=h-d,n=t)}return n}var h=e.call(this,t,s),u=h[0];En(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),a(u),o(u,-u._tree.prelim);var c=Cn(u,Sn),d=Cn(u,Dn),f=Cn(u,Tn),p=c.x-i(c,d)/2,g=d.x+i(d,c)/2,m=f.depth||1;return En(u,r?function(t){t.x*=n[0],t.y=t.depth*n[1],delete t._tree}:function(t){t.x=(t.x-p)/(g-p)*n[0],t.y=t.depth/m*n[1],delete t._tree}),h}var e=vs.layout.hierarchy().sort(null).value(null),i=xn,n=[1,1],r=!1;return t.separation=function(e){return arguments.length?(i=e,t):i},t.size=function(e){return arguments.length?(r=null==(n=e),t):r?null:n},t.nodeSize=function(e){return arguments.length?(r=null!=(n=e),t):r?n:null},an(t,e)},vs.layout.pack=function(){function t(t,s){var a=i.call(this,t,s),o=a[0],l=r[0],h=r[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(o.x=o.y=0,En(o,function(t){t.r=+u(t.value)}),En(o,Fn),n){var c=n*(e?1:Math.max(2*o.r/l,2*o.r/h))/2;En(o,function(t){t.r+=c}),En(o,Fn),En(o,function(t){t.r-=c})}return Ln(o,l/2,h/2,e?1:1/Math.max(2*o.r/l,2*o.r/h)),a}var e,i=vs.layout.hierarchy().sort(An),n=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(i){return arguments.length?(e=null==i||"function"==typeof i?i:+i,t):e},t.padding=function(e){return arguments.length?(n=+e,t):n},an(t,i)},vs.layout.cluster=function(){function t(t,s){var a,o=e.call(this,t,s),l=o[0],h=0;En(l,function(t){var e=t.children;e&&e.length?(t.x=Bn(e),t.y=jn(e)):(t.x=a?h+=i(t,a):0,t.y=0,a=t)});var u=qn(l),c=Gn(l),d=u.x-i(u,c)/2,f=c.x+i(c,u)/2;return En(l,r?function(t){t.x=(t.x-l.x)*n[0],t.y=(l.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(f-d)*n[0],t.y=(1-(l.y?t.y/l.y:1))*n[1]}),o}var e=vs.layout.hierarchy().sort(null).value(null),i=xn,n=[1,1],r=!1;return t.separation=function(e){return arguments.length?(i=e,t):i},t.size=function(e){return arguments.length?(r=null==(n=e),t):r?null:n},t.nodeSize=function(e){return arguments.length?(r=null!=(n=e),t):r?n:null},an(t,e)},vs.layout.treemap=function(){function t(t,e){for(var i,n,r=-1,s=t.length;++r<s;)n=(i=t[r]).value*(0>e?0:e),i.area=isNaN(n)||0>=n?0:n}function e(i){var s=i.children;if(s&&s.length){var a,o,l,h=c(i),u=[],d=s.slice(),p=1/0,g="slice"===f?h.dx:"dice"===f?h.dy:"slice-dice"===f?1&i.depth?h.dy:h.dx:Math.min(h.dx,h.dy);for(t(d,h.dx*h.dy/i.value),u.area=0;(l=d.length)>0;)u.push(a=d[l-1]),u.area+=a.area,"squarify"!==f||(o=n(u,g))<=p?(d.pop(),p=o):(u.area-=u.pop().area,r(u,g,h,!1),g=Math.min(h.dx,h.dy),u.length=u.area=0,p=1/0);u.length&&(r(u,g,h,!0),u.length=u.area=0),s.forEach(e)}}function i(e){var n=e.children;if(n&&n.length){var s,a=c(e),o=n.slice(),l=[];for(t(o,a.dx*a.dy/e.value),l.area=0;s=o.pop();)l.push(s),l.area+=s.area,null!=s.z&&(r(l,s.z?a.dx:a.dy,a,!o.length),l.length=l.area=0);n.forEach(i)}}function n(t,e){for(var i,n=t.area,r=0,s=1/0,a=-1,o=t.length;++a<o;)(i=t[a].area)&&(s>i&&(s=i),i>r&&(r=i));return n*=n,e*=e,n?Math.max(e*r*p/n,n/(e*s*p)):1/0}function r(t,e,i,n){var r,s=-1,a=t.length,o=i.x,h=i.y,u=e?l(t.area/e):0;if(e==i.dx){for((n||u>i.dy)&&(u=i.dy);++s<a;)r=t[s],r.x=o,r.y=h,r.dy=u,o+=r.dx=Math.min(i.x+i.dx-o,u?l(r.area/u):0);r.z=!0,r.dx+=i.x+i.dx-o,i.y+=u,i.dy-=u}else{for((n||u>i.dx)&&(u=i.dx);++s<a;)r=t[s],r.x=o,r.y=h,r.dx=u,h+=r.dy=Math.min(i.y+i.dy-h,u?l(r.area/u):0);r.z=!1,r.dy+=i.y+i.dy-h,i.x+=u,i.dx-=u}}function s(n){var r=a||o(n),s=r[0];return s.x=0,s.y=0,s.dx=h[0],s.dy=h[1],a&&o.revalue(s),t([s],s.dx*s.dy/s.value),(a?i:e)(s),d&&(a=r),r}var a,o=vs.layout.hierarchy(),l=Math.round,h=[1,1],u=null,c=Un,d=!1,f="squarify",p=.5*(1+Math.sqrt(5));return s.size=function(t){return arguments.length?(h=t,s):h},s.padding=function(t){function e(e){var i=t.call(s,e,e.depth);return null==i?Un(e):Vn(e,"number"==typeof i?[i,i,i,i]:i)}function i(e){return Vn(e,t)}if(!arguments.length)return u;var n;return c=null==(u=t)?Un:"function"==(n=typeof t)?e:"number"===n?(t=[t,t,t,t],i):i,s},s.round=function(t){return arguments.length?(l=t?Math.round:Number,s):l!=Number},s.sticky=function(t){return arguments.length?(d=t,a=null,s):d},s.ratio=function(t){return arguments.length?(p=t,s):p},s.mode=function(t){return arguments.length?(f=t+"",s):f},an(s,o)},vs.random={normal:function(t,e){var i=arguments.length;return 2>i&&(e=1),1>i&&(t=0),function(){var i,n,r;do i=2*Math.random()-1,n=2*Math.random()-1,r=i*i+n*n;while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=vs.random.normal.apply(vs,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var e=0,i=0;t>i;i++)e+=Math.random();return e/t}}},vs.scale={};var Ho={floor:gt,ceil:gt};vs.scale.linear=function(){return tr([0,1],[0,1],Ci,!1)},vs.scale.log=function(){return ar(vs.scale.linear().domain([0,1]),10,!0,[1,10])};var Po=vs.format(".0e"),Io={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};vs.scale.pow=function(){return or(vs.scale.linear(),1,[0,1])},vs.scale.sqrt=function(){return vs.scale.pow().exponent(.5)},vs.scale.ordinal=function(){return hr([],{t:"range",a:[[]]})},vs.scale.category10=function(){return vs.scale.ordinal().range(Ao)},vs.scale.category20=function(){return vs.scale.ordinal().range(Ro)},vs.scale.category20b=function(){return vs.scale.ordinal().range(zo)},vs.scale.category20c=function(){return vs.scale.ordinal().range(No)};var Ao=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(st),Ro=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(st),zo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(st),No=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(st);vs.scale.quantile=function(){return ur([],[])},vs.scale.quantize=function(){return cr(0,1,[0,1])},vs.scale.threshold=function(){return dr([.5],[0,1])},vs.scale.identity=function(){return fr([0,1])},vs.svg.arc=function(){function t(){var t=e.apply(this,arguments),s=i.apply(this,arguments),a=n.apply(this,arguments)+Fo,o=r.apply(this,arguments)+Fo,l=(a>o&&(l=a,a=o,o=l),o-a),h=Xs>l?"0":"1",u=Math.cos(a),c=Math.sin(a),d=Math.cos(o),f=Math.sin(o);return l>=Oo?t?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":t?"M"+s*u+","+s*c+"A"+s+","+s+" 0 "+h+",1 "+s*d+","+s*f+"L"+t*d+","+t*f+"A"+t+","+t+" 0 "+h+",0 "+t*u+","+t*c+"Z":"M"+s*u+","+s*c+"A"+s+","+s+" 0 "+h+",1 "+s*d+","+s*f+"L0,0Z"}var e=pr,i=gr,n=mr,r=vr;return t.innerRadius=function(i){return arguments.length?(e=pt(i),t):e},t.outerRadius=function(e){return arguments.length?(i=pt(e),t):i},t.startAngle=function(e){return arguments.length?(n=pt(e),t):n},t.endAngle=function(e){return arguments.length?(r=pt(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+i.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+Fo;return[Math.cos(s)*t,Math.sin(s)*t]},t};var Fo=-$s,Oo=Zs-Ks;vs.svg.line.radial=function(){var t=Be(yr);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ze.reverse=$e,$e.reverse=Ze,vs.svg.area=function(){return _r(gt)},vs.svg.area.radial=function(){var t=_r(yr);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},vs.svg.chord=function(){function t(t,o){var l=e(this,s,t,o),h=e(this,a,t,o);return"M"+l.p0+n(l.r,l.p1,l.a1-l.a0)+(i(l,h)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,h.r,h.p0)+n(h.r,h.p1,h.a1-h.a0)+r(h.r,h.p1,l.r,l.p0))+"Z"}function e(t,e,i,n){var r=e.call(t,i,n),s=o.call(t,r,n),a=l.call(t,r,n)+Fo,u=h.call(t,r,n)+Fo;return{r:s,a0:a,a1:u,p0:[s*Math.cos(a),s*Math.sin(a)],p1:[s*Math.cos(u),s*Math.sin(u)]}}function i(t,e){return t.a0==e.a0&&t.a1==e.a1}function n(t,e,i){return"A"+t+","+t+" 0 "+ +(i>Xs)+",1 "+e}function r(t,e,i,n){return"Q 0,0 "+n}var s=Ae,a=Re,o=br,l=mr,h=vr;return t.radius=function(e){return arguments.length?(o=pt(e),t):o},t.source=function(e){return arguments.length?(s=pt(e),t):s},t.target=function(e){return arguments.length?(a=pt(e),t):a},t.startAngle=function(e){return arguments.length?(l=pt(e),t):l},t.endAngle=function(e){return arguments.length?(h=pt(e),t):h},t},vs.svg.diagonal=function(){function t(t,r){var s=e.call(this,t,r),a=i.call(this,t,r),o=(s.y+a.y)/2,l=[s,{x:s.x,y:o},{x:a.x,y:o},a];return l=l.map(n),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=Ae,i=Re,n=wr;return t.source=function(i){return arguments.length?(e=pt(i),t):e},t.target=function(e){return arguments.length?(i=pt(e),t):i},t.projection=function(e){return arguments.length?(n=e,t):n},t},vs.svg.diagonal.radial=function(){var t=vs.svg.diagonal(),e=wr,i=t.projection;return t.projection=function(t){return arguments.length?i(xr(e=t)):e},t},vs.svg.symbol=function(){function t(t,n){return(Wo.get(e.call(this,t,n))||Cr)(i.call(this,t,n))}var e=Mr,i=kr;return t.type=function(i){return arguments.length?(e=pt(i),t):e},t.size=function(e){return arguments.length?(i=pt(e),t):i},t};var Wo=vs.map({circle:Cr,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Bo)),i=e*Bo;return"M0,"+-e+"L"+i+",0 0,"+e+" "+-i+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/jo),i=e*jo/2;return"M0,"+i+"L"+e+","+-i+" "+-e+","+-i+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/jo),i=e*jo/2;return"M0,"+-i+"L"+e+","+i+" "+-e+","+i+"Z"}});vs.svg.symbolTypes=Wo.keys();var Lo,Yo,jo=Math.sqrt(3),Bo=Math.tan(30*Js),qo=[],Go=0;qo.call=Ls.call,qo.empty=Ls.empty,qo.node=Ls.node,qo.size=Ls.size,vs.transition=function(t){return arguments.length?Lo?t.transition():t:Bs.transition()},vs.transition.prototype=qo,qo.select=function(t){var e,i,n,r=this.id,s=[];t=g(t);for(var a=-1,o=this.length;++a<o;){s.push(e=[]);for(var l=this[a],h=-1,u=l.length;++h<u;)(n=l[h])&&(i=t.call(n,n.__data__,h,a))?("__data__"in n&&(i.__data__=n.__data__),Er(i,h,r,n.__transition__[r]),e.push(i)):e.push(null)}return Dr(s,r)},qo.selectAll=function(t){var e,i,n,r,s,a=this.id,o=[];t=m(t);for(var l=-1,h=this.length;++l<h;)for(var u=this[l],c=-1,d=u.length;++c<d;)if(n=u[c]){s=n.__transition__[a],i=t.call(n,n.__data__,c,l),o.push(e=[]);for(var f=-1,p=i.length;++f<p;)(r=i[f])&&Er(r,f,a,s),e.push(r)}return Dr(o,a)},qo.filter=function(t){var e,i,n,r=[];"function"!=typeof t&&(t=D(t));for(var s=0,a=this.length;a>s;s++){r.push(e=[]);for(var i=this[s],o=0,l=i.length;l>o;o++)(n=i[o])&&t.call(n,n.__data__,o)&&e.push(n)}return Dr(r,this.id)},qo.tween=function(t,e){var i=this.id;return arguments.length<2?this.node().__transition__[i].tween.get(t):T(this,null==e?function(e){e.__transition__[i].tween.remove(t)}:function(n){n.__transition__[i].tween.set(t,e)})},qo.attr=function(t,e){function i(){this.removeAttribute(o)}function n(){this.removeAttributeNS(o.space,o.local)}function r(t){return null==t?i:(t+="",function(){var e,i=this.getAttribute(o);return i!==t&&(e=a(i,t),function(t){this.setAttribute(o,e(t))})})}function s(t){return null==t?n:(t+="",function(){var e,i=this.getAttributeNS(o.space,o.local);return i!==t&&(e=a(i,t),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Xi:Ci,o=vs.ns.qualify(t);return Sr(this,"attr."+t,e,o.local?s:r)},qo.attrTween=function(t,e){function i(t,i){var n=e.call(this,t,i,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}}function n(t,i){var n=e.call(this,t,i,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}var r=vs.ns.qualify(t);return this.tween("attr."+t,r.local?n:i)},qo.style=function(t,e,i){function n(){this.style.removeProperty(t)}function r(e){return null==e?n:(e+="",function(){var n,r=xs.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(n=Ci(r,e),function(e){this.style.setProperty(t,n(e),i)})})}var s=arguments.length;if(3>s){if("string"!=typeof t){2>s&&(e="");for(i in t)this.style(i,t[i],e);return this}i=""}return Sr(this,"style."+t,e,r)},qo.styleTween=function(t,e,i){function n(n,r){var s=e.call(this,n,r,xs.getComputedStyle(this,null).getPropertyValue(t));return s&&function(e){this.style.setProperty(t,s(e),i)}}return arguments.length<3&&(i=""),this.tween("style."+t,n)},qo.text=function(t){return Sr(this,"text",t,Tr)},qo.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},qo.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=vs.ease.apply(vs,arguments)),T(this,function(i){i.__transition__[e].ease=t}))},qo.delay=function(t){var e=this.id;return T(this,"function"==typeof t?function(i,n,r){i.__transition__[e].delay=+t.call(i,i.__data__,n,r)}:(t=+t,function(i){i.__transition__[e].delay=t}))},qo.duration=function(t){var e=this.id;return T(this,"function"==typeof t?function(i,n,r){i.__transition__[e].duration=Math.max(1,t.call(i,i.__data__,n,r))}:(t=Math.max(1,t),function(i){i.__transition__[e].duration=t}))},qo.each=function(t,e){var i=this.id;if(arguments.length<2){var n=Yo,r=Lo;Lo=i,T(this,function(e,n,r){Yo=e.__transition__[i],t.call(e,e.__data__,n,r)}),Yo=n,Lo=r}else T(this,function(n){var r=n.__transition__[i];(r.event||(r.event=vs.dispatch("start","end"))).on(t,e)});return this},qo.transition=function(){for(var t,e,i,n,r=this.id,s=++Go,a=[],o=0,l=this.length;l>o;o++){a.push(t=[]);for(var e=this[o],h=0,u=e.length;u>h;h++)(i=e[h])&&(n=Object.create(i.__transition__[r]),n.delay+=n.duration,Er(i,h,s,n)),t.push(i)}return Dr(a,s)},vs.svg.axis=function(){function t(t){t.each(function(){var t,h=vs.select(this),u=this.__chart__||i,c=this.__chart__=i.copy(),d=null==l?c.ticks?c.ticks.apply(c,o):c.domain():l,f=null==e?c.tickFormat?c.tickFormat.apply(c,o):gt:e,p=h.selectAll(".tick").data(d,c),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ks),m=vs.transition(p.exit()).style("opacity",Ks).remove(),v=vs.transition(p).style("opacity",1),y=Zn(c),_=h.selectAll(".domain").data([0]),b=(_.enter().append("path").attr("class","domain"),
vs.transition(_));g.append("line"),g.append("text");var w=g.select("line"),x=v.select("line"),k=p.select("text").text(f),M=g.select("text"),C=v.select("text");switch(n){case"bottom":t=Hr,w.attr("y2",r),M.attr("y",Math.max(r,0)+a),x.attr("x2",0).attr("y2",r),C.attr("x",0).attr("y",Math.max(r,0)+a),k.attr("dy",".71em").style("text-anchor","middle"),b.attr("d","M"+y[0]+","+s+"V0H"+y[1]+"V"+s);break;case"top":t=Hr,w.attr("y2",-r),M.attr("y",-(Math.max(r,0)+a)),x.attr("x2",0).attr("y2",-r),C.attr("x",0).attr("y",-(Math.max(r,0)+a)),k.attr("dy","0em").style("text-anchor","middle"),b.attr("d","M"+y[0]+","+-s+"V0H"+y[1]+"V"+-s);break;case"left":t=Pr,w.attr("x2",-r),M.attr("x",-(Math.max(r,0)+a)),x.attr("x2",-r).attr("y2",0),C.attr("x",-(Math.max(r,0)+a)).attr("y",0),k.attr("dy",".32em").style("text-anchor","end"),b.attr("d","M"+-s+","+y[0]+"H0V"+y[1]+"H"+-s);break;case"right":t=Pr,w.attr("x2",r),M.attr("x",Math.max(r,0)+a),x.attr("x2",r).attr("y2",0),C.attr("x",Math.max(r,0)+a).attr("y",0),k.attr("dy",".32em").style("text-anchor","start"),b.attr("d","M"+s+","+y[0]+"H0V"+y[1]+"H"+s)}if(c.rangeBand){var D=c.rangeBand()/2,S=function(t){return c(t)+D};g.call(t,S),v.call(t,S)}else g.call(t,u),v.call(t,c),m.call(t,c)})}var e,i=vs.scale.linear(),n=Uo,r=6,s=6,a=3,o=[10],l=null;return t.scale=function(e){return arguments.length?(i=e,t):i},t.orient=function(e){return arguments.length?(n=e in Vo?e+"":Uo,t):n},t.ticks=function(){return arguments.length?(o=arguments,t):o},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(i){return arguments.length?(e=i,t):e},t.tickSize=function(e){var i=arguments.length;return i?(r=+e,s=+arguments[i-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(s=+e,t):s},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Uo="bottom",Vo={top:1,right:1,bottom:1,left:1};vs.svg.brush=function(){function t(s){s.each(function(){var s=vs.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),a=s.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=s.selectAll(".resize").data(m,gt);o.exit().remove(),o.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Xo[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",t.empty()?"none":null);var u,c=vs.transition(s),d=vs.transition(a);l&&(u=Zn(l),d.attr("x",u[0]).attr("width",u[1]-u[0]),i(c)),h&&(u=Zn(h),d.attr("y",u[0]).attr("height",u[1]-u[0]),n(c)),e(c)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+u[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function i(t){t.select(".extent").attr("x",u[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function n(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function r(){function r(){32==vs.event.keyCode&&(T||(_=null,H[0]-=u[1],H[1]-=d[1],T=2),c())}function f(){32==vs.event.keyCode&&2==T&&(H[0]+=u[1],H[1]+=d[1],T=0,c())}function m(){var t=vs.mouse(w),r=!1;b&&(t[0]+=b[0],t[1]+=b[1]),T||(vs.event.altKey?(_||(_=[(u[0]+u[1])/2,(d[0]+d[1])/2]),H[0]=u[+(t[0]<_[0])],H[1]=d[+(t[1]<_[1])]):_=null),D&&v(t,l,0)&&(i(M),r=!0),S&&v(t,h,1)&&(n(M),r=!0),r&&(e(M),k({type:"brush",mode:T?"move":"resize"}))}function v(t,e,i){var n,r,o=Zn(e),l=o[0],h=o[1],c=H[i],f=i?d:u,m=f[1]-f[0];return T&&(l-=c,h-=m+c),n=(i?g:p)?Math.max(l,Math.min(h,t[i])):t[i],T?r=(n+=c)+m:(_&&(c=Math.max(l,Math.min(h,2*_[i]-n))),n>c?(r=n,n=c):r=c),f[0]!=n||f[1]!=r?(i?a=null:s=null,f[0]=n,f[1]=r,!0):void 0}function y(){m(),M.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),vs.select("body").style("cursor",null),P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),k({type:"brushend"})}var _,b,w=this,x=vs.select(vs.event.target),k=o.of(w,arguments),M=vs.select(w),C=x.datum(),D=!/^(n|s)$/.test(C)&&l,S=!/^(e|w)$/.test(C)&&h,T=x.classed("extent"),E=z(),H=vs.mouse(w),P=vs.select(xs).on("keydown.brush",r).on("keyup.brush",f);if(vs.event.changedTouches?P.on("touchmove.brush",m).on("touchend.brush",y):P.on("mousemove.brush",m).on("mouseup.brush",y),M.interrupt().selectAll("*").interrupt(),T)H[0]=u[0]-H[0],H[1]=d[0]-H[1];else if(C){var I=+/w$/.test(C),A=+/^n/.test(C);b=[u[1-I]-H[0],d[1-A]-H[1]],H[0]=u[I],H[1]=d[A]}else vs.event.altKey&&(_=H.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),vs.select("body").style("cursor",x.style("cursor")),k({type:"brushstart"}),m()}var s,a,o=f(t,"brushstart","brush","brushend"),l=null,h=null,u=[0,0],d=[0,0],p=!0,g=!0,m=Zo[0];return t.event=function(t){t.each(function(){var t=o.of(this,arguments),e={x:u,y:d,i:s,j:a},i=this.__chart__||e;this.__chart__=e,Lo?vs.select(this).transition().each("start.brush",function(){s=i.i,a=i.j,u=i.x,d=i.y,t({type:"brushstart"})}).tween("brush:brush",function(){var i=Di(u,e.x),n=Di(d,e.y);return s=a=null,function(r){u=e.x=i(r),d=e.y=n(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=e.i,a=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,m=Zo[!l<<1|!h],t):l},t.y=function(e){return arguments.length?(h=e,m=Zo[!l<<1|!h],t):h},t.clamp=function(e){return arguments.length?(l&&h?(p=!!e[0],g=!!e[1]):l?p=!!e:h&&(g=!!e),t):l&&h?[p,g]:l?p:h?g:null},t.extent=function(e){var i,n,r,o,c;return arguments.length?(l&&(i=e[0],n=e[1],h&&(i=i[0],n=n[0]),s=[i,n],l.invert&&(i=l(i),n=l(n)),i>n&&(c=i,i=n,n=c),(i!=u[0]||n!=u[1])&&(u=[i,n])),h&&(r=e[0],o=e[1],l&&(r=r[1],o=o[1]),a=[r,o],h.invert&&(r=h(r),o=h(o)),r>o&&(c=r,r=o,o=c),(r!=d[0]||o!=d[1])&&(d=[r,o])),t):(l&&(s?(i=s[0],n=s[1]):(i=u[0],n=u[1],l.invert&&(i=l.invert(i),n=l.invert(n)),i>n&&(c=i,i=n,n=c))),h&&(a?(r=a[0],o=a[1]):(r=d[0],o=d[1],h.invert&&(r=h.invert(r),o=h.invert(o)),r>o&&(c=r,r=o,o=c))),l&&h?[[i,r],[n,o]]:l?[i,n]:h&&[r,o])},t.clear=function(){return t.empty()||(u=[0,0],d=[0,0],s=a=null),t},t.empty=function(){return!!l&&u[0]==u[1]||!!h&&d[0]==d[1]},vs.rebind(t,o,"on")};var Xo={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$o=vs.time={},Ko=Date,Qo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Ir.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Jo.setUTCDate.apply(this._,arguments)},setDay:function(){Jo.setUTCDay.apply(this._,arguments)},setFullYear:function(){Jo.setUTCFullYear.apply(this._,arguments)},setHours:function(){Jo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Jo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Jo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Jo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Jo.setUTCSeconds.apply(this._,arguments)},setTime:function(){Jo.setTime.apply(this._,arguments)}};var Jo=Date.prototype,tl="%a %b %e %X %Y",el="%m/%d/%Y",il="%H:%M:%S",nl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],sl=["January","February","March","April","May","June","July","August","September","October","November","December"],al=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];$o.year=Ar(function(t){return t=$o.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),$o.years=$o.year.range,$o.years.utc=$o.year.utc.range,$o.day=Ar(function(t){var e=new Ko(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),$o.days=$o.day.range,$o.days.utc=$o.day.utc.range,$o.dayOfYear=function(t){var e=$o.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},Qo.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var i=$o[t]=Ar(function(t){return(t=$o.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var i=$o.year(t).getDay();return Math.floor(($o.dayOfYear(t)+(i+e)%7)/7)-(i!==e)});$o[t+"s"]=i.range,$o[t+"s"].utc=i.utc.range,$o[t+"OfYear"]=function(t){var i=$o.year(t).getDay();return Math.floor(($o.dayOfYear(t)+(i+e)%7)/7)}}),$o.week=$o.sunday,$o.weeks=$o.sunday.range,$o.weeks.utc=$o.sunday.utc.range,$o.weekOfYear=$o.sundayOfYear,$o.format=zr;var ol=Fr(nl),ll=Or(nl),hl=Fr(rl),ul=Or(rl),cl=Fr(sl),dl=Or(sl),fl=Fr(al),pl=Or(al),gl=/^%/,ml={"-":"",_:" ",0:"0"},vl={a:function(t){return rl[t.getDay()]},A:function(t){return nl[t.getDay()]},b:function(t){return al[t.getMonth()]},B:function(t){return sl[t.getMonth()]},c:zr(tl),d:function(t,e){return Wr(t.getDate(),e,2)},e:function(t,e){return Wr(t.getDate(),e,2)},H:function(t,e){return Wr(t.getHours(),e,2)},I:function(t,e){return Wr(t.getHours()%12||12,e,2)},j:function(t,e){return Wr(1+$o.dayOfYear(t),e,3)},L:function(t,e){return Wr(t.getMilliseconds(),e,3)},m:function(t,e){return Wr(t.getMonth()+1,e,2)},M:function(t,e){return Wr(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return Wr(t.getSeconds(),e,2)},U:function(t,e){return Wr($o.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Wr($o.mondayOfYear(t),e,2)},x:zr(el),X:zr(il),y:function(t,e){return Wr(t.getFullYear()%100,e,2)},Y:function(t,e){return Wr(t.getFullYear()%1e4,e,4)},Z:ls,"%":function(){return"%"}},yl={a:Lr,A:Yr,b:Gr,B:Ur,c:Vr,d:es,e:es,H:ns,I:ns,j:is,L:as,m:ts,M:rs,p:os,S:ss,U:Br,w:jr,W:qr,x:Xr,X:Zr,y:Kr,Y:$r,Z:Qr,"%":hs},_l=/^\s*\d+/,bl=vs.map({am:0,pm:1});zr.utc=us;var wl=us("%Y-%m-%dT%H:%M:%S.%LZ");zr.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?cs:wl,cs.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},cs.toString=wl.toString,$o.second=Ar(function(t){return new Ko(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),$o.seconds=$o.second.range,$o.seconds.utc=$o.second.utc.range,$o.minute=Ar(function(t){return new Ko(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),$o.minutes=$o.minute.range,$o.minutes.utc=$o.minute.utc.range,$o.hour=Ar(function(t){var e=t.getTimezoneOffset()/60;return new Ko(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),$o.hours=$o.hour.range,$o.hours.utc=$o.hour.utc.range,$o.month=Ar(function(t){return t=$o.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),$o.months=$o.month.range,$o.months.utc=$o.month.utc.range;var xl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],kl=[[$o.second,1],[$o.second,5],[$o.second,15],[$o.second,30],[$o.minute,1],[$o.minute,5],[$o.minute,15],[$o.minute,30],[$o.hour,1],[$o.hour,3],[$o.hour,6],[$o.hour,12],[$o.day,1],[$o.day,2],[$o.week,1],[$o.month,1],[$o.month,3],[$o.year,1]],Ml=[[zr("%Y"),Gt],[zr("%B"),function(t){return t.getMonth()}],[zr("%b %d"),function(t){return 1!=t.getDate()}],[zr("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[zr("%I %p"),function(t){return t.getHours()}],[zr("%I:%M"),function(t){return t.getMinutes()}],[zr(":%S"),function(t){return t.getSeconds()}],[zr(".%L"),function(t){return t.getMilliseconds()}]],Cl=ps(Ml);kl.year=$o.year,$o.scale=function(){return ds(vs.scale.linear(),kl,Cl)};var Dl={range:function(t,e,i){return vs.range(+t,+e,i).map(fs)}},Sl=kl.map(function(t){return[t[0].utc,t[1]]}),Tl=[[us("%Y"),Gt],[us("%B"),function(t){return t.getUTCMonth()}],[us("%b %d"),function(t){return 1!=t.getUTCDate()}],[us("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[us("%I %p"),function(t){return t.getUTCHours()}],[us("%I:%M"),function(t){return t.getUTCMinutes()}],[us(":%S"),function(t){return t.getUTCSeconds()}],[us(".%L"),function(t){return t.getUTCMilliseconds()}]],El=ps(Tl);return Sl.year=$o.year.utc,$o.scale.utc=function(){return ds(vs.scale.linear(),Sl,El)},vs.text=mt(function(t){return t.responseText}),vs.json=function(t,e){return vt(t,"application/json",gs,e)},vs.html=function(t,e){return vt(t,"text/html",ms,e)},vs.xml=mt(function(t){return t.responseXML}),vs}(),function(t,e){"function"==typeof define&&define.amd?define(["d3"],function(i){return t.Rickshaw=e(i)}):"object"==typeof exports?module.exports=e(require("d3")):t.Rickshaw=e(d3)}(this,function(t){var e={namespace:function(t){for(var i=t.split("."),n=e,r=1,s=i.length;s>r;r++){var a=i[r];n[a]=n[a]||{},n=n[a]}return n},keys:function(t){var e=[];for(var i in t)e.push(i);return e},extend:function(t,e){for(var i in e)t[i]=e[i];return t},clone:function(t){return JSON.parse(JSON.stringify(t))}};return function(t){function e(t){return c.call(t)===y}function i(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function n(t){if(r(t)!==v)throw new TypeError;var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}function r(t){switch(t){case null:return d;case void 0:return f}var e=typeof t;switch(e){case"boolean":return p;case"number":return g;case"string":return m}return v}function s(t){return"undefined"==typeof t}function a(t){var e=t.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=e.length||e[0]?e:[]}function o(t,e){var i=t;return function(){var t=l([u(i,this)],arguments);return e.apply(this,t)}}function l(t,e){for(var i=t.length,n=e.length;n--;)t[i+n]=e[n];return t}function h(t,e){return t=_.call(t,0),l(t,e)}function u(t,e){if(arguments.length<2&&s(arguments[0]))return this;var i=t,n=_.call(arguments,2);return function(){var t=h(n,arguments);return i.apply(e,t)}}var c=Object.prototype.toString,d="Null",f="Undefined",p="Boolean",g="Number",m="String",v="Object",y="[object Function]",_=Array.prototype.slice,b=function(){},w=function(){function t(){}function r(){function n(){this.initialize.apply(this,arguments)}var r=null,s=[].slice.apply(arguments);if(e(s[0])&&(r=s.shift()),i(n,w.Methods),n.superclass=r,n.subclasses=[],r){t.prototype=r.prototype,n.prototype=new t;try{r.subclasses.push(n)}catch(a){}}for(var o=0,l=s.length;l>o;o++)n.addMethods(s[o]);return n.prototype.initialize||(n.prototype.initialize=b),n.prototype.constructor=n,n}function s(t){var i=this.superclass&&this.superclass.prototype,r=n(t);l&&(t.toString!=Object.prototype.toString&&r.push("toString"),t.valueOf!=Object.prototype.valueOf&&r.push("valueOf"));for(var s=0,h=r.length;h>s;s++){var c=r[s],d=t[c];if(i&&e(d)&&"$super"==a(d)[0]){var f=d;d=o(function(t){return function(){return i[t].apply(this,arguments)}}(c),f),d.valueOf=u(f.valueOf,f),d.toString=u(f.toString,f)}this.prototype[c]=d}return this}var l=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();return{create:r,Methods:{addMethods:s}}}();t.exports?t.exports.Class=w:t.Class=w}(e),e.namespace("Rickshaw.Compat.ClassList"),e.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){"use strict";var e="classList",i="prototype",n=(t.HTMLElement||t.Element)[i],r=Object,s=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[i].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},o=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},h=function(t){for(var e=s.call(t.className),i=e?e.split(/\s+/):[],n=0,r=i.length;r>n;n++)this.push(i[n]);this._updateClassName=function(){t.className=this.toString()}},u=h[i]=[],c=function(){return new h(this)};if(o[i]=Error[i],u.item=function(t){return this[t]||null},u.contains=function(t){return t+="",-1!==l(this,t)},u.add=function(t){t+="",-1===l(this,t)&&(this.push(t),this._updateClassName())},u.remove=function(t){t+="";var e=l(this,t);-1!==e&&(this.splice(e,1),this._updateClassName())},u.toggle=function(t){t+="",-1===l(this,t)?this.add(t):this.remove(t)},u.toString=function(){return this.join(" ")},r.defineProperty){var d={get:c,enumerable:!0,configurable:!0};try{r.defineProperty(n,e,d)}catch(f){-2146823252===f.number&&(d.enumerable=!1,r.defineProperty(n,e,d))}}else r[i].__defineGetter__&&n.__defineGetter__(e,c)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new e.Compat.ClassList,e.namespace("Rickshaw.Graph"),e.Graph=function(i){var n=this;this.initialize=function(e){if(!e.element)throw"Rickshaw.Graph needs a reference to an element";if(1!==e.element.nodeType)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=e.element,this.series=e.series,this.window={},this.updateCallbacks=[],this.configureCallbacks=[],this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0,preserve:!1,xScale:void 0,yScale:void 0,stack:!0},this._loadRenderers(),this.configure(e),this.validateSeries(e.series),this.series.active=function(){return n.series.filter(function(t){return!t.disabled})},this.setSize({width:e.width,height:e.height}),this.element.classList.add("rickshaw_graph"),this.vis=t.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height),this.discoverRange()},this._loadRenderers=function(){for(var t in e.Graph.Renderer)if(t&&e.Graph.Renderer.hasOwnProperty(t)){var i=e.Graph.Renderer[t];i&&i.prototype&&i.prototype.render&&n.registerRenderer(new i({graph:n}))}},this.validateSeries=function(t){if(!(Array.isArray(t)||t instanceof e.Series)){var i=Object.prototype.toString.apply(t);throw"series is not an array: "+i}t.forEach(function(t){if(!(t instanceof Object))throw"series element is not an object: "+t;if(!t.data)throw"series has no data: "+JSON.stringify(t);if(!Array.isArray(t.data))throw"series data is not an array: "+JSON.stringify(t.data);if(t.data.length>0){var e=t.data[0].x,i=t.data[0].y;if("number"!=typeof e||"number"!=typeof i&&null!==i)throw"x and y properties of points should be numbers instead of "+typeof e+" and "+typeof i}if(t.data.length>=3&&(t.data[2].x<t.data[1].x||t.data[1].x<t.data[0].x||t.data[t.data.length-1].x<t.data[0].x))throw"series data needs to be sorted on x values for series name: "+t.name},this)},this.dataDomain=function(){var e=this.series.map(function(t){return t.data}),i=t.min(e.map(function(t){return t[0].x})),n=t.max(e.map(function(t){return t[t.length-1].x}));return[i,n]},this.discoverRange=function(){var e=this.renderer.domain();this.x=(this.xScale||t.scale.linear()).copy().domain(e.x).range([0,this.width]),this.y=(this.yScale||t.scale.linear()).copy().domain(e.y).range([this.height,0]),this.x.magnitude=t.scale.linear().domain([e.x[0]-e.x[0],e.x[1]-e.x[0]]).range([0,this.width]),this.y.magnitude=t.scale.linear().domain([e.y[0]-e.y[0],e.y[1]-e.y[0]]).range([0,this.height])},this.render=function(){this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(t){t()})},this.update=this.render,this.stackData=function(){var i=this.series.active().map(function(t){return t.data}).map(function(t){return t.filter(function(t){return this._slice(t)},this)},this),r=this.preserve;r||this.series.forEach(function(t){t.scale&&(r=!0)}),i=r?e.clone(i):i,this.series.active().forEach(function(t,e){if(t.scale){var n=i[e];n&&n.forEach(function(e){e.y=t.scale(e.y)})}}),this.stackData.hooks.data.forEach(function(t){i=t.f.apply(n,[i])});var s;if(!this.renderer.unstack){this._validateStackable();var a=t.layout.stack();a.offset(n.offset),s=a(i)}s=s||i,this.renderer.unstack&&s.forEach(function(t){t.forEach(function(t){t.y0=void 0===t.y0?0:t.y0})}),this.stackData.hooks.after.forEach(function(t){s=t.f.apply(n,[i])});var o=0;return this.series.forEach(function(t){t.disabled||(t.stack=s[o++])}),this.stackedData=s,s},this._validateStackable=function(){var t,e=this.series;e.forEach(function(e){if(t=t||e.data.length,t&&e.data.length!=t)throw"stacked series cannot have differing numbers of points: "+t+" vs "+e.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(t){if(this.window.xMin||this.window.xMax){var e=!0;return this.window.xMin&&t.x<this.window.xMin&&(e=!1),this.window.xMax&&t.x>this.window.xMax&&(e=!1),e}return!0},this.onUpdate=function(t){this.updateCallbacks.push(t)},this.onConfigure=function(t){this.configureCallbacks.push(t)},this.registerRenderer=function(t){this._renderers=this._renderers||{},this._renderers[t.name]=t},this.configure=function(t){this.config=this.config||{},(t.width||t.height)&&this.setSize(t),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this?this[e]:this.defaults[e]},this),e.keys(this.config).forEach(function(t){this[t]=this.config[t]},this),"stack"in t&&(t.unstack=!t.stack);var i=t.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(i,t),this.configureCallbacks.forEach(function(e){e(t)})},this.setRenderer=function(t,e){if("function"==typeof t)this.renderer=new t({graph:n}),this.registerRenderer(this.renderer);else{if(!this._renderers[t])throw"couldn't find renderer "+t;this.renderer=this._renderers[t]}"object"==typeof e&&this.renderer.configure(e)},this.setSize=function(t){if(t=t||{},void 0!==typeof window)var e=window.getComputedStyle(this.element,null),i=parseInt(e.getPropertyValue("width"),10),n=parseInt(e.getPropertyValue("height"),10);this.width=t.width||i||400,this.height=t.height||n||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(i)},e.namespace("Rickshaw.Fixtures.Color"),e.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},e.namespace("Rickshaw.Fixtures.RandomData"),e.Fixtures.RandomData=function(t){t=t||1;var e=200,i=Math.floor((new Date).getTime()/1e3);this.addData=function(n){var r=100*Math.random()+15+e,s=n[0].length,a=1;n.forEach(function(e){var n=20*Math.random(),o=r/25+a++ +15*(Math.cos(s*a*11/960)+2)+7*(Math.cos(s/7)+2)+1*(Math.cos(s/17)+2);e.push({x:s*t+i,y:o+n})}),e=.85*r},this.removeData=function(e){e.forEach(function(t){t.shift()}),i+=t}},e.namespace("Rickshaw.Fixtures.Time"),e.Fixtures.Time=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getUTCFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getUTCMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var i,n,r;if("month"==e.name){if(i=new Date(1e3*t),n=Date.UTC(i.getUTCFullYear(),i.getUTCMonth())/1e3,n==t)return t;r=i.getUTCFullYear();var s=i.getUTCMonth();return 11==s?(s=0,r+=1):s+=1,Date.UTC(r,s)/1e3}return"year"==e.name?(i=new Date(1e3*t),n=Date.UTC(i.getUTCFullYear(),0)/1e3,n==t?t:(r=i.getUTCFullYear()+1,Date.UTC(r,0)/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Time.Local"),e.Fixtures.Time.Local=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var i,n,r;if("day"==e.name){var s=new Date(1e3*(t+e.seconds-1)),a=new Date(0);return a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),a.setDate(s.getDate()),a.setMonth(s.getMonth()),a.setFullYear(s.getFullYear()),a.getTime()/1e3}if("month"==e.name){if(i=new Date(1e3*t),n=new Date(i.getFullYear(),i.getMonth()).getTime()/1e3,n==t)return t;r=i.getFullYear();var o=i.getMonth();return 11==o?(o=0,r+=1):o+=1,new Date(r,o).getTime()/1e3}return"year"==e.name?(i=new Date(1e3*t),n=new Date(i.getUTCFullYear(),0).getTime()/1e3,n==t?t:(r=i.getFullYear()+1,new Date(r,0).getTime()/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Number"),e.Fixtures.Number.formatKMBT=function(t){var e=Math.abs(t);return e>=1e12?t/1e12+"T":e>=1e9?t/1e9+"B":e>=1e6?t/1e6+"M":e>=1e3?t/1e3+"K":1>e&&t>0?t.toFixed(2):0===e?"":t},e.Fixtures.Number.formatBase1024KMGTP=function(t){var e=Math.abs(t);return e>=0x4000000000000?t/0x4000000000000+"P":e>=1099511627776?t/1099511627776+"T":e>=1073741824?t/1073741824+"G":e>=1048576?t/1048576+"M":e>=1024?t/1024+"K":1>e&&t>0?t.toFixed(2):0===e?"":t},e.namespace("Rickshaw.Color.Palette"),e.Color.Palette=function(i){var n=new e.Fixtures.Color;if(i=i||{},this.schemes={},this.scheme=n.schemes[i.scheme]||i.scheme||n.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,i.interpolatedStopCount){var r,s,a=this.scheme.length-1,o=[];for(r=0;a>r;r++){o.push(this.scheme[r]);var l=t.interpolateHsl(this.scheme[r],this.scheme[r+1]);for(s=1;s<i.interpolatedStopCount;s++)o.push(l(1/i.interpolatedStopCount*s))}o.push(this.scheme[this.scheme.length-1]),this.scheme=o}this.rotateCount=this.scheme.length,this.color=function(t){return this.scheme[t]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){if(Array.isArray(this.scheme)){var e;return this.generatorIndex==2*this.rotateCount-1?(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(e),e}}},e.namespace("Rickshaw.Graph.Ajax"),e.Graph.Ajax=e.Class.create({initialize:function(t){this.dataURL=t.dataURL,this.onData=t.onData||function(t){return t},this.onComplete=t.onComplete||function(){},this.onError=t.onError||function(){},this.args=t,this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(t){t=this.onData(t),this.args.series=this._splice({data:t,series:this.args.series}),this.graph=this.graph||new e.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(t){var e=t.data,i=t.series;return t.series?(i.forEach(function(t){var i=t.key||t.name;if(!i)throw"series needs a key or a name";e.forEach(function(e){var n=e.key||e.name;if(!n)throw"data needs a key or a name";if(i==n){var r=["color","name","data"];r.forEach(function(i){e[i]&&(t[i]=e[i])})}})}),i):e}}),e.namespace("Rickshaw.Graph.Annotate"),e.Graph.Annotate=function(t){this.graph=t.graph;this.elements={intimeline:t.element};var i=this;this.data={},this.elements.intimeline.classList.add("rickshaw_annotation_intimeline"),this.add=function(t,e,n){i.data[t]=i.data[t]||{boxes:[]},i.data[t].boxes.push({content:e,end:n})},this.update=function(){e.keys(i.data).forEach(function(t){var e=i.data[t],n=i.graph.x(t);if(0>n||n>i.graph.x.range()[1])return e.element&&(e.line.classList.add("offscreen"),e.element.style.display="none"),void e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.add("offscreen")});if(!e.element){var r=e.element=document.createElement("div");r.classList.add("annotation"),this.elements.intimeline.appendChild(r),r.addEventListener("click",function(){r.classList.toggle("active"),e.line.classList.toggle("active"),e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.toggle("active")})},!1)}e.element.style.left=n+"px",e.element.style.display="block",e.boxes.forEach(function(t){var r=t.element;if(r||(r=t.element=document.createElement("div"),r.classList.add("content"),r.innerHTML=t.content,e.element.appendChild(r),e.line=document.createElement("div"),
e.line.classList.add("annotation_line"),i.graph.element.appendChild(e.line),t.end&&(t.rangeElement=document.createElement("div"),t.rangeElement.classList.add("annotation_range"),i.graph.element.appendChild(t.rangeElement))),t.end){var s=n,a=Math.min(i.graph.x(t.end),i.graph.x.range()[1]);s>a&&(a=n,s=Math.max(i.graph.x(t.end),i.graph.x.range()[0]));var o=a-s;t.rangeElement.style.left=s+"px",t.rangeElement.style.width=o+"px",t.rangeElement.classList.remove("offscreen")}e.line.classList.remove("offscreen"),e.line.style.left=n+"px"})},this)},this.graph.onUpdate(function(){i.update()})},e.namespace("Rickshaw.Graph.Axis.Time"),e.Graph.Axis.Time=function(t){var i=this;this.graph=t.graph,this.elements=[],this.ticksTreatment=t.ticksTreatment||"plain",this.fixedTimeUnit=t.timeUnit;var n=t.timeFixture||new e.Fixtures.Time;this.appropriateTimeUnit=function(){var t,e=n.units,i=this.graph.x.domain(),r=i[1]-i[0];return e.forEach(function(e){Math.floor(r/e.seconds)>=2&&(t=t||e)}),t||n.units[n.units.length-1]},this.tickOffsets=function(){for(var t=this.graph.x.domain(),e=this.fixedTimeUnit||this.appropriateTimeUnit(),i=Math.ceil((t[1]-t[0])/e.seconds),r=t[0],s=[],a=0;i>a;a++){var o=n.ceil(r,e);r=o+e.seconds/2,s.push({value:o,unit:e})}return s},this.render=function(){this.elements.forEach(function(t){t.parentNode.removeChild(t)}),this.elements=[];var t=this.tickOffsets();t.forEach(function(t){if(!(i.graph.x(t.value)>i.graph.x.range()[1])){var e=document.createElement("div");e.style.left=i.graph.x(t.value)+"px",e.classList.add("x_tick"),e.classList.add(i.ticksTreatment);var n=document.createElement("div");n.classList.add("title"),n.innerHTML=t.unit.formatter(new Date(1e3*t.value)),e.appendChild(n),i.graph.element.appendChild(e),i.elements.push(e)}})},this.graph.onUpdate(function(){i.render()})},e.namespace("Rickshaw.Graph.Axis.X"),e.Graph.Axis.X=function(e){var i=this,n=.1;this.initialize=function(e){this.graph=e.graph,this.orientation=e.orientation||"top",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",e.element?(this.element=e.element,this._discoverSize(e.element,e),this.vis=t.select(e.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){i.render()})},this.setSize=function(t){if(t=t||{},this.element){this._discoverSize(this.element.parentNode,t),this.vis.attr("height",this.height).attr("width",this.width*(1+n));var e=Math.floor(this.width*n/2);this.element.style.left=-1*e+"px"}},this.render=function(){void 0!==this._renderWidth&&this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var i=t.svg.axis().scale(this.graph.x).orient(this.orientation);i.tickFormat(e.tickFormat||function(t){return t}),this.tickValues&&i.tickValues(this.tickValues),this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var r,s=Math.floor(this.width*n/2)||0;if("top"==this.orientation){var a=this.height||this.graph.height;r="translate("+s+","+a+")"}else r="translate("+s+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",r).call(i.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var o=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(i.ticks(this.ticks).tickSubdivide(0).tickSize(o)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)}),this._renderHeight=this.graph.height},this._discoverSize=function(t,e){if("undefined"!=typeof window){var i=window.getComputedStyle(t,null),r=parseInt(i.getPropertyValue("height"),10);if(!e.auto)var s=parseInt(i.getPropertyValue("width"),10)}this.width=(e.width||s||this.graph.width)*(1+n),this.height=e.height||r||40},this.initialize(e)},e.namespace("Rickshaw.Graph.Axis.Y"),e.Graph.Axis.Y=e.Class.create({initialize:function(e){this.graph=e.graph,this.orientation=e.orientation||"right",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",this.tickFormat=e.tickFormat||function(t){return t},this.berthRate=.1,e.element?(this.element=e.element,this.vis=t.select(e.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis;var i=this;this.graph.onUpdate(function(){i.render()})},setSize:function(t){if(t=t||{},this.element){if("undefined"!=typeof window){var e=window.getComputedStyle(this.element.parentNode,null),i=parseInt(e.getPropertyValue("width"),10);if(!t.auto)var n=parseInt(e.getPropertyValue("height"),10)}this.width=t.width||i||this.graph.width*this.berthRate,this.height=t.height||n||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var r=this.height*this.berthRate;"left"==this.orientation&&(this.element.style.top=-1*r+"px")}},render:function(){void 0!==this._renderHeight&&this.graph.height!==this._renderHeight&&this.setSize({auto:!0}),this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var t=this._drawAxis(this.graph.y);this._drawGrid(t),this._renderHeight=this.graph.height},_drawAxis:function(e){var i=t.svg.axis().scale(e).orient(this.orientation);if(i.tickFormat(this.tickFormat),this.tickValues&&i.tickValues(this.tickValues),"left"==this.orientation)var n=this.height*this.berthRate,r="translate("+this.width+", "+n+")";return this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",r).call(i.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),i},_drawGrid:function(t){var e=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(e)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)})}}),e.namespace("Rickshaw.Graph.Axis.Y.Scaled"),e.Graph.Axis.Y.Scaled=e.Class.create(e.Graph.Axis.Y,{initialize:function($super,t){if("undefined"==typeof t.scale)throw new Error("Scaled requires scale");this.scale=t.scale,"undefined"==typeof t.grid?this.grid=!0:this.grid=t.grid,$super(t)},_drawAxis:function($super,e){var i=this.scale.domain(),n=this.graph.renderer.domain().y,r=[Math.min.apply(Math,i),Math.max.apply(Math,i)],s=t.scale.linear().domain([0,1]).range(r),a=[s(n[0]),s(n[1])],o=t.scale.linear().domain(r).range(a),l=this.scale.copy().domain(i.map(o)).range(e.range());return $super(l)},_drawGrid:function($super,t){this.grid&&$super(t)}}),e.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),e.Graph.Behavior.Series.Highlight=function(e){this.graph=e.graph,this.legend=e.legend;var i=this,n={},r=null,s=e.disabledColor||function(e){return t.interpolateRgb(e,t.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(t){t.element.addEventListener("mouseover",function(){r||(r=t,i.legend.lines.forEach(function(e){if(t!==e)n[e.series.name]=n[e.series.name]||e.series.color,e.series.color=s(e.series.color);else if(i.graph.renderer.unstack&&(e.series.renderer?e.series.renderer.unstack:!0)){var r=i.graph.series.indexOf(e.series);e.originalIndex=r;var a=i.graph.series.splice(r,1)[0];i.graph.series.push(a)}}),i.graph.update())},!1),t.element.addEventListener("mouseout",function(){r&&(r=null,i.legend.lines.forEach(function(e){if(t===e&&e.hasOwnProperty("originalIndex")){var r=i.graph.series.pop();i.graph.series.splice(e.originalIndex,0,r),delete e.originalIndex}n[e.series.name]&&(e.series.color=n[e.series.name])}),i.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(t){i.addHighlightEvents(t)})},e.namespace("Rickshaw.Graph.Behavior.Series.Order"),e.Graph.Behavior.Series.Order=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if("undefined"==typeof window.jQuery)throw"couldn't find jQuery at window.jQuery";if("undefined"==typeof window.jQuery.ui)throw"couldn't find jQuery UI at window.jQuery.ui";jQuery(function(){jQuery(e.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(){var t=[];jQuery(e.legend.list).find("li").each(function(e,i){i.series&&t.push(i.series)});for(var i=e.graph.series.length-1;i>=0;i--)e.graph.series[i]=t.shift();e.graph.update()}}),jQuery(e.legend.list).disableSelection()}),this.graph.onUpdate(function(){var t=window.getComputedStyle(e.legend.element).height;e.legend.element.style.height=t})},e.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),e.Graph.Behavior.Series.Toggle=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if(this.addAnchor=function(t){var i=document.createElement("a");i.innerHTML="&#10004;",i.classList.add("action"),t.element.insertBefore(i,t.element.firstChild),i.onclick=function(){if(t.series.disabled)t.series.enable(),t.element.classList.remove("disabled");else{if(this.graph.series.filter(function(t){return!t.disabled}).length<=1)return;t.series.disable(),t.element.classList.add("disabled")}}.bind(this);var n=t.element.getElementsByTagName("span")[0];n.onclick=function(){var i=t.series.disabled;if(!i)for(var n=0;n<e.legend.lines.length;n++){var r=e.legend.lines[n];if(t.series===r.series);else if(!r.series.disabled){i=!0;break}}i?(t.series.enable(),t.element.classList.remove("disabled"),e.legend.lines.forEach(function(e){t.series===e.series||(e.series.disable(),e.element.classList.add("disabled"))})):e.legend.lines.forEach(function(t){t.series.enable(),t.element.classList.remove("disabled")})}},this.legend){var i=jQuery;"undefined"!=typeof i&&i(this.legend.list).sortable&&i(this.legend.list).sortable({start:function(t,e){e.item.bind("no.onclick",function(t){t.preventDefault()})},stop:function(t,e){setTimeout(function(){e.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(t){e.addAnchor(t)})}this._addBehavior=function(){this.graph.series.forEach(function(t){t.disable=function(){if(e.graph.series.length<=1)throw"only one series left";t.disabled=!0,e.graph.update()},t.enable=function(){t.disabled=!1,e.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},e.namespace("Rickshaw.Graph.HoverDetail"),e.Graph.HoverDetail=e.Class.create({initialize:function(t){var e=this.graph=t.graph;this.xFormatter=t.xFormatter||function(t){return new Date(1e3*t).toUTCString()},this.yFormatter=t.yFormatter||function(t){return null===t?t:t.toFixed(2)};var i=this.element=document.createElement("div");i.className="detail",this.visible=!0,e.element.appendChild(i),this.lastEvent=null,this._addListeners(),this.onShow=t.onShow,this.onHide=t.onHide,this.onRender=t.onRender,this.formatter=t.formatter||this.formatter},formatter:function(t,e,i,n,r){return t.name+":&nbsp;"+r},update:function(e){if(e=e||this.lastEvent,e&&(this.lastEvent=e,e.target.nodeName.match(/^(path|svg|rect|circle)$/))){var i,n=this.graph,r=e.offsetX||e.layerX,s=e.offsetY||e.layerY,a=0,o=[];if(this.graph.series.active().forEach(function(e){var l=this.graph.stackedData[a++];if(l.length){var h=n.x.invert(r),u=t.scale.linear().domain([l[0].x,l.slice(-1)[0].x]).range([0,l.length-1]),c=Math.round(u(h));c==l.length-1&&c--;for(var d=Math.min(c||0,l.length-1),f=c;f<l.length-1&&(l[f]&&l[f+1]);){if(l[f].x<=h&&l[f+1].x>h){d=Math.abs(h-l[f].x)<Math.abs(h-l[f+1].x)?f:f+1;break}l[f+1].x<=h?f++:f--}0>d&&(d=0);var p=l[d],g=Math.sqrt(Math.pow(Math.abs(n.x(p.x)-r),2)+Math.pow(Math.abs(n.y(p.y+p.y0)-s),2)),m=e.xFormatter||this.xFormatter,v=e.yFormatter||this.yFormatter,y={formattedXValue:m(p.x),formattedYValue:v(e.scale?e.scale.invert(p.y):p.y),series:e,value:p,distance:g,order:a,name:e.name};(!i||g<i.distance)&&(i=y),o.push(y)}},this),i){i.active=!0;var l=i.value.x,h=i.formattedXValue;this.element.innerHTML="",this.element.style.left=n.x(l)+"px",this.visible&&this.render({points:o,detail:o,mouseX:r,mouseY:s,formattedXValue:h,domainX:l})}}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(t){var e=this.graph,i=t.points,n=i.filter(function(t){return t.active}).shift();if(null!==n.value.y){var r=n.formattedXValue,s=n.formattedYValue;this.element.innerHTML="",this.element.style.left=e.x(n.value.x)+"px";var a=document.createElement("div");a.className="x_label",a.innerHTML=r,this.element.appendChild(a);var o=document.createElement("div");o.className="item";var l=n.series,h=l.scale?l.scale.invert(n.value.y):n.value.y;o.innerHTML=this.formatter(l,n.value.x,h,r,s,n),o.style.top=this.graph.y(n.value.y0+n.value.y)+"px",this.element.appendChild(o);var u=document.createElement("div");u.className="dot",u.style.top=o.style.top,u.style.borderColor=l.color,this.element.appendChild(u),n.active&&(o.classList.add("active"),u.classList.add("active"));var c=[a,o];c.forEach(function(t){t.classList.add("left")}),this.show();var d=this._calcLayoutError(c);if(d>0){c.forEach(function(t){t.classList.remove("left"),t.classList.add("right")});var f=this._calcLayoutError(c);f>d&&c.forEach(function(t){t.classList.remove("right"),t.classList.add("left")})}"function"==typeof this.onRender&&this.onRender(t)}},_calcLayoutError:function(t){var e=this.element.parentNode.getBoundingClientRect(),i=0;t.forEach(function(t){var n=t.getBoundingClientRect();n.width&&(n.right>e.right&&(i+=n.right-e.right),n.left<e.left&&(i+=e.left-n.left))});return i},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(t){this.visible=!0,this.update(t)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(t){!t.relatedTarget||t.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),e.namespace("Rickshaw.Graph.JSONP"),e.Graph.JSONP=e.Class.create(e.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),e.namespace("Rickshaw.Graph.Legend"),e.Graph.Legend=e.Class.create({className:"rickshaw_legend",initialize:function(t){this.element=t.element,this.graph=t.graph,this.naturalOrder=t.naturalOrder,this.element.classList.add(this.className),this.list=document.createElement("ul"),this.element.appendChild(this.list),this.render(),this.graph.onUpdate(function(){})},render:function(){for(var t=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.lines=[];var e=this.graph.series.map(function(t){return t});this.naturalOrder||(e=e.reverse()),e.forEach(function(e){t.addLine(e)})},addLine:function(e){var i=document.createElement("li");i.className="line",e.disabled&&(i.className+=" disabled"),e.className&&t.select(i).classed(e.className,!0);var n=document.createElement("div");n.className="swatch",n.style.backgroundColor=e.color,i.appendChild(n);var r=document.createElement("span");r.className="label",r.innerHTML=e.name,i.appendChild(r),this.list.appendChild(i),i.series=e,e.noLegend&&(i.style.display="none");var s={element:i,series:e};return this.shelving&&(this.shelving.addAnchor(s),this.shelving.updateBehaviour()),this.highlighter&&this.highlighter.addHighlightEvents(s),this.lines.push(s),i}}),e.namespace("Rickshaw.Graph.RangeSlider"),e.Graph.RangeSlider=e.Class.create({initialize:function(t){var e=(this.element=t.element,this.graph=t.graph);this.slideCallbacks=[],this.build(),e.onUpdate(function(){this.update()}.bind(this))},build:function(){var t=this.element,e=this.graph,i=jQuery,n=e.dataDomain(),r=this;i(function(){i(t).slider({range:!0,min:n[0],max:n[1],values:[n[0],n[1]],slide:function(t,i){if(!(i.values[1]<=i.values[0])){e.window.xMin=i.values[0],e.window.xMax=i.values[1],e.update();var n=e.dataDomain();n[0]==i.values[0]&&(e.window.xMin=void 0),n[1]==i.values[1]&&(e.window.xMax=void 0),r.slideCallbacks.forEach(function(t){t(e,e.window.xMin,e.window.xMax)})}}})}),i(t)[0].style.width=e.width+"px"},update:function(){var t=this.element,e=this.graph,i=jQuery,n=i(t).slider("option","values"),r=e.dataDomain();i(t).slider("option","min",r[0]),i(t).slider("option","max",r[1]),null==e.window.xMin&&(n[0]=r[0]),null==e.window.xMax&&(n[1]=r[1]),i(t).slider("option","values",n)},onSlide:function(t){this.slideCallbacks.push(t)}}),e.namespace("Rickshaw.Graph.RangeSlider.Preview"),e.Graph.RangeSlider.Preview=e.Class.create({initialize:function(e){if(!e.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!e.graph&&!e.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=e.element,this.element.style.position="relative",this.graphs=e.graph?[e.graph]:e.graphs,this.defaults={height:75,width:400,gripperColor:void 0,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2},this.heightRatio=e.heightRatio||this.defaults.heightRatio,this.defaults.gripperColor=t.rgb(this.defaults.frameColor).darker().toString(),this.configureCallbacks=[],this.slideCallbacks=[],this.previews=[],e.width||(this.widthFromGraph=!0),e.height||(this.heightFromGraph=!0),(this.widthFromGraph||this.heightFromGraph)&&this.graphs[0].onConfigure(function(){this.configure(e),this.render()}.bind(this)),e.width=e.width||this.graphs[0].width||this.defaults.width,e.height=e.height||this.graphs[0].height*this.heightRatio||this.defaults.height,this.configure(e),this.render()},onSlide:function(t){this.slideCallbacks.push(t)},onConfigure:function(t){this.configureCallbacks.push(t)},configure:function(t){this.config=this.config||{},this.configureCallbacks.forEach(function(e){e(t)}),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this.config?this.config[e]:this.defaults[e]},this),("width"in t||"height"in t)&&(this.widthFromGraph&&(this.config.width=this.graphs[0].width),this.heightFromGraph&&(this.config.height=this.graphs[0].height*this.heightRatio,this.previewHeight=this.config.height),this.previews.forEach(function(t){var e=this.previewHeight/this.graphs.length-2*this.config.frameTopThickness,i=this.config.width-2*this.config.frameHandleThickness;if(t.setSize({width:i,height:e}),this.svg){var n=e+2*this.config.frameHandleThickness,r=i+2*this.config.frameHandleThickness;this.svg.style("width",r+"px"),this.svg.style("height",n+"px")}},this))},render:function(){var i=this;this.svg=t.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]),this.previewHeight=this.config.height-2*this.config.frameTopThickness,this.previewWidth=this.config.width-2*this.config.frameHandleThickness,this.currentFrame=[0,this.previewWidth];var n=function(t){var n=e.extend({},t.config),r=i.previewHeight/i.graphs.length,s=t.renderer.name;e.extend(n,{element:this.appendChild(document.createElement("div")),height:r,width:i.previewWidth,series:t.series,renderer:s});var a=new e.Graph(n);i.previews.push(a),t.onUpdate(function(){a.render(),i.render()}),t.onConfigure(function(t){delete t.height,t.width=t.width-2*i.config.frameHandleThickness,a.configure(t),a.render()}),a.render()},r=t.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs),s="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";r.enter().append("div").classed("rickshaw_range_slider_preview_container",!0).style("-webkit-transform",s).style("-moz-transform",s).style("-ms-transform",s).style("transform",s).each(n),r.exit().remove();var a=this.graphs[0],o=t.scale.linear().domain([0,this.previewWidth]).range(a.dataDomain()),l=[a.window.xMin,a.window.xMax];this.currentFrame[0]=void 0===l[0]?0:Math.round(o.invert(l[0])),this.currentFrame[0]<0&&(this.currentFrame[0]=0),this.currentFrame[1]=void 0===l[1]?this.previewWidth:o.invert(l[1]),this.currentFrame[1]-this.currentFrame[0]<i.config.minimumFrameWidth&&(this.currentFrame[1]=(this.currentFrame[0]||0)+i.config.minimumFrameWidth),this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",!0).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0),this._renderDimming(),this._renderFrame(),this._renderGrippers(),this._renderHandles(),this._renderMiddle(),this._registerMouseEvents()},_renderDimming:function(){var t=this.svg.selectAll("path.dimming").data([null]);t.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",!0);var e="";e+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness,e+=" h "+this.previewWidth,e+=" v "+this.previewHeight,e+=" h "+-this.previewWidth,e+=" z ",e+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+Math.min(this.currentFrame[1]+2*this.config.frameHandleThickness,this.previewWidth+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderFrame:function(){var t=this.svg.selectAll("path.frame").data([null]);t.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",!0);var e="";e+=" M "+this.currentFrame[0]+" 0",e+=" H "+(this.currentFrame[1]+2*this.config.frameHandleThickness),e+=" V "+this.config.height,e+=" H "+this.currentFrame[0],e+=" z",e+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderGrippers:function(){var t=this.svg.selectAll("path.gripper").data([null]);t.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",!0);var e="";[.4,.6].forEach(function(t){e+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*t)+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height),e+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+t))+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height)}.bind(this)),t.attr("d",e)},_renderHandles:function(){var t=this.svg.selectAll("rect.left_handle").data([null]);t.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",!0),t.attr("x",this.currentFrame[0]).attr("height",this.config.height);var e=this.svg.selectAll("rect.right_handle").data([null]);e.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",!0),e.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var t=this.svg.selectAll("rect.middle_handle").data([null]);t.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",!0),t.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){function e(){l.stop=h._getClientXFromEvent(t.event,l);var e=l.stop-l.start,i=h.frameBeforeDrag.slice(0),n=h.config.minimumFrameWidth;l.rigid&&(n=h.frameBeforeDrag[1]-h.frameBeforeDrag[0]),l.left&&(i[0]=Math.max(i[0]+e,0)),l.right&&(i[1]=Math.min(i[1]+e,h.previewWidth));var r=i[1]-i[0];n>=r&&(l.left&&(i[0]=i[1]-n),l.right&&(i[1]=i[0]+n),i[0]<=0&&(i[1]-=i[0],i[0]=0),i[1]>=h.previewWidth&&(i[0]-=i[1]-h.previewWidth,i[1]=h.previewWidth)),h.graphs.forEach(function(e){var n=t.scale.linear().interpolate(t.interpolateNumber).domain([0,h.previewWidth]).range(e.dataDomain()),r=[n(i[0]),n(i[1])];h.slideCallbacks.forEach(function(t){t(e,r[0],r[1])}),0===i[0]&&(r[0]=void 0),i[1]===h.previewWidth&&(r[1]=void 0),e.window.xMin=r[0],e.window.xMax=r[1],e.update()})}function i(){l.target=t.event.target,l.start=h._getClientXFromEvent(t.event,l),h.frameBeforeDrag=h.currentFrame.slice(),t.event.preventDefault?t.event.preventDefault():t.event.returnValue=!1,t.select(document).on("mousemove.rickshaw_range_slider_preview",e),t.select(document).on("mouseup.rickshaw_range_slider_preview",a),t.select(document).on("touchmove.rickshaw_range_slider_preview",e),t.select(document).on("touchend.rickshaw_range_slider_preview",a),t.select(document).on("touchcancel.rickshaw_range_slider_preview",a)}function n(){l.left=!0,i()}function r(){l.right=!0,i()}function s(){l.left=!0,l.right=!0,l.rigid=!0,i()}function a(){t.select(document).on("mousemove.rickshaw_range_slider_preview",null),t.select(document).on("mouseup.rickshaw_range_slider_preview",null),t.select(document).on("touchmove.rickshaw_range_slider_preview",null),t.select(document).on("touchend.rickshaw_range_slider_preview",null),t.select(document).on("touchcancel.rickshaw_range_slider_preview",null),delete h.frameBeforeDrag,l.left=!1,l.right=!1,l.rigid=!1}var o=t.select(this.element),l={target:null,start:null,stop:null,left:!1,right:!1,rigid:!1},h=this;o.select("rect.left_handle").on("mousedown",n),o.select("rect.right_handle").on("mousedown",r),o.select("rect.middle_handle").on("mousedown",s),o.select("rect.left_handle").on("touchstart",n),o.select("rect.right_handle").on("touchstart",r),o.select("rect.middle_handle").on("touchstart",s)},_getClientXFromEvent:function(t,e){switch(t.type){case"touchstart":case"touchmove":for(var i=t.changedTouches,n=null,r=0;r<i.length;r++)if(i[r].target===e.target){n=i[r];break}return null!==n?n.clientX:void 0;default:return t.clientX}}}),e.namespace("Rickshaw.Graph.Renderer"),e.Graph.Renderer=e.Class.create({initialize:function(t){this.graph=t.graph,this.tension=t.tension||this.tension,this.configure(t)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(t){var e=t||this.graph.stackedData||this.graph.stackData(),i=+(1/0),n=-(1/0),r=+(1/0),s=-(1/0);return e.forEach(function(t){t.forEach(function(t){if(null!=t.y){var e=t.y+t.y0;r>e&&(r=e),e>s&&(s=e)}}),t.length&&(t[0].x<i&&(i=t[0].x),t[t.length-1].x>n&&(n=t[t.length-1].x))}),i-=(n-i)*this.padding.left,n+=(n-i)*this.padding.right,r="auto"===this.graph.min?r:this.graph.min||0,s=void 0===this.graph.max?s:this.graph.max,("auto"===this.graph.min||0>r)&&(r-=(s-r)*this.padding.bottom),void 0===this.graph.max&&(s+=(s-r)*this.padding.top),{x:[i,n],y:[r,s]}},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis;n.selectAll("*").remove();var r=i.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),s=n.selectAll("path.path").data(r).enter().append("svg:path").classed("path",!0).attr("d",this.seriesPathFactory());if(this.stroke)var a=n.selectAll("path.stroke").data(r).enter().append("svg:path").classed("stroke",!0).attr("d",this.seriesStrokeFactory());var o=0;i.forEach(function(t){t.disabled||(t.path=s[0][o],this.stroke&&(t.stroke=a[0][o]),this._styleSeries(t),o++)},this)},_styleSeries:function(e){var i=this.fill?e.color:"none",n=this.stroke?e.color:"none";e.path.setAttribute("fill",i),e.path.setAttribute("stroke",n),e.path.setAttribute("stroke-width",this.strokeWidth),e.className&&t.select(e.path).classed(e.className,!0),e.className&&this.stroke&&t.select(e.stroke).classed(e.className,!0)},configure:function(t){t=t||{},e.keys(this.defaults()).forEach(function(i){return t.hasOwnProperty(i)?void("object"==typeof this.defaults()[i]?e.keys(this.defaults()[i]).forEach(function(e){this[i][e]=void 0!==t[i][e]?t[i][e]:void 0!==this[i][e]?this[i][e]:this.defaults()[i][e]},this):this[i]=void 0!==t[i]?t[i]:void 0!==this[i]?this[i]:void 0!==this.graph[i]?this.graph[i]:this.defaults()[i]):void(this[i]=this[i]||this.graph[i]||this.defaults()[i])},this)},setStrokeWidth:function(t){void 0!==t&&(this.strokeWidth=t)},setTension:function(t){void 0!==t&&(this.tension=t)}}),e.namespace("Rickshaw.Graph.Renderer.Line"),e.Graph.Renderer.Line=e.Class.create(e.Graph.Renderer,{name:"line",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var e=this.graph,i=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i}}),e.namespace("Rickshaw.Graph.Renderer.Stack"),e.Graph.Renderer.Stack=e.Class.create(e.Graph.Renderer,{name:"stack",defaults:function($super){return e.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var e=this.graph,i=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i}}),e.namespace("Rickshaw.Graph.Renderer.Bar"),e.Graph.Renderer.Bar=e.Class.create(e.Graph.Renderer,{name:"bar",defaults:function($super){var t=e.extend($super(),{gapSize:.05,unstack:!1});return delete t.tension,t},initialize:function($super,t){t=t||{},this.gapSize=t.gapSize||this.gapSize,$super(t)},domain:function($super){var t=$super(),e=this._frequentInterval(this.graph.stackedData.slice(-1).shift());return t.x[1]+=Number(e.magnitude),t},barWidth:function(t){var e=this._frequentInterval(t.stack),i=this.graph.x.magnitude(e.magnitude)*(1-this.gapSize);return i},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis;n.selectAll("*").remove();var r=this.barWidth(i.active()[0]),s=0,a=i.filter(function(t){return!t.disabled}).length,o=this.unstack?r/a:r,l=function(t){var i=[1,0,0,t.y<0?-1:1,0,t.y<0?2*e.y.magnitude(Math.abs(t.y)):0];return"matrix("+i.join(",")+")"};i.forEach(function(t){if(!t.disabled){var i=(this.barWidth(t),n.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:rect").attr("x",function(t){return e.x(t.x)+s}).attr("y",function(t){return e.y(t.y0+Math.abs(t.y))*(t.y<0?-1:1)}).attr("width",o).attr("height",function(t){return e.y.magnitude(Math.abs(t.y))}).attr("transform",l));Array.prototype.forEach.call(i[0],function(e){e.setAttribute("fill",t.color)}),this.unstack&&(s+=o)}},this)},_frequentInterval:function(t){for(var i={},n=0;n<t.length-1;n++){var r=t[n+1].x-t[n].x;i[r]=i[r]||0,i[r]++}var s={count:0,magnitude:1};return e.keys(i).forEach(function(t){s.count<i[t]&&(s={count:i[t],magnitude:t})}),s}}),e.namespace("Rickshaw.Graph.Renderer.Area"),e.Graph.Renderer.Area=e.Class.create(e.Graph.Renderer,{name:"area",defaults:function($super){return e.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var e=this.graph,i=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i},seriesStrokeFactory:function(){var e=this.graph,i=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis;n.selectAll("*").remove();var r=this.unstack?"append":"insert",s=i.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=n.selectAll("path").data(s).enter()[r]("svg:g","g");a.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&a.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var o=0;i.forEach(function(t){t.disabled||(t.path=a[0][o++],this._styleSeries(t))},this)},_styleSeries:function(e){e.path&&(t.select(e.path).select(".area").attr("fill",e.color),this.stroke&&t.select(e.path).select(".line").attr("fill","none").attr("stroke",e.stroke||t.interpolateRgb(e.color,"black")(.125)).attr("stroke-width",this.strokeWidth),e.className&&e.path.setAttribute("class",e.className));
}}),e.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),e.Graph.Renderer.ScatterPlot=e.Class.create(e.Graph.Renderer,{name:"scatterplot",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,t){$super(t)},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis,r=this.dotSize;n.selectAll("*").remove(),i.forEach(function(t){if(!t.disabled){var i=n.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:r});t.className&&i.classed(t.className,!0),Array.prototype.forEach.call(i[0],function(e){e.setAttribute("fill",t.color)})}},this)}}),e.namespace("Rickshaw.Graph.Renderer.Multi"),e.Graph.Renderer.Multi=e.Class.create(e.Graph.Renderer,{name:"multi",initialize:function($super,t){$super(t)},defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0})},configure:function($super,t){t=t||{},this.config=t,$super(t)},domain:function($super){this.graph.stackData();var e=[],i=this._groups();this._stack(i),i.forEach(function(t){var i=t.series.filter(function(t){return!t.disabled}).map(function(t){return t.stack});if(i.length){var n=null;n=t.renderer&&t.renderer.domain?t.renderer.domain(i):$super(i),e.push(n)}});var n=t.min(e.map(function(t){return t.x[0]})),r=t.max(e.map(function(t){return t.x[1]})),s=t.min(e.map(function(t){return t.y[0]})),a=t.max(e.map(function(t){return t.y[1]}));return{x:[n,r],y:[s,a]}},_groups:function(){var i=this.graph,n={};i.series.forEach(function(r){if(!r.disabled){if(!n[r.renderer]){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"g");i.vis[0][0].appendChild(a);var o=i._renderers[r.renderer],l={},h=[this.defaults(),o.defaults(),this.config,this.graph];h.forEach(function(t){e.extend(l,t)}),o.configure(l),n[r.renderer]={renderer:o,series:[],vis:t.select(a)}}n[r.renderer].series.push(r)}},this);var r=[];return Object.keys(n).forEach(function(t){var e=n[t];r.push(e)}),r},_stack:function(i){return i.forEach(function(i){var n=i.series.filter(function(t){return!t.disabled}),r=n.map(function(t){return t.stack});if(!i.renderer.unstack){var s=t.layout.stack(),a=e.clone(s(r));n.forEach(function(t,i){t._stack=e.clone(a[i])})}},this),i},render:function(){this.graph.series.forEach(function(t){if(!t.renderer)throw new Error("Each series needs a renderer for graph 'multi' renderer")}),this.graph.vis.selectAll("*").remove();var t=this._groups();t=this._stack(t),t.forEach(function(t){var e=t.series.filter(function(t){return!t.disabled});e.active=function(){return e},t.renderer.render({series:e,vis:t.vis}),e.forEach(function(t){t.stack=t._stack||t.stack||t.data})})}}),e.namespace("Rickshaw.Graph.Renderer.LinePlot"),e.Graph.Renderer.LinePlot=e.Class.create(e.Graph.Renderer,{name:"lineplot",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var e=this.graph,i=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis,r=this.dotSize;n.selectAll("*").remove();var s=i.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=n.selectAll("path").data(s).enter().append("svg:path").attr("d",this.seriesPathFactory()),o=0;i.forEach(function(t){t.disabled||(t.path=a[0][o++],this._styleSeries(t))},this),i.forEach(function(t){if(!t.disabled){var i=n.selectAll("x").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:r});Array.prototype.forEach.call(i[0],function(e){e&&(e.setAttribute("data-color",t.color),e.setAttribute("fill","white"),e.setAttribute("stroke",t.color),e.setAttribute("stroke-width",this.strokeWidth))}.bind(this))}},this)}}),e.namespace("Rickshaw.Graph.Smoother"),e.Graph.Smoother=e.Class.create({initialize:function(t){this.graph=t.graph,this.element=t.element,this.aggregationScale=1,this.build(),this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var t=this,e=jQuery;this.element&&e(function(){e(t.element).slider({min:1,max:100,slide:function(e,i){t.setScale(i.value),t.graph.update()}})})},setScale:function(t){if(1>t)throw"scale out of range: "+t;this.aggregationScale=t,this.graph.update()},transformer:function(t){if(1==this.aggregationScale)return t;var e=[];return t.forEach(function(t){for(var i=[];t.length;){var n=0,r=0,s=t.splice(0,this.aggregationScale);s.forEach(function(t){n+=t.x/s.length,r+=t.y/s.length}),i.push({x:n,y:r})}e.push(i)}.bind(this)),e}}),e.namespace("Rickshaw.Graph.Socketio"),e.Graph.Socketio=e.Class.create(e.Graph.Ajax,{request:function(){var t=io.connect(this.dataURL),e=this;t.on("rickshaw",function(t){e.success(t)})}}),e.namespace("Rickshaw.Series"),e.Series=e.Class.create(Array,{initialize:function(t,i,n){n=n||{},this.palette=new e.Color.Palette(i),this.timeBase="undefined"==typeof n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase;var r="undefined"==typeof n.timeInterval?1e3:n.timeInterval;this.setTimeInterval(r),t&&"object"==typeof t&&Array.isArray(t)&&t.forEach(function(t){this.addItem(t)},this)},addItem:function(t){if("undefined"==typeof t.name)throw"addItem() needs a name";t.color=t.color||this.palette.color(t.name),t.data=t.data||[],0===t.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach(function(e){t.data.push({x:e.x,y:0})}):0===t.data.length&&t.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},addData:function(t,i){var n=this.getIndex();e.keys(t).forEach(function(t){this.itemByName(t)||this.addItem({name:t})},this),this.forEach(function(e){e.data.push({x:i||(n*this.timeInterval||1)+this.timeBase,y:t[e.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return this[e]},setTimeInterval:function(t){this.timeInterval=t/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var t={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(e){var i={color:e.color,name:e.name,data:[]};e.data.forEach(function(t){i.data.push({x:t.x,y:t.y})}),t.items.push(i)}),t},load:function(t){t.timeInterval&&(this.timeInterval=t.timeInterval),t.timeBase&&(this.timeBase=t.timeBase),t.items&&t.items.forEach(function(t){this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},this)}}),e.Series.zeroFill=function(t){e.Series.fill(t,0)},e.Series.fill=function(t,e){for(var i,n=0,r=t.map(function(t){return t.data});n<Math.max.apply(null,r.map(function(t){return t.length}));)i=Math.min.apply(null,r.filter(function(t){return t[n]}).map(function(t){return t[n].x})),r.forEach(function(t){t[n]&&t[n].x==i||t.splice(n,0,{x:i,y:e})}),n++},e.namespace("Rickshaw.Series.FixedDuration"),e.Series.FixedDuration=e.Class.create(e.Series,{initialize:function(t,i,n){if(n=n||{},"undefined"==typeof n.timeInterval)throw new Error("FixedDuration series requires timeInterval");if("undefined"==typeof n.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new e.Color.Palette(i),this.timeBase="undefined"==typeof n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase,this.setTimeInterval(n.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=n.maxDataPoints,t&&"object"==typeof t&&Array.isArray(t)&&(t.forEach(function(t){this.addItem(t)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,"undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var r=this.maxDataPoints-this.currentSize-1;r>1;r--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(t){t.data.unshift({x:((r-1)*this.timeInterval||1)+this.timeBase,y:0,i:r})},this)},addData:function($super,t,e){if($super(t,e),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(t){t.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}}),e});